[
    "ptg Download from www.wowebook.comptgCUDA by Example Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptgCUDA by Example AN INTRODUCT ION TO GENER AL/hyphen.case P U R POSE GPU PRO GRAMMING JASON SANDERS EDWARD K ANDROT 8SSHU\u00036DGGOH\u00035LYHU\u000f\u00031-\u0003\u01e9\u0003%RVWRQ\u0003\u01e9\u0003,QGLDQDSROLV\u0003\u01e9\u00036DQ\u0003)UDQFLVFR 1HZ\u0003<RUN\u0003\u01e9\u00037RURQWR\u0003\u01e9\u00030RQWUHDO\u0003\u01e9\u0003/RQGRQ\u0003\u01e9\u00030XQLFK\u0003\u01e9\u00033DULV\u0003\u01e9\u00030DGULG &DSHWRZQ\u0003\u01e9\u00036\\GQH\\\u0003\u01e9\u00037RN\\R\u0003\u01e9\u00036LQJDSRUH\u0003\u01e9\u00030H[LFR\u0003&LW\\ Download from www.wowebook.comptg0DQ\\\u0003RI\u0003WKH\u0003GHVLJQDWLRQV\u0003XVHG\u0003E\\\u0003PDQXIDFWXUHUV\u0003DQG\u0003VHOOHUV\u0003WR\u0003GLVWLQJXLVK\u0003WKHLU\u0003SURGXFWV\u0003DUH\u0003 FODLPHG\u0003DV\u0003WUDGHPDUNV\u0011\u0003:KHUH\u0003WKRVH\u0003GHVLJQDWLRQV\u0003DSSHDU\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003DQG\u0003WKH\u0003SXEOLVKHU\u0003ZDV\u0003 DZDUH\u0003RI\u0003D\u0003WUDGHPDUN\u0003FODLP\u000f\u0003WKH\u0003GHVLJQDWLRQV\u0003KDYH\u0003EHHQ\u0003SULQWHG\u0003ZLWK\u0003LQLWLDO\u0003FDSLWDO\u0003OHWWHUV\u0003RU\u0003LQ\u0003DOO\u0003 FDSLWDOV\u0011 7KH\u0003DXWKRUV\u0003DQG\u0003SXEOLVKHU\u0003KDYH\u0003WDNHQ\u0003FDUH\u0003LQ\u0003WKH\u0003SUHSDUDWLRQ\u0003RI\u0003WKLV\u0003ERRN\u000f\u0003EXW\u0003PDNH\u0003QR\u0003H[SUHVVHG\u0003 RU\u0003LPSOLHG\u0003ZDUUDQW\\\u0003RI\u0003DQ\\\u0003NLQG\u0003DQG\u0003DVVXPH\u0003QR\u0003UHVSRQVLELOLW\\\u0003IRU\u0003HUURUV\u0003RU\u0003RPLVVLRQV\u0011\u00031R\u0003OLDELOLW\\\u0003LV\u0003 DVVXPHG\u0003IRU\u0003LQFLGHQWDO\u0003RU\u0003FRQVHTXHQWLDO\u0003GDPDJHV\u0003LQ\u0003FRQQHFWLRQ\u0003ZLWK\u0003RU\u0003DULVLQJ\u0003RXW\u0003RI\u0003WKH\u0003XVH\u0003RI\u0003WKH\u0003 LQIRUPDWLRQ\u0003RU\u0003SURJUDPV\u0003FRQWDLQHG\u0003KHUHLQ\u0011 19,',$\u0003PDNHV\u0003QR\u0003ZDUUDQW\\\u0003RU\u0003UHSUHVHQWDWLRQ\u0003WKDW\u0003WKH\u0003WHFKQLTXHV\u0003GHVFULEHG\u0003KHUHLQ\u0003DUH\u0003IUHH\u0003IURP\u0003 DQ\\\u0003,QWHOOHFWXDO\u00033URSHUW\\\u0003FODLPV\u0011\u00037KH\u0003UHDGHU\u0003DVVXPHV\u0003DOO\u0003ULVN\u0003RI\u0003DQ\\\u0003VXFK\u0003FODLPV\u0003EDVHG\u0003RQ\u0003KLV\u0003RU\u0003 KHU\u0003XVH\u0003RI\u0003WKHVH\u0003WHFKQLTXHV\u0011 7KH\u0003SXEOLVKHU\u0003RIIHUV\u0003H[FHOOHQW\u0003GLVFRXQWV\u0003RQ\u0003WKLV\u0003ERRN\u0003ZKHQ\u0003RUGHUHG\u0003LQ\u0003TXDQWLW\\\u0003IRU\u0003EXON\u0003SXUFKDVHV\u0003 RU\u0003VSHFLDO\u0003VDOHV\u000f\u0003ZKLFK\u0003PD\\\u0003LQFOXGH\u0003HOHFWURQLF\u0003YHUVLRQV\u0003DQG\u0012RU\u0003FXVWRP\u0003FRYHUV\u0003DQG\u0003FRQWHQW\u0003 SDUWLFXODU\u0003WR\u0003\\RXU\u0003EXVLQHVV\u000f\u0003WUDLQLQJ\u0003JRDOV\u000f\u0003PDUNHWLQJ\u0003IRFXV\u000f\u0003DQG\u0003EUDQGLQJ\u0003LQWHUHVWV\u0011\u0003)RU\u0003PRUH\u0003 LQIRUPDWLRQ\u000f\u0003SOHDVH\u0003FRQWDFW 8\u00116\u0011\u0003&RUSRUDWH\u0003DQG\u0003*RYHUQPHQW\u00036DOHV (800) 382-3419 FRUSVDOHV#SHDUVRQWHFKJURXS\u0011FRP )RU\u0003VDOHV\u0003RXWVLGH\u0003WKH\u00038QLWHG\u00036WDWHV\u000f\u0003SOHDVH\u0003FRQWDFW ,QWHUQDWLRQDO\u00036DOHV LQWHUQDWLRQDO#SHDUVRQ\u0011FRP 9LVLW\u0003XV\u0003RQ\u0003WKH\u0003:HE \u0003LQIRUPLW\u0011FRP\u0012DZ Library of Congress Cataloging-in-Publication Data 6DQGHUV\u000f\u0003-DVRQ\u0011 \u0003\u0003&8'$\u0003E\\\u0003H[DPSOH\u0003 \u0003DQ\u0003LQWURGXFWLRQ\u0003WR\u0003JHQHUDO\u0010SXUSRVH\u0003*38\u0003SURJUDPPLQJ\u0003\u0012 -DVRQ\u00036DQGHUV\u000f\u0003(GZDUG\u0003.DQGURW\u0011 \u0003\u0003\u0003\u0003\u0003\u0003\u0003S\u0011\u0003FP\u0011 \u0003\u0003,QFOXGHV\u0003LQGH[\u0011 \u0003\u0003,6%1\u0003 \u001a\u001b\u0010\u0013\u0010\u0014\u0016\u0010\u0014\u0016\u001b\u001a\u0019\u001b\u0010\u0016\u0003 SEN\u0011\u0003 \u0003DON\u0011\u0003SDSHU \u0003\u0014\u0011\u0003\u0003$SSOLFDWLRQ\u0003VRIWZDUH\u01df'HYHORSPHQW\u0011\u0003\u0015\u0011\u0003\u0003&RPSXWHU\u0003DUFKLWHFWXUH\u0011\u0003\u0016\u0011 3DUDOOHO\u0003SURJUDPPLQJ\u0003 &RPSXWHU\u0003VFLHQFH \u0003\u0003,\u0011\u0003.DQGURW\u000f\u0003(GZDUG\u0011\u0003,,\u0011\u00037LWOH\u0011\u0003 \u0003\u00034$\u001a\u0019\u0011\u001a\u0019\u0011$\u0019\u00186\u0015\u0018\u0018\u0003\u0015\u0013\u0014\u0013 \u0003\u0003\u0013\u0013\u0018\u0011\u0015 \u001a\u0018\u01dfGF\u0015\u0015 \u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0015\u0013\u0014\u0013\u0013\u0014\u001a\u0019\u0014\u001b &RS\\ULJKW\u0003k\u0003\u0015\u0013\u0014\u0014\u000319,',$\u0003&RUSRUDWLRQ $OO\u0003ULJKWV\u0003UHVHUYHG\u0011\u00033ULQWHG\u0003LQ\u0003WKH\u00038QLWHG\u00036WDWHV\u0003RI\u0003$PHULFD\u0011\u00037KLV\u0003SXEOLFDWLRQ\u0003LV\u0003SURWHFWHG\u0003E\\\u0003FRS\\ - ULJKW\u000f\u0003DQG\u0003SHUPLVVLRQ\u0003PXVW\u0003EH\u0003REWDLQHG\u0003IURP\u0003WKH\u0003SXEOLVKHU\u0003SULRU\u0003WR\u0003DQ\\\u0003SURKLELWHG\u0003UHSURGXFWLRQ\u000f\u0003 VWRUDJH\u0003LQ\u0003D\u0003UHWULHYDO\u0003V\\VWHP\u000f\u0003RU\u0003WUDQVPLVVLRQ\u0003LQ\u0003DQ\\\u0003IRUP\u0003RU\u0003E\\\u0003DQ\\\u0003PHDQV\u000f\u0003HOHFWURQLF\u000f\u0003PHFKDQLFDO\u000f\u0003 SKRWRFRS\\LQJ\u000f\u0003UHFRUGLQJ\u000f\u0003RU\u0003OLNHZLVH\u0011\u0003)RU\u0003LQIRUPDWLRQ\u0003UHJDUGLQJ\u0003SHUPLVVLRQV\u000f\u0003ZULWH\u0003WR 3HDUVRQ\u0003(GXFDWLRQ\u000f\u0003,QF\u0011 5LJKWV\u0003DQG\u0003&RQWUDFWV\u0003'HSDUWPHQW \u0018\u0013\u0014\u0003%R\\OVWRQ\u00036WUHHW\u000f\u00036XLWH\u0003 \u0013\u0013 %RVWRQ\u000f\u00030$\u0003\u0013\u0015\u0014\u0014\u0019 )D[ \u0003 \u0019\u0014\u001a \u0003\u0019\u001a\u0014\u0010\u0016\u0017\u0017\u001a ,6%1\u0010\u0014\u0016 \u0003 \u001a\u001b\u0010\u0013\u0010\u0014\u0016\u0010\u0014\u0016\u001b\u001a\u0019\u001b\u0010\u0016 ,6%1\u0010\u0014\u0013 \u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0003\u0013\u0010\u0014\u0016\u0010\u0014\u0016\u001b\u001a\u0019\u001b\u0010\u0018 7H[W\u0003SULQWHG\u0003LQ\u0003WKH\u00038QLWHG\u00036WDWHV\u0003RQ\u0003UHF\\FOHG\u0003SDSHU\u0003DW\u0003(GZDUGV\u0003%URWKHUV\u0003LQ\u0003$QQ\u0003$UERU\u000f\u00030LFKLJDQ\u0011 )LUVW\u0003SULQWLQJ\u000f\u0003-XO\\\u0003\u0015\u0013\u0014\u0013 Download from www.wowebook.comptgTo our families and friends, who gave us endless support. To our readers, who will bring us the future. And to the teachers who taught our readers to read. Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg vii)RUHZRUG\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003[LLL\u0003 3UHIDFH\u0003\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003\u0003[Y\u0003 $FNQRZOHGJPHQWV \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003[YLL\u0003 $ERXW\u0003WKH\u0003$XWKRUV\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003[L[ 1 WHY CUDA? WHY NO W? 1 \u0014\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 2 \u0014\u0011\u00157KH\u0003$JH\u0003RI\u00033DUDOOHO\u00033URFHVVLQJ\u0003\u0003\u0011\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011\u0003\u0003\u0011 2 \u0014\u0011\u0015\u0011\u0014\u0003&HQWUDO\u00033URFHVVLQJ\u00038QLWV\u0003 \u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 2 \u0014\u0011\u00167KH\u00035LVH\u0003RI\u0003*38\u0003&RPSXWLQJ\u0003 \u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 4 \u0014\u0011\u0016\u0011\u0014\u0003$\u0003%ULHI\u0003+LVWRU\\\u0003RI\u0003*38V \u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 4 \u0014\u0011\u0016\u0011\u0015\u0003(DUO\\\u0003*38\u0003&RPSXWLQJ\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 \u0018 \u0014\u0011\u0017&8'$\u0003\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 \u0019 \u0014\u0011\u0017\u0011\u0014\u0003:KDW\u0003,V\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\"\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 \u001a \u0014\u0011\u0017\u0011\u0015\u00038VLQJ\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 \u001a \u0014\u0011\u0018$SSOLFDWLRQV\u0003RI\u0003&8'$\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 8 \u0014\u0011\u0018\u0011\u00140HGLFDO\u0003,PDJLQJ\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 8 \u0014\u0011\u0018\u0011\u0015&RPSXWDWLRQDO\u0003)OXLG\u0003'\\QDPLFV\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 9 \u0014\u0011\u0018\u0011\u0016(QYLURQPHQWDO\u00036FLHQFH\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u000310 \u0014\u0011\u0019&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u001111Contents Download from www.wowebook.comptg viii CONTENTS2 GETTI NG STARTE D 13 \u0015\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 14 \u0015\u0011\u0015'HYHORSPHQW\u0003(QYLURQPHQW\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 14 \u0015\u0011\u0015\u0011\u0014&8'$\u0010(QDEOHG\u0003*UDSKLFV\u00033URFHVVRUV \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 14 \u0015\u0011\u0015\u0011\u001519,',$\u0003'HYLFH\u0003'ULYHU\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 1\u0019 \u0015\u0011\u0015\u0011\u0016&8'$\u0003'HYHORSPHQW\u00037RRONLW\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 1\u0019 \u0015\u0011\u0015\u0011\u00176WDQGDUG\u0003&\u0003&RPSLOH r \u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 18 \u0015\u0011\u0016&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 19 3 INTRO DUCTION TO CUDA C 21 \u0016\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 22 \u0016\u0011\u0015$\u0003)LUVW\u00033URJUDP\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 22 \u0016\u0011\u0015\u0011\u0014+HOOR\u000f\u0003:RUOG ! \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 22 \u0016\u0011\u0015\u0011\u0015$\u0003.HUQHO\u0003&DOO\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 23 \u0016\u0011\u0015\u0011\u00163DVVLQJ\u00033DUDPHWHUV\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 24 \u0016\u0011\u00164XHU\\LQJ\u0003'HYLFHV \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 2\u001a \u0016\u0011\u00178VLQJ\u0003'HYLFH\u00033URSHUWLHV\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 33 \u0016\u0011\u0018&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 3\u0018 4 PARALLEL PRO GRAMMI NG IN CUDA C 37 \u0017\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 38 \u0017\u0011\u0015&8'$\u00033DUDOOHO\u00033URJUDPPLQJ\u0003 \u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 38 \u0017\u0011\u0015\u0011\u0014\u00036XPPLQJ\u00039HFWRUV\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 38 \u0017\u0011\u0015\u0011\u0015\u0003$\u0003)XQ\u0003([DPSOH\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 4\u0019 \u0017\u0011\u0016&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0018\u001a Download from www.wowebook.comptg CONTENTS L[5 THRE AD COO PERATION 59 \u0018\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0003\u00190 \u0018\u0011\u00156SOLWWLQJ\u00033DUDOOHO\u0003%ORFNV\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u00190 \u0018\u0011\u0015\u0011\u0014\u00039HFWRU\u00036XPV \u00035HGX[\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u00190 \u0018\u0011\u0015\u0011\u0015\u0003*38\u00035LSSOH\u00038VLQJ\u00037KUHDGV\u0003 \u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0003\u00199 \u0018\u0011\u00166KDUHG\u00030HPRU\\\u0003DQG\u00036\\QFKURQL]DWLRQ\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0003\u001a\u0018 \u0018\u0011\u0016\u0011\u0014'RW\u00033URGXFW\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003\u0003\u001a\u0019 \u0018\u0011\u0016\u0011\u0014'RW\u00033URGXFW\u00032SWLPL]HG\u0003 ,QFRUUHFWO\\ \u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 8\u001a \u0018\u0011\u0016\u0011\u00156KDUHG\u00030HPRU\\\u0003%LWPDS\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 90 \u0018\u0011\u0017&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 94 6 CONSTANT MEMORY AND EVENTS 95 \u0019\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 9\u0019 \u0019\u0011\u0015&RQVWDQW\u00030HPRU\\\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 9\u0019 \u0019\u0011\u0015\u0011\u00145D\\\u00037UDFLQJ\u0003,QWURGXFWLRQ\u0003 \u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 9\u0019 \u0019\u0011\u0015\u0011\u00155D\\\u00037UDFLQJ\u0003RQ\u0003WKH\u0003*38\u0003 \u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 98 \u0019\u0011\u0015\u0011\u00165D\\\u00037UDFLQJ\u0003ZLWK\u0003&RQVWDQW\u00030HPRU\\\u0003 \u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 104 \u0019\u0011\u0015\u0011\u00173HUIRUPDQFH\u0003ZLWK\u0003&RQVWDQW\u00030HPRU\\\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 10\u0019 \u0019\u0011\u00160HDVXULQJ\u00033HUIRUPDQFH\u0003ZLWK\u0003(YHQWV \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 108 \u0019\u0011\u0016\u0011\u0014\u00030HDVXULQJ\u00035D\\\u00037UDFHU\u00033HUIRUPDQFH\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 110 \u0019\u0011\u0017&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 114 7 TEXT URE MEMORY 115 \u001a\u0011\u0014\u0003&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 11\u0019 \u001a\u0011\u0015\u00037H[WXUH\u00030HPRU\\\u00032YHUYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 11\u0019 Download from www.wowebook.comptgCONTENTS x7.3 Simulating Heat Transfer . . . . . . . . . . . . . . . . . . . . . . . . 117 7.3.1 Simple Heating Model . . . . . . .................. 117 7.3.2 Computing Temperature Updates ................. 119 7.3.3 Animating the Simulation . . . . .................. 121 7.3.4 Using Texture Memory . . . . . . .................. 125 7.3.5 Using Two-Dimensional Texture Memory ............. 131 7.4 Chapter Review . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137 8 GRAPHICS INTEROPERABILITY 139 8.1 Chapter Objectives . . . . . . . . . . .",
    "Review . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137 8 GRAPHICS INTEROPERABILITY 139 8.1 Chapter Objectives . . . . . . . . . . . . . ............... 140 8.2 Graphics Interoperation . . . . . . . . . . ............... 140 8.3 GPU Ripple with Graphics Interoperability .............. 147 8.3.1 The GPUAnimBitmap Structure . . . . . . . . . . . . . . . . . . 148 8.3.2 GPU Ripple Redux . . . . . . .. . . . . . . . . . . . . . . . . . . 152 8.4 Heat Transfer with Graphics Interop .................. 154 8.5 DirectX Interoperability . . . . . . ................... 160 8.6 Chapter Review . . . . . . . . . . . ................... 161 9 ATOMICS 163 9.1Chapter Objectives . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164 9.2 Compute Capability . . . . . . . . . . . . . . . . . . . . . . . . . . . 164 9.2.1 The Compute Capability of NVIDIA GPUs . . . . . . . . . . . . . 164 9.2.2 Compiling for a Minimum Compute Capability . . . . . . . . . . 167 9.3 Atomic Operations Overview . . ... . . . . . . . . . . . . . . . . . 168 9.4 Computing Histograms . . . . . ... . . . . . . . . . . . . . . . . . 170 9.4.1 CPU Histogram Computation .. . . . . . . . . . . . . . . . . . . 171 9.4.2 GPU Histogram Computation .. . . . . . . . . . . . . . . . . . . 173 9.5 Chapter Review . . . . . . . . . . ... . . . . . . . . . . . . . . . . . 183 Download from www.wowebook.comptg CONTENTS [L10 STRE AMS 185 \u0014\u0013\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 18\u0019 \u0014\u0013\u0011\u00153DJH\u0010/RFNHG\u0003+RVW\u00030HPRU\\\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 18\u0019 \u0014\u0013\u0011\u0016&8'$\u00036WUHDPV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 192 \u0014\u0013\u0011\u00178VLQJ\u0003D\u00036LQJOH\u0003&8'$\u00036WUHDP\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 192 \u0014\u0013\u0011\u00188VLQJ\u00030XOWLSOH\u0003&8'$\u00036WUHDPV\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 198 \u0014\u0013\u0011\u0019*38\u0003:RUN\u00036FKHGXOLQJ\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 20\u0018 \u0014\u0013\u0011\u001a8VLQJ\u00030XOWLSOH\u0003&8'$\u00036WUHDPV\u0003(IIHFWLYHO\\\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 208 \u0014\u0013\u0011\u001b&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 211 11 CUDA C O N MULTIPLE GPU S 213 \u0014\u0014\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 214 \u0014\u0014\u0011\u0015=HUR\u0010&RS\\\u0003+RVW\u00030HPRU\\ \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 214 \u0014\u0014\u0011\u0015\u0011\u0014\u0003 =HUR\u0010&RS\\\u0003'RW\u00033URGXFW \u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003214 \u0014\u0014\u0011\u0015\u0011\u0015\u0003\u0003=HUR\u0010&RS\\\u00033HUIRUPDQFH\u0003 \u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 222 \u0014\u0014\u0011\u00168VLQJ\u00030XOWLSOH\u0003*38V\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 224 \u0014\u0014\u0011\u00173RUWDEOH\u00033LQQHG\u00030HPRU\\\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 230 \u0014\u0014\u0011\u0018&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 23\u0018 12 THE FI NAL CO UNTDOWN 237 \u0014\u0015\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 238 \u0014\u0015\u0011\u0015&8'$\u00037RROV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 238 \u0014\u0015\u0011\u0015\u0011\u0014\u0003&8'$\u00037RRONLW \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 238 \u0014\u0015\u0011\u0015\u0011\u0015\u0003&8))7\u0003\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 239 \u0014\u0015\u0011\u0015\u0011\u0016\u0003&8%/$6\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 239 \u0014\u0015\u0011\u0015\u0011\u0017\u000319,',$\u0003*38\u0003&RPSXWLQJ\u00036'.\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 240 Download from www.wowebook.comptgCONTENTS xii12.2.5 NVIDIA Performance Primitives ................. 241 12.2.6 Debugging CUDA C",
    "\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003214 \u0014\u0014\u0011\u0015\u0011\u0015\u0003\u0003=HUR\u0010&RS\\\u00033HUIRUPDQFH\u0003 \u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003 222 \u0014\u0014\u0011\u00168VLQJ\u00030XOWLSOH\u0003*38V\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 224 \u0014\u0014\u0011\u00173RUWDEOH\u00033LQQHG\u00030HPRU\\\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 230 \u0014\u0014\u0011\u0018&KDSWHU\u00035HYLHZ\u0003 \u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 23\u0018 12 THE FI NAL CO UNTDOWN 237 \u0014\u0015\u0011\u0014&KDSWHU\u00032EMHFWLYHV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 238 \u0014\u0015\u0011\u0015&8'$\u00037RROV\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011 238 \u0014\u0015\u0011\u0015\u0011\u0014\u0003&8'$\u00037RRONLW \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011 238 \u0014\u0015\u0011\u0015\u0011\u0015\u0003&8))7\u0003\u0003\u0011\u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 239 \u0014\u0015\u0011\u0015\u0011\u0016\u0003&8%/$6\u0003 \u0003\u0011\u0003\u0011\u0003\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 239 \u0014\u0015\u0011\u0015\u0011\u0017\u000319,',$\u0003*38\u0003&RPSXWLQJ\u00036'.\u0003 \u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0011\u0003 240 Download from www.wowebook.comptgCONTENTS xii12.2.5 NVIDIA Performance Primitives ................. 241 12.2.6 Debugging CUDA C . . . . ... .................. 241 12.2.7 CUDA Visual Pro\ufb01ler . . . ... .................. 2 43 12.3 Written Resources . . . . . . . . ... . . . . . . . . . . . . . . . . . 244 12.3.1 Programming Massively Parallel Processors: A Hands- On Approach ....................... 2 44 12.3.2 CUDA U . . . . . . . . . ....................... 245 12.3.3 NVIDIA Forums . . . . ....................... 2 46 12.4 Code Resources . . . . . . . . .... . . . . . . . . . . . . . . . . . 246 12.4.1 CUDA Data Parallel Primitives Library ............. 247 12.4.2 CULAtools . . . . . . . . .... . . . . .............. 247 12.4.3 Language Wrappers . . .... . . . . .............. 247 12.5 Chapter Review . . . . . . . . . .... . . . . . . . . . . . . . . . . . 248 A ADV ANCED ATOMICS 249 A.1 Dot Product Revisited . . . . . . . . . . . . . . . . . . . . . . . . . . 250 A.1.1 Atomic Locks . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251 A.1.2 Dot Product Redux: Atomic Locks . . . . . . . . . . . . . . . . 2 54 A.2 Implementing a Hash Table . . .... . . . . . . . . . . . . . . . . . 258 A.2.1 Hash Table Overview . . .... . . . . . . . . . . . . . . . . . . 259 A.2.2 A CPU Hash Table . . . . .... . . . . . . . . . . . . . . . . . . 261 A.2.3 Multithreaded Hash Table ... . . . . . . . . . . . . . . . . . . 267 A.2.4 A GPU Hash Table . . . . .... . . . . . . . . . . . . . . . . . . 268 A.2.5 Hash Table Performance ... . . . . . . . . . . . . . . . . . . 276 A.3 Appendix Review . . . . . . . . .... . . . . . .",
    ". . . . . . . 268 A.2.5 Hash Table Performance ... . . . . . . . . . . . . . . . . . . 276 A.3 Appendix Review . . . . . . . . .... . . . . . . . . . . . . . . . . . 277 Index . . . . . . . . . . . . . . . .... . . . . . . . . . . . . . . . . . . 2 7 9 Download from www.wowebook.comptg [LLLForeword 5HFHQW\u0003DFWLYLWLHV\u0003RI\u0003PDMRU\u0003FKLS\u0003PDQXIDFWXUHUV\u0003VXFK\u0003DV\u000319,',$\u0003PDNH\u0003LW\u0003PRUH\u0003 HYLGHQW\u0003WKDQ\u0003HYHU\u0003WKDW\u0003IXWXUH\u0003GHVLJQV\u0003RI\u0003PLFURSURFHVVRUV\u0003DQG\u0003ODUJH\u0003+3&\u0003 V\\VWHPV\u0003ZLOO\u0003EH\u0003K\\EULG\u0012KHWHURJHQHRXV\u0003LQ\u0003QDWXUH\u0011\u00037KHVH\u0003KHWHURJHQHRXV\u0003V\\VWHPV\u0003 ZLOO\u0003UHO\\\u0003RQ\u0003WKH\u0003LQWHJUDWLRQ\u0003RI\u0003WZR\u0003PDMRU\u0003W\\SHV\u0003RI\u0003FRPSRQHQWV\u0003LQ\u0003YDU\\LQJ\u0003 SURSRUWLRQV \u0003 Multi- and many-core CPU technology \u01e9\u0003 \u00037KH\u0003QXPEHU\u0003RI\u0003FRUHV\u0003ZLOO\u0003FRQWLQXH\u0003WR\u0003 HVFDODWH\u0003EHFDXVH\u0003RI\u0003WKH\u0003GHVLUH\u0003WR\u0003SDFN\u0003PRUH\u0003DQG\u0003PRUH\u0003FRPSRQHQWV\u0003RQ\u0003D\u0003FKLS\u0003 ZKLOH\u0003DYRLGLQJ\u0003WKH\u0003SRZHU\u0003ZDOO\u000f\u0003WKH\u0003LQVWUXFWLRQ\u0010OHYHO\u0003SDUDOOHOLVP\u0003ZDOO\u000f\u0003DQG\u0003WKH\u0003 PHPRU\\\u0003ZDOO\u0011 Special-purpose hardware and massively parallel accelerators\u01e9\u0003 )RU\u0003H[DPSOH\u000f\u0003 *38V\u0003IURP\u000319,',$\u0003KDYH\u0003RXWSDFHG\u0003VWDQGDUG\u0003&38V\u0003LQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003SHUIRUPDQFH\u0003 LQ\u0003UHFHQW\u0003\\HDUV\u0011\u0003)XUWKHUPRUH\u000f\u0003WKH\\\u0003KDYH\u0003DUJXDEO\\\u0003EHFRPH\u0003DV\u0003HDV\\\u000f\u0003LI\u0003QRW\u0003HDVLHU\u000f\u0003 WR\u0003SURJUDP\u0003WKDQ\u0003PXOWLFRUH\u0003&38V\u0011 7KH\u0003UHODWLYH\u0003EDODQFH\u0003EHWZHHQ\u0003WKHVH\u0003FRPSRQHQW\u0003W\\SHV\u0003LQ\u0003IXWXUH\u0003GHVLJQV\u0003LV\u0003QRW\u0003 FOHDU\u0003DQG\u0003ZLOO\u0003OLNHO\\\u0003YDU\\\u0003RYHU\u0003WLPH\u0011\u00037KHUH\u0003VHHPV\u0003WR\u0003EH\u0003QR\u0003GRXEW\u0003WKDW\u0003IXWXUH\u0003 JHQHUDWLRQV\u0003RI\u0003FRPSXWHU\u0003V\\VWHPV\u000f\u0003UDQJLQJ\u0003IURP\u0003ODSWRSV\u0003WR\u0003VXSHUFRPSXWHUV\u000f\u0003 ZLOO\u0003FRQVLVW\u0003RI\u0003D\u0003FRPSRVLWLRQ\u0003RI\u0003KHWHURJHQHRXV\u0003FRPSRQHQWV\u0011\u0003,QGHHG\u000f\u0003WKH\u0003 peta\ufb02op (10\u0014\u0018\u0003\u020dRDWLQJ\u0010SRLQW\u0003RSHUDWLRQV\u0003SHU\u0003VHFRQG \u0003SHUIRUPDQFH\u0003EDUULHU\u0003ZDV\u0003EUHDFKHG\u0003E\\\u0003 VXFK\u0003D\u0003V\\VWHP\u0011 $QG\u0003\\HW\u0003WKH\u0003SUREOHPV\u0003DQG\u0003WKH\u0003FKDOOHQJHV\u0003IRU\u0003GHYHORSHUV\u0003LQ\u0003WKH\u0003QHZ\u0003FRPSXWDWLRQDO\u0003 ODQGVFDSH\u0003RI\u0003K\\EULG\u0003SURFHVVRUV\u0003UHPDLQ\u0003GDXQWLQJ\u0011\u0003&ULWLFDO\u0003SDUWV\u0003RI\u0003WKH\u0003VRIWZDUH\u0003 LQIUDVWUXFWXUH\u0003DUH\u0003DOUHDG\\\u0003KDYLQJ\u0003D\u0003YHU\\\u0003GLI\u020cFXOW\u0003WLPH\u0003NHHSLQJ\u0003XS\u0003ZLWK\u0003WKH\u0003SDFH\u0003 RI\u0003FKDQJH\u0011\u0003,Q\u0003VRPH\u0003FDVHV\u000f\u0003SHUIRUPDQFH\u0003FDQQRW\u0003VFDOH\u0003ZLWK\u0003WKH\u0003QXPEHU\u0003RI\u0003FRUHV\u0003 EHFDXVH\u0003DQ\u0003LQFUHDVLQJO\\\u0003ODUJH\u0003SRUWLRQ\u0003RI\u0003WLPH\u0003LV\u0003VSHQW\u0003RQ\u0003GDWD\u0003PRYHPHQW\u0003UDWKHU\u0003 WKDQ\u0003DULWKPHWLF\u0011\u0003,Q\u0003RWKHU\u0003FDVHV\u000f\u0003VRIWZDUH\u0003WXQHG\u0003IRU\u0003SHUIRUPDQFH\u0003LV\u0003GHOLYHUHG\u0003\\HDUV\u0003 DIWHU\u0003WKH\u0003KDUGZDUH\u0003DUULYHV\u0003DQG\u0003VR\u0003LV\u0003REVROHWH\u0003RQ\u0003GHOLYHU\\\u0011\u0003$QG\u0003LQ\u0003VRPH\u0003FDVHV\u000f\u0003DV\u0003 RQ\u0003VRPH\u0003UHFHQW\u0003*38V\u000f\u0003VRIWZDUH\u0003ZLOO\u0003QRW\u0003UXQ\u0003DW\u0003DOO\u0003EHFDXVH\u0003SURJUDPPLQJ\u0003HQYLURQ - PHQWV\u0003KDYH\u0003FKDQJHG\u0003WRR\u0003PXFK\u0011 Download from www.wowebook.comptg [LY)25(:25' CUDA by Example \u0003DGGUHVVHV\u0003WKH\u0003KHDUW\u0003RI\u0003WKH\u0003VRIWZDUH\u0003GHYHORSPHQW\u0003FKDOOHQJH\u0003E\\\u0003 OHYHUDJLQJ\u0003RQH\u0003RI\u0003WKH\u0003PRVW\u0003LQQRYDWLYH\u0003DQG\u0003SRZHUIXO\u0003VROXWLRQV\u0003WR\u0003WKH\u0003SUREOHP\u0003RI\u0003 SURJUDPPLQJ\u0003WKH\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003DFFHOHUDWRUV\u0003LQ\u0003UHFHQW\u0003\\HDUV\u0011 7KLV\u0003ERRN\u0003LQWURGXFHV\u0003\\RX\u0003WR\u0003SURJUDPPLQJ\u0003LQ\u0003&8'$\u0003&\u0003E\\\u0003SURYLGLQJ\u0003H[DPSOHV\u0003DQG\u0003 LQVLJKW\u0003LQWR\u0003WKH\u0003SURFHVV\u0003RI\u0003FRQVWUXFWLQJ\u0003DQG\u0003HIIHFWLYHO\\\u0003XVLQJ\u000319,',$\u0003*38V\u0011\u0003,W\u0003 SUHVHQWV\u0003LQWURGXFWRU\\\u0003FRQFHSWV\u0003RI\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003IURP\u0003VLPSOH\u0003H[DPSOHV\u0003WR\u0003 GHEXJJLQJ\u0003 ERWK\u0003ORJLFDO\u0003DQG\u0003SHUIRUPDQFH \u000f\u0003DV\u0003ZHOO\u0003DV\u0003FRYHUV\u0003DGYDQFHG\u0003WRSLFV\u0003DQG\u0003 LVVXHV\u0003UHODWHG\u0003WR\u0003XVLQJ\u0003DQG\u0003EXLOGLQJ\u0003PDQ\\\u0003DSSOLFDWLRQV\u0011\u00037KURXJKRXW\u0003WKH\u0003ERRN\u000f\u0003 SURJUDPPLQJ\u0003H[DPSOHV\u0003UHLQIRUFH\u0003WKH\u0003FRQFHSWV\u0003WKDW\u0003KDYH\u0003EHHQ\u0003SUHVHQWHG\u0011 7KH\u0003ERRN\u0003LV\u0003UHTXLUHG\u0003UHDGLQJ\u0003IRU\u0003DQ\\RQH\u0003ZRUNLQJ\u0003ZLWK\u0003DFFHOHUDWRU\u0010EDVHG\u0003 FRPSXWLQJ\u0003V\\VWHPV\u0011\u0003,W\u0003H[SORUHV\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003LQ\u0003GHSWK\u0003DQG\u0003SURYLGHV\u0003DQ\u0003 DSSURDFK\u0003WR\u0003PDQ\\\u0003SUREOHPV\u0003WKDW\u0003PD\\\u0003EH\u0003HQFRXQWHUHG\u0011\u0003,W\u0003LV\u0003HVSHFLDOO\\\u0003XVHIXO\u0003IRU\u0003 DSSOLFDWLRQ\u0003GHYHORSHUV\u000f\u0003QXPHULFDO\u0003OLEUDU\\\u0003ZULWHUV\u000f\u0003DQG\u0003VWXGHQWV\u0003DQG\u0003WHDFKHUV\u0003RI\u0003 SDUDOOHO\u0003FRPSXWLQJ\u0011 ,\u0003KDYH\u0003HQMR\\HG\u0003DQG\u0003OHDUQHG\u0003IURP\u0003WKLV\u0003ERRN\u000f\u0003DQG\u0003,\u0003IHHO\u0003FRQ\u020cGHQW\u0003WKDW\u0003\\RX\u0003ZLOO\u0003 DV\u0003ZHOO\u0011 Jack Dongarra University Distinguished Professor, University of Tennessee Distinguished Research Staff Member, Oak Ridge National Laboratory Download from www.wowebook.comptg [YPreface 7KLV\u0003ERRN\u0003VKRZV\u0003KRZ\u000f\u0003E\\\u0003KDUQHVVLQJ\u0003WKH\u0003SRZHU\u0003RI\u0003\\RXU\u0003FRPSXWHU\u01e2V\u0003JUDSKLFV\u0003 SURFHVV\u0003XQLW\u0003 *38 \u000f\u0003\\RX\u0003FDQ\u0003ZULWH\u0003KLJK\u0010SHUIRUPDQFH\u0003VRIWZDUH\u0003IRU\u0003D\u0003ZLGH\u0003UDQJH\u0003 RI\u0003DSSOLFDWLRQV\u0011\u0003$OWKRXJK\u0003RULJLQDOO\\\u0003GHVLJQHG\u0003WR\u0003UHQGHU\u0003FRPSXWHU\u0003JUDSKLFV\u0003RQ\u0003 D\u0003PRQLWRU\u0003 DQG\u0003VWLOO\u0003XVHG\u0003IRU\u0003WKLV\u0003SXUSRVH \u000f\u0003*38V\u0003DUH\u0003LQFUHDVLQJO\\\u0003EHLQJ\u0003FDOOHG\u0003 XSRQ\u0003IRU\u0003HTXDOO\\\u0003GHPDQGLQJ\u0003SURJUDPV\u0003LQ\u0003VFLHQFH\u000f\u0003HQJLQHHULQJ\u000f\u0003DQG\u0003\u020cQDQFH\u000f\u0003 DPRQJ\u0003RWKHU\u0003GRPDLQV\u0011\u0003:H\u0003UHIHU\u0003FROOHFWLYHO\\\u0003WR\u0003*38\u0003SURJUDPV\u0003WKDW\u0003DGGUHVV\u0003 SUREOHPV\u0003LQ\u0003QRQJUDSKLFV\u0003GRPDLQV\u0003DV\u0003 general-purpose \u0011\u0003+DSSLO\\\u000f\u0003DOWKRXJK\u0003\\RX\u0003 QHHG\u0003WR\u0003KDYH\u0003VRPH\u0003H[SHULHQFH\u0003ZRUNLQJ\u0003LQ\u0003&\u0003RU\u0003&\u000e\u000e\u0003WR\u0003EHQH\u020cW\u0003IURP\u0003WKLV\u0003ERRN\u000f\u0003 \\RX\u0003QHHG\u0003QRW\u0003KDYH\u0003DQ\\\u0003NQRZOHGJH\u0003RI\u0003FRPSXWHU\u0003JUDSKLFV\u0011\u00031RQH\u0003ZKDWVRHYHU\u0004\u0003*38\u0003 SURJUDPPLQJ\u0003VLPSO\\\u0003RIIHUV\u0003\\RX\u0003DQ\u0003RSSRUWXQLW\\\u0003WR\u0003EXLOG\u01dfDQG\u0003WR\u0003EXLOG\u0003PLJKWLO\\\u01df RQ\u0003\\RXU\u0003H[LVWLQJ\u0003SURJUDPPLQJ\u0003VNLOOV\u0011 7R\u0003SURJUDP\u000319,',$\u0003*38V\u0003WR\u0003SHUIRUP\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWLQJ\u0003WDVNV\u000f\u0003\\RX\u0003 ZLOO\u0003ZDQW\u0003WR\u0003NQRZ\u0003ZKDW\u0003&8'$\u0003LV\u0011\u000319,',$\u0003*38V\u0003DUH\u0003EXLOW\u0003RQ\u0003ZKDW\u01e2V\u0003NQRZQ\u0003DV\u0003 WKH\u0003CUDA Architecture \u0011\u0003<RX\u0003FDQ\u0003WKLQN\u0003RI\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003DV\u0003WKH\u0003VFKHPH\u0003 E\\\u0003ZKLFK\u000319,',$\u0003KDV\u0003EXLOW\u0003*38V\u0003WKDW\u0003FDQ\u0003SHUIRUP\u0003 both \u0003WUDGLWLRQDO\u0003JUDSKLFV\u0010 UHQGHULQJ\u0003WDVNV\u0003 and\u0003JHQHUDO\u0010SXUSRVH\u0003WDVNV\u0011\u00037R\u0003SURJUDP\u0003&8'$\u0003*38V\u000f\u0003ZH\u0003ZLOO\u0003 EH\u0003XVLQJ\u0003D\u0003ODQJXDJH\u0003NQRZQ\u0003DV\u0003 CUDA C \u0011\u0003$V\u0003\\RX\u0003ZLOO\u0003VHH\u0003YHU\\\u0003HDUO\\\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003 &8'$\u0003&\u0003LV\u0003HVVHQWLDOO\\\u0003&\u0003ZLWK\u0003D\u0003KDQGIXO\u0003RI\u0003H[WHQVLRQV\u0003WR\u0003DOORZ\u0003SURJUDPPLQJ\u0003RI\u0003 PDVVLYHO\\\u0003SDUDOOHO\u0003PDFKLQHV\u0003OLNH\u000319,',$\u0003*38V\u0011 :H\u01e2YH\u0003JHDUHG\u0003 CUDA by Example \u0003WRZDUG\u0003H[SHULHQFHG\u0003&\u0003RU\u0003&\u000e\u000e\u0003SURJUDPPHUV\u0003 ZKR\u0003KDYH\u0003HQRXJK\u0003IDPLOLDULW\\\u0003ZLWK\u0003&\u0003VXFK\u0003WKDW\u0003WKH\\\u0003DUH\u0003FRPIRUWDEOH\u0003UHDGLQJ\u0003DQG\u0003 ZULWLQJ\u0003FRGH\u0003LQ\u0003&\u0011\u00037KLV\u0003ERRN\u0003EXLOGV\u0003RQ\u0003\\RXU\u0003H[SHULHQFH\u0003ZLWK\u0003&\u0003DQG\u0003LQWHQGV\u0003WR\u0003VHUYH\u0003 DV\u0003DQ\u0003H[DPSOH\u0010GULYHQ\u000f\u0003\u01e4TXLFN\u0010VWDUW\u01e5\u0003JXLGH\u0003WR\u0003XVLQJ\u000319,',$\u01e2V\u0003&8'$\u0003&\u0003SURJUDP - PLQJ\u0003ODQJXDJH\u0011\u0003%\\\u0003QR\u0003PHDQV\u0003GR\u0003\\RX\u0003QHHG\u0003WR\u0003KDYH\u0003GRQH\u0003ODUJH\u0010VFDOH\u0003VRIWZDUH\u0003 DUFKLWHFWXUH\u000f\u0003WR\u0003KDYH\u0003ZULWWHQ\u0003D\u0003&\u0003FRPSLOHU\u0003RU\u0003DQ\u0003RSHUDWLQJ\u0003V\\VWHP\u0003NHUQHO\u000f\u0003RU\u0003WR\u0003 NQRZ\u0003DOO\u0003WKH\u0003LQV\u0003DQG\u0003RXWV\u0003RI\u0003WKH\u0003$16,\u0003&\u0003VWDQGDUGV\u0011\u0003+RZHYHU\u000f\u0003ZH\u0003GR\u0003QRW\u0003VSHQG\u0003 WLPH\u0003UHYLHZLQJ\u0003&\u0003V\\QWD[\u0003RU\u0003FRPPRQ\u0003&\u0003OLEUDU\\\u0003URXWLQHV\u0003VXFK\u0003DV\u0003 malloc() \u0003RU\u0003 memcpy() \u000f\u0003VR\u0003ZH\u0003ZLOO\u0003DVVXPH\u0003WKDW\u0003\\RX\u0003DUH\u0003DOUHDG\\\u0003UHDVRQDEO\\\u0003IDPLOLDU\u0003ZLWK\u0003WKHVH\u0003 WRSLFV\u0011\u0003 Download from www.wowebook.comptg [YL35()$&( <RX\u0003ZLOO\u0003HQFRXQWHU\u0003VRPH\u0003WHFKQLTXHV\u0003WKDW\u0003FDQ\u0003EH\u0003FRQVLGHUHG\u0003JHQHUDO\u0003SDUDOOHO\u0003 SURJUDPPLQJ\u0003SDUDGLJPV\u000f\u0003DOWKRXJK\u0003WKLV\u0003ERRN\u0003GRHV\u0003QRW\u0003DLP\u0003WR\u0003WHDFK\u0003JHQHUDO\u0003 SDUDOOHO\u0003SURJUDPPLQJ\u0003WHFKQLTXHV\u0011\u0003$OVR\u000f\u0003ZKLOH\u0003ZH\u0003ZLOO\u0003ORRN\u0003DW\u0003QHDUO\\\u0003HYHU\\\u0003SDUW\u0003RI\u0003 WKH\u0003&8'$\u0003$3,\u000f\u0003WKLV\u0003ERRN\u0003GRHV\u0003QRW\u0003VHUYH\u0003DV\u0003DQ\u0003H[WHQVLYH\u0003$3,\u0003UHIHUHQFH\u0003QRU\u0003ZLOO\u0003LW\u0003 JR\u0003LQWR\u0003JRU\\\u0003GHWDLO\u0003DERXW\u0003HYHU\\\u0003WRRO\u0003WKDW\u0003\\RX\u0003FDQ\u0003XVH\u0003WR\u0003KHOS\u0003GHYHORS\u0003\\RXU\u0003&8'$\u0003&\u0003 VRIWZDUH\u0011\u0003&RQVHTXHQWO\\\u000f\u0003ZH\u0003KLJKO\\\u0003UHFRPPHQG\u0003WKDW\u0003WKLV\u0003ERRN\u0003EH\u0003XVHG\u0003LQ\u0003FRQMXQF - WLRQ\u0003ZLWK\u000319,',$\u01e2V\u0003IUHHO\\\u0003DYDLODEOH\u0003GRFXPHQWDWLRQ\u000f\u0003LQ\u0003SDUWLFXODU\u0003WKH\u0003 NVIDIA CUDA Programming Guide DQG\u0003WKH\u0003NVIDIA CUDA Best Practices Guide \u0011\u0003%XW\u0003GRQ\u01e2W\u0003VWUHVV\u0003 RXW\u0003DERXW\u0003FROOHFWLQJ\u0003DOO\u0003WKHVH\u0003GRFXPHQWV\u0003EHFDXVH\u0003ZH\u01e2OO\u0003ZDON\u0003\\RX\u0003WKURXJK\u0003HYHU\\ - WKLQJ\u0003\\RX\u0003QHHG\u0003WR\u0003GR\u0011 :LWKRXW\u0003IXUWKHU\u0003DGR\u000f\u0003WKH\u0003ZRUOG\u0003RI\u0003SURJUDPPLQJ\u000319,',$\u0003*38V\u0003ZLWK\u0003&8'$\u0003&\u0003DZDLWV\u0004 Download from www.wowebook.comptg [YLL,W\u01e2V\u0003EHHQ\u0003VDLG\u0003WKDW\u0003LW\u0003WDNHV\u0003D\u0003YLOODJH\u0003WR\u0003ZULWH\u0003D\u0003WHFKQLFDO\u0003ERRN\u000f\u0003DQG\u0003 CUDA by Example LV\u0003QR\u0003H[FHSWLRQ\u0003WR\u0003WKLV\u0003DGDJH\u0011\u00037KH\u0003DXWKRUV\u0003RZH\u0003GHEWV\u0003RI\u0003JUDWLWXGH\u0003WR\u0003PDQ\\\u0003SHRSOH\u000f\u0003 VRPH\u0003RI\u0003ZKRP\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003WKDQN\u0003KHUH\u0011\u0003 ,DQ\u0003%XFN\u000f\u000319,',$\u01e2V\u0003VHQLRU\u0003GLUHFWRU\u0003RI\u0003*38\u0003FRPSXWLQJ\u0003VRIWZDUH\u000f\u0003KDV\u0003EHHQ\u0003LPPHD - VXUDEO\\\u0003KHOSIXO\u0003LQ\u0003HYHU\\\u0003VWDJH\u0003RI\u0003WKH\u0003GHYHORSPHQW\u0003RI\u0003WKLV\u0003ERRN\u000f\u0003IURP\u0003FKDPSLRQLQJ\u0003 WKH\u0003LGHD\u0003WR\u0003PDQDJLQJ\u0003PDQ\\\u0003RI\u0003WKH\u0003GHWDLOV\u0011\u0003:H\u0003DOVR\u0003RZH\u00037LP\u00030XUUD\\\u000f\u0003RXU\u0003DOZD\\V\u0010 VPLOLQJ\u0003UHYLHZHU\u000f\u0003PXFK\u0003RI\u0003WKH\u0003FUHGLW\u0003IRU\u0003WKLV\u0003ERRN\u0003SRVVHVVLQJ\u0003HYHQ\u0003D\u0003PRGLFXP\u0003RI\u0003 WHFKQLFDO\u0003DFFXUDF\\\u0003DQG\u0003UHDGDELOLW\\\u0011\u00030DQ\\\u0003WKDQNV\u0003DOVR\u0003JR\u0003WR\u0003RXU\u0003GHVLJQHU\u000f\u0003'DUZLQ\u0003 7DW\u000f\u0003ZKR\u0003FUHDWHG\u0003IDQWDVWLF\u0003FRYHU\u0003DUW\u0003DQG\u0003\u020cJXUHV\u0003RQ\u0003DQ\u0003H[WUHPHO\\\u0003WLJKW\u0003VFKHGXOH\u0011\u0003 )LQDOO\\\u000f\u0003ZH\u0003DUH\u0003PXFK\u0003REOLJHG\u0003WR\u0003-RKQ\u00033DUN\u000f\u0003ZKR\u0003KHOSHG\u0003JXLGH\u0003WKLV\u0003SURMHFW\u0003WKURXJK\u0003 WKH\u0003GHOLFDWH\u0003OHJDO\u0003SURFHVV\u0003UHTXLUHG\u0003RI\u0003SXEOLVKHG\u0003ZRUN\u0011 :LWKRXW\u0003KHOS\u0003IURP\u0003$GGLVRQ\u0010:HVOH\\\u01e2V\u0003VWDII\u000f\u0003WKLV\u0003ERRN\u0003ZRXOG\u0003VWLOO\u0003EH\u0003QRWKLQJ\u0003PRUH\u0003 WKDQ\u0003D\u0003WZLQNOH\u0003LQ\u0003WKH\u0003H\\HV\u0003RI\u0003WKH\u0003DXWKRUV\u0011\u00033HWHU\u0003*RUGRQ\u000f\u0003.LP\u0003%RHGLJKHLPHU\u000f\u0003DQG\u0003 -XOLH\u00031DKLO\u0003KDYH\u0003DOO\u0003VKRZQ\u0003XQERXQGHG\u0003SDWLHQFH\u0003DQG\u0003SURIHVVLRQDOLVP\u0003DQG\u0003KDYH\u0003 JHQXLQHO\\\u0003PDGH\u0003WKH\u0003SXEOLFDWLRQ\u0003RI\u0003WKLV\u0003ERRN\u0003D\u0003SDLQOHVV\u0003SURFHVV\u0011\u0003$GGLWLRQDOO\\\u000f\u0003 0ROO\\\u00036KDUS\u01e2V\u0003SURGXFWLRQ\u0003ZRUN\u0003DQG\u0003.LP\u0003:LPSVHWW\u01e2V\u0003FRS\\HGLWLQJ\u0003KDYH\u0003XWWHUO\\\u0003 WUDQVIRUPHG\u0003WKLV\u0003WH[W\u0003IURP\u0003D\u0003SLOH\u0003RI\u0003GRFXPHQWV\u0003ULGGOHG\u0003ZLWK\u0003HUURUV\u0003WR\u0003WKH\u0003YROXPH\u0003 \\RX\u01e2UH\u0003UHDGLQJ\u0003WRGD\\\u0011 6RPH\u0003RI\u0003WKH\u0003FRQWHQW\u0003RI\u0003WKLV\u0003ERRN\u0003FRXOG\u0003QRW\u0003KDYH\u0003EHHQ\u0003LQFOXGHG\u0003ZLWKRXW\u0003WKH\u0003 KHOS\u0003RI\u0003RWKHU\u0003FRQWULEXWRUV\u0011\u00036SHFL\u020cFDOO\\\u000f\u00031DGHHP\u00030RKDPPDG\u0003ZDV\u0003LQVWUXPHQWDO\u0003 LQ\u0003UHVHDUFKLQJ\u0003WKH\u0003&8'$\u0003FDVH\u0003VWXGLHV\u0003ZH\u0003SUHVHQW\u0003LQ\u0003&KDSWHU\u0003\u0014\u000f\u0003DQG\u00031DWKDQ\u0003 :KLWHKHDG\u0003JHQHURXVO\\\u0003SURYLGHG\u0003FRGH\u0003WKDW\u0003ZH\u0003LQFRUSRUDWHG\u0003LQWR\u0003H[DPSOHV\u0003 WKURXJKRXW\u0003WKH\u0003ERRN\u0011\u0003 :H\u0003ZRXOG\u0003EH\u0003UHPLVV\u0003LI\u0003ZH\u0003GLGQ\u01e2W\u0003WKDQN\u0003WKH\u0003RWKHUV\u0003ZKR\u0003UHDG\u0003HDUO\\\u0003GUDIWV\u0003RI\u0003 WKLV\u0003WH[W\u0003DQG\u0003SURYLGHG\u0003KHOSIXO\u0003IHHGEDFN\u000f\u0003LQFOXGLQJ\u0003*HQHYLHYH\u0003%UHHG\u0003DQG\u0003.XUW\u0003 :DOO\u0011\u00030DQ\\\u0003RI\u0003WKH\u000319,',$\u0003VRIWZDUH\u0003HQJLQHHUV\u0003SURYLGHG\u0003LQYDOXDEOH\u0003WHFKQLFDO\u0003Acknowledgments Download from www.wowebook.comptg [YLLLACKNOWLED GMENTS DVVLVWDQFH\u0003GXULQJ\u0003WKH\u0003FRXUVH\u0003RI\u0003GHYHORSLQJ\u0003WKH\u0003FRQWHQW\u0003IRU\u0003 CUDA by Example , LQFOXGLQJ\u00030DUN\u0003+DLUJURYH\u0003ZKR\u0003VFRXUHG\u0003WKH\u0003ERRN\u000f\u0003XQFRYHULQJ\u0003DOO\u0003PDQQHU\u0003RI\u0003 LQFRQVLVWHQFLHV\u01df \u0003WHFKQLFDO\u000f\u0003W\\SRJUDSKLFDO\u000f\u0003DQG\u0003JUDPPDWLFDO\u0011\u00036WHYH\u0003+LQHV\u000f\u0003 1LFKRODV\u0003:LOW\u000f\u0003DQG\u00036WHSKHQ\u0003-RQHV\u0003FRQVXOWHG\u0003RQ\u0003VSHFL\u020cF\u0003VHFWLRQV\u0003RI\u0003WKH\u0003&8'$\u0003 $3,\u000f\u0003KHOSLQJ\u0003HOXFLGDWH\u0003QXDQFHV\u0003WKDW\u0003WKH\u0003DXWKRUV\u0003ZRXOG\u0003KDYH\u0003RWKHUZLVH\u0003RYHU - ORRNHG\u0011\u00037KDQNV\u0003DOVR\u0003JR\u0003RXW\u0003WR\u00035DQGLPD\u0003)HUQDQGR\u0003ZKR\u0003KHOSHG\u0003WR\u0003JHW\u0003WKLV\u0003SURMHFW\u0003 RII\u0003WKH\u0003JURXQG\u0003DQG\u0003WR\u00030LFKDHO\u00036FKLGORZVN\\\u0003IRU\u0003DFNQRZOHGJLQJ\u0003-DVRQ\u0003LQ\u0003KLV\u0003ERRN\u0011 $QG\u0003ZKDW\u0003DFNQRZOHGJPHQWV\u0003VHFWLRQ\u0003ZRXOG\u0003EH\u0003FRPSOHWH\u0003ZLWKRXW\u0003D\u0003KHDUWIHOW\u0003 H[SUHVVLRQ\u0003RI\u0003JUDWLWXGH\u0003WR\u0003SDUHQWV\u0003DQG\u0003VLEOLQJV\"\u0003,W\u0003LV\u0003KHUH\u0003WKDW\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003 WKDQN\u0003RXU\u0003IDPLOLHV\u000f\u0003ZKR\u0003KDYH\u0003EHHQ\u0003ZLWK\u0003XV\u0003WKURXJK\u0003HYHU\\WKLQJ\u0003DQG\u0003KDYH\u0003PDGH\u0003 WKLV\u0003DOO\u0003SRVVLEOH\u0011\u0003:LWK\u0003WKDW\u0003VDLG\u000f\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003H[WHQG\u0003VSHFLDO\u0003WKDQNV\u0003WR\u0003ORYLQJ\u0003 SDUHQWV\u000f\u0003(GZDUG\u0003DQG\u0003.DWKOHHQ\u0003.DQGURW\u0003DQG\u00036WHSKHQ\u0003DQG\u0003+HOHQ\u00036DQGHUV\u0011\u00037KDQNV\u0003 DOVR\u0003JR\u0003WR\u0003RXU\u0003EURWKHUV\u000f\u0003.HQQHWK\u0003.DQGURW\u0003DQG\u0003&RUH\\\u00036DQGHUV\u0011\u00037KDQN\u0003\\RX\u0003DOO\u0003IRU\u0003 \\RXU\u0003XQZDYHULQJ\u0003VXSSRUW\u0011 Download from www.wowebook.comptg [L[Jason Sanders LV\u0003D\u0003VHQLRU\u0003VRIWZDUH\u0003HQJLQHHU\u0003LQ\u0003WKH\u0003&8'$\u00033ODWIRUP\u0003JURXS\u0003DW\u0003 19,',$\u0011\u0003:KLOH\u0003DW\u000319,',$\u000f\u0003KH\u0003KHOSHG\u0003GHYHORS\u0003HDUO\\\u0003UHOHDVHV\u0003RI\u0003&8'$\u0003V\\VWHP\u0003 VRIWZDUH\u0003DQG\u0003FRQWULEXWHG\u0003WR\u0003WKH\u00032SHQ&/\u0003\u0014\u0011\u0013\u00036SHFL\u020cFDWLRQ\u000f\u0003DQ\u0003LQGXVWU\\\u0003VWDQGDUG\u0003 IRU\u0003KHWHURJHQHRXV\u0003FRPSXWLQJ\u0011\u0003-DVRQ\u0003UHFHLYHG\u0003KLV\u0003PDVWHU\u01e2V\u0003GHJUHH\u0003LQ\u0003FRPSXWHU\u0003 VFLHQFH\u0003IURP\u0003WKH\u00038QLYHUVLW\\\u0003RI\u0003&DOLIRUQLD\u0003%HUNHOH\\\u0003ZKHUH\u0003KH\u0003SXEOLVKHG\u0003UHVHDUFK\u0003LQ\u0003 *38\u0003FRPSXWLQJ\u000f\u0003DQG\u0003KH\u0003KROGV\u0003D\u0003EDFKHORU\u01e2V\u0003GHJUHH\u0003LQ\u0003HOHFWULFDO\u0003HQJLQHHULQJ\u0003IURP\u0003 3ULQFHWRQ\u00038QLYHUVLW\\\u0011\u00033ULRU\u0003WR\u0003MRLQLQJ\u000319,',$\u000f\u0003KH\u0003SUHYLRXVO\\\u0003KHOG\u0003SRVLWLRQV\u0003DW\u0003$7,\u0003 7HFKQRORJLHV\u000f\u0003$SSOH\u000f\u0003DQG\u00031RYHOO\u0011\u0003:KHQ\u0003KH\u01e2V\u0003QRW\u0003ZULWLQJ\u0003ERRNV\u000f\u0003-DVRQ\u0003LV\u0003W\\SLFDOO\\\u0003 ZRUNLQJ\u0003RXW\u000f\u0003SOD\\LQJ\u0003VRFFHU\u000f\u0003RU\u0003VKRRWLQJ\u0003SKRWRV\u0011 Edward Kandrot LV\u0003D\u0003VHQLRU\u0003VRIWZDUH\u0003HQJLQHHU\u0003RQ\u0003WKH\u0003&8'$\u0003$OJRULWKPV\u0003WHDP\u0003DW\u0003 19,',$\u0011\u0003+H\u0003KDV\u0003PRUH\u0003WKDQ\u0003\u0015\u0013\u0003\\HDUV\u0003RI\u0003LQGXVWU\\\u0003H[SHULHQFH\u0003IRFXVHG\u0003RQ\u0003RSWLPL]LQJ\u0003 FRGH\u0003DQG\u0003LPSURYLQJ\u0003SHUIRUPDQFH\u000f\u0003LQFOXGLQJ\u0003IRU\u00033KRWRVKRS\u0003DQG\u00030R]LOOD\u0011\u0003.DQGURW\u0003 KDV\u0003ZRUNHG\u0003IRU\u0003$GREH\u000f\u00030LFURVRIW\u000f\u0003DQG\u0003*RRJOH\u000f\u0003DQG\u0003KH\u0003KDV\u0003EHHQ\u0003D\u0003FRQVXOWDQW\u0003DW\u0003 PDQ\\\u0003FRPSDQLHV\u000f\u0003LQFOXGLQJ\u0003$SSOH\u0003DQG\u0003$XWRGHVN\u0011\u0003:KHQ\u0003QRW\u0003FRGLQJ\u000f\u0003KH\u0003FDQ\u0003EH\u0003 IRXQG\u0003SOD\\LQJ\u0003:RUOG\u0003RI\u0003:DUFUDIW\u0003RU\u0003YLVLWLQJ\u0003/DV\u00039HJDV\u0003IRU\u0003WKH\u0003DPD]LQJ\u0003IRRG\u0011About the Authors Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /one.lfChapter 1 Why CUDA? Why Now? 7KHUH\u0003ZDV\u0003D\u0003WLPH\u0003LQ\u0003WKH\u0003QRW\u0010VR\u0010GLVWDQW\u0003SDVW\u0003ZKHQ\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003ZDV\u0003ORRNHG\u0003 XSRQ\u0003DV\u0003DQ\u0003\u01e4H[RWLF\u01e5\u0003SXUVXLW\u0003DQG\u0003W\\SLFDOO\\\u0003JRW\u0003FRPSDUWPHQWDOL]HG\u0003DV\u0003D\u0003VSHFLDOW\\\u0003 ZLWKLQ\u0003WKH\u0003\u020cHOG\u0003RI\u0003FRPSXWHU\u0003VFLHQFH\u0011\u00037KLV\u0003SHUFHSWLRQ\u0003KDV\u0003FKDQJHG\u0003LQ\u0003SURIRXQG\u0003 ZD\\V\u0003LQ\u0003UHFHQW\u0003\\HDUV\u0011\u00037KH\u0003FRPSXWLQJ\u0003ZRUOG\u0003KDV\u0003VKLIWHG\u0003WR\u0003WKH\u0003SRLQW\u0003ZKHUH\u000f\u0003IDU\u0003 IURP\u0003EHLQJ\u0003DQ\u0003HVRWHULF\u0003SXUVXLW\u000f\u0003QHDUO\\\u0003HYHU\\\u0003DVSLULQJ\u0003SURJUDPPHU\u0003 needs \u0003WUDLQLQJ\u0003 LQ\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003WR\u0003EH\u0003IXOO\\\u0003HIIHFWLYH\u0003LQ\u0003FRPSXWHU\u0003VFLHQFH\u0011\u00033HUKDSV\u0003\\RX\u01e2YH\u0003 SLFNHG\u0003WKLV\u0003ERRN\u0003XS\u0003XQFRQYLQFHG\u0003DERXW\u0003WKH\u0003LPSRUWDQFH\u0003RI\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003 LQ\u0003WKH\u0003FRPSXWLQJ\u0003ZRUOG\u0003WRGD\\\u0003DQG\u0003WKH\u0003LQFUHDVLQJO\\\u0003ODUJH\u0003UROH\u0003LW\u0003ZLOO\u0003SOD\\\u0003LQ\u0003WKH\u0003 \\HDUV\u0003WR\u0003FRPH\u0011\u00037KLV\u0003LQWURGXFWRU\\\u0003FKDSWHU\u0003ZLOO\u0003H[DPLQH\u0003UHFHQW\u0003WUHQGV\u0003LQ\u0003WKH\u0003KDUG - ZDUH\u0003WKDW\u0003GRHV\u0003WKH\u0003KHDY\\\u0003OLIWLQJ\u0003IRU\u0003WKH\u0003VRIWZDUH\u0003WKDW\u0003ZH\u0003DV\u0003SURJUDPPHUV\u0003ZULWH\u0011\u0003 ,Q\u0003GRLQJ\u0003VR\u000f\u0003ZH\u0003KRSH\u0003WR\u0003FRQYLQFH\u0003\\RX\u0003WKDW\u0003WKH\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003UHYROXWLRQ\u0003KDV\u0003 already \u0003KDSSHQHG\u0003DQG\u0003WKDW\u000f\u0003E\\\u0003OHDUQLQJ\u0003&8'$\u0003&\u000f\u0003\\RX\u01e2OO\u0003EH\u0003ZHOO\u0003SRVLWLRQHG\u0003WR\u0003ZULWH\u0003 KLJK\u0010SHUIRUPDQFH\u0003DSSOLFDWLRQV\u0003IRU\u0003KHWHURJHQHRXV\u0003SODWIRUPV\u0003WKDW\u0003FRQWDLQ\u0003ERWK\u0003 FHQWUDO\u0003DQG\u0003JUDSKLFV\u0003SURFHVVLQJ\u0003XQLWV\u0011 Download from www.wowebook.comptg:+<\u0003&8'$\"\u0003: +<\u000312:\" /two.lf&KDSWHU\u00032EMHFWLYHV\u0014\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003WKH\u0003LQFUHDVLQJO\\\u0003LPSRUWDQW\u0003UROH\u0003RI\u0003SDUDOOHO\u0003FRPSXWLQJ\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003D\u0003EULHI\u0003KLVWRU\\\u0003RI\u0003*38\u0003FRPSXWLQJ\u0003DQG\u0003&8'$\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003VRPH\u0003VXFFHVVIXO\u0003DSSOLFDWLRQV\u0003WKDW\u0003XVH\u0003&8'$\u0003&\u0011\u01e9\u0003 7KH\u0003$JH\u0003RI\u00033DUDOOHO\u00033URFHVVLQJ\u0014\u0011\u0015\u0003 ,Q\u0003UHFHQW\u0003\\HDUV\u000f\u0003PXFK\u0003KDV\u0003EHHQ\u0003PDGH\u0003RI\u0003WKH\u0003FRPSXWLQJ\u0003LQGXVWU\\\u01e2V\u0003ZLGHVSUHDG\u0003 VKLIW\u0003WR\u0003SDUDOOHO\u0003FRPSXWLQJ\u0011\u00031HDUO\\\u0003DOO\u0003FRQVXPHU\u0003FRPSXWHUV\u0003LQ\u0003WKH\u0003\\HDU\u0003\u0015\u0013\u0014\u0013\u0003 ZLOO\u0003VKLS\u0003ZLWK\u0003PXOWLFRUH\u0003FHQWUDO\u0003SURFHVVRUV\u0011\u0003)URP\u0003WKH\u0003LQWURGXFWLRQ\u0003RI\u0003GXDO\u0010FRUH\u000f\u0003 ORZ\u0010HQG\u0003QHWERRN\u0003PDFKLQHV\u0003WR\u0003\u001b\u0010\u0003DQG\u0003\u0014\u0019\u0010FRUH\u0003ZRUNVWDWLRQ\u0003FRPSXWHUV\u000f\u0003QR\u0003ORQJHU\u0003 ZLOO\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003EH\u0003UHOHJDWHG\u0003WR\u0003H[RWLF\u0003VXSHUFRPSXWHUV\u0003RU\u0003PDLQIUDPHV\u0011\u0003 0RUHRYHU\u000f\u0003HOHFWURQLF\u0003GHYLFHV\u0003VXFK\u0003DV\u0003PRELOH\u0003SKRQHV\u0003DQG\u0003SRUWDEOH\u0003PXVLF\u0003SOD\\HUV\u0003 KDYH\u0003EHJXQ\u0003WR\u0003LQFRUSRUDWH\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003FDSDELOLWLHV\u0003LQ\u0003DQ\u0003HIIRUW\u0003WR\u0003SURYLGH\u0003 IXQFWLRQDOLW\\\u0003ZHOO\u0003EH\\RQG\u0003WKRVH\u0003RI\u0003WKHLU\u0003SUHGHFHVVRUV\u0011\u0003 0RUH\u0003DQG\u0003PRUH\u000f\u0003VRIWZDUH\u0003GHYHORSHUV\u0003ZLOO\u0003QHHG\u0003WR\u0003FRSH\u0003ZLWK\u0003D\u0003YDULHW\\\u0003RI\u0003SDUDOOHO\u0003 FRPSXWLQJ\u0003SODWIRUPV\u0003DQG\u0003WHFKQRORJLHV\u0003LQ\u0003RUGHU\u0003WR\u0003SURYLGH\u0003QRYHO\u0003DQG\u0003ULFK\u0003H[SHUL - HQFHV\u0003IRU\u0003DQ\u0003LQFUHDVLQJO\\\u0003VRSKLVWLFDWHG\u0003EDVH\u0003RI\u0003XVHUV\u0011\u0003&RPPDQG\u0003SURPSWV\u0003DUH\u0003RXW \u0003 PXOWLWKUHDGHG\u0003JUDSKLFDO\u0003LQWHUIDFHV\u0003DUH\u0003LQ\u0011\u0003&HOOXODU\u0003SKRQHV\u0003WKDW\u0003RQO\\\u0003PDNH\u0003FDOOV\u0003 DUH\u0003RXW \u0003SKRQHV\u0003WKDW\u0003FDQ\u0003VLPXOWDQHRXVO\\\u0003SOD\\\u0003PXVLF\u000f\u0003EURZVH\u0003WKH\u0003:HE\u000f\u0003DQG\u0003SURYLGH\u0003 *36\u0003VHUYLFHV\u0003DUH\u0003LQ\u0011\u0003 CENTR AL PROCESS ING UNITS \u0014\u0011\u0015\u0011\u0014\u0003 )RU\u0003\u0016\u0013\u0003\\HDUV\u000f\u0003RQH\u0003RI\u0003WKH\u0003LPSRUWDQW\u0003PHWKRGV\u0003IRU\u0003WKH\u0003LPSURYLQJ\u0003WKH\u0003SHUIRUPDQFH\u0003 RI\u0003FRQVXPHU\u0003FRPSXWLQJ\u0003GHYLFHV\u0003KDV\u0003EHHQ\u0003WR\u0003LQFUHDVH\u0003WKH\u0003VSHHG\u0003DW\u0003ZKLFK\u0003WKH\u0003 SURFHVVRU\u01e2V\u0003FORFN\u0003RSHUDWHG\u0011\u00036WDUWLQJ\u0003ZLWK\u0003WKH\u0003\u020cUVW\u0003SHUVRQDO\u0003FRPSXWHUV\u0003RI\u0003WKH\u0003HDUO\\\u0003 \u0014 \u001b\u0013V\u000f\u0003FRQVXPHU\u0003FHQWUDO\u0003SURFHVVLQJ\u0003XQLWV\u0003 &38V \u0003UDQ\u0003ZLWK\u0003LQWHUQDO\u0003FORFNV\u0003RSHU - DWLQJ\u0003DURXQG\u0003\u00140+]\u0011\u0003$ERXW\u0003\u0016\u0013\u0003\\HDUV\u0003ODWHU\u000f\u0003PRVW\u0003GHVNWRS\u0003SURFHVVRUV\u0003KDYH\u0003FORFN\u0003 VSHHGV\u0003EHWZHHQ\u0003\u0014*+]\u0003DQG\u0003\u0017*+]\u000f\u0003QHDUO\\\u0003\u0014\u000f\u0013\u0013\u0013\u0003WLPHV\u0003IDVWHU\u0003WKDQ\u0003WKH\u0003FORFN\u0003RQ\u0003WKH\u0003 Download from www.wowebook.comptg /three.lf\u0014\u0011\u0015\u00037+(\u0003$*(\u00032)\u00033$5$//(/\u0003352&(66,1* RULJLQDO\u0003SHUVRQDO\u0003FRPSXWHU\u0011\u0003$OWKRXJK\u0003LQFUHDVLQJ\u0003WKH\u0003&38\u0003FORFN\u0003VSHHG\u0003LV\u0003FHUWDLQO\\\u0003 QRW\u0003WKH\u0003RQO\\\u0003PHWKRG\u0003E\\\u0003ZKLFK\u0003FRPSXWLQJ\u0003SHUIRUPDQFH\u0003KDV\u0003EHHQ\u0003LPSURYHG\u000f\u0003LW\u0003KDV\u0003 DOZD\\V\u0003EHHQ\u0003D\u0003UHOLDEOH\u0003VRXUFH\u0003IRU\u0003LPSURYHG\u0003SHUIRUPDQFH\u0011 ,Q\u0003UHFHQW\u0003\\HDUV\u000f\u0003KRZHYHU\u000f\u0003PDQXIDFWXUHUV\u0003KDYH\u0003EHHQ\u0003IRUFHG\u0003WR\u0003ORRN\u0003IRU\u0003DOWHUQD - WLYHV\u0003WR\u0003WKLV\u0003WUDGLWLRQDO\u0003VRXUFH\u0003RI\u0003LQFUHDVHG\u0003FRPSXWDWLRQDO\u0003SRZHU\u0011\u0003%HFDXVH\u0003RI\u0003 YDULRXV\u0003IXQGDPHQWDO\u0003OLPLWDWLRQV\u0003LQ\u0003WKH\u0003IDEULFDWLRQ\u0003RI\u0003LQWHJUDWHG\u0003FLUFXLWV\u000f\u0003LW\u0003LV\u0003QR\u0003 ORQJHU\u0003IHDVLEOH\u0003WR\u0003UHO\\\u0003RQ\u0003XSZDUG\u0010VSLUDOLQJ\u0003SURFHVVRU\u0003FORFN\u0003VSHHGV\u0003DV\u0003D\u0003PHDQV\u0003 IRU\u0003H[WUDFWLQJ\u0003DGGLWLRQDO\u0003SRZHU\u0003IURP\u0003H[LVWLQJ\u0003DUFKLWHFWXUHV\u0011\u0003%HFDXVH\u0003RI\u0003SRZHU\u0003DQG\u0003 KHDW\u0003UHVWULFWLRQV\u0003DV\u0003ZHOO\u0003DV\u0003D\u0003UDSLGO\\\u0003DSSURDFKLQJ\u0003SK\\VLFDO\u0003OLPLW\u0003WR\u0003WUDQVLVWRU\u0003VL]H\u000f\u0003 UHVHDUFKHUV\u0003DQG\u0003PDQXIDFWXUHUV\u0003KDYH\u0003EHJXQ\u0003WR\u0003ORRN\u0003HOVHZKHUH\u0011 2XWVLGH\u0003WKH\u0003ZRUOG\u0003RI\u0003FRQVXPHU\u0003FRPSXWLQJ\u000f\u0003VXSHUFRPSXWHUV\u0003KDYH\u0003IRU\u0003GHFDGHV\u0003 H[WUDFWHG\u0003PDVVLYH\u0003SHUIRUPDQFH\u0003JDLQV\u0003LQ\u0003VLPLODU\u0003ZD\\V\u0011\u00037KH\u0003SHUIRUPDQFH\u0003RI\u0003D\u0003 SURFHVVRU\u0003XVHG\u0003LQ\u0003D\u0003VXSHUFRPSXWHU\u0003KDV\u0003FOLPEHG\u0003DVWURQRPLFDOO\\\u000f\u0003VLPLODU\u0003WR\u0003WKH\u0003 LPSURYHPHQWV\u0003LQ\u0003WKH\u0003SHUVRQDO\u0003FRPSXWHU\u0003&38\u0011\u0003+RZHYHU\u000f\u0003LQ\u0003DGGLWLRQ\u0003WR\u0003GUDPDWLF\u0003 LPSURYHPHQWV\u0003LQ\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003D\u0003VLQJOH\u0003SURFHVVRU\u000f\u0003VXSHUFRPSXWHU\u0003PDQX - IDFWXUHUV\u0003KDYH\u0003DOVR\u0003H[WUDFWHG\u0003PDVVLYH\u0003OHDSV\u0003LQ\u0003SHUIRUPDQFH\u0003E\\\u0003VWHDGLO\\\u0003LQFUHDVLQJ\u0003 WKH\u0003number \u0003RI\u0003SURFHVVRUV\u0011\u0003,W\u0003LV\u0003QRW\u0003XQFRPPRQ\u0003IRU\u0003WKH\u0003IDVWHVW\u0003VXSHUFRPSXWHUV\u0003WR\u0003 KDYH\u0003WHQV\u0003RU\u0003KXQGUHGV\u0003RI\u0003WKRXVDQGV\u0003RI\u0003SURFHVVRU\u0003FRUHV\u0003ZRUNLQJ\u0003LQ\u0003WDQGHP\u0011 ,Q\u0003WKH\u0003VHDUFK\u0003IRU\u0003DGGLWLRQDO\u0003SURFHVVLQJ\u0003SRZHU\u0003IRU\u0003SHUVRQDO\u0003FRPSXWHUV\u000f\u0003WKH\u0003 LPSURYHPHQW\u0003LQ\u0003VXSHUFRPSXWHUV\u0003UDLVHV\u0003D\u0003YHU\\\u0003JRRG\u0003TXHVWLRQ \u00035DWKHU\u0003WKDQ\u0003VROHO\\\u0003 ORRNLQJ\u0003WR\u0003LQFUHDVH\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003D\u0003VLQJOH\u0003SURFHVVLQJ\u0003FRUH\u000f\u0003ZK\\\u0003QRW\u0003SXW\u0003 PRUH\u0003WKDQ\u0003RQH\u0003LQ\u0003D\u0003SHUVRQDO\u0003FRPSXWHU\"\u0003,Q\u0003WKLV\u0003ZD\\\u000f\u0003SHUVRQDO\u0003FRPSXWHUV\u0003FRXOG\u0003 FRQWLQXH\u0003WR\u0003LPSURYH\u0003LQ\u0003SHUIRUPDQFH\u0003ZLWKRXW\u0003WKH\u0003QHHG\u0003IRU\u0003FRQWLQXLQJ\u0003LQFUHDVHV\u0003LQ\u0003 SURFHVVRU\u0003FORFN\u0003VSHHG\u0011 ,Q\u0003\u0015\u0013\u0013\u0018\u000f\u0003IDFHG\u0003ZLWK\u0003DQ\u0003LQFUHDVLQJO\\\u0003FRPSHWLWLYH\u0003PDUNHWSODFH\u0003DQG\u0003IHZ\u0003DOWHUQDWLYHV\u000f\u0003 OHDGLQJ\u0003&38\u0003PDQXIDFWXUHUV\u0003EHJDQ\u0003RIIHULQJ\u0003SURFHVVRUV\u0003ZLWK\u0003WZR\u0003FRPSXWLQJ\u0003FRUHV\u0003 LQVWHDG\u0003RI\u0003RQH\u0011\u00032YHU\u0003WKH\u0003IROORZLQJ\u0003\\HDUV\u000f\u0003WKH\\\u0003IROORZHG\u0003WKLV\u0003GHYHORSPHQW\u0003ZLWK\u0003WKH\u0003 UHOHDVH\u0003RI\u0003WKUHH\u0010\u000f\u0003IRXU\u0010\u000f\u0003VL[\u0010\u000f\u0003DQG\u0003HLJKW\u0010FRUH\u0003FHQWUDO\u0003SURFHVVRU\u0003XQLWV\u0011\u00036RPHWLPHV\u0003 UHIHUUHG\u0003WR\u0003DV\u0003WKH\u0003 multicore revolution \u000f\u0003WKLV\u0003WUHQG\u0003KDV\u0003PDUNHG\u0003D\u0003KXJH\u0003VKLIW\u0003LQ\u0003WKH\u0003 HYROXWLRQ\u0003RI\u0003WKH\u0003FRQVXPHU\u0003FRPSXWLQJ\u0003PDUNHW\u0011 7RGD\\\u000f\u0003LW\u0003LV\u0003UHODWLYHO\\\u0003FKDOOHQJLQJ\u0003WR\u0003SXUFKDVH\u0003D\u0003GHVNWRS\u0003FRPSXWHU\u0003ZLWK\u0003D\u0003&38\u0003 FRQWDLQLQJ\u0003EXW\u0003D\u0003VLQJOH\u0003FRPSXWLQJ\u0003FRUH\u0011\u0003(YHQ\u0003ORZ\u0010HQG\u000f\u0003ORZ\u0010SRZHU\u0003FHQWUDO\u0003SURFHV - VRUV\u0003VKLS\u0003ZLWK\u0003WZR\u0003RU\u0003PRUH\u0003FRUHV\u0003SHU\u0003GLH\u0011\u0003/HDGLQJ\u0003&38\u0003PDQXIDFWXUHUV\u0003KDYH\u0003 DOUHDG\\\u0003DQQRXQFHG\u0003SODQV\u0003IRU\u0003\u0014\u0015\u0010\u0003DQG\u0003\u0014\u0019\u0010FRUH\u0003&38V\u000f\u0003IXUWKHU\u0003FRQ\u020cUPLQJ\u0003WKDW\u0003 SDUDOOHO\u0003FRPSXWLQJ\u0003KDV\u0003DUULYHG\u0003IRU\u0003JRRG\u0011 Download from www.wowebook.comptg:+<\u0003&8'$\"\u0003: +<\u000312:\" /four.lf7KH\u00035LVH\u0003RI\u0003*38\u0003&RPSXWLQJ\u0014\u0011\u0016\u0003 ,Q\u0003FRPSDULVRQ\u0003WR\u0003WKH\u0003FHQWUDO\u0003SURFHVVRU\u01e2V\u0003WUDGLWLRQDO\u0003GDWD\u0003SURFHVVLQJ\u0003SLSHOLQH\u000f\u0003 SHUIRUPLQJ\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQV\u0003RQ\u0003D\u0003JUDSKLFV\u0003SURFHVVLQJ\u0003XQLW\u0003 *38 \u0003LV\u0003 D\u0003QHZ\u0003FRQFHSW\u0011\u0003,Q\u0003IDFW\u000f\u0003WKH\u0003*38\u0003LWVHOI\u0003LV\u0003UHODWLYHO\\\u0003QHZ\u0003FRPSDUHG\u0003WR\u0003WKH\u0003FRPSXWLQJ\u0003 \u020cHOG\u0003DW\u0003ODUJH\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003LGHD\u0003RI\u0003FRPSXWLQJ\u0003RQ\u0003JUDSKLFV\u0003SURFHVVRUV\u0003LV\u0003QRW\u0003DV\u0003 QHZ\u0003DV\u0003\\RX\u0003PLJKW\u0003EHOLHYH\u0011 $\u0003%5,()\u0003+,6725<\u00032)\u0003*386 \u0014\u0011\u0016\u0011\u0014\u0003 :H\u0003KDYH\u0003DOUHDG\\\u0003ORRNHG\u0003DW\u0003KRZ\u0003FHQWUDO\u0003SURFHVVRUV\u0003HYROYHG\u0003LQ\u0003ERWK\u0003FORFN\u0003VSHHGV\u0003 DQG\u0003FRUH\u0003FRXQW\u0011\u0003,Q\u0003WKH\u0003PHDQWLPH\u000f\u0003WKH\u0003VWDWH\u0003RI\u0003JUDSKLFV\u0003SURFHVVLQJ\u0003XQGHUZHQW\u0003D\u0003 GUDPDWLF\u0003UHYROXWLRQ\u0011\u0003,Q\u0003WKH\u0003ODWH\u0003\u0014 \u001b\u0013V\u0003DQG\u0003HDUO\\\u0003\u0014 \u0013V\u000f\u0003WKH\u0003JURZWK\u0003LQ\u0003SRSXODULW\\\u0003RI\u0003 JUDSKLFDOO\\\u0003GULYHQ\u0003RSHUDWLQJ\u0003V\\VWHPV\u0003VXFK\u0003DV\u00030LFURVRIW\u0003:LQGRZV\u0003KHOSHG\u0003FUHDWH\u0003 D\u0003PDUNHW\u0003IRU\u0003D\u0003QHZ\u0003W\\SH\u0003RI\u0003SURFHVVRU\u0011\u0003,Q\u0003WKH\u0003HDUO\\\u0003\u0014 \u0013V\u000f\u0003XVHUV\u0003EHJDQ\u0003SXUFKDVLQJ\u0003 \u0015'\u0003GLVSOD\\\u0003DFFHOHUDWRUV\u0003IRU\u0003WKHLU\u0003SHUVRQDO\u0003FRPSXWHUV\u0011\u00037KHVH\u0003GLVSOD\\\u0003DFFHOHUDWRUV\u0003 RIIHUHG\u0003KDUGZDUH\u0010DVVLVWHG\u0003ELWPDS\u0003RSHUDWLRQV\u0003WR\u0003DVVLVW\u0003LQ\u0003WKH\u0003GLVSOD\\\u0003DQG\u0003XVDELOLW\\\u0003",
    "IDFWXUHUV\u0003KDYH\u0003DOVR\u0003H[WUDFWHG\u0003PDVVLYH\u0003OHDSV\u0003LQ\u0003SHUIRUPDQFH\u0003E\\\u0003VWHDGLO\\\u0003LQFUHDVLQJ\u0003 WKH\u0003number \u0003RI\u0003SURFHVVRUV\u0011\u0003,W\u0003LV\u0003QRW\u0003XQFRPPRQ\u0003IRU\u0003WKH\u0003IDVWHVW\u0003VXSHUFRPSXWHUV\u0003WR\u0003 KDYH\u0003WHQV\u0003RU\u0003KXQGUHGV\u0003RI\u0003WKRXVDQGV\u0003RI\u0003SURFHVVRU\u0003FRUHV\u0003ZRUNLQJ\u0003LQ\u0003WDQGHP\u0011 ,Q\u0003WKH\u0003VHDUFK\u0003IRU\u0003DGGLWLRQDO\u0003SURFHVVLQJ\u0003SRZHU\u0003IRU\u0003SHUVRQDO\u0003FRPSXWHUV\u000f\u0003WKH\u0003 LPSURYHPHQW\u0003LQ\u0003VXSHUFRPSXWHUV\u0003UDLVHV\u0003D\u0003YHU\\\u0003JRRG\u0003TXHVWLRQ \u00035DWKHU\u0003WKDQ\u0003VROHO\\\u0003 ORRNLQJ\u0003WR\u0003LQFUHDVH\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003D\u0003VLQJOH\u0003SURFHVVLQJ\u0003FRUH\u000f\u0003ZK\\\u0003QRW\u0003SXW\u0003 PRUH\u0003WKDQ\u0003RQH\u0003LQ\u0003D\u0003SHUVRQDO\u0003FRPSXWHU\"\u0003,Q\u0003WKLV\u0003ZD\\\u000f\u0003SHUVRQDO\u0003FRPSXWHUV\u0003FRXOG\u0003 FRQWLQXH\u0003WR\u0003LPSURYH\u0003LQ\u0003SHUIRUPDQFH\u0003ZLWKRXW\u0003WKH\u0003QHHG\u0003IRU\u0003FRQWLQXLQJ\u0003LQFUHDVHV\u0003LQ\u0003 SURFHVVRU\u0003FORFN\u0003VSHHG\u0011 ,Q\u0003\u0015\u0013\u0013\u0018\u000f\u0003IDFHG\u0003ZLWK\u0003DQ\u0003LQFUHDVLQJO\\\u0003FRPSHWLWLYH\u0003PDUNHWSODFH\u0003DQG\u0003IHZ\u0003DOWHUQDWLYHV\u000f\u0003 OHDGLQJ\u0003&38\u0003PDQXIDFWXUHUV\u0003EHJDQ\u0003RIIHULQJ\u0003SURFHVVRUV\u0003ZLWK\u0003WZR\u0003FRPSXWLQJ\u0003FRUHV\u0003 LQVWHDG\u0003RI\u0003RQH\u0011\u00032YHU\u0003WKH\u0003IROORZLQJ\u0003\\HDUV\u000f\u0003WKH\\\u0003IROORZHG\u0003WKLV\u0003GHYHORSPHQW\u0003ZLWK\u0003WKH\u0003 UHOHDVH\u0003RI\u0003WKUHH\u0010\u000f\u0003IRXU\u0010\u000f\u0003VL[\u0010\u000f\u0003DQG\u0003HLJKW\u0010FRUH\u0003FHQWUDO\u0003SURFHVVRU\u0003XQLWV\u0011\u00036RPHWLPHV\u0003 UHIHUUHG\u0003WR\u0003DV\u0003WKH\u0003 multicore revolution \u000f\u0003WKLV\u0003WUHQG\u0003KDV\u0003PDUNHG\u0003D\u0003KXJH\u0003VKLIW\u0003LQ\u0003WKH\u0003 HYROXWLRQ\u0003RI\u0003WKH\u0003FRQVXPHU\u0003FRPSXWLQJ\u0003PDUNHW\u0011 7RGD\\\u000f\u0003LW\u0003LV\u0003UHODWLYHO\\\u0003FKDOOHQJLQJ\u0003WR\u0003SXUFKDVH\u0003D\u0003GHVNWRS\u0003FRPSXWHU\u0003ZLWK\u0003D\u0003&38\u0003 FRQWDLQLQJ\u0003EXW\u0003D\u0003VLQJOH\u0003FRPSXWLQJ\u0003FRUH\u0011\u0003(YHQ\u0003ORZ\u0010HQG\u000f\u0003ORZ\u0010SRZHU\u0003FHQWUDO\u0003SURFHV - VRUV\u0003VKLS\u0003ZLWK\u0003WZR\u0003RU\u0003PRUH\u0003FRUHV\u0003SHU\u0003GLH\u0011\u0003/HDGLQJ\u0003&38\u0003PDQXIDFWXUHUV\u0003KDYH\u0003 DOUHDG\\\u0003DQQRXQFHG\u0003SODQV\u0003IRU\u0003\u0014\u0015\u0010\u0003DQG\u0003\u0014\u0019\u0010FRUH\u0003&38V\u000f\u0003IXUWKHU\u0003FRQ\u020cUPLQJ\u0003WKDW\u0003 SDUDOOHO\u0003FRPSXWLQJ\u0003KDV\u0003DUULYHG\u0003IRU\u0003JRRG\u0011 Download from www.wowebook.comptg:+<\u0003&8'$\"\u0003: +<\u000312:\" /four.lf7KH\u00035LVH\u0003RI\u0003*38\u0003&RPSXWLQJ\u0014\u0011\u0016\u0003 ,Q\u0003FRPSDULVRQ\u0003WR\u0003WKH\u0003FHQWUDO\u0003SURFHVVRU\u01e2V\u0003WUDGLWLRQDO\u0003GDWD\u0003SURFHVVLQJ\u0003SLSHOLQH\u000f\u0003 SHUIRUPLQJ\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQV\u0003RQ\u0003D\u0003JUDSKLFV\u0003SURFHVVLQJ\u0003XQLW\u0003 *38 \u0003LV\u0003 D\u0003QHZ\u0003FRQFHSW\u0011\u0003,Q\u0003IDFW\u000f\u0003WKH\u0003*38\u0003LWVHOI\u0003LV\u0003UHODWLYHO\\\u0003QHZ\u0003FRPSDUHG\u0003WR\u0003WKH\u0003FRPSXWLQJ\u0003 \u020cHOG\u0003DW\u0003ODUJH\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003LGHD\u0003RI\u0003FRPSXWLQJ\u0003RQ\u0003JUDSKLFV\u0003SURFHVVRUV\u0003LV\u0003QRW\u0003DV\u0003 QHZ\u0003DV\u0003\\RX\u0003PLJKW\u0003EHOLHYH\u0011 $\u0003%5,()\u0003+,6725<\u00032)\u0003*386 \u0014\u0011\u0016\u0011\u0014\u0003 :H\u0003KDYH\u0003DOUHDG\\\u0003ORRNHG\u0003DW\u0003KRZ\u0003FHQWUDO\u0003SURFHVVRUV\u0003HYROYHG\u0003LQ\u0003ERWK\u0003FORFN\u0003VSHHGV\u0003 DQG\u0003FRUH\u0003FRXQW\u0011\u0003,Q\u0003WKH\u0003PHDQWLPH\u000f\u0003WKH\u0003VWDWH\u0003RI\u0003JUDSKLFV\u0003SURFHVVLQJ\u0003XQGHUZHQW\u0003D\u0003 GUDPDWLF\u0003UHYROXWLRQ\u0011\u0003,Q\u0003WKH\u0003ODWH\u0003\u0014 \u001b\u0013V\u0003DQG\u0003HDUO\\\u0003\u0014 \u0013V\u000f\u0003WKH\u0003JURZWK\u0003LQ\u0003SRSXODULW\\\u0003RI\u0003 JUDSKLFDOO\\\u0003GULYHQ\u0003RSHUDWLQJ\u0003V\\VWHPV\u0003VXFK\u0003DV\u00030LFURVRIW\u0003:LQGRZV\u0003KHOSHG\u0003FUHDWH\u0003 D\u0003PDUNHW\u0003IRU\u0003D\u0003QHZ\u0003W\\SH\u0003RI\u0003SURFHVVRU\u0011\u0003,Q\u0003WKH\u0003HDUO\\\u0003\u0014 \u0013V\u000f\u0003XVHUV\u0003EHJDQ\u0003SXUFKDVLQJ\u0003 \u0015'\u0003GLVSOD\\\u0003DFFHOHUDWRUV\u0003IRU\u0003WKHLU\u0003SHUVRQDO\u0003FRPSXWHUV\u0011\u00037KHVH\u0003GLVSOD\\\u0003DFFHOHUDWRUV\u0003 RIIHUHG\u0003KDUGZDUH\u0010DVVLVWHG\u0003ELWPDS\u0003RSHUDWLRQV\u0003WR\u0003DVVLVW\u0003LQ\u0003WKH\u0003GLVSOD\\\u0003DQG\u0003XVDELOLW\\\u0003 RI\u0003JUDSKLFDO\u0003RSHUDWLQJ\u0003V\\VWHPV\u0011 $URXQG\u0003WKH\u0003VDPH\u0003WLPH\u000f\u0003LQ\u0003WKH\u0003ZRUOG\u0003RI\u0003SURIHVVLRQDO\u0003FRPSXWLQJ\u000f\u0003D\u0003FRPSDQ\\\u0003E\\\u0003 WKH\u0003QDPH\u0003RI\u00036LOLFRQ\u0003*UDSKLFV\u0003VSHQW\u0003WKH\u0003\u0014 \u001b\u0013V\u0003SRSXODUL]LQJ\u0003WKH\u0003XVH\u0003RI\u0003WKUHH\u0010 GLPHQVLRQDO\u0003JUDSKLFV\u0003LQ\u0003D\u0003YDULHW\\\u0003RI\u0003PDUNHWV\u000f\u0003LQFOXGLQJ\u0003JRYHUQPHQW\u0003DQG\u0003GHIHQVH\u0003 DSSOLFDWLRQV\u0003DQG\u0003VFLHQWL\u020cF\u0003DQG\u0003WHFKQLFDO\u0003YLVXDOL]DWLRQ\u000f\u0003DV\u0003ZHOO\u0003DV\u0003SURYLGLQJ\u0003WKH\u0003 WRROV\u0003WR\u0003FUHDWH\u0003VWXQQLQJ\u0003FLQHPDWLF\u0003HIIHFWV\u0011\u0003,Q\u0003\u0014 \u0015\u000f\u00036LOLFRQ\u0003*UDSKLFV\u0003RSHQHG\u0003WKH\u0003 SURJUDPPLQJ\u0003LQWHUIDFH\u0003WR\u0003LWV\u0003KDUGZDUH\u0003E\\\u0003UHOHDVLQJ\u0003WKH\u00032SHQ*/\u0003OLEUDU\\\u0011\u00036LOLFRQ\u0003 *UDSKLFV\u0003LQWHQGHG\u00032SHQ*/\u0003WR\u0003EH\u0003XVHG\u0003DV\u0003D\u0003VWDQGDUGL]HG\u000f\u0003SODWIRUP\u0010LQGHSHQGHQW\u0003 PHWKRG\u0003IRU\u0003ZULWLQJ\u0003\u0016'\u0003JUDSKLFV\u0003DSSOLFDWLRQV\u0011\u0003$V\u0003ZLWK\u0003SDUDOOHO\u0003SURFHVVLQJ\u0003DQG\u0003 &38V\u000f\u0003LW\u0003ZRXOG\u0003RQO\\\u0003EH\u0003D\u0003PDWWHU\u0003RI\u0003WLPH\u0003EHIRUH\u0003WKH\u0003WHFKQRORJLHV\u0003IRXQG\u0003WKHLU\u0003ZD\\\u0003 LQWR\u0003FRQVXPHU\u0003DSSOLFDWLRQV\u0011 %\\\u0003WKH\u0003PLG\u0010\u0014 \u0013V\u000f\u0003WKH\u0003GHPDQG\u0003IRU\u0003FRQVXPHU\u0003DSSOLFDWLRQV\u0003HPSOR\\LQJ\u0003\u0016'\u0003JUDSKLFV\u0003 KDG\u0003HVFDODWHG\u0003UDSLGO\\\u000f\u0003VHWWLQJ\u0003WKH\u0003VWDJH\u0003IRU\u0003WZR\u0003IDLUO\\\u0003VLJQL\u020cFDQW\u0003GHYHORSPHQWV\u0011\u0003 )LUVW\u000f\u0003WKH\u0003UHOHDVH\u0003RI\u0003LPPHUVLYH\u000f\u0003\u020cUVW\u0010SHUVRQ\u0003JDPHV\u0003VXFK\u0003DV\u0003'RRP\u000f\u0003'XNH\u00031XNHP\u0003 \u0016'\u000f\u0003DQG\u00034XDNH\u0003KHOSHG\u0003LJQLWH\u0003D\u0003TXHVW\u0003WR\u0003FUHDWH\u0003SURJUHVVLYHO\\\u0003PRUH\u0003UHDOLVWLF\u0003\u0016'\u0003HQYL - URQPHQWV\u0003IRU\u00033&\u0003JDPLQJ\u0011\u0003$OWKRXJK\u0003\u0016'\u0003JUDSKLFV\u0003ZRXOG\u0003HYHQWXDOO\\\u0003ZRUN\u0003WKHLU\u0003ZD\\\u0003 LQWR\u0003QHDUO\\\u0003DOO\u0003FRPSXWHU\u0003JDPHV\u000f\u0003WKH\u0003SRSXODULW\\\u0003RI\u0003WKH\u0003QDVFHQW\u0003\u020cUVW\u0010SHUVRQ\u0003VKRRWHU\u0003 JHQUH\u0003ZRXOG\u0003VLJQL\u020cFDQWO\\\u0003DFFHOHUDWH\u0003WKH\u0003DGRSWLRQ\u0003RI\u0003\u0016'\u0003JUDSKLFV\u0003LQ\u0003FRQVXPHU\u0003 FRPSXWLQJ\u0011\u0003$W\u0003WKH\u0003VDPH\u0003WLPH\u000f\u0003FRPSDQLHV\u0003VXFK\u0003DV\u000319,',$\u000f\u0003$7,\u00037HFKQRORJLHV\u000f\u0003 DQG\u0003\u0016GI[\u0003,QWHUDFWLYH\u0003EHJDQ\u0003UHOHDVLQJ\u0003JUDSKLFV\u0003DFFHOHUDWRUV\u0003WKDW\u0003ZHUH\u0003 \u0003DIIRUGDEOH\u0003 Download from www.wowebook.comptg /five.lf\u0014\u0011\u0016\u00037+(\u00035,6(\u00032)\u0003*38\u0003&20387,1*HQRXJK\u0003WR\u0003DWWUDFW\u0003ZLGHVSUHDG\u0003DWWHQWLRQ\u0011\u00037KHVH\u0003GHYHORSPHQWV\u0003FHPHQWHG\u0003\u0016'\u0003 JUDSKLFV\u0003DV\u0003D\u0003WHFKQRORJ\\\u0003WKDW\u0003ZRXOG\u0003\u020cJXUH\u0003SURPLQHQWO\\\u0003IRU\u0003\\HDUV\u0003WR\u0003FRPH\u0011 7KH\u0003UHOHDVH\u0003RI\u000319,',$\u01e2V\u0003*H)RUFH\u0003\u0015\u0018\u0019\u0003IXUWKHU\u0003SXVKHG\u0003WKH\u0003FDSDELOLWLHV\u0003RI\u0003FRQVXPHU\u0003 JUDSKLFV\u0003KDUGZDUH\u0011\u0003)RU\u0003WKH\u0003\u020cUVW\u0003WLPH\u000f\u0003WUDQVIRUP\u0003DQG\u0003OLJKWLQJ\u0003FRPSXWDWLRQV\u0003FRXOG\u0003 EH\u0003SHUIRUPHG\u0003GLUHFWO\\\u0003RQ\u0003WKH\u0003JUDSKLFV\u0003SURFHVVRU\u000f\u0003WKHUHE\\\u0003HQKDQFLQJ\u0003WKH\u0003SRWHQWLDO\u0003 IRU\u0003HYHQ\u0003PRUH\u0003YLVXDOO\\\u0003LQWHUHVWLQJ\u0003DSSOLFDWLRQV\u0011\u00036LQFH\u0003WUDQVIRUP\u0003DQG\u0003OLJKWLQJ\u0003ZHUH\u0003 DOUHDG\\\u0003LQWHJUDO\u0003SDUWV\u0003RI\u0003WKH\u00032SHQ*/\u0003JUDSKLFV\u0003SLSHOLQH\u000f\u0003WKH\u0003*H)RUFH\u0003\u0015\u0018\u0019\u0003PDUNHG\u0003 WKH\u0003EHJLQQLQJ\u0003RI\u0003D\u0003QDWXUDO\u0003SURJUHVVLRQ\u0003ZKHUH\u0003LQFUHDVLQJO\\\u0003PRUH\u0003RI\u0003WKH\u0003JUDSKLFV\u0003 SLSHOLQH\u0003ZRXOG\u0003EH\u0003LPSOHPHQWHG\u0003GLUHFWO\\\u0003RQ\u0003WKH\u0003JUDSKLFV\u0003SURFHVVRU\u0011\u0003 )URP\u0003D\u0003SDUDOOHO\u0010FRPSXWLQJ\u0003VWDQGSRLQW\u000f\u000319,',$\u01e2V\u0003UHOHDVH\u0003RI\u0003WKH\u0003*H)RUFH\u0003\u0016\u0003VHULHV\u0003 LQ\u0003\u0015\u0013\u0013\u0014\u0003UHSUHVHQWV\u0003DUJXDEO\\\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003EUHDNWKURXJK\u0003LQ\u0003*38\u0003WHFKQRORJ\\\u0011\u0003 7KH\u0003*H)RUFH\u0003\u0016\u0003VHULHV\u0003ZDV\u0003WKH\u0003FRPSXWLQJ\u0003LQGXVWU\\\u01e2V\u0003\u020cUVW\u0003FKLS\u0003WR\u0003LPSOHPHQW\u0003 0LFURVRIW\u01e2V\u0003WKHQ\u0010QHZ\u0003'LUHFW;\u0003\u001b\u0011\u0013\u0003VWDQGDUG\u0011\u00037KLV\u0003VWDQGDUG\u0003UHTXLUHG\u0003WKDW\u0003FRPSOLDQW\u0003 KDUGZDUH\u0003FRQWDLQ\u0003ERWK\u0003SURJUDPPDEOH\u0003YHUWH[\u0003DQG\u0003SURJUDPPDEOH\u0003SL[HO\u0003VKDGLQJ\u0003 VWDJHV\u0011\u0003)RU\u0003WKH\u0003\u020cUVW\u0003WLPH\u000f\u0003GHYHORSHUV\u0003KDG\u0003VRPH\u0003FRQWURO\u0003RYHU\u0003WKH\u0003H[DFW\u0003FRPSXWD - WLRQV\u0003WKDW\u0003ZRXOG\u0003EH\u0003SHUIRUPHG\u0003RQ\u0003WKHLU\u0003*38V\u0011\u0003 EARLY GP U COMPUTING \u0014\u0011\u0016\u0011\u0015\u0003 7KH\u0003UHOHDVH\u0003RI\u0003*38V\u0003WKDW\u0003SRVVHVVHG\u0003SURJUDPPDEOH\u0003SLSHOLQHV\u0003DWWUDFWHG\u0003PDQ\\\u0003 UHVHDUFKHUV\u0003WR\u0003WKH\u0003SRVVLELOLW\\\u0003RI\u0003XVLQJ\u0003JUDSKLFV\u0003KDUGZDUH\u0003IRU\u0003PRUH\u0003WKDQ\u0003VLPSO\\\u0003 2SHQ*/\u0010\u0003RU\u0003'LUHFW;\u0010EDVHG\u0003UHQGHULQJ\u0011\u00037KH\u0003JHQHUDO\u0003DSSURDFK\u0003LQ\u0003WKH\u0003HDUO\\\u0003GD\\V\u0003RI\u0003 *38\u0003FRPSXWLQJ\u0003ZDV\u0003H[WUDRUGLQDULO\\\u0003FRQYROXWHG\u0011\u0003%HFDXVH\u0003VWDQGDUG\u0003JUDSKLFV\u0003$3,V\u0003 VXFK\u0003DV\u00032SHQ*/\u0003DQG\u0003'LUHFW;\u0003ZHUH\u0003VWLOO\u0003WKH\u0003RQO\\\u0003ZD\\\u0003WR\u0003LQWHUDFW\u0003ZLWK\u0003D\u0003*38\u000f\u0003DQ\\\u0003 DWWHPSW\u0003WR\u0003SHUIRUP\u0003DUELWUDU\\\u0003FRPSXWDWLRQV\u0003RQ\u0003D\u0003*38\u0003ZRXOG\u0003VWLOO\u0003EH\u0003VXEMHFW\u0003WR\u0003WKH\u0003 FRQVWUDLQWV\u0003RI\u0003SURJUDPPLQJ\u0003ZLWKLQ\u0003D\u0003JUDSKLFV\u0003$3,\u0011\u0003%HFDXVH\u0003RI\u0003WKLV\u000f\u0003UHVHDUFKHUV\u0003 H[SORUHG\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQ\u0003WKURXJK\u0003JUDSKLFV\u0003$3,V\u0003E\\\u0003WU\\LQJ\u0003WR\u0003PDNH\u0003 WKHLU\u0003SUREOHPV\u0003DSSHDU\u0003WR\u0003WKH\u0003*38\u0003WR\u0003EH\u0003WUDGLWLRQDO\u0003UHQGHULQJ\u0011\u0003 (VVHQWLDOO\\\u000f\u0003WKH\u0003*38V\u0003RI\u0003WKH\u0003HDUO\\\u0003\u0015\u0013\u0013\u0013V\u0003ZHUH\u0003GHVLJQHG\u0003WR\u0003SURGXFH\u0003D\u0003FRORU\u0003IRU\u0003 HYHU\\\u0003SL[HO\u0003RQ\u0003WKH\u0003VFUHHQ\u0003XVLQJ\u0003SURJUDPPDEOH\u0003DULWKPHWLF\u0003XQLWV\u0003NQRZQ\u0003DV\u0003 pixel shaders \u0011\u0003,Q\u0003JHQHUDO\u000f\u0003D\u0003SL[HO\u0003VKDGHU\u0003XVHV\u0003LWV\u0003 (x,y)\u0003SRVLWLRQ\u0003RQ\u0003WKH\u0003VFUHHQ\u0003DV\u0003ZHOO\u0003 DV\u0003VRPH\u0003DGGLWLRQDO\u0003LQIRUPDWLRQ\u0003WR\u0003FRPELQH\u0003YDULRXV\u0003LQSXWV\u0003LQ\u0003FRPSXWLQJ\u0003D\u0003\u020cQDO\u0003 FRORU\u0011\u00037KH\u0003DGGLWLRQDO\u0003LQIRUPDWLRQ\u0003FRXOG\u0003EH\u0003LQSXW\u0003FRORUV\u000f\u0003WH[WXUH\u0003FRRUGLQDWHV\u000f\u0003RU\u0003 RWKHU\u0003DWWULEXWHV\u0003WKDW\u0003ZRXOG\u0003EH\u0003SDVVHG\u0003WR\u0003WKH\u0003VKDGHU\u0003ZKHQ\u0003LW\u0003UDQ\u0011\u0003%XW\u0003EHFDXVH\u0003 WKH\u0003DULWKPHWLF\u0003EHLQJ\u0003SHUIRUPHG\u0003RQ\u0003WKH\u0003LQSXW\u0003FRORUV\u0003DQG\u0003WH[WXUHV\u0003ZDV\u0003FRPSOHWHO\\\u0003 FRQWUROOHG\u0003E\\\u0003WKH\u0003SURJUDPPHU\u000f\u0003UHVHDUFKHUV\u0003REVHUYHG\u0003WKDW\u0003WKHVH\u0003LQSXW\u0003\u01e4FRORUV\u01e5\u0003 FRXOG\u0003DFWXDOO\\\u0003EH\u0003 any\u0003GDWD\u0011\u0003 Download from www.wowebook.comptg:+<\u0003&8'$\"\u0003: +<\u000312:\" /six.lf6R\u0003LI\u0003WKH\u0003LQSXWV\u0003ZHUH\u0003DFWXDOO\\\u0003QXPHULFDO\u0003GDWD\u0003VLJQLI\\LQJ\u0003VRPHWKLQJ\u0003RWKHU\u0003WKDQ\u0003 FRORU\u000f\u0003SURJUDPPHUV\u0003FRXOG\u0003WKHQ\u0003SURJUDP\u0003WKH\u0003SL[HO\u0003VKDGHUV\u0003WR\u0003SHUIRUP\u0003DUELWUDU\\\u0003 FRPSXWDWLRQV\u0003RQ\u0003WKLV\u0003GDWD\u0011\u00037KH\u0003UHVXOWV\u0003ZRXOG\u0003EH\u0003KDQGHG\u0003EDFN\u0003WR\u0003WKH\u0003*38\u0003DV\u0003WKH\u0003 \u020cQDO\u0003SL[HO\u0003\u01e4FRORU\u000f\u01e5\u0003DOWKRXJK\u0003WKH\u0003FRORUV\u0003ZRXOG\u0003VLPSO\\\u0003EH\u0003WKH\u0003UHVXOW\u0003RI\u0003ZKDWHYHU\u0003 FRPSXWDWLRQV\u0003WKH\u0003SURJUDPPHU\u0003KDG\u0003LQVWUXFWHG\u0003WKH\u0003*38\u0003WR\u0003SHUIRUP\u0003RQ\u0003WKHLU\u0003LQSXWV\u0011\u0003 7KLV\u0003GDWD\u0003FRXOG\u0003EH\u0003UHDG\u0003EDFN\u0003E\\\u0003WKH\u0003UHVHDUFKHUV\u000f\u0003DQG\u0003WKH\u0003*38\u0003ZRXOG\u0003QHYHU\u0003EH\u0003WKH\u0003 ZLVHU\u0011\u0003,Q\u0003HVVHQFH\u000f\u0003WKH\u0003*38\u0003ZDV\u0003EHLQJ\u0003WULFNHG\u0003LQWR\u0003SHUIRUPLQJ\u0003QRQUHQGHULQJ\u0003WDVNV\u0003 E\\\u0003PDNLQJ\u0003WKRVH\u0003WDVNV\u0003DSSHDU\u0003DV\u0003LI\u0003WKH\\\u0003ZHUH\u0003D\u0003VWDQGDUG\u0003UHQGHULQJ\u0011\u00037KLV\u0003WULFNHU\\\u0003 ZDV\u0003YHU\\\u0003FOHYHU\u0003EXW\u0003DOVR\u0003YHU\\\u0003FRQYROXWHG\u0011 %HFDXVH\u0003RI\u0003WKH\u0003KLJK\u0003DULWKPHWLF\u0003WKURXJKSXW\u0003RI\u0003*38V\u000f\u0003LQLWLDO\u0003UHVXOWV\u0003IURP\u0003WKHVH\u0003 H[SHULPHQWV\u0003SURPLVHG\u0003D\u0003EULJKW\u0003IXWXUH\u0003IRU\u0003*38\u0003FRPSXWLQJ\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003SURJUDP - PLQJ\u0003PRGHO\u0003ZDV\u0003VWLOO\u0003IDU\u0003WRR\u0003UHVWULFWLYH\u0003IRU\u0003DQ\\\u0003FULWLFDO\u0003PDVV\u0003RI\u0003GHYHORSHUV\u0003WR\u0003 IRUP\u0011\u00037KHUH\u0003ZHUH\u0003WLJKW\u0003UHVRXUFH\u0003FRQVWUDLQWV\u000f\u0003VLQFH\u0003SURJUDPV\u0003FRXOG\u0003UHFHLYH\u0003LQSXW\u0003 GDWD\u0003RQO\\\u0003IURP\u0003D\u0003KDQGIXO\u0003RI\u0003LQSXW\u0003FRORUV\u0003DQG\u0003D\u0003KDQGIXO\u0003RI\u0003WH[WXUH\u0003XQLWV\u0011\u00037KHUH\u0003 ZHUH\u0003VHULRXV\u0003OLPLWDWLRQV\u0003RQ\u0003KRZ\u0003DQG\u0003ZKHUH\u0003WKH\u0003SURJUDPPHU\u0003FRXOG\u0003ZULWH\u0003UHVXOWV\u0003 WR\u0003PHPRU\\\u000f\u0003VR\u0003DOJRULWKPV\u0003UHTXLULQJ\u0003WKH\u0003DELOLW\\\u0003WR\u0003ZULWH\u0003WR\u0003DUELWUDU\\\u0003ORFDWLRQV\u0003LQ\u0003 PHPRU\\\u0003 VFDWWHU \u0003FRXOG\u0003QRW\u0003UXQ\u0003RQ\u0003D\u0003*38\u0011\u00030RUHRYHU\u000f\u0003LW\u0003ZDV\u0003QHDUO\\\u0003LPSRVVLEOH\u0003WR\u0003 SUHGLFW\u0003KRZ\u0003\\RXU\u0003SDUWLFXODU\u0003*38\u0003ZRXOG\u0003GHDO\u0003ZLWK\u0003\u020dRDWLQJ\u0010SRLQW\u0003GDWD\u000f\u0003LI\u0003LW\u0003KDQGOHG\u0003 \u020dRDWLQJ\u0010SRLQW\u0003GDWD\u0003DW\u0003DOO\u000f\u0003VR\u0003PRVW\u0003VFLHQWL\u020cF\u0003FRPSXWDWLRQV\u0003ZRXOG\u0003EH\u0003XQDEOH\u0003WR\u0003 XVH\u0003D\u0003*38\u0011\u0003)LQDOO\\\u000f\u0003ZKHQ\u0003WKH\u0003SURJUDP\u0003LQHYLWDEO\\\u0003FRPSXWHG\u0003WKH\u0003LQFRUUHFW\u0003UHVXOWV\u000f\u0003 IDLOHG\u0003WR\u0003WHUPLQDWH\u000f\u0003RU\u0003VLPSO\\\u0003KXQJ\u0003WKH\u0003PDFKLQH\u000f\u0003WKHUH\u0003H[LVWHG\u0003QR\u0003UHDVRQDEO\\\u0003JRRG\u0003 PHWKRG\u0003WR\u0003GHEXJ\u0003DQ\\\u0003FRGH\u0003WKDW\u0003ZDV\u0003EHLQJ\u0003H[HFXWHG\u0003RQ\u0003WKH\u0003*38\u0011\u0003 $V\u0003LI\u0003WKH\u0003OLPLWDWLRQV\u0003ZHUHQ\u01e2W\u0003VHYHUH\u0003HQRXJK\u000f\u0003DQ\\RQH\u0003ZKR\u0003 still\u0003ZDQWHG\u0003WR\u0003XVH\u0003D\u0003*38\u0003 WR\u0003SHUIRUP\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQV\u0003ZRXOG\u0003QHHG\u0003WR\u0003OHDUQ\u00032SHQ*/\u0003RU\u0003'LUHFW;\u0003 VLQFH\u0003WKHVH\u0003UHPDLQHG\u0003WKH\u0003RQO\\\u0003PHDQV\u0003E\\\u0003ZKLFK\u0003RQH\u0003FRXOG\u0003LQWHUDFW\u0003ZLWK\u0003D\u0003*38\u0011\u00031RW\u0003 RQO\\\u0003GLG\u0003WKLV\u0003PHDQ\u0003VWRULQJ\u0003GDWD\u0003LQ\u0003JUDSKLFV\u0003WH[WXUHV\u0003DQG\u0003H[HFXWLQJ\u0003FRPSXWDWLRQV\u0003 E\\\u0003FDOOLQJ\u00032SHQ*/\u0003RU\u0003'LUHFW;\u0003IXQFWLRQV\u000f\u0003EXW\u0003LW\u0003PHDQW\u0003ZULWLQJ\u0003WKH\u0003FRPSXWDWLRQV\u0003 WKHPVHOYHV\u0003LQ\u0003VSHFLDO\u0003JUDSKLFV\u0010RQO\\\u0003SURJUDPPLQJ\u0003ODQJXDJHV\u0003NQRZQ\u0003DV\u0003 shading languages \u0011\u0003$VNLQJ\u0003UHVHDUFKHUV\u0003WR\u0003ERWK\u0003FRSH\u0003ZLWK\u0003VHYHUH\u0003UHVRXUFH\u0003DQG\u0003SURJUDP - PLQJ\u0003UHVWULFWLRQV\u0003DV\u0003ZHOO\u0003DV\u0003WR\u0003OHDUQ\u0003FRPSXWHU\u0003JUDSKLFV\u0003DQG\u0003VKDGLQJ\u0003ODQJXDJHV\u0003 EHIRUH\u0003DWWHPSWLQJ\u0003WR\u0003KDUQHVV\u0003WKH\u0003FRPSXWLQJ\u0003SRZHU\u0003RI\u0003WKHLU\u0003*38\u0003SURYHG\u0003WRR\u0003ODUJH\u0003 D\u0003KXUGOH\u0003IRU\u0003ZLGH\u0003DFFHSWDQFH\u0011 CUDA \u0014\u0011\u0017\u0003 ,W\u0003ZRXOG\u0003QRW\u0003EH\u0003XQWLO\u0003\u020cYH\u0003\\HDUV\u0003DIWHU\u0003WKH\u0003UHOHDVH\u0003RI\u0003WKH\u0003*H)RUFH\u0003\u0016\u0003VHULHV\u0003WKDW\u0003*38\u0003 FRPSXWLQJ\u0003ZRXOG\u0003EH\u0003UHDG\\\u0003IRU\u0003SULPH\u0003WLPH\u0011\u0003,Q\u00031RYHPEHU\u0003\u0015\u0013\u0013\u0019\u000f\u000319,',$\u0003XQYHLOHG\u0003WKH\u0003 Download from www.wowebook.comptg /seven.lf\u0014\u0011\u0017\u0003&8'$LQGXVWU\\\u01e2V\u0003\u020cUVW\u0003'LUHFW;\u0003\u0014\u0013\u0003*38\u000f\u0003WKH\u0003*H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7;\u0011\u00037KH\u0003*H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7;\u0003ZDV\u0003 DOVR\u0003WKH\u0003\u020cUVW\u0003*38\u0003WR\u0003EH\u0003EXLOW\u0003ZLWK\u000319,',$\u01e2V\u0003&8'$\u0003$UFKLWHFWXUH\u0011\u00037KLV\u0003DUFKLWHFWXUH\u0003 LQFOXGHG\u0003VHYHUDO\u0003QHZ\u0003FRPSRQHQWV\u0003GHVLJQHG\u0003VWULFWO\\\u0003IRU\u0003*38\u0003FRPSXWLQJ\u0003DQG\u0003DLPHG\u0003 WR\u0003DOOHYLDWH\u0003PDQ\\\u0003RI\u0003WKH\u0003OLPLWDWLRQV\u0003WKDW\u0003SUHYHQWHG\u0003SUHYLRXV\u0003JUDSKLFV\u0003SURFHVVRUV\u0003 IURP\u0003EHLQJ\u0003OHJLWLPDWHO\\\u0003XVHIXO\u0003IRU\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQ\u0011 :+$7\u0003,6\u00037+(\u0003&8'$\u0003$5&+,7(&785(\" \u0014\u0011\u0017\u0011\u0014\u0003 8QOLNH\u0003SUHYLRXV\u0003JHQHUDWLRQV\u0003WKDW\u0003SDUWLWLRQHG\u0003FRPSXWLQJ\u0003UHVRXUFHV\u0003LQWR\u0003YHUWH[\u0003 DQG\u0003SL[HO\u0003VKDGHUV\u000f\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003LQFOXGHG\u0003D\u0003XQL\u020cHG\u0003VKDGHU\u0003SLSHOLQH\u000f\u0003 DOORZLQJ\u0003HDFK\u0003DQG\u0003HYHU\\\u0003DULWKPHWLF\u0003ORJLF\u0003XQLW\u0003 $/8 \u0003RQ\u0003WKH\u0003FKLS\u0003WR\u0003EH\u0003PDUVKDOHG\u0003 E\\\u0003D\u0003SURJUDP\u0003LQWHQGLQJ\u0003WR\u0003SHUIRUP\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQV\u0011\u0003%HFDXVH\u0003 19,',$\u0003LQWHQGHG\u0003WKLV\u0003QHZ\u0003IDPLO\\\u0003RI\u0003JUDSKLFV\u0003SURFHVVRUV\u0003WR\u0003EH\u0003XVHG\u0003IRU\u0003JHQHUDO\u0010 SXUSRVH\u0003FRPSXWLQJ\u000f\u0003WKHVH\u0003$/8V\u0003ZHUH\u0003EXLOW\u0003WR\u0003FRPSO\\\u0003ZLWK\u0003,(((\u0003UHTXLUHPHQWV\u0003IRU\u0003 VLQJOH\u0010SUHFLVLRQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003DULWKPHWLF\u0003DQG\u0003ZHUH\u0003GHVLJQHG\u0003WR\u0003XVH\u0003DQ\u0003LQVWUXF - WLRQ\u0003VHW\u0003WDLORUHG\u0003IRU\u0003JHQHUDO\u0003FRPSXWDWLRQ\u0003UDWKHU\u0003WKDQ\u0003VSHFL\u020cFDOO\\\u0003IRU\u0003JUDSKLFV\u0011\u0003 )XUWKHUPRUH\u000f\u0003WKH\u0003H[HFXWLRQ\u0003XQLWV\u0003RQ\u0003WKH\u0003*38\u0003ZHUH\u0003DOORZHG\u0003DUELWUDU\\\u0003UHDG\u0003DQG\u0003 ZULWH\u0003DFFHVV\u0003WR\u0003PHPRU\\\u0003DV\u0003ZHOO\u0003DV\u0003DFFHVV\u0003WR\u0003D\u0003VRIWZDUH\u0010PDQDJHG\u0003FDFKH\u0003NQRZQ\u0003 DV\u0003shared memory \u0011\u0003$OO\u0003RI\u0003WKHVH\u0003IHDWXUHV\u0003RI\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003ZHUH\u0003DGGHG\u0003LQ\u0003 RUGHU\u0003WR\u0003FUHDWH\u0003D\u0003*38\u0003WKDW\u0003ZRXOG\u0003H[FHO\u0003DW\u0003FRPSXWDWLRQ\u0003LQ\u0003DGGLWLRQ\u0003WR\u0003SHUIRUPLQJ\u0003 ZHOO\u0003DW\u0003WUDGLWLRQDO\u0003JUDSKLFV\u0003WDVNV\u0011 86,1*\u00037+(\u0003&8'$\u0003$5&+,7(&785( \u0014\u0011\u0017\u0011\u0015\u0003 7KH\u0003HIIRUW\u0003E\\\u000319,',$\u0003WR\u0003SURYLGH\u0003FRQVXPHUV\u0003ZLWK\u0003D\u0003SURGXFW\u0003IRU\u0003ERWK\u0003FRPSXWD - WLRQ\u0003DQG\u0003JUDSKLFV\u0003FRXOG\u0003QRW\u0003VWRS\u0003DW\u0003SURGXFLQJ\u0003KDUGZDUH\u0003LQFRUSRUDWLQJ\u0003WKH\u0003&8'$\u0003 $UFKLWHFWXUH\u000f\u0003WKRXJK\u0011\u00035HJDUGOHVV\u0003RI\u0003KRZ\u0003PDQ\\\u0003IHDWXUHV\u000319,',$\u0003DGGHG\u0003WR\u0003LWV\u0003FKLSV\u0003 WR\u0003IDFLOLWDWH\u0003FRPSXWLQJ\u000f\u0003WKHUH\u0003FRQWLQXHG\u0003WR\u0003EH\u0003QR\u0003ZD\\\u0003WR\u0003DFFHVV\u0003WKHVH\u0003IHDWXUHV\u0003 ZLWKRXW\u0003XVLQJ\u00032SHQ*/\u0003RU\u0003'LUHFW;\u0011\u00031RW\u0003RQO\\\u0003ZRXOG\u0003WKLV\u0003KDYH\u0003UHTXLUHG\u0003XVHUV\u0003WR\u0003 FRQWLQXH\u0003WR\u0003GLVJXLVH\u0003WKHLU\u0003FRPSXWDWLRQV\u0003DV\u0003JUDSKLFV\u0003SUREOHPV\u000f\u0003EXW\u0003WKH\\\u0003ZRXOG\u0003 KDYH\u0003QHHGHG\u0003WR\u0003FRQWLQXH\u0003ZULWLQJ\u0003WKHLU\u0003FRPSXWDWLRQV\u0003LQ\u0003D\u0003JUDSKLFV\u0010RULHQWHG\u0003 VKDGLQJ\u0003ODQJXDJH\u0003VXFK\u0003DV\u00032SHQ*/\u01e2V\u0003*/6/\u0003RU\u00030LFURVRIW\u01e2V\u0003+/6/\u0011 7R\u0003UHDFK\u0003WKH\u0003PD[LPXP\u0003QXPEHU\u0003RI\u0003GHYHORSHUV\u0003SRVVLEOH\u000f\u000319,',$\u0003WRRN\u0003LQGXVWU\\\u0010 VWDQGDUG\u0003&\u0003DQG\u0003DGGHG\u0003D\u0003UHODWLYHO\\\u0003VPDOO\u0003QXPEHU\u0003RI\u0003NH\\ZRUGV\u0003LQ\u0003RUGHU\u0003WR\u0003KDUQHVV\u0003 VRPH\u0003RI\u0003WKH\u0003VSHFLDO\u0003IHDWXUHV\u0003RI\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0011\u0003$\u0003IHZ\u0003PRQWKV\u0003DIWHU\u0003 WKH\u0003ODXQFK\u0003RI\u0003WKH\u0003*H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7;\u000f\u000319,',$\u0003PDGH\u0003SXEOLF\u0003D\u0003FRPSLOHU\u0003IRU\u0003WKLV\u0003 ODQJXDJH\u000f\u0003&8'$\u0003&\u0011\u0003$QG\u0003ZLWK\u0003WKDW\u000f\u0003&8'$\u0003&\u0003EHFDPH\u0003WKH\u0003\u020cUVW\u0003ODQJXDJH\u0003VSHFL\u020cFDOO\\\u0003 GHVLJQHG\u0003E\\\u0003D\u0003*38\u0003FRPSDQ\\\u0003WR\u0003IDFLOLWDWH\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWLQJ\u0003RQ\u0003*38V\u0011 Download from www.wowebook.comptg:+<\u0003&8'$\"\u0003: +<\u000312:\" /eight.lf,Q\u0003DGGLWLRQ\u0003WR\u0003FUHDWLQJ\u0003D\u0003ODQJXDJH\u0003WR\u0003ZULWH\u0003FRGH\u0003IRU\u0003WKH\u0003*38\u000f\u000319,',$\u0003DOVR\u0003SURYLGHV\u0003 D\u0003VSHFLDOL]HG\u0003KDUGZDUH\u0003GULYHU\u0003WR\u0003H[SORLW\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u01e2V\u0003PDVVLYH\u0003FRPSX - WDWLRQDO\u0003SRZHU\u0011\u00038VHUV\u0003DUH\u0003QR\u0003ORQJHU\u0003UHTXLUHG\u0003WR\u0003KDYH\u0003DQ\\\u0003NQRZOHGJH\u0003RI\u0003WKH\u0003 2SHQ*/\u0003RU\u0003'LUHFW;\u0003JUDSKLFV\u0003SURJUDPPLQJ\u0003LQWHUIDFHV\u000f\u0003QRU\u0003DUH\u0003WKH\\\u0003UHTXLUHG\u0003WR\u0003 IRUFH\u0003WKHLU\u0003SUREOHP\u0003WR\u0003ORRN\u0003OLNH\u0003D\u0003FRPSXWHU\u0003JUDSKLFV\u0003WDVN\u0011 $SSOLFDWLRQV\u0003RI\u0003&8'$\u0014\u0011\u0018\u0003 6LQFH\u0003LWV\u0003GHEXW\u0003LQ\u0003HDUO\\\u0003\u0015\u0013\u0013\u001a\u000f\u0003D\u0003YDULHW\\\u0003RI\u0003LQGXVWULHV\u0003DQG\u0003DSSOLFDWLRQV\u0003KDYH\u0003HQMR\\HG\u0003 D\u0003JUHDW\u0003GHDO\u0003RI\u0003VXFFHVV\u0003E\\\u0003FKRRVLQJ\u0003WR\u0003EXLOG\u0003DSSOLFDWLRQV\u0003LQ\u0003&8'$\u0003&\u0011\u00037KHVH\u0003 EHQH\u020cWV\u0003RIWHQ\u0003LQFOXGH\u0003RUGHUV\u0010RI\u0010PDJQLWXGH\u0003SHUIRUPDQFH\u0003LPSURYHPHQW\u0003RYHU\u0003WKH\u0003 SUHYLRXV\u0003VWDWH\u0010RI\u0010WKH\u0010DUW\u0003LPSOHPHQWDWLRQV\u0011\u0003)XUWKHUPRUH\u000f\u0003DSSOLFDWLRQV\u0003UXQQLQJ\u0003RQ\u0003 19,',$\u0003JUDSKLFV\u0003SURFHVVRUV\u0003HQMR\\\u0003VXSHULRU\u0003SHUIRUPDQFH\u0003SHU\u0003GROODU\u0003DQG\u0003SHUIRU - PDQFH\u0003SHU\u0003ZDWW\u0003WKDQ\u0003LPSOHPHQWDWLRQV\u0003EXLOW\u0003H[FOXVLYHO\\\u0003RQ\u0003WUDGLWLRQDO\u0003FHQWUDO\u0003 SURFHVVLQJ\u0003WHFKQRORJLHV\u0011\u00037KH\u0003IROORZLQJ\u0003UHSUHVHQW\u0003MXVW\u0003D\u0003IHZ\u0003RI\u0003WKH\u0003ZD\\V\u0003LQ\u0003ZKLFK\u0003 SHRSOH\u0003KDYH\u0003SXW\u0003&8'$\u0003&\u0003DQG\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003LQWR\u0003VXFFHVVIXO\u0003XVH\u0011 MEDICAL IM AGING \u0014\u0011\u0018\u0011\u0014\u0003 7KH\u0003QXPEHU\u0003RI\u0003SHRSOH\u0003ZKR\u0003KDYH\u0003EHHQ\u0003DIIHFWHG\u0003E\\\u0003WKH\u0003WUDJHG\\\u0003RI\u0003EUHDVW\u0003FDQFHU\u0003KDV\u0003 GUDPDWLFDOO\\\u0003ULVHQ\u0003RYHU\u0003WKH\u0003FRXUVH\u0003RI\u0003WKH\u0003SDVW\u0003\u0015\u0013\u0003\\HDUV\u0011\u00037KDQNV\u0003LQ\u0003D\u0003ODUJH\u0003SDUW\u0003WR\u0003 WKH\u0003WLUHOHVV\u0003HIIRUWV\u0003RI\u0003PDQ\\\u000f\u0003DZDUHQHVV\u0003DQG\u0003UHVHDUFK\u0003LQWR\u0003SUHYHQWLQJ\u0003DQG\u0003FXULQJ\u0003 WKLV\u0003WHUULEOH\u0003GLVHDVH\u0003KDV\u0003VLPLODUO\\\u0003ULVHQ\u0003LQ\u0003UHFHQW\u0003\\HDUV\u0011\u00038OWLPDWHO\\\u000f\u0003HYHU\\\u0003FDVH\u0003RI\u0003 EUHDVW\u0003FDQFHU\u0003VKRXOG\u0003EH\u0003FDXJKW\u0003HDUO\\\u0003HQRXJK\u0003WR\u0003SUHYHQW\u0003WKH\u0003UDYDJLQJ\u0003VLGH\u0003HIIHFWV\u0003 RI\u0003UDGLDWLRQ\u0003DQG\u0003FKHPRWKHUDS\\\u000f\u0003WKH\u0003SHUPDQHQW\u0003UHPLQGHUV\u0003OHIW\u0003E\\\u0003VXUJHU\\\u000f\u0003DQG\u0003 WKH\u0003GHDGO\\\u0003FRQVHTXHQFHV\u0003LQ\u0003FDVHV\u0003WKDW\u0003IDLO\u0003WR\u0003UHVSRQG\u0003WR\u0003WUHDWPHQW\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003 UHVHDUFKHUV\u0003VKDUH\u0003D\u0003VWURQJ\u0003GHVLUH\u0003WR\u0003\u020cQG\u0003IDVW\u000f\u0003DFFXUDWH\u000f\u0003DQG\u0003PLQLPDOO\\\u0003LQYDVLYH\u0003 ZD\\V\u0003WR\u0003LGHQWLI\\\u0003WKH\u0003HDUO\\\u0003VLJQV\u0003RI\u0003EUHDVW\u0003FDQFHU\u0011 7KH\u0003PDPPRJUDP\u000f\u0003RQH\u0003RI\u0003WKH\u0003FXUUHQW\u0003EHVW\u0003WHFKQLTXHV\u0003IRU\u0003WKH\u0003HDUO\\\u0003GHWHFWLRQ\u0003RI\u0003 EUHDVW\u0003FDQFHU\u000f\u0003KDV\u0003VHYHUDO\u0003VLJQL\u020cFDQW\u0003OLPLWDWLRQV\u0011\u00037ZR\u0003RU\u0003PRUH\u0003LPDJHV\u0003QHHG\u0003WR\u0003EH\u0003 WDNHQ\u000f\u0003DQG\u0003WKH\u0003\u020cOP\u0003QHHGV\u0003WR\u0003EH\u0003GHYHORSHG\u0003DQG\u0003UHDG\u0003E\\\u0003D\u0003VNLOOHG\u0003GRFWRU\u0003WR\u0003LGHQWLI\\\u0003 SRWHQWLDO\u0003WXPRUV\u0011\u0003$GGLWLRQDOO\\\u000f\u0003WKLV\u0003;\u0010UD\\\u0003SURFHGXUH\u0003FDUULHV\u0003ZLWK\u0003LW\u0003DOO\u0003WKH\u0003ULVNV\u0003RI\u0003 UHSHDWHGO\\\u0003UDGLDWLQJ\u0003D\u0003SDWLHQW\u01e2V\u0003FKHVW\u0011\u0003$IWHU\u0003FDUHIXO\u0003VWXG\\\u000f\u0003GRFWRUV\u0003RIWHQ\u0003UHTXLUH\u0003 IXUWKHU\u000f\u0003PRUH\u0003VSHFL\u020cF\u0003LPDJLQJ\u01dfDQG\u0003HYHQ\u0003ELRSV\\\u01dfLQ\u0003DQ\u0003DWWHPSW\u0003WR\u0003HOLPLQDWH\u0003WKH\u0003 SRVVLELOLW\\\u0003RI\u0003FDQFHU\u0011\u00037KHVH\u0003IDOVH\u0003SRVLWLYHV\u0003LQFXU\u0003H[SHQVLYH\u0003IROORZ\u0010XS\u0003ZRUN\u0003DQG\u0003 FDXVH\u0003XQGXH\u0003VWUHVV\u0003WR\u0003WKH\u0003SDWLHQW\u0003XQWLO\u0003\u020cQDO\u0003FRQFOXVLRQV\u0003FDQ\u0003EH\u0003GUDZQ\u0011\u0003 Download from www.wowebook.comptg /nine.lf\u0014\u0011\u0018\u0003$33/,&$7,216\u00032)\u0003&8'$8OWUDVRXQG\u0003LPDJLQJ\u0003LV\u0003VDIHU\u0003WKDQ\u0003;\u0010UD\\\u0003LPDJLQJ\u000f\u0003VR\u0003GRFWRUV\u0003RIWHQ\u0003XVH\u0003LW\u0003LQ\u0003FRQMXQF - WLRQ\u0003ZLWK\u0003PDPPRJUDSK\\\u0003WR\u0003DVVLVW\u0003LQ\u0003EUHDVW\u0003FDQFHU\u0003FDUH\u0003DQG\u0003GLDJQRVLV\u0011\u0003%XW\u0003FRQYHQ - WLRQDO\u0003EUHDVW\u0003XOWUDVRXQG\u0003KDV\u0003LWV\u0003OLPLWDWLRQV\u0003DV\u0003ZHOO\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u00037HFKQL6FDQ\u00030HGLFDO\u0003 6\\VWHPV\u0003ZDV\u0003ERUQ\u0011\u00037HFKQL6FDQ\u0003KDV\u0003GHYHORSHG\u0003D\u0003SURPLVLQJ\u000f\u0003WKUHH\u0010 \u0003GLPHQVLRQDO\u000f\u0003 XOWUDVRXQG\u0003LPDJLQJ\u0003PHWKRG\u000f\u0003EXW\u0003LWV\u0003VROXWLRQ\u0003KDG\u0003QRW\u0003EHHQ\u0003SXW\u0003LQWR\u0003SUDFWLFH\u0003IRU\u0003D\u0003 YHU\\\u0003VLPSOH\u0003UHDVRQ \u0003FRPSXWDWLRQ\u0003OLPLWDWLRQV\u0011\u00036LPSO\\\u0003SXW\u000f\u0003FRQYHUWLQJ\u0003WKH\u0003JDWKHUHG\u0003 XOWUDVRXQG\u0003GDWD\u0003LQWR\u0003WKH\u0003WKUHH\u0010GLPHQVLRQDO\u0003LPDJHU\\\u0003UHTXLUHG\u0003FRPSXWDWLRQ\u0003FRQVLG - HUHG\u0003SURKLELWLYHO\\\u0003WLPH\u0010FRQVXPLQJ\u0003DQG\u0003H[SHQVLYH\u0003IRU\u0003SUDFWLFDO\u0003XVH\u0011 7KH\u0003LQWURGXFWLRQ\u0003RI\u000319,',$\u01e2V\u0003\u020cUVW\u0003*38\u0003EDVHG\u0003RQ\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003DORQJ\u0003ZLWK\u0003 LWV\u0003&8'$\u0003&\u0003SURJUDPPLQJ\u0003ODQJXDJH\u0003SURYLGHG\u0003D\u0003SODWIRUP\u0003RQ\u0003ZKLFK\u00037HFKQL6FDQ\u0003 FRXOG\u0003FRQYHUW\u0003WKH\u0003GUHDPV\u0003RI\u0003LWV\u0003IRXQGHUV\u0003LQWR\u0003UHDOLW\\\u0011\u0003$V\u0003WKH\u0003QDPH\u0003LQGLFDWHV\u000f\u0003LWV\u0003 6YDUD\u0003XOWUDVRXQG\u0003LPDJLQJ\u0003V\\VWHP\u0003XVHV\u0003XOWUDVRQLF\u0003ZDYHV\u0003WR\u0003LPDJH\u0003WKH\u0003SDWLHQW\u01e2V\u0003 FKHVW\u0011\u00037KH\u00037HFKQL6FDQ\u00036YDUD\u0003V\\VWHP\u0003UHOLHV\u0003RQ\u0003WZR\u000319,',$\u00037HVOD\u0003&\u0014\u0013\u0019\u0013\u0003SURFHVVRUV\u0003 LQ\u0003RUGHU\u0003WR\u0003SURFHVV\u0003WKH\u0003\u0016\u0018*%\u0003RI\u0003GDWD\u0003JHQHUDWHG\u0003E\\\u0003D\u0003\u0014\u0018\u0010PLQXWH\u0003VFDQ\u0011\u00037KDQNV\u0003WR\u0003 WKH\u0003FRPSXWDWLRQDO\u0003KRUVHSRZHU\u0003RI\u0003WKH\u00037HVOD\u0003&\u0014\u0013\u0019\u0013\u000f\u0003ZLWKLQ\u0003\u0015\u0013\u0003PLQXWHV\u0003WKH\u0003GRFWRU\u0003 FDQ\u0003PDQLSXODWH\u0003D\u0003KLJKO\\\u0003GHWDLOHG\u000f\u0003WKUHH\u0010GLPHQVLRQDO\u0003LPDJH\u0003RI\u0003WKH\u0003ZRPDQ\u01e2V\u0003EUHDVW\u0011\u0003 7HFKQL6FDQ\u0003H[SHFWV\u0003ZLGH\u0003GHSOR\\PHQW\u0003RI\u0003LWV\u00036YDUD\u0003V\\VWHP\u0003VWDUWLQJ\u0003LQ\u0003\u0015\u0013\u0014\u0013\u0011\u0003 &20387$7,21$/\u0003)/8,'\u0003'<1$0,&6 \u0014\u0011\u0018\u0011\u0015\u0003 )RU\u0003PDQ\\\u0003\\HDUV\u000f\u0003WKH\u0003GHVLJQ\u0003RI\u0003KLJKO\\\u0003HI\u020cFLHQW\u0003URWRUV\u0003DQG\u0003EODGHV\u0003UHPDLQHG\u0003D\u0003 EODFN\u0003DUW\u0003RI\u0003VRUWV\u0011\u00037KH\u0003DVWRQLVKLQJO\\\u0003FRPSOH[\u0003PRYHPHQW\u0003RI\u0003DLU\u0003DQG\u0003\u020dXLGV\u0003DURXQG\u0003 WKHVH\u0003GHYLFHV\u0003FDQQRW\u0003EH\u0003HIIHFWLYHO\\\u0003PRGHOHG\u0003E\\\u0003VLPSOH\u0003IRUPXODWLRQV\u000f\u0003VR\u0003DFFX - UDWH\u0003VLPXODWLRQV\u0003SURYH\u0003IDU\u0003WRR\u0003FRPSXWDWLRQDOO\\\u0003H[SHQVLYH\u0003WR\u0003EH\u0003UHDOLVWLF\u0011\u00032QO\\\u0003WKH\u0003 ODUJHVW\u0003VXSHUFRPSXWHUV\u0003LQ\u0003WKH\u0003ZRUOG\u0003FRXOG\u0003KRSH\u0003WR\u0003RIIHU\u0003FRPSXWDWLRQDO\u0003UHVRXUFHV\u0003 RQ\u0003SDU\u0003ZLWK\u0003WKH\u0003VRSKLVWLFDWHG\u0003QXPHULFDO\u0003PRGHOV\u0003UHTXLUHG\u0003WR\u0003GHYHORS\u0003DQG\u0003YDOLGDWH\u0003 GHVLJQV\u0011\u00036LQFH\u0003IHZ\u0003KDYH\u0003DFFHVV\u0003WR\u0003VXFK\u0003PDFKLQHV\u000f\u0003LQQRYDWLRQ\u0003LQ\u0003WKH\u0003GHVLJQ\u0003RI\u0003 VXFK\u0003PDFKLQHV\u0003FRQWLQXHG\u0003WR\u0003VWDJQDWH\u0011 7KH\u00038QLYHUVLW\\\u0003RI\u0003&DPEULGJH\u000f\u0003LQ\u0003D\u0003JUHDW\u0003WUDGLWLRQ\u0003VWDUWHG\u0003E\\\u0003&KDUOHV\u0003%DEEDJH\u000f\u0003LV\u0003 KRPH\u0003WR\u0003DFWLYH\u0003UHVHDUFK\u0003LQWR\u0003DGYDQFHG\u0003SDUDOOHO\u0003FRPSXWLQJ\u0011\u0003'U\u0011\u0003*UDKDP\u00033XOODQ\u0003 DQG\u0003'U\u0011\u00037RELDV\u0003%UDQGYLN\u0003RI\u0003WKH\u0003\u01e4PDQ\\\u0010FRUH\u0003JURXS\u01e5\u0003FRUUHFWO\\\u0003LGHQWL\u020cHG\u0003WKH\u0003SRWHQ - WLDO\u0003LQ\u000319,',$\u01e2V\u0003&8'$\u0003$UFKLWHFWXUH\u0003WR\u0003DFFHOHUDWH\u0003FRPSXWDWLRQDO\u0003\u020dXLG\u0003G\\QDPLFV\u0003 XQSUHFHGHQWHG\u0003OHYHOV\u0011\u00037KHLU\u0003LQLWLDO\u0003LQYHVWLJDWLRQV\u0003LQGLFDWHG\u0003WKDW\u0003DFFHSWDEOH\u0003OHYHOV\u0003 RI\u0003SHUIRUPDQFH\u0003FRXOG\u0003EH\u0003GHOLYHUHG\u0003E\\\u0003*38\u0010SRZHUHG\u000f\u0003SHUVRQDO\u0003ZRUNVWDWLRQV\u0011\u0003 /DWHU\u000f\u0003WKH\u0003XVH\u0003RI\u0003D\u0003VPDOO\u0003*38\u0003FOXVWHU\u0003HDVLO\\\u0003RXWSHUIRUPHG\u0003WKHLU\u0003PXFK\u0003PRUH\u0003FRVWO\\\u0003 VXSHUFRPSXWHUV\u0003DQG\u0003IXUWKHU\u0003FRQ\u020cUPHG\u0003WKHLU\u0003VXVSLFLRQV\u0003WKDW\u0003WKH\u0003FDSDELOLWLHV\u0003RI\u0003 19,',$\u01e2V\u0003*38\u0003PDWFKHG\u0003H[WUHPHO\\\u0003ZHOO\u0003ZLWK\u0003WKH\u0003SUREOHPV\u0003WKH\\\u0003ZDQWHG\u0003WR\u0003VROYH\u0011\u0003 Download from www.wowebook.comptg:+<\u0003&8'$\"\u0003: +<\u000312:\" /one.lf/zero.lf)RU\u0003WKH\u0003UHVHDUFKHUV\u0003DW\u0003&DPEULGJH\u000f\u0003WKH\u0003PDVVLYH\u0003SHUIRUPDQFH\u0003JDLQV\u0003RIIHUHG\u0003E\\\u0003 &8'$\u0003&\u0003UHSUHVHQW\u0003PRUH\u0003WKDQ\u0003D\u0003VLPSOH\u000f\u0003LQFUHPHQWDO\u0003ERRVW\u0003WR\u0003WKHLU\u0003VXSHUFRP - SXWLQJ\u0003UHVRXUFHV\u0011\u00037KH\u0003DYDLODELOLW\\\u0003RI\u0003FRSLRXV\u0003DPRXQWV\u0003RI\u0003ORZ\u0010FRVW\u0003*38\u0003FRPSXWD - WLRQ\u0003HPSRZHUHG\u0003WKH\u0003&DPEULGJH\u0003UHVHDUFKHUV\u0003WR\u0003SHUIRUP\u0003UDSLG\u0003H[SHULPHQWDWLRQ\u0011\u0003 5HFHLYLQJ\u0003H[SHULPHQWDO\u0003UHVXOWV\u0003ZLWKLQ\u0003VHFRQGV\u0003VWUHDPOLQHG\u0003WKH\u0003IHHGEDFN\u0003SURFHVV\u0003 RQ\u0003ZKLFK\u0003UHVHDUFKHUV\u0003UHO\\\u0003LQ\u0003RUGHU\u0003WR\u0003DUULYH\u0003DW\u0003EUHDNWKURXJKV\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003WKH\u0003 XVH\u0003RI\u0003*38\u0003FOXVWHUV\u0003KDV\u0003IXQGDPHQWDOO\\\u0003WUDQVIRUPHG\u0003WKH\u0003ZD\\\u0003WKH\\\u0003DSSURDFK\u0003WKHLU\u0003 UHVHDUFK\u0011\u00031HDUO\\\u0003LQWHUDFWLYH\u0003VLPXODWLRQ\u0003KDV\u0003XQOHDVKHG\u0003QHZ\u0003RSSRUWXQLWLHV\u0003IRU\u0003 LQQRYDWLRQ\u0003DQG\u0003FUHDWLYLW\\\u0003LQ\u0003D\u0003SUHYLRXVO\\\u0003VWL\u020dHG\u0003\u020cHOG\u0003RI\u0003UHVHDUFK\u0011 ENVIRONMENT AL SCIENCE \u0014\u0011\u0018\u0011\u0016\u0003 7KH\u0003LQFUHDVLQJ\u0003QHHG\u0003IRU\u0003HQYLURQPHQWDOO\\\u0003VRXQG\u0003FRQVXPHU\u0003JRRGV\u0003KDV\u0003DULVHQ\u0003DV\u0003 D\u0003QDWXUDO\u0003FRQVHTXHQFH\u0003RI\u0003WKH\u0003UDSLGO\\\u0003HVFDODWLQJ\u0003LQGXVWULDOL]DWLRQ\u0003RI\u0003WKH\u0003JOREDO\u0003 HFRQRP\\\u0011\u0003*URZLQJ\u0003FRQFHUQV\u0003RYHU\u0003FOLPDWH\u0003FKDQJH\u000f\u0003WKH\u0003VSLUDOLQJ\u0003SULFHV\u0003RI\u0003IXHO\u000f\u0003 DQG\u0003WKH\u0003JURZLQJ\u0003OHYHO\u0003RI\u0003SROOXWDQWV\u0003LQ\u0003RXU\u0003DLU\u0003DQG\u0003ZDWHU\u0003KDYH\u0003EURXJKW\u0003LQWR\u0003VKDUS\u0003 UHOLHI\u0003WKH\u0003FROODWHUDO\u0003GDPDJH\u0003RI\u0003VXFK\u0003VXFFHVVIXO\u0003DGYDQFHV\u0003LQ\u0003LQGXVWULDO\u0003RXWSXW\u0011\u0003 'HWHUJHQWV\u0003DQG\u0003FOHDQLQJ\u0003DJHQWV\u0003KDYH\u0003ORQJ\u0003EHHQ\u0003VRPH\u0003RI\u0003WKH\u0003PRVW\u0003QHFHVVDU\\\u0003 \\HW\u0003SRWHQWLDOO\\\u0003FDODPLWRXV\u0003FRQVXPHU\u0003SURGXFWV\u0003LQ\u0003UHJXODU\u0003XVH\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003PDQ\\\u0003 VFLHQWLVWV\u0003KDYH\u0003EHJXQ\u0003H[SORULQJ\u0003PHWKRGV\u0003IRU\u0003UHGXFLQJ\u0003WKH\u0003HQYLURQPHQWDO\u0003LPSDFW\u0003 RI\u0003VXFK\u0003GHWHUJHQWV\u0003ZLWKRXW\u0003UHGXFLQJ\u0003WKHLU\u0003HI\u020cFDF\\\u0011\u0003*DLQLQJ\u0003VRPHWKLQJ\u0003IRU\u0003QRWKLQJ\u0003 FDQ\u0003EH\u0003D\u0003WULFN\\\u0003SURSRVLWLRQ\u000f\u0003KRZHYHU\u0011\u0003 7KH\u0003NH\\\u0003FRPSRQHQWV\u0003WR\u0003FOHDQLQJ\u0003DJHQWV\u0003DUH\u0003NQRZQ\u0003DV\u0003 surfactants \u0011\u00036XUIDFWDQW\u0003 PROHFXOHV\u0003GHWHUPLQH\u0003WKH\u0003FOHDQLQJ\u0003FDSDFLW\\\u0003DQG\u0003WH[WXUH\u0003RI\u0003GHWHUJHQWV\u0003DQG\u0003VKDP - SRRV\u000f\u0003EXW\u0003WKH\\\u0003DUH\u0003RIWHQ\u0003LPSOLFDWHG\u0003DV\u0003WKH\u0003PRVW\u0003HQYLURQPHQWDOO\\\u0003GHYDVWDWLQJ\u0003 FRPSRQHQW\u0003RI\u0003FOHDQLQJ\u0003SURGXFWV\u0011\u00037KHVH\u0003PROHFXOHV\u0003DWWDFK\u0003WKHPVHOYHV\u0003WR\u0003GLUW\u0003DQG\u0003 WKHQ\u0003PL[\u0003ZLWK\u0003ZDWHU\u0003VXFK\u0003WKDW\u0003WKH\u0003VXUIDFWDQWV\u0003FDQ\u0003EH\u0003ULQVHG\u0003DZD\\\u0003DORQJ\u0003ZLWK\u0003WKH\u0003 GLUW\u0011\u00037UDGLWLRQDOO\\\u000f\u0003PHDVXULQJ\u0003WKH\u0003FOHDQLQJ\u0003YDOXH\u0003RI\u0003D\u0003QHZ\u0003VXUIDFWDQW\u0003ZRXOG\u0003UHTXLUH\u0003 H[WHQVLYH\u0003ODERUDWRU\\\u0003WHVWLQJ\u0003LQYROYLQJ\u0003QXPHURXV\u0003FRPELQDWLRQV\u0003RI\u0003PDWHULDOV\u0003DQG\u0003 LPSXULWLHV\u0003WR\u0003EH\u0003FOHDQHG\u0011\u00037KLV\u0003SURFHVV\u000f\u0003QRW\u0003VXUSULVLQJO\\\u000f\u0003FDQ\u0003EH\u0003YHU\\\u0003VORZ\u0003DQG\u0003 H[SHQVLYH\u0011\u0003 7HPSOH\u00038QLYHUVLW\\\u0003KDV\u0003EHHQ\u0003ZRUNLQJ\u0003ZLWK\u0003LQGXVWU\\\u0003OHDGHU\u00033URFWHU\u0003 \u0003*DPEOH\u0003WR\u0003 XVH\u0003PROHFXODU\u0003VLPXODWLRQ\u0003RI\u0003VXUIDFWDQW\u0003LQWHUDFWLRQV\u0003ZLWK\u0003GLUW\u000f\u0003ZDWHU\u000f\u0003DQG\u0003RWKHU\u0003 PDWHULDOV\u0011\u00037KH\u0003LQWURGXFWLRQ\u0003RI\u0003FRPSXWHU\u0003VLPXODWLRQV\u0003VHUYHV\u0003QRW\u0003MXVW\u0003WR\u0003DFFHOHUDWH\u0003 D\u0003WUDGLWLRQDO\u0003ODE\u0003DSSURDFK\u000f\u0003EXW\u0003LW\u0003H[WHQGV\u0003WKH\u0003EUHDGWK\u0003RI\u0003WHVWLQJ\u0003WR\u0003QXPHURXV\u0003YDUL - DQWV\u0003RI\u0003HQYLURQPHQWDO\u0003FRQGLWLRQV\u000f\u0003IDU\u0003PRUH\u0003WKDQ\u0003FRXOG\u0003EH\u0003SUDFWLFDOO\\\u0003WHVWHG\u0003LQ\u0003WKH\u0003 SDVW\u0011\u00037HPSOH\u0003UHVHDUFKHUV\u0003XVHG\u0003WKH\u0003*38\u0010DFFHOHUDWHG\u0003+LJKO\\\u00032SWLPL]HG\u00032EMHFW\u0010 RULHQWHG\u00030DQ\\\u0010SDUWLFOH\u0003'\\QDPLFV\u0003 +220' \u0003VLPXODWLRQ\u0003VRIWZDUH\u0003ZULWWHQ\u0003E\\\u0003WKH\u0003 'HSDUWPHQW\u0003RI\u0003(QHUJ\\\u01e2V\u0003$PHV\u0003/DERUDWRU\\\u0011\u0003%\\\u0003VSOLWWLQJ\u0003WKHLU\u0003VLPXODWLRQ\u0003DFURVV\u0003WZR\u0003 Download from www.wowebook.comptg /one.lf/one.lf\u0014\u0011\u0019\u0003&+$37(5\u00035(9,(: 19,',$\u00037HVOD\u0003*38V\u000f\u0003WKH\\\u0003ZHUH\u0003DEOH\u0003DFKLHYH\u0003HTXLYDOHQW\u0003SHUIRUPDQFH\u0003WR\u0003WKH\u0003\u0014\u0015\u001b\u0003 &38\u0003FRUHV\u0003RI\u0003WKH\u0003&UD\\\u0003;7\u0016\u0003DQG\u0003WR\u0003WKH\u0003\u0014\u0013\u0015\u0017\u0003&38V\u0003RI\u0003DQ\u0003,%0\u0003%OXH*HQH\u0012/\u0003PDFKLQH\u0011\u0003 %\\\u0003LQFUHDVLQJ\u0003WKH\u0003QXPEHU\u0003RI\u00037HVOD\u0003*38V\u0003LQ\u0003WKHLU\u0003VROXWLRQ\u000f\u0003WKH\\\u0003DUH\u0003DOUHDG\\\u0003VLPX - ODWLQJ\u0003VXUIDFWDQW\u0003LQWHUDFWLRQV\u0003DW\u0003\u0014\u0019\u0003WLPHV\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003SUHYLRXV\u0003SODWIRUPV\u0011\u0003 6LQFH\u000319,',$\u01e2V\u0003&8'$\u0003KDV\u0003UHGXFHG\u0003WKH\u0003WLPH\u0003WR\u0003FRPSOHWH\u0003VXFK\u0003FRPSUHKHQVLYH\u0003 VLPXODWLRQV\u0003IURP\u0003VHYHUDO\u0003ZHHNV\u0003WR\u0003D\u0003IHZ\u0003KRXUV\u000f\u0003WKH\u0003\\HDUV\u0003WR\u0003FRPH\u0003VKRXOG\u0003RIIHU\u0003 D\u0003GUDPDWLF\u0003ULVH\u0003LQ\u0003SURGXFWV\u0003WKDW\u0003KDYH\u0003ERWK\u0003LQFUHDVHG\u0003HIIHFWLYHQHVV\u0003DQG\u0003UHGXFHG\u0003 HQYLURQPHQWDO\u0003LPSDFW\u0011\u0003 &KDSWHU\u00035HYLHZ\u0014\u0011\u0019\u0003 7KH\u0003FRPSXWLQJ\u0003LQGXVWU\\\u0003LV\u0003DW\u0003WKH\u0003SUHFLSLFH\u0003RI\u0003D\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003UHYROXWLRQ\u000f\u0003 DQG\u000319,',$\u01e2V\u0003&8'$\u0003&\u0003KDV\u0003WKXV\u0003IDU\u0003EHHQ\u0003RQH\u0003RI\u0003WKH\u0003PRVW\u0003VXFFHVVIXO\u0003ODQJXDJHV\u0003 HYHU\u0003GHVLJQHG\u0003IRU\u0003SDUDOOHO\u0003FRPSXWLQJ\u0011\u00037KURXJKRXW\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003ERRN\u000f\u0003ZH\u0003ZLOO\u0003 KHOS\u0003\\RX\u0003OHDUQ\u0003KRZ\u0003WR\u0003ZULWH\u0003\\RXU\u0003RZQ\u0003FRGH\u0003LQ\u0003&8'$\u0003&\u0011\u0003:H\u0003ZLOO\u0003KHOS\u0003\\RX\u0003OHDUQ\u0003WKH\u0003 VSHFLDO\u0003H[WHQVLRQV\u0003WR\u0003&\u0003DQG\u0003WKH\u0003DSSOLFDWLRQ\u0003SURJUDPPLQJ\u0003LQWHUIDFHV\u0003WKDW\u000319,',$\u0003 KDV\u0003FUHDWHG\u0003LQ\u0003VHUYLFH\u0003RI\u0003*38\u0003FRPSXWLQJ\u0011\u0003<RX\u0003DUH\u0003 not\u0003H[SHFWHG\u0003WR\u0003NQRZ\u00032SHQ*/\u0003 RU\u0003'LUHFW;\u000f\u0003QRU\u0003DUH\u0003\\RX\u0003H[SHFWHG\u0003WR\u0003KDYH\u0003DQ\\\u0003EDFNJURXQG\u0003LQ\u0003FRPSXWHU\u0003JUDSKLFV\u0011\u0003 :H\u0003ZLOO\u0003QRW\u0003EH\u0003FRYHULQJ\u0003WKH\u0003EDVLFV\u0003RI\u0003SURJUDPPLQJ\u0003LQ\u0003&\u000f\u0003VR\u0003ZH\u0003GR\u0003QRW\u0003UHFRPPHQG\u0003 WKLV\u0003ERRN\u0003WR\u0003SHRSOH\u0003FRPSOHWHO\\\u0003QHZ\u0003WR\u0003FRPSXWHU\u0003SURJUDPPLQJ\u0011\u00036RPH\u0003IDPLO - LDULW\\\u0003ZLWK\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003PLJKW\u0003KHOS\u000f\u0003DOWKRXJK\u0003ZH\u0003GR\u0003QRW\u0003 expect \u0003\\RX\u0003WR\u0003 KDYH\u0003GRQH\u0003DQ\\\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0011\u0003$Q\\\u0003WHUPV\u0003RU\u0003FRQFHSWV\u0003UHODWHG\u0003WR\u0003SDUDOOHO\u0003 SURJUDPPLQJ\u0003WKDW\u0003\\RX\u0003ZLOO\u0003QHHG\u0003WR\u0003XQGHUVWDQG\u0003ZLOO\u0003EH\u0003H[SODLQHG\u0003LQ\u0003WKH\u0003WH[W\u0011\u0003,Q\u0003 IDFW\u000f\u0003WKHUH\u0003PD\\\u0003EH\u0003VRPH\u0003RFFDVLRQV\u0003ZKHQ\u0003\\RX\u0003\u020cQG\u0003WKDW\u0003NQRZOHGJH\u0003RI\u0003WUDGLWLRQDO\u0003 SDUDOOHO\u0003SURJUDPPLQJ\u0003ZLOO\u0003FDXVH\u0003\\RX\u0003WR\u0003PDNH\u0003DVVXPSWLRQV\u0003DERXW\u0003*38\u0003FRPSXWLQJ\u0003 WKDW\u0003SURYH\u0003XQWUXH\u0011\u00036R\u0003LQ\u0003UHDOLW\\\u000f\u0003D\u0003PRGHUDWH\u0003DPRXQW\u0003RI\u0003H[SHULHQFH\u0003ZLWK\u0003&\u0003RU\u0003&\u000e\u000e\u0003 SURJUDPPLQJ\u0003LV\u0003WKH\u0003RQO\\\u0003SUHUHTXLVLWH\u0003WR\u0003PDNLQJ\u0003LW\u0003WKURXJK\u0003WKLV\u0003ERRN\u0011 ,Q\u0003WKH\u0003QH[W\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003KHOS\u0003\\RX\u0003VHW\u0003XS\u0003\\RXU\u0003PDFKLQH\u0003IRU\u0003*38\u0003FRPSXWLQJ\u000f\u0003 HQVXULQJ\u0003WKDW\u0003\\RX\u0003KDYH\u0003ERWK\u0003WKH\u0003KDUGZDUH\u0003DQG\u0003WKH\u0003VRIWZDUH\u0003FRPSRQHQWV\u0003QHFHV - VDU\\\u0003JHW\u0003VWDUWHG\u0011\u0003$IWHU\u0003WKDW\u000f\u0003\\RX\u01e2OO\u0003EH\u0003UHDG\\\u0003WR\u0003JHW\u0003\\RXU\u0003KDQGV\u0003GLUW\\\u0003ZLWK\u0003&8'$\u0003&\u0011\u0003,I\u0003 \\RX\u0003DOUHDG\\\u0003KDYH\u0003VRPH\u0003H[SHULHQFH\u0003ZLWK\u0003&8'$\u0003&\u0003RU\u0003\\RX\u01e2UH\u0003VXUH\u0003WKDW\u0003\\RXU\u0003V\\VWHP\u0003 KDV\u0003EHHQ\u0003SURSHUO\\\u0003VHW\u0003XS\u0003WR\u0003GR\u0003GHYHORSPHQW\u0003LQ\u0003&8'$\u0003&\u000f\u0003\\RX\u0003FDQ\u0003VNLS\u0003WR\u0003&KDSWHU\u0003\u0016\u0011 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /one.lf/three.lfChapter 2 Getting Started :H\u0003KRSH\u0003WKDW\u0003&KDSWHU\u0003\u0014\u0003KDV\u0003JRWWHQ\u0003\\RX\u0003H[FLWHG\u0003WR\u0003JHW\u0003VWDUWHG\u0003OHDUQLQJ\u0003&8'$\u0003&\u0011\u0003 6LQFH\u0003WKLV\u0003ERRN\u0003LQWHQGV\u0003WR\u0003WHDFK\u0003\\RX\u0003WKH\u0003ODQJXDJH\u0003WKURXJK\u0003D\u0003VHULHV\u0003RI\u0003FRGLQJ\u0003 H[DPSOHV\u000f\u0003\\RX\u01e2OO\u0003QHHG\u0003D\u0003IXQFWLRQLQJ\u0003GHYHORSPHQW\u0003HQYLURQPHQW\u0011\u00036XUH\u000f\u0003\\RX\u0003FRXOG\u0003 VWDQG\u0003RQ\u0003WKH\u0003VLGHOLQH\u0003DQG\u0003ZDWFK\u000f\u0003EXW\u0003ZH\u0003WKLQN\u0003\\RX\u01e2OO\u0003KDYH\u0003PRUH\u0003IXQ\u0003DQG\u0003VWD\\\u0003 LQWHUHVWHG\u0003ORQJHU\u0003LI\u0003\\RX\u0003MXPS\u0003LQ\u0003DQG\u0003JHW\u0003VRPH\u0003SUDFWLFDO\u0003H[SHULHQFH\u0003KDFNLQJ\u0003 &8'$\u0003&\u0003FRGH\u0003DV\u0003VRRQ\u0003DV\u0003SRVVLEOH\u0011\u0003,Q\u0003WKLV\u0003YHLQ\u000f\u0003WKLV\u0003FKDSWHU\u0003ZLOO\u0003ZDON\u0003\\RX\u0003 WKURXJK\u0003VRPH\u0003RI\u0003WKH\u0003KDUGZDUH\u0003DQG\u0003VRIWZDUH\u0003FRPSRQHQWV\u0003\\RX\u01e2OO\u0003QHHG\u0003LQ\u0003RUGHU\u0003WR\u0003 JHW\u0003VWDUWHG\u0011\u00037KH\u0003JRRG\u0003QHZV\u0003LV\u0003WKDW\u0003\\RX\u0003FDQ\u0003REWDLQ\u0003DOO\u0003RI\u0003WKH\u0003VRIWZDUH\u0003\\RX\u01e2OO\u0003QHHG\u0003 IRU\u0003IUHH\u000f\u0003OHDYLQJ\u0003\\RX\u0003PRUH\u0003PRQH\\\u0003IRU\u0003ZKDWHYHU\u0003WLFNOHV\u0003\\RXU\u0003IDQF\\\u0011 Download from www.wowebook.comptgGETT ING STARTED /one.lf/four.lf&KDSWHU\u00032EMHFWLYHV\u0015\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003GRZQORDG\u0003DOO\u0003WKH\u0003VRIWZDUH\u0003FRPSRQHQWV\u0003UHTXLUHG\u0003WKURXJK\u0003WKLV\u0003ERRN\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003VHW\u0003XS\u0003DQ\u0003HQYLURQPHQW\u0003LQ\u0003ZKLFK\u0003\\RX\u0003FDQ\u0003EXLOG\u0003FRGH\u0003ZULWWHQ\u0003LQ\u0003&8'$\u0003&\u0011\u01e9\u0003 'HYHORSPHQW\u0003(QYLURQPHQW\u0015\u0011\u0015\u0003 %HIRUH\u0003HPEDUNLQJ\u0003RQ\u0003WKLV\u0003MRXUQH\\\u000f\u0003\\RX\u0003ZLOO\u0003QHHG\u0003WR\u0003VHW\u0003XS\u0003DQ\u0003HQYLURQPHQW\u0003LQ\u0003ZKLFK\u0003 \\RX\u0003FDQ\u0003GHYHORS\u0003XVLQJ\u0003&8'$\u0003&\u0011\u00037KH\u0003SUHUHTXLVLWHV\u0003WR\u0003GHYHORSLQJ\u0003FRGH\u0003LQ\u0003&8'$\u0003&\u0003 DUH\u0003DV\u0003IROORZV $\u0003&8'$\u0010HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRU\u01e9\u0003 $Q\u000319,',$\u0003GHYLFH\u0003GULYHU\u01e9\u0003 $\u0003&8'$\u0003GHYHORSPHQW\u0003WRRONLW\u01e9\u0003 $\u0003VWDQGDUG\u0003&\u0003FRPSLOHU\u01e9\u0003 7R\u0003PDNH\u0003WKLV\u0003FKDSWHU\u0003DV\u0003SDLQOHVV\u0003DV\u0003SRVVLEOH\u000f\u0003ZH\u01e2OO\u0003ZDON\u0003WKURXJK\u0003HDFK\u0003RI\u0003WKHVH\u0003 SUHUHTXLVLWHV\u0003QRZ\u0011 &8'$\u0210(1$%/('\u0003*5$3+,&6\u0003352&(66256 \u0015\u0011\u0015\u0011\u0014\u0003 )RUWXQDWHO\\\u000f\u0003LW\u0003VKRXOG\u0003EH\u0003HDV\\\u0003WR\u0003\u020cQG\u0003\\RXUVHOI\u0003D\u0003JUDSKLFV\u0003SURFHVVRU\u0003WKDW\u0003KDV\u0003 EHHQ\u0003EXLOW\u0003RQ\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003EHFDXVH\u0003HYHU\\\u000319,',$\u0003*38\u0003VLQFH\u0003WKH\u0003\u0015\u0013\u0013\u0019\u0003 UHOHDVH\u0003RI\u0003WKH\u0003*H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7;\u0003KDV\u0003EHHQ\u0003&8'$\u0010HQDEOHG\u0011\u00036LQFH\u000319,',$\u0003UHJXODUO\\\u0003 UHOHDVHV\u0003QHZ\u0003*38V\u0003EDVHG\u0003RQ\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u000f\u0003WKH\u0003IROORZLQJ\u0003ZLOO\u0003XQGRXEW - HGO\\\u0003EH\u0003RQO\\\u0003D\u0003SDUWLDO\u0003OLVW\u0003RI\u0003&8'$\u0010HQDEOHG\u0003*38V\u0011\u00031HYHUWKHOHVV\u000f\u0003WKH\u0003*38V\u0003DUH\u0003DOO\u0003 &8'$\u0010FDSDEOH\u0011 )RU\u0003D\u0003FRPSOHWH\u0003OLVW\u000f\u0003\\RX\u0003VKRXOG\u0003FRQVXOW\u0003WKH\u000319,',$\u0003ZHEVLWH\u0003DW\u0003 ZZZ\u0011QYLGLD\u0011FRP\u0012FXGD\u000f\u0003 DOWKRXJK\u0003LW\u0003LV\u0003VDIH\u0003WR\u0003DVVXPH\u0003WKDW\u0003DOO\u0003UHFHQW\u0003*38V\u0003 *38V\u0003IURP\u0003\u0015\u0013\u0013\u001a\u0003RQ \u0003ZLWK\u0003PRUH\u0003 WKDQ\u0003\u0015\u0018\u00190%\u0003RI\u0003JUDSKLFV\u0003PHPRU\\\u0003FDQ\u0003EH\u0003XVHG\u0003WR\u0003GHYHORS\u0003DQG\u0003UXQ\u0003FRGH\u0003ZULWWHQ\u0003 ZLWK\u0003&8'$\u0003&\u0011 Download from www.wowebook.comptgDEVELO PMENT ENVIRONMENT /one.lf/five.lf\u0015\u0011\u0015\u0003'(9(/230(17\u0003(19,5210(17*H)RUFH\u0003*7;\u0003\u0017\u001b\u0013 *H)RUFH\u0003*7;\u0003\u0017\u001a\u0013 *H)RUFH\u0003*7;\u0003\u0015 \u0018 *H)RUFH\u0003*7;\u0003\u0015\u001b\u0018 *H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u0003IRU\u00030DF *H)RUFH\u0003*7;\u0003\u0015\u001b\u0013 *H)RUFH\u0003*7;\u0003\u0015\u001a\u0018 *H)RUFH\u0003*7;\u0003\u0015\u0019\u0013 *H)RUFH\u0003*76\u0003\u0015\u0018\u0013 *H)RUFH\u0003*7\u0003\u0015\u0015\u0013 *H)RUFH\u0003*\u0015\u0014\u0013\u0003 *H)RUFH\u0003*76\u0003\u0014\u0018\u0013 *H)RUFH\u0003*7\u0003\u0014\u0016\u0013 *H)RUFH\u0003*7\u0003\u0014\u0015\u0013 *H)RUFH\u0003*\u0014\u0013\u0013\u0003 *H)RUFH\u0003 \u001b\u0013\u0013\u0003*;\u0015 *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7;\u000e *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7; *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7 *H)RUFH\u0003 \u0019\u0013\u0013\u0003*62 *H)RUFH\u0003 \u0019\u0013\u0013\u0003*7 *H)RUFH\u0003 \u0018\u0013\u0013\u0003*7 *H)RUFH\u0003 \u0017\u0013\u0013*7 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u00038OWUD *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7; *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*76 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*6 *H)RUFH\u0003\u001b\u0019\u0013\u0013\u0003*76 *H)RUFH\u0003\u001b\u0019\u0013\u0013\u0003*7 *H)RUFH\u0003\u001b\u0018\u0013\u0013\u0003*7 *H)RUFH\u0003\u001b\u0017\u0013\u0013\u0003*6 *H)RUFH\u0003 \u0017\u0013\u0013\u0003P*38",
    "WKDQ\u0003\u0015\u0018\u00190%\u0003RI\u0003JUDSKLFV\u0003PHPRU\\\u0003FDQ\u0003EH\u0003XVHG\u0003WR\u0003GHYHORS\u0003DQG\u0003UXQ\u0003FRGH\u0003ZULWWHQ\u0003 ZLWK\u0003&8'$\u0003&\u0011 Download from www.wowebook.comptgDEVELO PMENT ENVIRONMENT /one.lf/five.lf\u0015\u0011\u0015\u0003'(9(/230(17\u0003(19,5210(17*H)RUFH\u0003*7;\u0003\u0017\u001b\u0013 *H)RUFH\u0003*7;\u0003\u0017\u001a\u0013 *H)RUFH\u0003*7;\u0003\u0015 \u0018 *H)RUFH\u0003*7;\u0003\u0015\u001b\u0018 *H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u0003IRU\u00030DF *H)RUFH\u0003*7;\u0003\u0015\u001b\u0013 *H)RUFH\u0003*7;\u0003\u0015\u001a\u0018 *H)RUFH\u0003*7;\u0003\u0015\u0019\u0013 *H)RUFH\u0003*76\u0003\u0015\u0018\u0013 *H)RUFH\u0003*7\u0003\u0015\u0015\u0013 *H)RUFH\u0003*\u0015\u0014\u0013\u0003 *H)RUFH\u0003*76\u0003\u0014\u0018\u0013 *H)RUFH\u0003*7\u0003\u0014\u0016\u0013 *H)RUFH\u0003*7\u0003\u0014\u0015\u0013 *H)RUFH\u0003*\u0014\u0013\u0013\u0003 *H)RUFH\u0003 \u001b\u0013\u0013\u0003*;\u0015 *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7;\u000e *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7; *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7 *H)RUFH\u0003 \u0019\u0013\u0013\u0003*62 *H)RUFH\u0003 \u0019\u0013\u0013\u0003*7 *H)RUFH\u0003 \u0018\u0013\u0013\u0003*7 *H)RUFH\u0003 \u0017\u0013\u0013*7 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u00038OWUD *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7; *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*76 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*6 *H)RUFH\u0003\u001b\u0019\u0013\u0013\u0003*76 *H)RUFH\u0003\u001b\u0019\u0013\u0013\u0003*7 *H)RUFH\u0003\u001b\u0018\u0013\u0013\u0003*7 *H)RUFH\u0003\u001b\u0017\u0013\u0013\u0003*6 *H)RUFH\u0003 \u0017\u0013\u0013\u0003P*38 *H)RUFH\u0003 \u0016\u0013\u0013\u0003P*38*H)RUFH\u0003\u001b\u0016\u0013\u0013\u0003P*38 *H)RUFH\u0003\u001b\u0015\u0013\u0013\u0003P*38 *H)RUFH\u0003\u001b\u0014\u0013\u0013\u0003P*38 7HVOD\u00036\u0015\u0013 \u0013\u0003 7HVOD\u00030\u0015\u0013 \u0013\u0003 7HVOD\u00036\u0015\u0013\u001a\u0013\u0003 7HVOD\u00030\u0015\u0013\u001a\u0013\u0003 7HVOD\u0003&\u0015\u0013\u001a\u0013\u0003 7HVOD\u00036\u0015\u0013\u0018\u0013\u0003 7HVOD\u00030\u0015\u0013\u0018\u0013\u0003 7HVOD\u0003&\u0015\u0013\u0018\u0013\u0003 7HVOD\u00036\u0014\u0013\u001a\u0013\u0003 7HVOD\u0003&\u0014\u0013\u0019\u0013\u0003 7HVOD\u00036\u001b\u001a\u0013\u0003 7HVOD\u0003&\u001b\u001a\u0013\u0003 7HVOD\u0003'\u001b\u001a\u0013 QUADRO MOBILE PRO DUCTS 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u00130 4XDGUR\u0003);\u0003\u0016\u0019\u0013\u00130 4XDGUR\u0003);\u0003\u0015\u001a\u0013\u00130 4XDGUR\u0003);\u0003\u0014\u001a\u0013\u00130 4XDGUR\u0003);\u0003\u0014\u0019\u0013\u00130 4XDGUR\u0003);\u0003\u001a\u001a\u00130 4XDGUR\u0003);\u0003\u0018\u001a\u00130 4XDGUR\u0003);\u0003\u0016\u001a\u00130 4XDGUR\u0003);\u0003\u0016\u0019\u00130 4XDGUR\u0003196\u0003\u0016\u0015\u00130 4XDGUR\u0003196\u0003\u0014\u0019\u00130 4XDGUR\u0003196\u0003\u0014\u0018\u00130 4XDGUR\u0003196\u0003\u0014\u0017\u00130 4XDGUR\u0003196\u0003\u0014\u0016\u00180 4XDGUR\u0003196\u0003\u0014\u0016\u00130 4XDGUR\u0003);\u0003\u0018\u001b\u0013\u00134XDGUR\u0003);\u0003\u0018\u0019\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0017\u001b\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0017\u001b\u0013\u0013\u0003IRU\u00030DF 4XDGUR\u0003);\u0003\u0017\u001a\u0013\u0013\u0003;\u0015 4XDGUR\u0003);\u0003\u0017\u0019\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0016\u001b\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0014\u001b\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0014\u001a\u0013\u0013\u0003 4XDGUR\u0003);\u0003\u0018\u001b\u0013\u0003 4XDGUR\u0003);\u0003\u0018\u001a\u0013\u0003 4XDGUR\u0003);\u0003\u0017\u001a\u0013\u0003 4XDGUR\u0003);\u0003\u0016\u001b\u0013\u0003 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u0003 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u0003/RZ\u00033UR\u020cOH 4XDGUR\u0003&;\u0003 4XDGUR\u0003196\u0003\u0017\u0018\u0013\u0003 4XDGUR\u0003196\u0003\u0017\u0015\u0013\u0003 4XDGUR\u0003196\u0003\u0015 \u0018\u0003 4XDGUR\u0003196\u0003\u0015 \u0013\u0003 4XDGUR\u00033OH[\u0003\u0015\u0014\u0013\u0013\u0003'\u0017 4XDGUR\u00033OH[\u0003\u0015\u0015\u0013\u0013\u0003'\u0015 4XDGUR\u00033OH[\u0003\u0015\u0014\u0013\u0013\u00036\u0017 4XDGUR\u00033OH[\u0003\u0014\u0013\u0013\u0013\u00030RGHO\u0003,9 GEFOR CE MOBILE PRO DUCTS *H)RUFH\u0003*7;\u0003\u0015\u001b\u00130 *H)RUFH\u0003*7;\u0003\u0015\u0019\u00130 *H)RUFH\u0003*76\u0003\u0015\u0019\u00130 *H)RUFH\u0003*76\u0003\u0015\u0018\u00130 *H)RUFH\u0003*76\u0003\u0014\u0019\u00130 *H)RUFH\u0003*76\u0003\u0014\u0018\u00130 *H)RUFH\u0003*7\u0003\u0015\u0017\u00130 *H)RUFH\u0003*7\u0003\u0015\u0016\u00130Table 2.1 &8'$\u0010HQDEOHG\u0003*38V Continued Download from www.wowebook.comptgGETT ING STARTED /one.lf/six.lfTable 2.1 &8'$\u0010HQDEOHG\u0003*38V\u0003 &RQWLQXHG *H)RUFH\u0003*7\u0003\u0014\u0016\u00130\u0003 *H)RUFH\u0003*\u0015\u0014\u00130 *H)RUFH\u0003*\u0014\u0014\u00130\u0003 *H)RUFH\u0003*\u0014\u0013\u00180\u0003 *H)RUFH\u0003*\u0014\u0013\u00150\u0003 *H)RUFH\u0003 \u001b\u0013\u00130\u0003*7; *H)RUFH\u0003 \u001b\u0013\u00130\u0003*7 *H)RUFH\u0003 \u001b\u0013\u00130\u0003*76 *H)RUFH\u0003 \u001b\u0013\u00130\u0003*6*H)RUFH\u0003 \u001a\u0013\u00130\u0003*76 *H)RUFH\u0003 \u001a\u0013\u00130\u0003*7 *H)RUFH\u0003 \u0019\u0018\u00130\u0003*6 *H)RUFH\u0003 \u0019\u0013\u00130\u0003*7 *H)RUFH\u0003 \u0019\u0013\u00130\u0003*6 *H)RUFH\u0003 \u0018\u0013\u00130\u0003*6 *H)RUFH\u0003 \u0018\u0013\u00130\u0003* *H)RUFH\u0003 \u0016\u0013\u00130\u0003*6 *H)RUFH\u0003 \u0016\u0013\u00130\u0003**H)RUFH\u0003 \u0015\u0013\u00130\u0003*6 *H)RUFH\u0003 \u0014\u0013\u00130\u0003* *H)RUFH\u0003\u001b\u001b\u0013\u00130\u0003*76 *H)RUFH\u0003\u001b\u001a\u0013\u00130\u0003*7 *H)RUFH\u0003\u001b\u0019\u0013\u00130\u0003*7 *H)RUFH\u0003\u001b\u0019\u0013\u00130\u0003*6 *H)RUFH\u0003\u001b\u0017\u0013\u00130\u0003*7 *H)RUFH\u0003\u001b\u0017\u0013\u00130\u0003*6NVIDIA DEVICE DRIVER \u0015\u0011\u0015\u0011\u0015\u0003 19,',$\u0003SURYLGHV\u0003V\\VWHP\u0003VRIWZDUH\u0003WKDW\u0003DOORZV\u0003\\RXU\u0003SURJUDPV\u0003WR\u0003FRPPXQLFDWH\u0003 ZLWK\u0003WKH\u0003&8'$\u0010HQDEOHG\u0003KDUGZDUH\u0011\u0003,I\u0003\\RX\u0003KDYH\u0003LQVWDOOHG\u0003\\RXU\u000319,',$\u0003*38\u0003SURSHUO\\\u000f\u0003 \\RX\u0003OLNHO\\\u0003DOUHDG\\\u0003KDYH\u0003WKLV\u0003VRIWZDUH\u0003LQVWDOOHG\u0003RQ\u0003\\RXU\u0003PDFKLQH\u0011\u0003,W\u0003QHYHU\u0003KXUWV\u0003 WR\u0003HQVXUH\u0003\\RX\u0003KDYH\u0003WKH\u0003PRVW\u0003UHFHQW\u0003GULYHUV\u000f\u0003VR\u0003ZH\u0003UHFRPPHQG\u0003WKDW\u0003\\RX\u0003YLVLW\u0003 ZZZ\u0011QYLGLD\u0011FRP\u0012FXGD\u0003DQG\u0003FOLFN\u0003WKH\u0003 Download Drivers \u0003OLQN\u0011\u00036HOHFW\u0003WKH\u0003RSWLRQV\u0003WKDW\u0003 PDWFK\u0003WKH\u0003JUDSKLFV\u0003FDUG\u0003DQG\u0003RSHUDWLQJ\u0003V\\VWHP\u0003RQ\u0003ZKLFK\u0003\\RX\u0003SODQ\u0003WR\u0003GR\u0003GHYHORS - PHQW\u0011\u0003$IWHU\u0003IROORZLQJ\u0003WKH\u0003LQVWDOODWLRQ\u0003LQVWUXFWLRQV\u0003IRU\u0003WKH\u0003SODWIRUP\u0003RI\u0003\\RXU\u0003FKRLFH\u000f\u0003 \\RXU\u0003V\\VWHP\u0003ZLOO\u0003EH\u0003XS\u0010WR\u0010GDWH\u0003ZLWK\u0003WKH\u0003ODWHVW\u000319,',$\u0003V\\VWHP\u0003VRIWZDUH\u0011\u0003 CUDA DEVELO PMENT TOOLKIT \u0015\u0011\u0015\u0011\u0016\u0003 ,I\u0003\\RX\u0003KDYH\u0003D\u0003&8'$\u0010HQDEOHG\u0003*38\u0003DQG\u000319,',$\u01e2V\u0003GHYLFH\u0003GULYHU\u000f\u0003\\RX\u0003DUH\u0003UHDG\\\u0003WR\u0003UXQ\u0003 FRPSLOHG\u0003&8'$\u0003&\u0003FRGH\u0011\u00037KLV\u0003PHDQV\u0003WKDW\u0003\\RX\u0003FDQ\u0003GRZQORDG\u0003&8'$\u0010SRZHUHG\u0003DSSOL - FDWLRQV\u000f\u0003DQG\u0003WKH\\\u0003ZLOO\u0003EH\u0003DEOH\u0003WR\u0003VXFFHVVIXOO\\\u0003H[HFXWH\u0003WKHLU\u0003FRGH\u0003RQ\u0003\\RXU\u0003JUDSKLFV\u0003 SURFHVVRU\u0011\u0003+RZHYHU\u000f\u0003ZH\u0003DVVXPH\u0003WKDW\u0003\\RX\u0003ZDQW\u0003WR\u0003GR\u0003PRUH\u0003WKDQ\u0003MXVW\u0003UXQ\u0003FRGH\u0003 EHFDXVH\u000f\u0003RWKHUZLVH\u000f\u0003WKLV\u0003ERRN\u0003LVQ\u01e2W\u0003UHDOO\\\u0003QHFHVVDU\\\u0011\u0003,I\u0003\\RX\u0003ZDQW\u0003WR\u0003 develop \u0003FRGH\u0003 IRU\u000319,',$\u0003*38V\u0003XVLQJ\u0003&8'$\u0003&\u000f\u0003\\RX\u0003ZLOO\u0003QHHG\u0003DGGLWLRQDO\u0003VRIWZDUH\u0011\u0003%XW\u0003DV\u0003SURP - LVHG\u0003HDUOLHU\u000f\u0003QRQH\u0003RI\u0003LW\u0003ZLOO\u0003FRVW\u0003\\RX\u0003D\u0003SHQQ\\\u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003WKHVH\u0003GHWDLOV\u0003LQ\u0003WKH\u0003QH[W\u0003FKDSWHU\u000f\u0003EXW\u0003VLQFH\u0003\\RXU\u0003&8'$\u0003&\u0003DSSOLFD - WLRQV\u0003DUH\u0003JRLQJ\u0003WR\u0003EH\u0003FRPSXWLQJ\u0003RQ\u0003WZR\u0003GLIIHUHQW\u0003SURFHVVRUV\u000f\u0003\\RX\u0003DUH\u0003FRQVHTXHQWO\\\u0003 JRLQJ\u0003WR\u0003QHHG\u0003WZR\u0003FRPSLOHUV\u0011\u00032QH\u0003FRPSLOHU\u0003ZLOO\u0003FRPSLOH\u0003FRGH\u0003IRU\u0003\\RXU\u0003*38\u000f\u0003DQG\u0003 RQH\u0003ZLOO\u0003FRPSLOH\u0003FRGH\u0003IRU\u0003\\RXU\u0003&38\u0011\u000319,',$\u0003SURYLGHV\u0003WKH\u0003FRPSLOHU\u0003IRU\u0003\\RXU\u0003*38\u0003 FRGH\u0011\u0003$V\u0003ZLWK\u0003WKH\u000319,',$\u0003GHYLFH\u0003GULYHU\u000f\u0003\\RX\u0003FDQ\u0003GRZQORDG\u0003WKH\u0003 CUDA Toolkit DW\u0003 KWWS \u0012\u0012GHYHORSHU\u0011QYLGLD\u0011FRP\u0012REMHFW\u0012JSXFRPSXWLQJ\u0011KWPO\u0011 \u0003&OLFN\u0003WKH\u0003&8'$\u00037RRONLW\u0003 OLQN\u0003WR\u0003UHDFK\u0003WKH\u0003GRZQORDG\u0003SDJH\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003\u0015\u0011\u0014\u0011 Download from www.wowebook.comptgDEVELO PMENT ENVIRONMENT /one.lf/seven.lf\u0015\u0011\u0015\u0003'(9(/230(17\u0003(19,5210(17 Figure 2.1 7KH\u0003&8'$\u0003GRZQORDG\u0003SDJH Download from www.wowebook.comptgGETT ING STARTED /one.lf/eight.lf<RX\u0003ZLOO\u0003DJDLQ\u0003EH\u0003DVNHG\u0003WR\u0003VHOHFW\u0003\\RXU\u0003SODWIRUP\u0003IURP\u0003DPRQJ\u0003\u0016\u0015\u0010\u0003DQG\u0003\u0019\u0017\u0010ELW\u0003 YHUVLRQV\u0003RI\u0003:LQGRZV\u0003;3\u000f\u0003:LQGRZV\u00039LVWD\u000f\u0003:LQGRZV\u0003\u001a\u000f\u0003/LQX[\u000f\u0003DQG\u00030DF\u000326\u0011\u0003)URP\u0003WKH\u0003 DYDLODEOH\u0003GRZQORDGV\u000f\u0003\\RX\u0003QHHG\u0003WR\u0003GRZQORDG\u0003WKH\u0003&8'$\u00037RRONLW\u0003LQ\u0003RUGHU\u0003WR\u0003EXLOG\u0003WKH\u0003 FRGH\u0003H[DPSOHV\u0003FRQWDLQHG\u0003LQ\u0003WKLV\u0003ERRN\u0011\u0003$GGLWLRQDOO\\\u000f\u0003\\RX\u0003DUH\u0003HQFRXUDJHG\u000f\u0003DOWKRXJK\u0003 QRW\u0003UHTXLUHG\u000f\u0003WR\u0003GRZQORDG\u0003WKH\u0003*38\u0003&RPSXWLQJ\u00036'.\u0003FRGH\u0003VDPSOHV\u000f\u0003ZKLFK\u0003FRQWDLQV\u0003 GR]HQV\u0003RI\u0003KHOSIXO\u0003H[DPSOH\u0003SURJUDPV\u0011\u00037KH\u0003*38\u0003&RPSXWLQJ\u00036'.\u0003FRGH\u0003VDPSOHV\u0003ZLOO\u0003 QRW\u0003EH\u0003FRYHUHG\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003EXW\u0003WKH\\\u0003QLFHO\\\u0003FRPSOHPHQW\u0003WKH\u0003PDWHULDO\u0003ZH\u0003LQWHQG\u0003 WR\u0003FRYHU\u000f\u0003DQG\u0003DV\u0003ZLWK\u0003OHDUQLQJ\u0003DQ\\\u0003VW\\OH\u0003RI\u0003SURJUDPPLQJ\u000f\u0003WKH\u0003PRUH\u0003H[DPSOHV\u000f\u0003WKH\u0003 EHWWHU\u0011\u0003<RX\u0003VKRXOG\u0003DOVR\u0003WDNH\u0003QRWH\u0003WKDW\u0003DOWKRXJK\u0003QHDUO\\\u0003DOO\u0003WKH\u0003FRGH\u0003LQ\u0003WKLV\u0003ERRN\u0003ZLOO\u0003 ZRUN\u0003RQ\u0003WKH\u0003/LQX[\u000f\u0003:LQGRZV\u000f\u0003DQG\u00030DF\u000326\u0003SODWIRUPV\u000f\u0003ZH\u0003KDYH\u0003WDUJHWHG\u0003WKH\u0003DSSOL - FDWLRQV\u0003WRZDUG\u0003/LQX[\u0003DQG\u0003:LQGRZV\u0011\u0003,I\u0003\\RX\u0003DUH\u0003XVLQJ\u00030DF\u000326\u0003;\u000f\u0003\\RX\u0003ZLOO\u0003EH\u0003OLYLQJ\u0003 GDQJHURXVO\\\u0003DQG\u0003XVLQJ\u0003XQVXSSRUWHG\u0003FRGH\u0003H[DPSOHV\u0011 STANDARD C COMPILER \u0015\u0011\u0015\u0011\u0017\u0003 $V\u0003ZH\u0003PHQWLRQHG\u000f\u0003\\RX\u0003ZLOO\u0003QHHG\u0003D\u0003FRPSLOHU\u0003IRU\u0003*38\u0003FRGH\u0003DQG\u0003D\u0003FRPSLOHU\u0003IRU\u0003 &38\u0003FRGH\u0011\u0003,I\u0003\\RX\u0003GRZQORDGHG\u0003DQG\u0003LQVWDOOHG\u0003WKH\u0003&8'$\u00037RRONLW\u0003DV\u0003VXJJHVWHG\u0003LQ\u0003WKH\u0003 SUHYLRXV\u0003VHFWLRQ\u000f\u0003\\RX\u0003KDYH\u0003D\u0003FRPSLOHU\u0003IRU\u0003*38\u0003FRGH\u0011\u0003$\u0003FRPSLOHU\u0003IRU\u0003&38\u0003FRGH\u0003LV\u0003 WKH\u0003RQO\\\u0003FRPSRQHQW\u0003WKDW\u0003UHPDLQV\u0003RQ\u0003RXU\u0003&8'$\u0003FKHFNOLVW\u000f\u0003VR\u0003OHW\u01e2V\u0003DGGUHVV\u0003WKDW\u0003 LVVXH\u0003VR\u0003ZH\u0003FDQ\u0003JHW\u0003WR\u0003WKH\u0003LQWHUHVWLQJ\u0003VWXII\u0011 WINDOWS 2Q\u00030LFURVRIW\u0003:LQGRZV\u0003SODWIRUPV\u000f\u0003LQFOXGLQJ\u0003:LQGRZV\u0003;3\u000f\u0003:LQGRZV\u00039LVWD\u000f\u0003:LQGRZV\u0003 6HUYHU\u0003\u0015\u0013\u0013\u001b\u000f\u0003DQG\u0003:LQGRZV\u0003\u001a\u000f\u0003ZH\u0003UHFRPPHQG\u0003XVLQJ\u0003WKH\u00030LFURVRIW\u00039LVXDO\u00036WXGLR\u0003&\u0003 FRPSLOHU\u0011\u000319,',$\u0003FXUUHQWO\\\u0003VXSSRUWV\u0003ERWK\u0003WKH\u00039LVXDO\u00036WXGLR\u0003\u0015\u0013\u0013\u0018\u0003DQG\u00039LVXDO\u00036WXGLR\u0003 \u0015\u0013\u0013\u001b\u0003IDPLOLHV\u0003RI\u0003SURGXFWV\u0011\u0003$V\u00030LFURVRIW\u0003UHOHDVHV\u0003QHZ\u0003YHUVLRQV\u000f\u000319,',$\u0003ZLOO\u0003OLNHO\\\u0003 DGG\u0003VXSSRUW\u0003IRU\u0003QHZHU\u0003HGLWLRQV\u0003RI\u00039LVXDO\u00036WXGLR\u0003ZKLOH\u0003GURSSLQJ\u0003VXSSRUW\u0003IRU\u0003ROGHU\u0003 YHUVLRQV\u0011\u00030DQ\\\u0003&\u0003DQG\u0003&\u000e\u000e\u0003GHYHORSHUV\u0003DOUHDG\\\u0003KDYH\u00039LVXDO\u00036WXGLR\u0003\u0015\u0013\u0013\u0018\u0003RU\u00039LVXDO\u0003 6WXGLR\u0003\u0015\u0013\u0013\u001b\u0003LQVWDOOHG\u0003RQ\u0003WKHLU\u0003PDFKLQH\u000f\u0003VR\u0003LI\u0003WKLV\u0003DSSOLHV\u0003WR\u0003\\RX\u000f\u0003\\RX\u0003FDQ\u0003VDIHO\\\u0003 VNLS\u0003WKLV\u0003VXEVHFWLRQ\u0011\u0003 ,I\u0003\\RX\u0003GR\u0003QRW\u0003KDYH\u0003DFFHVV\u0003WR\u0003D\u0003VXSSRUWHG\u0003YHUVLRQ\u0003RI\u00039LVXDO\u00036WXGLR\u0003DQG\u0003DUHQ\u01e2W\u0003UHDG\\\u0003 WR\u0003LQYHVW\u0003LQ\u0003D\u0003FRS\\\u000f\u00030LFURVRIW\u0003GRHV\u0003SURYLGH\u0003IUHH\u0003GRZQORDGV\u0003RI\u0003WKH\u00039LVXDO\u00036WXGLR\u0003 \u0015\u0013\u0013\u001b\u0003([SUHVV\u0003HGLWLRQ\u0003RQ\u0003LWV\u0003ZHEVLWH\u0011\u0003$OWKRXJK\u0003W\\SLFDOO\\\u0003XQVXLWDEOH\u0003IRU\u0003FRPPHUFLDO\u0003 VRIWZDUH\u0003GHYHORSPHQW\u000f\u0003WKH\u00039LVXDO\u00036WXGLR\u0003([SUHVV\u0003HGLWLRQV\u0003DUH\u0003DQ\u0003H[FHOOHQW\u0003ZD\\\u0003WR\u0003 JHW\u0003VWDUWHG\u0003GHYHORSLQJ\u0003&8'$\u0003&\u0003RQ\u0003:LQGRZV\u0003SODWIRUPV\u0003ZLWKRXW\u0003LQYHVWLQJ\u0003PRQH\\\u0003LQ\u0003 VRIWZDUH\u0003OLFHQVHV\u0011\u00036R\u000f\u0003KHDG\u0003RQ\u0003RYHU\u0003WR\u0003 ZZZ\u0011PLFURVRIW\u0011FRP\u0012YLVXDOVWXGLR\u0003LI\u0003\\RX\u01e2UH\u0003 LQ\u0003QHHG\u0003RI\u00039LVXDO\u00036WXGLR\u0003\u0015\u0013\u0013\u001b\u0004 Download from www.wowebook.comptg&&&+++333555555(((((( : :: /one.lf/nine.lf\u0015\u0011\u0016\u0003$$$777 (((\u0003\u0003\u0003999 , , , /,18; 0RVW\u0003/LQX[\u0003GLVWULEXWLRQV\u0003W\\SLFDOO\\\u0003VKLS\u0003ZLWK\u0003D\u0003YHUVLRQ\u0003RI\u0003WKH\u0003*18\u0003&\u0003FRPSLOHU\u0003 (gcc \u0003LQVWDOOHG\u0011\u0003$V\u0003RI\u0003&8'$\u0003\u0016\u0011\u0013\u000f\u0003WKH\u0003IROORZLQJ\u0003/LQX[\u0003GLVWULEXWLRQV\u0003VKLSSHG\u0003ZLWK\u0003 VXSSRUWHG\u0003YHUVLRQV\u0003RI\u0003 gcc\u0003LQVWDOOHG 5HG\u0003+DW\u0003(QWHUSULVH\u0003/LQX[\u0003\u0017\u0011\u001b\u01e9\u0003 5HG\u0003+DW\u0003(QWHUSULVH\u0003/LQX[\u0003\u0018\u0011\u0016\u01e9\u0003 2SHQ686(\u0003\u0014\u0014\u0011\u0014\u01e9\u0003 686(\u0003/LQX[\u0003(QWHUSULVH\u0003'HVNWRS\u0003\u0014\u0014\u01e9\u0003 8EXQWX\u0003 \u0011\u0013\u0017\u01e9\u0003 )HGRUD\u0003\u0014\u0013\u01e9\u0003 ,I\u0003\\RX\u01e2UH\u0003D\u0003GLH\u0010KDUG\u0003/LQX[\u0003XVHU\u000f\u0003\\RX\u01e2UH\u0003SUREDEO\\\u0003DZDUH\u0003WKDW\u0003PDQ\\\u0003/LQX[\u0003VRIWZDUH\u0003 SDFNDJHV\u0003ZRUN\u0003RQ\u0003IDU\u0003PRUH\u0003WKDQ\u0003MXVW\u0003WKH\u0003\u01e4VXSSRUWHG\u01e5\u0003SODWIRUPV\u0011\u00037KH\u0003&8'$\u0003 7RRONLW\u0003LV\u0003QR\u0003H[FHSWLRQ\u000f\u0003VR\u0003HYHQ\u0003LI\u0003\\RXU\u0003IDYRULWH\u0003GLVWULEXWLRQ\u0003LV\u0003QRW\u0003OLVWHG\u0003KHUH\u000f\u0003LW\u0003 PD\\\u0003EH\u0003ZRUWK\u0003WU\\LQJ\u0003LW\u0003DQ\\ZD\\\u0011\u00037KH\u0003GLVWULEXWLRQ\u01e2V\u0003NHUQHO\u000f\u0003 gcc\u000f\u0003DQG\u0003glibc\u0003YHUVLRQV\u0003 ZLOO\u0003LQ\u0003D\u0003ODUJH\u0003SDUW\u0003GHWHUPLQH\u0003ZKHWKHU\u0003WKH\u0003GLVWULEXWLRQ\u0003LV\u0003FRPSDWLEOH\u0011 0$&,1726+\u000326\u0003; ,I\u0003\\RX\u0003ZDQW\u0003WR\u0003GHYHORS\u0003RQ\u00030DF\u000326\u0003;\u000f\u0003\\RX\u0003ZLOO\u0003QHHG\u0003WR\u0003HQVXUH\u0003WKDW\u0003\\RXU\u0003PDFKLQH\u0003 KDV\u0003DW\u0003OHDVW\u0003YHUVLRQ\u0003\u0014\u0013\u0011\u0018\u0011\u001a\u0003RI\u00030DF\u000326\u0003;\u0011\u00037KLV\u0003LQFOXGHV\u0003YHUVLRQ\u0003\u0014\u0013\u0011\u0019\u000f\u00030DF\u000326\u0003;\u0003 \u01e46QRZ\u0003/HRSDUG\u0011\u01e5\u0003)XUWKHUPRUH\u000f\u0003\\RX\u0003ZLOO\u0003QHHG\u0003WR\u0003LQVWDOO\u0003 gcc\u0003E\\\u0003GRZQORDGLQJ\u0003 DQG\u0003LQVWDOOLQJ\u0003$SSOH\u01e2V\u0003;FRGH\u0011\u00037KLV\u0003VRIWZDUH\u0003LV\u0003SURYLGHG\u0003IUHH\u0003WR\u0003$SSOH\u0003'HYHORSHU\u0003 &RQQHFWLRQ\u0003 $'& \u0003PHPEHUV\u0003DQG\u0003FDQ\u0003EH\u0003GRZQORDGHG\u0003IURP\u0003KWWS \u0012\u0012GHYHORSHU\u0011DSSOH\u0011 FRP\u0012WRROV\u0012;FRGH\u0011\u00037KH\u0003FRGH\u0003LQ\u0003WKLV\u0003ERRN\u0003ZDV\u0003GHYHORSHG\u0003RQ\u0003/LQX[\u0003DQG\u0003:LQGRZV\u0003 SODWIRUPV\u0003EXW\u0003VKRXOG\u0003ZRUN\u0003ZLWKRXW\u0003PRGL\u020cFDWLRQ\u0003RQ\u00030DF\u000326\u0003;\u0003V\\VWHPV\u0011 &KDSWHU\u00035HYLHZ\u0015\u0011\u0016\u0003 ,I\u0003\\RX\u0003KDYH\u0003IROORZHG\u0003WKH\u0003VWHSV\u0003LQ\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003DUH\u0003UHDG\\\u0003WR\u0003VWDUW\u0003GHYHORSLQJ\u0003 FRGH\u0003LQ\u0003&8'$\u0003&\u0011\u00033HUKDSV\u0003\\RX\u0003KDYH\u0003HYHQ\u0003SOD\\HG\u0003DURXQG\u0003ZLWK\u0003VRPH\u0003RI\u0003WKH\u000319,',$\u0003 *38\u0003&RPSXWLQJ\u00036'.\u0003FRGH\u0003VDPSOHV\u0003\\RX\u0003GRZQORDGHG\u0003IURP\u000319,',$\u01e2V\u0003ZHEVLWH\u0011\u0003,I\u0003VR\u000f\u0003 ZH\u0003DSSODXG\u0003\\RXU\u0003ZLOOLQJQHVV\u0003WR\u0003WLQNHU\u0004\u0003,I\u0003QRW\u000f\u0003GRQ\u01e2W\u0003ZRUU\\\u0011\u0003(YHU\\WKLQJ\u0003\\RX\u0003QHHG\u0003LV\u0003 ULJKW\u0003KHUH\u0003LQ\u0003WKLV\u0003ERRN\u0011\u0003(LWKHU\u0003ZD\\\u000f\u0003\\RX\u01e2UH\u0003SUREDEO\\\u0003UHDG\\\u0003WR\u0003VWDUW\u0003ZULWLQJ\u0003\\RXU\u0003\u020cUVW\u0003 SURJUDP\u0003LQ\u0003&8'$\u0003&\u000f\u0003VR\u0003OHW\u01e2V\u0003JHW\u0003VWDUWHG\u0011 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /two.lf/one.lfChapter 3 Introduction to CUDA C ,I\u0003\\RX\u0003UHDG\u0003&KDSWHU\u0003\u0014\u000f\u0003ZH\u0003KRSH\u0003ZH\u0003KDYH\u0003FRQYLQFHG\u0003\\RX\u0003RI\u0003ERWK\u0003WKH\u0003LPPHQVH\u0003 FRPSXWDWLRQDO\u0003SRZHU\u0003RI\u0003JUDSKLFV\u0003SURFHVVRUV\u0003DQG\u0003WKDW\u0003\\RX\u0003DUH\u0003MXVW\u0003WKH\u0003 SURJUDPPHU\u0003WR\u0003KDUQHVV\u0003LW\u0011\u0003$QG\u0003LI\u0003\\RX\u0003FRQWLQXHG\u0003WKURXJK\u0003&KDSWHU\u0003\u0015\u000f\u0003\\RX\u0003VKRXOG\u0003 KDYH\u0003D\u0003IXQFWLRQLQJ\u0003HQYLURQPHQW\u0003VHW\u0003XS\u0003LQ\u0003RUGHU\u0003WR\u0003FRPSLOH\u0003DQG\u0003UXQ\u0003WKH\u0003FRGH\u0003 \\RX\u01e2OO\u0003EH\u0003ZULWLQJ\u0003LQ\u0003&8'$\u0003&\u0011\u0003,I\u0003\\RX\u0003VNLSSHG\u0003WKH\u0003\u020cUVW\u0003FKDSWHUV\u000f\u0003SHUKDSV\u0003\\RX\u01e2UH\u0003MXVW\u0003 VNLPPLQJ\u0003IRU\u0003FRGH\u0003VDPSOHV\u000f\u0003SHUKDSV\u0003\\RX\u0003UDQGRPO\\\u0003RSHQHG\u0003WR\u0003WKLV\u0003SDJH\u0003ZKLOH\u0003 EURZVLQJ\u0003DW\u0003D\u0003ERRNVWRUH\u000f\u0003RU\u0003PD\\EH\u0003\\RX\u01e2UH\u0003MXVW\u0003G\\LQJ\u0003WR\u0003JHW\u0003VWDUWHG \u0003WKDW\u01e2V\u00032.\u000f\u0003WRR\u0003 ZH\u0003ZRQ\u01e2W\u0003WHOO \u0011\u0003(LWKHU\u0003ZD\\\u000f\u0003\\RX\u01e2UH\u0003UHDG\\\u0003WR\u0003JHW\u0003VWDUWHG\u0003ZLWK\u0003WKH\u0003\u020cUVW\u0003FRGH\u0003H[DP - SOHV\u000f\u0003VR\u0003OHW\u01e2V\u0003JR\u0011 Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /two.lf/two.lf&KDSWHU\u00032EMHFWLYHV\u0016\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003ZULWH\u0003\\RXU\u0003\u020cUVW\u0003OLQHV\u0003RI\u0003FRGH\u0003LQ\u0003&8'$\u0003&\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003WKH\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003FRGH\u0003ZULWWHQ\u0003IRU\u0003WKH\u0003\u01e9\u0003 host \u0003DQG\u0003FRGH\u0003ZULWWHQ\u0003 IRU\u0003D\u0003device \u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003UXQ\u0003GHYLFH\u0003FRGH\u0003IURP\u0003WKH\u0003KRVW\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003WKH\u0003ZD\\V\u0003GHYLFH\u0003PHPRU\\\u0003FDQ\u0003EH\u0003XVHG\u0003RQ\u0003&8'$\u0010FDSDEOH\u0003\u01e9\u0003 GHYLFHV\u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003TXHU\\\u0003\\RXU\u0003V\\VWHP\u0003IRU\u0003LQIRUPDWLRQ\u0003RQ\u0003LWV\u0003&8'$\u0010FDSDEOH\u0003\u01e9\u0003 GHYLFHV\u0011 $\u0003)LUVW\u00033URJUDP\u0016\u0011\u0015\u0003 6LQFH\u0003ZH\u0003LQWHQG\u0003WR\u0003OHDUQ\u0003&8'$\u0003&\u0003E\\\u0003H[DPSOH\u000f\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003RXU\u0003\u020cUVW\u0003H[DPSOH\u0003 RI\u0003&8'$\u0003&\u0011\u0003,Q\u0003DFFRUGDQFH\u0003ZLWK\u0003WKH\u0003ODZV\u0003JRYHUQLQJ\u0003ZULWWHQ\u0003ZRUNV\u0003RI\u0003FRPSXWHU\u0003 SURJUDPPLQJ\u000f\u0003ZH\u0003EHJLQ\u0003E\\\u0003H[DPLQLQJ\u0003D\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003H[DPSOH\u0011 +(//2\u000f\u0003:25/'\u0004 \u0016\u0011\u0015\u0011\u0014\u0003#include \"../common/book.h\" int main( void ) { printf( \"Hello, World!\\n\" ); return 0; } $W\u0003WKLV\u0003SRLQW\u000f\u0003QR\u0003GRXEW\u0003\\RX\u01e2UH\u0003ZRQGHULQJ\u0003ZKHWKHU\u0003WKLV\u0003ERRN\u0003LV\u0003D\u0003VFDP\u0011\u0003,V\u0003WKLV\u0003MXVW\u0003 &\"\u0003'RHV\u0003&8'$\u0003&\u0003HYHQ\u0003H[LVW\"\u00037KH\u0003DQVZHUV\u0003WR\u0003WKHVH\u0003TXHVWLRQV\u0003DUH\u0003ERWK\u0003LQ\u0003WKH\u0003DI\u020cU - PDWLYH \u0003WKLV\u0003ERRN\u0003LV\u0003QRW\u0003DQ\u0003HODERUDWH\u0003UXVH\u0011\u00037KLV\u0003VLPSOH\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003H[DPSOH\u0003LV\u0003 Download from www.wowebook.comptg$$$ \u0003 \u0003 \u0003 ))),,, 5 5 5 6 66 7 77\u0003\u0003\u00033 3 35 5 52 2 2* * *5 5 5$ $ $0 0 0 /two.lf/three.lf\u0016\u0011\u0015\u0003PHDQW\u0003WR\u0003LOOXVWUDWH\u0003WKDW\u000f\u0003DW\u0003LWV\u0003PRVW\u0003EDVLF\u000f\u0003WKHUH\u0003LV\u0003QR\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003&8'$\u0003&\u0003 DQG\u0003WKH\u0003VWDQGDUG\u0003&\u0003WR\u0003ZKLFK\u0003\\RX\u0003KDYH\u0003JURZQ\u0003DFFXVWRPHG\u0011\u0003 7KH\u0003VLPSOLFLW\\\u0003RI\u0003WKLV\u0003H[DPSOH\u0003VWHPV\u0003IURP\u0003WKH\u0003IDFW\u0003WKDW\u0003LW\u0003UXQV\u0003HQWLUHO\\\u0003RQ\u0003WKH\u0003 host \u0011\u0003 7KLV\u0003ZLOO\u0003EH\u0003RQH\u0003RI\u0003WKH\u0003LPSRUWDQW\u0003GLVWLQFWLRQV\u0003PDGH\u0003LQ\u0003WKLV\u0003ERRN \u0003ZH\u0003UHIHU\u0003WR\u0003WKH\u0003 &38\u0003DQG\u0003WKH\u0003V\\VWHP\u01e2V\u0003PHPRU\\\u0003DV\u0003WKH\u0003 host \u0003DQG\u0003UHIHU\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003LWV\u0003PHPRU\\\u0003 DV\u0003WKH\u0003device \u0011\u00037KLV\u0003H[DPSOH\u0003UHVHPEOHV\u0003DOPRVW\u0003DOO\u0003WKH\u0003FRGH\u0003\\RX\u0003KDYH\u0003HYHU\u0003ZULWWHQ\u0003 EHFDXVH\u0003LW\u0003VLPSO\\\u0003LJQRUHV\u0003DQ\\\u0003FRPSXWLQJ\u0003GHYLFHV\u0003RXWVLGH\u0003WKH\u0003KRVW\u0011 7R\u0003UHPHG\\\u0003WKDW\u0003VLQNLQJ\u0003IHHOLQJ\u0003WKDW\u0003\\RX\u01e2YH\u0003LQYHVWHG\u0003LQ\u0003QRWKLQJ\u0003PRUH\u0003WKDQ\u0003DQ\u0003 H[SHQVLYH\u0003FROOHFWLRQ\u0003RI\u0003WULYLDOLWLHV\u000f\u0003ZH\u0003ZLOO\u0003JUDGXDOO\\\u0003EXLOG\u0003XSRQ\u0003WKLV\u0003VLPSOH\u0003 H[DPSOH\u0011\u0003/HW\u01e2V\u0003ORRN\u0003DW\u0003VRPHWKLQJ\u0003WKDW\u0003XVHV\u0003WKH\u0003*38\u0003 D\u0003 device \u0003WR\u0003H[HFXWH\u0003FRGH\u0011\u0003 $\u0003IXQFWLRQ\u0003WKDW\u0003H[HFXWHV\u0003RQ\u0003WKH\u0003GHYLFH\u0003LV\u0003W\\SLFDOO\\\u0003FDOOHG\u0003D\u0003 kernel \u0011 A KERNEL CALL \u0016\u0011\u0015\u0011\u0015\u0003 1RZ\u0003ZH\u0003ZLOO\u0003EXLOG\u0003XSRQ\u0003RXU\u0003H[DPSOH\u0003ZLWK\u0003VRPH\u0003FRGH\u0003WKDW\u0003VKRXOG\u0003ORRN\u0003PRUH\u0003 IRUHLJQ\u0003WKDQ\u0003RXU\u0003SODLQ\u0010YDQLOOD\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003SURJUDP\u0011 #include <iostream> __global__ void kernel( void ) { } int main( void ) { kernel<<<1,1>>>(); printf( \"Hello, World!\\n\" ); return 0; } 7KLV\u0003SURJUDP\u0003PDNHV\u0003WZR\u0003QRWDEOH\u0003DGGLWLRQV\u0003WR\u0003WKH\u0003RULJLQDO\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003 H[DPSOH $Q\u0003HPSW\\\u0003IXQFWLRQ\u0003QDPHG\u0003\u01e9\u0003 kernel() \u0003TXDOL\u020cHG\u0003ZLWK\u0003 __global__ $\u0003FDOO\u0003WR\u0003WKH\u0003HPSW\\\u0003IXQFWLRQ\u000f\u0003HPEHOOLVKHG\u0003ZLWK\u0003\u01e9\u0003 <<<1,1>>> $V\u0003ZH\u0003VDZ\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003FRGH\u0003LV\u0003FRPSLOHG\u0003E\\\u0003\\RXU\u0003V\\VWHP\u01e2V\u0003VWDQGDUG\u0003 &\u0003FRPSLOHU\u0003E\\\u0003GHIDXOW\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003*18\u0003 gcc\u0003PLJKW\u0003FRPSLOH\u0003\\RXU\u0003KRVW\u0003FRGH\u0003 Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /two.lf/four.lfRQ\u0003/LQX[\u0003RSHUDWLQJ\u0003V\\VWHPV\u000f\u0003ZKLOH\u00030LFURVRIW\u00039LVXDO\u0003&\u0003FRPSLOHV\u0003LW\u0003RQ\u0003:LQGRZV\u0003 V\\VWHPV\u0011\u00037KH\u000319,',$\u0003WRROV\u0003VLPSO\\\u0003IHHG\u0003WKLV\u0003KRVW\u0003FRPSLOHU\u0003\\RXU\u0003FRGH\u000f\u0003DQG\u0003HYHU\\ - WKLQJ\u0003EHKDYHV\u0003DV\u0003LW\u0003ZRXOG\u0003LQ\u0003D\u0003ZRUOG\u0003ZLWKRXW\u0003&8'$\u0011\u0003 1RZ\u0003ZH\u0003VHH\u0003WKDW\u0003&8'$\u0003&\u0003DGGV\u0003WKH\u0003 __global__ \u0003TXDOL\u020cHU\u0003WR\u0003VWDQGDUG\u0003&\u0011\u00037KLV\u0003 PHFKDQLVP\u0003DOHUWV\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003D\u0003IXQFWLRQ\u0003VKRXOG\u0003EH\u0003FRPSLOHG\u0003WR\u0003UXQ\u0003RQ\u0003 D\u0003GHYLFH\u0003LQVWHDG\u0003RI\u0003WKH\u0003KRVW\u0011\u0003,Q\u0003WKLV\u0003VLPSOH\u0003H[DPSOH\u000f\u0003",
    "IRUHLJQ\u0003WKDQ\u0003RXU\u0003SODLQ\u0010YDQLOOD\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003SURJUDP\u0011 #include <iostream> __global__ void kernel( void ) { } int main( void ) { kernel<<<1,1>>>(); printf( \"Hello, World!\\n\" ); return 0; } 7KLV\u0003SURJUDP\u0003PDNHV\u0003WZR\u0003QRWDEOH\u0003DGGLWLRQV\u0003WR\u0003WKH\u0003RULJLQDO\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003 H[DPSOH $Q\u0003HPSW\\\u0003IXQFWLRQ\u0003QDPHG\u0003\u01e9\u0003 kernel() \u0003TXDOL\u020cHG\u0003ZLWK\u0003 __global__ $\u0003FDOO\u0003WR\u0003WKH\u0003HPSW\\\u0003IXQFWLRQ\u000f\u0003HPEHOOLVKHG\u0003ZLWK\u0003\u01e9\u0003 <<<1,1>>> $V\u0003ZH\u0003VDZ\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003FRGH\u0003LV\u0003FRPSLOHG\u0003E\\\u0003\\RXU\u0003V\\VWHP\u01e2V\u0003VWDQGDUG\u0003 &\u0003FRPSLOHU\u0003E\\\u0003GHIDXOW\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003*18\u0003 gcc\u0003PLJKW\u0003FRPSLOH\u0003\\RXU\u0003KRVW\u0003FRGH\u0003 Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /two.lf/four.lfRQ\u0003/LQX[\u0003RSHUDWLQJ\u0003V\\VWHPV\u000f\u0003ZKLOH\u00030LFURVRIW\u00039LVXDO\u0003&\u0003FRPSLOHV\u0003LW\u0003RQ\u0003:LQGRZV\u0003 V\\VWHPV\u0011\u00037KH\u000319,',$\u0003WRROV\u0003VLPSO\\\u0003IHHG\u0003WKLV\u0003KRVW\u0003FRPSLOHU\u0003\\RXU\u0003FRGH\u000f\u0003DQG\u0003HYHU\\ - WKLQJ\u0003EHKDYHV\u0003DV\u0003LW\u0003ZRXOG\u0003LQ\u0003D\u0003ZRUOG\u0003ZLWKRXW\u0003&8'$\u0011\u0003 1RZ\u0003ZH\u0003VHH\u0003WKDW\u0003&8'$\u0003&\u0003DGGV\u0003WKH\u0003 __global__ \u0003TXDOL\u020cHU\u0003WR\u0003VWDQGDUG\u0003&\u0011\u00037KLV\u0003 PHFKDQLVP\u0003DOHUWV\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003D\u0003IXQFWLRQ\u0003VKRXOG\u0003EH\u0003FRPSLOHG\u0003WR\u0003UXQ\u0003RQ\u0003 D\u0003GHYLFH\u0003LQVWHDG\u0003RI\u0003WKH\u0003KRVW\u0011\u0003,Q\u0003WKLV\u0003VLPSOH\u0003H[DPSOH\u000f\u0003 nvcc\u0003JLYHV\u0003WKH\u0003IXQFWLRQ\u0003 kernel() \u0003WR\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003KDQGOHV\u0003GHYLFH\u0003FRGH\u000f\u0003DQG\u0003LW\u0003IHHGV\u0003 main()\u0003WR\u0003WKH\u0003 KRVW\u0003FRPSLOHU\u0003DV\u0003LW\u0003GLG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u0011 6R\u000f\u0003ZKDW\u0003LV\u0003WKH\u0003P\\VWHULRXV\u0003FDOO\u0003WR\u0003 kernel() \u000f\u0003DQG\u0003ZK\\\u0003PXVW\u0003ZH\u0003YDQGDOL]H\u0003RXU\u0003 VWDQGDUG\u0003&\u0003ZLWK\u0003DQJOH\u0003EUDFNHWV\u0003DQG\u0003D\u0003QXPHULF\u0003WXSOH\"\u0003%UDFH\u0003\\RXUVHOI\u000f\u0003EHFDXVH\u0003WKLV\u0003 LV\u0003ZKHUH\u0003WKH\u0003PDJLF\u0003KDSSHQV\u0011\u0003 :H\u0003KDYH\u0003VHHQ\u0003WKDW\u0003&8'$\u0003&\u0003QHHGHG\u0003D\u0003OLQJXLVWLF\u0003PHWKRG\u0003IRU\u0003PDUNLQJ\u0003D\u0003IXQFWLRQ\u0003 DV\u0003GHYLFH\u0003FRGH\u0011\u00037KHUH\u0003LV\u0003QRWKLQJ\u0003VSHFLDO\u0003DERXW\u0003WKLV \u0003LW\u0003LV\u0003VKRUWKDQG\u0003WR\u0003VHQG\u0003KRVW\u0003 FRGH\u0003WR\u0003RQH\u0003FRPSLOHU\u0003DQG\u0003GHYLFH\u0003FRGH\u0003WR\u0003DQRWKHU\u0003FRPSLOHU\u0011\u00037KH\u0003WULFN\u0003LV\u0003DFWXDOO\\\u0003LQ\u0003 FDOOLQJ\u0003WKH\u0003GHYLFH\u0003FRGH\u0003IURP\u0003WKH\u0003KRVW\u0003FRGH\u0011\u00032QH\u0003RI\u0003WKH\u0003EHQH\u020cWV\u0003RI\u0003&8'$\u0003&\u0003LV\u0003WKDW\u0003 LW\u0003SURYLGHV\u0003WKLV\u0003ODQJXDJH\u0003LQWHJUDWLRQ\u0003VR\u0003WKDW\u0003GHYLFH\u0003IXQFWLRQ\u0003FDOOV\u0003ORRN\u0003YHU\\\u0003PXFK\u0003 OLNH\u0003KRVW\u0003IXQFWLRQ\u0003FDOOV\u0011\u0003/DWHU\u0003ZH\u0003ZLOO\u0003GLVFXVV\u0003ZKDW\u0003DFWXDOO\\\u0003KDSSHQV\u0003EHKLQG\u0003WKH\u0003 VFHQHV\u000f\u0003EXW\u0003VXI\u020cFH\u0003WR\u0003VD\\\u0003WKDW\u0003WKH\u0003&8'$\u0003FRPSLOHU\u0003DQG\u0003UXQWLPH\u0003WDNH\u0003FDUH\u0003RI\u0003WKH\u0003 PHVV\\\u0003EXVLQHVV\u0003RI\u0003LQYRNLQJ\u0003GHYLFH\u0003FRGH\u0003IURP\u0003WKH\u0003KRVW\u0011 6R\u000f\u0003WKH\u0003P\\VWHULRXV\u0010ORRNLQJ\u0003FDOO\u0003LQYRNHV\u0003GHYLFH\u0003FRGH\u000f\u0003EXW\u0003ZK\\\u0003WKH\u0003DQJOH\u0003EUDFNHWV\u0003 DQG\u0003QXPEHUV\"\u00037KH\u0003DQJOH\u0003EUDFNHWV\u0003GHQRWH\u0003DUJXPHQWV\u0003ZH\u0003SODQ\u0003WR\u0003SDVV\u0003WR\u0003WKH\u0003 UXQWLPH\u0003V\\VWHP\u0011\u00037KHVH\u0003DUH\u0003QRW\u0003DUJXPHQWV\u0003WR\u0003WKH\u0003GHYLFH\u0003FRGH\u0003EXW\u0003DUH\u0003SDUDPHWHUV\u0003 WKDW\u0003ZLOO\u0003LQ\u020dXHQFH\u0003KRZ\u0003WKH\u0003UXQWLPH\u0003ZLOO\u0003ODXQFK\u0003RXU\u0003GHYLFH\u0003FRGH\u0011\u0003:H\u0003ZLOO\u0003OHDUQ\u0003 DERXW\u0003WKHVH\u0003SDUDPHWHUV\u0003WR\u0003WKH\u0003UXQWLPH\u0003LQ\u0003WKH\u0003QH[W\u0003FKDSWHU\u0011\u0003$UJXPHQWV\u0003WR\u0003WKH\u0003 GHYLFH\u0003FRGH\u0003LWVHOI\u0003JHW\u0003SDVVHG\u0003ZLWKLQ\u0003WKH\u0003SDUHQWKHVHV\u000f\u0003MXVW\u0003OLNH\u0003DQ\\\u0003RWKHU\u0003IXQFWLRQ\u0003 LQYRFDWLRQ\u0011 PASSING PARAMETERS \u0016\u0011\u0015\u0011\u0016\u0003 :H\u01e2YH\u0003SURPLVHG\u0003WKH\u0003DELOLW\\\u0003WR\u0003SDVV\u0003SDUDPHWHUV\u0003WR\u0003RXU\u0003NHUQHO\u000f\u0003DQG\u0003WKH\u0003WLPH\u0003KDV\u0003 FRPH\u0003IRU\u0003XV\u0003WR\u0003PDNH\u0003JRRG\u0003RQ\u0003WKDW\u0003SURPLVH\u0011\u0003&RQVLGHU\u0003WKH\u0003IROORZLQJ\u0003HQKDQFHPHQW\u0003 WR\u0003RXU\u0003\u01e4+HOOR\u000f\u0003:RUOG\u0004\u01e5\u0003DSSOLFDWLRQ Download from www.wowebook.comptg$$$ \u0003 \u0003 \u0003 ))),,, 5 5 5 6 66 7 77\u0003\u0003\u00033 3 35 5 52 2 2* * *5 5 5$ $ $0 0 0 /two.lf/five.lf\u0016\u0011\u0015\u0003#include <iostream> #include \"book.h\" __global__ void add( int a, int b, int *c ) { *c = a + b; } int main( void ) { int c; int *dev_c; HANDLE_ERROR( cudaMalloc( ( void**)&dev_c, sizeof(int) ) ); add<<<1,1>>>( 2, 7, dev_c ); HANDLE_ERROR( cudaMemcpy( &c, dev_c, sizeof(int), cudaMemcpyDeviceToHost ) ); printf( \"2 + 7 = %d\\n\" , c ); cudaFree( dev_c ); return 0; } <RX\u0003ZLOO\u0003QRWLFH\u0003D\u0003KDQGIXO\u0003RI\u0003QHZ\u0003OLQHV\u0003KHUH\u000f\u0003EXW\u0003WKHVH\u0003FKDQJHV\u0003LQWURGXFH\u0003RQO\\\u0003WZR\u0003 FRQFHSWV :H\u0003FDQ\u0003SDVV\u0003SDUDPHWHUV\u0003WR\u0003D\u0003NHUQHO\u0003DV\u0003ZH\u0003ZRXOG\u0003ZLWK\u0003DQ\\\u0003&\u0003IXQFWLRQ\u0011\u01e9\u0003 :H\u0003QHHG\u0003WR\u0003DOORFDWH\u0003PHPRU\\\u0003WR\u0003GR\u0003DQ\\WKLQJ\u0003XVHIXO\u0003RQ\u0003D\u0003GHYLFH\u000f\u0003VXFK\u0003DV\u0003UHWXUQ\u0003\u01e9\u0003 YDOXHV\u0003WR\u0003WKH\u0003KRVW\u0011 7KHUH\u0003LV\u0003QRWKLQJ\u0003VSHFLDO\u0003DERXW\u0003SDVVLQJ\u0003SDUDPHWHUV\u0003WR\u0003D\u0003NHUQHO\u0011\u00037KH\u0003DQJOH\u0010EUDFNHW\u0003 V\\QWD[\u0003QRWZLWKVWDQGLQJ\u000f\u0003D\u0003NHUQHO\u0003FDOO\u0003ORRNV\u0003DQG\u0003DFWV\u0003H[DFWO\\\u0003OLNH\u0003DQ\\\u0003IXQFWLRQ\u0003FDOO\u0003 LQ\u0003VWDQGDUG\u0003&\u0011\u00037KH\u0003UXQWLPH\u0003V\\VWHP\u0003WDNHV\u0003FDUH\u0003RI\u0003DQ\\\u0003FRPSOH[LW\\\u0003LQWURGXFHG\u0003E\\\u0003WKH\u0003 IDFW\u0003WKDW\u0003WKHVH\u0003SDUDPHWHUV\u0003QHHG\u0003WR\u0003JHW\u0003IURP\u0003WKH\u0003KRVW\u0003WR\u0003WKH\u0003GHYLFH\u0011 Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /two.lf/six.lf7KH\u0003PRUH\u0003LQWHUHVWLQJ\u0003DGGLWLRQ\u0003LV\u0003WKH\u0003DOORFDWLRQ\u0003RI\u0003PHPRU\\\u0003XVLQJ\u0003 cudaMalloc() \u0011\u0003 7KLV\u0003FDOO\u0003EHKDYHV\u0003YHU\\\u0003VLPLODUO\\\u0003WR\u0003WKH\u0003VWDQGDUG\u0003&\u0003FDOO\u0003 malloc() \u000f\u0003EXW\u0003LW\u0003WHOOV\u0003 WKH\u0003&8'$\u0003UXQWLPH\u0003WR\u0003DOORFDWH\u0003WKH\u0003PHPRU\\\u0003RQ\u0003WKH\u0003GHYLFH\u0011\u00037KH\u0003\u020cUVW\u0003DUJXPHQW\u0003 LV\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003SRLQWHU\u0003\\RX\u0003ZDQW\u0003WR\u0003KROG\u0003WKH\u0003DGGUHVV\u0003RI\u0003WKH\u0003QHZO\\\u0003DOORFDWHG\u0003 PHPRU\\\u000f\u0003DQG\u0003WKH\u0003VHFRQG\u0003SDUDPHWHU\u0003LV\u0003WKH\u0003VL]H\u0003RI\u0003WKH\u0003DOORFDWLRQ\u0003\\RX\u0003ZDQW\u0003WR\u0003PDNH\u0011\u0003 %HVLGHV\u0003WKDW\u0003\\RXU\u0003DOORFDWHG\u0003PHPRU\\\u0003SRLQWHU\u0003LV\u0003QRW\u0003WKH\u0003IXQFWLRQ\u01e2V\u0003UHWXUQ\u0003YDOXH\u000f\u0003 WKLV\u0003LV\u0003LGHQWLFDO\u0003EHKDYLRU\u0003WR\u0003 malloc() \u000f\u0003ULJKW\u0003GRZQ\u0003WR\u0003WKH\u0003 void*\u0003UHWXUQ\u0003W\\SH\u0011\u00037KH\u0003 HANDLE_ERROR() \u0003WKDW\u0003VXUURXQGV\u0003WKHVH\u0003FDOOV\u0003LV\u0003D\u0003XWLOLW\\\u0003PDFUR\u0003WKDW\u0003ZH\u0003KDYH\u0003 SURYLGHG\u0003DV\u0003SDUW\u0003RI\u0003WKLV\u0003ERRN\u01e2V\u0003VXSSRUW\u0003FRGH\u0011\u0003,W\u0003VLPSO\\\u0003GHWHFWV\u0003WKDW\u0003WKH\u0003FDOO\u0003KDV\u0003 UHWXUQHG\u0003DQ\u0003HUURU\u000f\u0003SULQWV\u0003WKH\u0003DVVRFLDWHG\u0003HUURU\u0003PHVVDJH\u000f\u0003DQG\u0003H[LWV\u0003WKH\u0003DSSOLFDWLRQ\u0003 ZLWK\u0003DQ\u0003EXIT_FAILURE \u0003FRGH\u0011\u0003$OWKRXJK\u0003\\RX\u0003DUH\u0003IUHH\u0003WR\u0003XVH\u0003WKLV\u0003FRGH\u0003LQ\u0003\\RXU\u0003RZQ\u0003 DSSOLFDWLRQV\u000f\u0003LW\u0003LV\u0003KLJKO\\\u0003OLNHO\\\u0003WKDW\u0003WKLV\u0003HUURU\u0010KDQGOLQJ\u0003FRGH\u0003ZLOO\u0003EH\u0003LQVXI\u020cFLHQW\u0003LQ\u0003 SURGXFWLRQ\u0003FRGH\u0011 7KLV\u0003UDLVHV\u0003D\u0003VXEWOH\u0003EXW\u0003LPSRUWDQW\u0003SRLQW\u0011\u00030XFK\u0003RI\u0003WKH\u0003VLPSOLFLW\\\u0003DQG\u0003SRZHU\u0003RI\u0003 &8'$\u0003&\u0003GHULYHV\u0003IURP\u0003WKH\u0003DELOLW\\\u0003WR\u0003EOXU\u0003WKH\u0003OLQH\u0003EHWZHHQ\u0003KRVW\u0003DQG\u0003GHYLFH\u0003FRGH\u0011\u0003 +RZHYHU\u000f\u0003LW\u0003LV\u0003WKH\u0003UHVSRQVLELOLW\\\u0003RI\u0003WKH\u0003SURJUDPPHU\u0003QRW\u0003WR\u0003GHUHIHUHQFH\u0003WKH\u0003SRLQWHU\u0003 UHWXUQHG\u0003E\\\u0003 cudaMalloc() \u0003IURP\u0003FRGH\u0003WKDW\u0003H[HFXWHV\u0003RQ\u0003WKH\u0003KRVW\u0011\u0003+RVW\u0003FRGH\u0003PD\\\u0003 SDVV\u0003WKLV\u0003SRLQWHU\u0003DURXQG\u000f\u0003SHUIRUP\u0003DULWKPHWLF\u0003RQ\u0003LW\u000f\u0003RU\u0003HYHQ\u0003FDVW\u0003LW\u0003WR\u0003D\u0003GLIIHUHQW\u0003 W\\SH\u0011\u0003%XW\u0003\\RX\u0003FDQQRW\u0003XVH\u0003LW\u0003WR\u0003UHDG\u0003RU\u0003ZULWH\u0003IURP\u0003PHPRU\\\u0011\u0003 8QIRUWXQDWHO\\\u000f\u0003WKH\u0003FRPSLOHU\u0003FDQQRW\u0003SURWHFW\u0003\\RX\u0003IURP\u0003WKLV\u0003PLVWDNH\u000f\u0003HLWKHU\u0011\u0003,W\u0003ZLOO\u0003 EH\u0003SHUIHFWO\\\u0003KDSS\\\u0003WR\u0003DOORZ\u0003GHUHIHUHQFHV\u0003RI\u0003GHYLFH\u0003SRLQWHUV\u0003LQ\u0003\\RXU\u0003KRVW\u0003FRGH\u0003 EHFDXVH\u0003LW\u0003ORRNV\u0003OLNH\u0003DQ\\\u0003RWKHU\u0003SRLQWHU\u0003LQ\u0003WKH\u0003DSSOLFDWLRQ\u0011\u0003:H\u0003FDQ\u0003VXPPDUL]H\u0003WKH\u0003 UHVWULFWLRQV\u0003RQ\u0003WKH\u0003XVDJH\u0003RI\u0003GHYLFH\u0003SRLQWHU\u0003DV\u0003IROORZV <RX\u0003can\u0003SDVV\u0003SRLQWHUV\u0003DOORFDWHG\u0003ZLWK\u0003 cudaMalloc() \u0003WR\u0003IXQFWLRQV\u0003WKDW\u0003 H[HFXWH\u0003RQ\u0003WKH\u0003GHYLFH\u0011 <RX\u0003can\u0003XVH\u0003SRLQWHUV\u0003DOORFDWHG\u0003ZLWK\u0003 cudaMalloc() WR\u0003UHDG\u0003RU\u0003ZULWH\u0003 PHPRU\\\u0003IURP\u0003FRGH\u0003WKDW\u0003H[HFXWHV\u0003RQ\u0003WKH\u0003GHYLFH\u0011 <RX\u0003can\u0003SDVV\u0003SRLQWHUV\u0003DOORFDWHG\u0003ZLWK\u0003 cudaMalloc() WR\u0003IXQFWLRQV\u0003WKDW\u0003 H[HFXWH\u0003RQ\u0003WKH\u0003KRVW\u0011 <RX\u0003cannot \u0003XVH\u0003SRLQWHUV\u0003DOORFDWHG\u0003ZLWK\u0003 cudaMalloc() WR\u0003UHDG\u0003RU\u0003ZULWH\u0003 PHPRU\\\u0003IURP\u0003FRGH\u0003WKDW\u0003H[HFXWHV\u0003RQ\u0003WKH\u0003KRVW\u0011 ,I\u0003\\RX\u01e2YH\u0003EHHQ\u0003UHDGLQJ\u0003FDUHIXOO\\\u000f\u0003\\RX\u0003PLJKW\u0003KDYH\u0003DQWLFLSDWHG\u0003WKH\u0003QH[W\u0003OHVVRQ \u0003:H\u0003 FDQ\u01e2W\u0003XVH\u0003VWDQGDUG\u0003&\u01e2V\u0003 free()\u0003IXQFWLRQ\u0003WR\u0003UHOHDVH\u0003PHPRU\\\u0003ZH\u01e2YH\u0003DOORFDWHG\u0003ZLWK\u0003 cudaMalloc() \u0011\u00037R\u0003IUHH\u0003PHPRU\\\u0003ZH\u01e2YH\u0003DOORFDWHG\u0003ZLWK\u0003 cudaMalloc() \u000f\u0003ZH\u0003QHHG\u0003 WR\u0003XVH\u0003D\u0003FDOO\u0003WR\u0003 cudaFree() \u000f\u0003ZKLFK\u0003EHKDYHV\u0003H[DFWO\\\u0003OLNH\u0003 free()\u0003GRHV\u0011 Download from www.wowebook.comptgQUERY ING DEVICES /two.lf/seven.lf\u0016\u0011\u0016\u000348(5<,1*\u0003'(9,&(6 :H\u01e2YH\u0003VHHQ\u0003KRZ\u0003WR\u0003XVH\u0003WKH\u0003KRVW\u0003WR\u0003DOORFDWH\u0003DQG\u0003IUHH\u0003PHPRU\\\u0003RQ\u0003WKH\u0003GHYLFH\u000f\u0003EXW\u0003 ZH\u01e2YH\u0003DOVR\u0003PDGH\u0003LW\u0003SDLQIXOO\\\u0003FOHDU\u0003WKDW\u0003\\RX\u0003FDQQRW\u0003PRGLI\\\u0003WKLV\u0003PHPRU\\\u0003IURP\u0003WKH\u0003 KRVW\u0011\u00037KH\u0003UHPDLQLQJ\u0003WZR\u0003OLQHV\u0003RI\u0003WKH\u0003VDPSOH\u0003SURJUDP\u0003LOOXVWUDWH\u0003WZR\u0003RI\u0003WKH\u0003PRVW\u0003 FRPPRQ\u0003PHWKRGV\u0003IRU\u0003DFFHVVLQJ\u0003GHYLFH\u0003PHPRU\\\u01dfE\\\u0003XVLQJ\u0003GHYLFH\u0003SRLQWHUV\u0003IURP\u0003 ZLWKLQ\u0003GHYLFH\u0003FRGH\u0003DQG\u0003E\\\u0003XVLQJ\u0003FDOOV\u0003WR\u0003 cudaMemcpy() \u0011 :H\u0003XVH\u0003SRLQWHUV\u0003IURP\u0003ZLWKLQ\u0003GHYLFH\u0003FRGH\u0003H[DFWO\\\u0003WKH\u0003VDPH\u0003ZD\\\u0003ZH\u0003XVH\u0003WKHP\u0003LQ\u0003 VWDQGDUG\u0003&\u0003WKDW\u0003UXQV\u0003RQ\u0003WKH\u0003KRVW\u0003FRGH\u0011\u00037KH\u0003VWDWHPHQW\u0003 *c = a + b \u0003LV\u0003DV\u0003VLPSOH\u0003 DV\u0003LW\u0003ORRNV\u0011\u0003,W\u0003DGGV\u0003WKH\u0003SDUDPHWHUV\u0003 a\u0003DQG\u0003b\u0003WRJHWKHU\u0003DQG\u0003VWRUHV\u0003WKH\u0003UHVXOW\u0003LQ\u0003WKH\u0003 PHPRU\\\u0003SRLQWHG\u0003WR\u0003E\\\u0003 c\u0011\u0003:H\u0003KRSH\u0003WKLV\u0003LV\u0003DOPRVW\u0003WRR\u0003HDV\\\u0003WR\u0003HYHQ\u0003EH\u0003LQWHUHVWLQJ\u0011 :H\u0003OLVWHG\u0003WKH\u0003ZD\\V\u0003LQ\u0003ZKLFK\u0003ZH\u0003FDQ\u0003DQG\u0003FDQQRW\u0003XVH\u0003GHYLFH\u0003SRLQWHUV\u0003IURP\u0003ZLWKLQ\u0003 GHYLFH\u0003DQG\u0003KRVW\u0003FRGH\u0011\u00037KHVH\u0003FDYHDWV\u0003WUDQVODWH\u0003H[DFWO\\\u0003DV\u0003RQH\u0003PLJKW\u0003LPDJLQH\u0003 ZKHQ\u0003FRQVLGHULQJ\u0003KRVW\u0003SRLQWHUV\u0011\u0003$OWKRXJK\u0003ZH\u0003DUH\u0003IUHH\u0003WR\u0003SDVV\u0003KRVW\u0003SRLQWHUV\u0003 DURXQG\u0003LQ\u0003GHYLFH\u0003FRGH\u000f\u0003ZH\u0003UXQ\u0003LQWR\u0003WURXEOH\u0003ZKHQ\u0003ZH\u0003DWWHPSW\u0003WR\u0003XVH\u0003D\u0003KRVW\u0003SRLQWHU\u0003 WR\u0003DFFHVV\u0003PHPRU\\\u0003IURP\u0003ZLWKLQ\u0003GHYLFH\u0003FRGH\u0011\u00037R\u0003VXPPDUL]H\u000f\u0003KRVW\u0003SRLQWHUV\u0003FDQ\u0003 DFFHVV\u0003PHPRU\\\u0003IURP\u0003KRVW\u0003FRGH\u000f\u0003DQG\u0003GHYLFH\u0003SRLQWHUV\u0003FDQ\u0003DFFHVV\u0003PHPRU\\\u0003IURP\u0003 GHYLFH\u0003FRGH\u0011 $V\u0003SURPLVHG\u000f\u0003ZH\u0003FDQ\u0003DOVR\u0003DFFHVV\u0003PHPRU\\\u0003RQ\u0003D\u0003GHYLFH\u0003WKURXJK\u0003FDOOV\u0003WR\u0003 cudaMemcpy() IURP\u0003KRVW\u0003FRGH\u0011\u00037KHVH\u0003FDOOV\u0003EHKDYH\u0003H[DFWO\\\u0003OLNH\u0003VWDQGDUG\u0003&\u0003 memcpy() \u0003ZLWK\u0003DQ\u0003DGGLWLRQDO\u0003SDUDPHWHU\u0003WR\u0003VSHFLI\\\u0003ZKLFK\u0003RI\u0003WKH\u0003VRXUFH\u0003DQG\u0003 GHVWLQDWLRQ\u0003SRLQWHUV\u0003SRLQW\u0003WR\u0003GHYLFH\u0003PHPRU\\\u0011\u0003,Q\u0003WKH\u0003H[DPSOH\u000f\u0003QRWLFH\u0003WKDW\u0003WKH\u0003ODVW\u0003 SDUDPHWHU\u0003WR\u0003 cudaMemcpy() \u0003LV\u0003cudaMemcpyDeviceToHost \u000f\u0003LQVWUXFWLQJ\u0003WKH\u0003 UXQWLPH\u0003WKDW\u0003WKH\u0003VRXUFH\u0003SRLQWHU\u0003LV\u0003D\u0003GHYLFH\u0003SRLQWHU\u0003DQG\u0003WKH\u0003GHVWLQDWLRQ\u0003SRLQWHU\u0003LV\u0003D\u0003 KRVW\u0003SRLQWHU\u0011 8QVXUSULVLQJO\\\u000f\u0003 cudaMemcpyHostToDevice \u0003ZRXOG\u0003LQGLFDWH\u0003WKH\u0003RSSRVLWH\u0003VLWX - DWLRQ\u000f\u0003ZKHUH\u0003WKH\u0003VRXUFH\u0003GDWD\u0003LV\u0003RQ\u0003WKH\u0003KRVW\u0003DQG\u0003WKH\u0003GHVWLQDWLRQ\u0003LV\u0003DQ\u0003DGGUHVV\u0003RQ\u0003 WKH\u0003GHYLFH\u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003FDQ\u0003HYHQ\u0003VSHFLI\\\u0003WKDW\u0003 both \u0003SRLQWHUV\u0003DUH\u0003RQ\u0003WKH\u0003GHYLFH\u0003E\\\u0003 SDVVLQJ\u0003cudaMemcpyDeviceToDevice \u0011\u0003,I\u0003WKH\u0003VRXUFH\u0003DQG\u0003GHVWLQDWLRQ\u0003SRLQWHUV\u0003 DUH\u0003ERWK\u0003RQ\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003ZRXOG\u0003VLPSO\\\u0003XVH\u0003VWDQGDUG\u0003&\u01e2V\u0003 memcpy() \u0003URXWLQH\u0003WR\u0003FRS\\\u0003 EHWZHHQ\u0003WKHP\u0011 4XHU\\LQJ\u0003'HYLFHV\u0016\u0011\u0016\u0003 6LQFH\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003EH\u0003DOORFDWLQJ\u0003PHPRU\\\u0003DQG\u0003H[HFXWLQJ\u0003FRGH\u0003RQ\u0003RXU\u0003GHYLFH\u000f\u0003 LW\u0003ZRXOG\u0003EH\u0003XVHIXO\u0003LI\u0003RXU\u0003SURJUDP\u0003KDG\u0003D\u0003ZD\\\u0003RI\u0003NQRZLQJ\u0003KRZ\u0003PXFK\u0003PHPRU\\\u0003DQG\u0003 ZKDW\u0003W\\SHV\u0003RI\u0003FDSDELOLWLHV\u0003WKH\u0003GHYLFH\u0003KDG\u0011\u0003)XUWKHUPRUH\u000f\u0003LW\u0003LV\u0003UHODWLYHO\\\u0003FRPPRQ\u0003IRU\u0003 Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /two.lf/eight.lfSHRSOH\u0003WR\u0003KDYH\u0003PRUH\u0003WKDQ\u0003RQH\u0003&8'$\u0010FDSDEOH\u0003GHYLFH\u0003SHU\u0003FRPSXWHU\u0011\u0003,Q\u0003VLWXDWLRQV\u0003 OLNH\u0003WKLV\u000f\u0003ZH\u0003ZLOO\u0003GH\u020cQLWHO\\\u0003ZDQW\u0003D\u0003ZD\\\u0003WR\u0003GHWHUPLQH\u0003ZKLFK\u0003SURFHVVRU\u0003LV\u0003ZKLFK\u0011 )RU\u0003H[DPSOH\u000f\u0003PDQ\\\u0003PRWKHUERDUGV\u0003VKLS\u0003ZLWK\u0003LQWHJUDWHG\u000319,',$\u0003JUDSKLFV\u0003SURFHV - VRUV\u0011\u0003:KHQ\u0003D\u0003PDQXIDFWXUHU\u0003RU\u0003XVHU\u0003DGGV\u0003D\u0003GLVFUHWH\u0003JUDSKLFV\u0003SURFHVVRU\u0003WR\u0003WKLV\u0003 FRPSXWHU\u000f\u0003LW\u0003WKHQ\u0003SRVVHVVHV\u0003WZR\u0003&8'$\u0010FDSDEOH\u0003SURFHVVRUV\u0011\u00036RPH\u000319,',$\u0003SURG - XFWV\u000f\u0003OLNH\u0003WKH\u0003*H)RUFH\u0003*7;\u0003\u0015 \u0018\u000f\u0003VKLS\u0003ZLWK\u0003WZR\u0003*38V\u0003RQ\u0003D\u0003VLQJOH\u0003FDUG\u0011\u0003&RPSXWHUV\u0003 WKDW\u0003FRQWDLQ\u0003SURGXFWV\u0003VXFK\u0003DV\u0003WKLV\u0003ZLOO\u0003DOVR\u0003VKRZ\u0003WZR\u0003&8'$\u0010FDSDEOH\u0003SURFHVVRUV\u0011 %HIRUH\u0003ZH\u0003JHW\u0003WRR\u0003GHHS\u0003LQWR\u0003ZULWLQJ\u0003GHYLFH\u0003FRGH\u000f\u0003ZH\u0003ZRXOG\u0003ORYH\u0003WR\u0003KDYH\u0003D\u0003 PHFKDQLVP\u0003IRU\u0003GHWHUPLQLQJ\u0003ZKLFK\u0003GHYLFHV\u0003 LI\u0003DQ\\ \u0003DUH\u0003SUHVHQW\u0003DQG\u0003ZKDW\u0003FDSD - ELOLWLHV\u0003HDFK\u0003GHYLFH\u0003VXSSRUWV\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKHUH\u0003LV\u0003D\u0003YHU\\\u0003HDV\\\u0003LQWHUIDFH\u0003WR\u0003 GHWHUPLQH\u0003WKLV\u0003LQIRUPDWLRQ\u0011\u0003)LUVW\u000f\u0003ZH\u0003ZLOO\u0003ZDQW\u0003WR\u0003NQRZ\u0003KRZ\u0003PDQ\\\u0003GHYLFHV\u0003LQ\u0003WKH\u0003 V\\VWHP\u0003ZHUH\u0003EXLOW\u0003RQ\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0011\u00037KHVH\u0003GHYLFHV\u0003ZLOO\u0003EH\u0003FDSDEOH\u0003RI\u0003 H[HFXWLQJ\u0003NHUQHOV\u0003ZULWWHQ\u0003LQ\u0003&8'$\u0003&\u0011\u00037R\u0003JHW\u0003WKH\u0003FRXQW\u0003RI\u0003&8'$\u0003GHYLFHV\u000f\u0003ZH\u0003FDOO\u0003 cudaGetDeviceCount() \u0011\u00031HHGOHVV\u0003WR\u0003VD\\\u000f\u0003ZH\u0003DQWLFLSDWH\u0003UHFHLYLQJ\u0003DQ\u0003DZDUG\u0003 IRU\u00030RVW\u0003&UHDWLYH\u0003)XQFWLRQ\u00031DPH\u0011 int count; HANDLE_ERROR( cudaGetDeviceCount( &count ) ); $IWHU\u0003FDOOLQJ\u0003 cudaGetDeviceCount() \u000f\u0003ZH\u0003FDQ\u0003WKHQ\u0003LWHUDWH\u0003WKURXJK\u0003WKH\u0003GHYLFHV\u0003 DQG\u0003TXHU\\\u0003UHOHYDQW\u0003LQIRUPDWLRQ\u0003DERXW\u0003HDFK\u0011\u00037KH\u0003&8'$\u0003UXQWLPH\u0003UHWXUQV\u0003XV\u0003WKHVH\u0003 SURSHUWLHV\u0003LQ\u0003D\u0003VWUXFWXUH\u0003RI\u0003W\\SH\u0003 cudaDeviceProp \u0011\u0003:KDW\u0003NLQG\u0003RI\u0003SURSHUWLHV\u0003 FDQ\u0003ZH\u0003UHWULHYH\"\u0003$V\u0003RI\u0003&8'$\u0003\u0016\u0011\u0013\u000f\u0003WKH\u0003 cudaDeviceProp \u0003VWUXFWXUH\u0003FRQWDLQV\u0003WKH\u0003 IROORZLQJ struct cudaDeviceProp { char name[256]; size_t totalGlobalMem; size_t sharedMemPerBlock; int regsPerBlock; int warpSize; size_t memPitch; int maxThreadsPerBlock; int maxThreadsDim[3]; int maxGridSize[3]; size_t totalConstMem; int major; Download from www.wowebook.comptgQUERY ING DEVICES /two.lf/nine.lf\u0016\u0011\u0016\u000348(5<,1*\u0003'(9,&(6 int minor; int clockRate; size_t textureAlignment; int deviceOverlap; int multiProcessorCount; int kernelExecTimeoutEnabled; int integrated; int canMapHostMemory; int computeMode; int maxTexture1D; int maxTexture2D[2]; int maxTexture3D[3]; int maxTexture2DArray[3]; int concurrentKernels; } 6RPH\u0003RI\u0003WKHVH\u0003DUH\u0003VHOI\u0010H[SODQDWRU\\ \u0003RWKHUV\u0003EHDU\u0003VRPH\u0003DGGLWLRQDO\u0003GHVFULSWLRQ\u0003 VHH\u0003 7DEOH\u0003\u0016\u0011\u0014 \u0011 Table 3.1 &8'$\u0003'HYLFH\u00033URSHUWLHV DEVICE PROPERTY DESCRIPTION char name[256]; $Q\u0003$6&,,\u0003VWULQJ\u0003LGHQWLI\\LQJ\u0003WKH\u0003GHYLFH\u0003 H\u0011J\u0011\u000f\u0003 \"GeForce GTX 280\" ) size_t totalGlobalMem 7KH\u0003DPRXQW\u0003RI\u0003JOREDO\u0003PHPRU\\\u0003RQ\u0003WKH\u0003GHYLFH\u0003LQ\u0003 E\\WHV size_t sharedMemPerBlock 7KH\u0003PD[LPXP\u0003DPRXQW\u0003RI\u0003VKDUHG\u0003PHPRU\\\u0003D\u0003VLQJOH\u0003 EORFN\u0003PD\\\u0003XVH\u0003LQ\u0003E\\WHV int regsPerBlock 7KH\u0003QXPEHU\u0003RI\u0003\u0016\u0015\u0010ELW\u0003UHJLVWHUV\u0003DYDLODEOH\u0003SHU\u0003EORFN int warpSize 7KH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003LQ\u0003D\u0003ZDUS size_t memPitch 7KH\u0003PD[LPXP\u0003SLWFK\u0003DOORZHG\u0003IRU\u0003PHPRU\\\u0003FRSLHV\u0003LQ\u0003 E\\WHV Continued Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /three.lf/zero.lfDEVICE PROPERTY DESCRIPTION int maxThreadsPerBlock 7KH\u0003PD[LPXP\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003WKDW\u0003D\u0003EORFN\u0003PD\\\u0003 FRQWDLQ int maxThreadsDim[3] 7KH\u0003PD[LPXP\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003DOORZHG\u0003DORQJ\u0003 HDFK\u0003GLPHQVLRQ\u0003RI\u0003D\u0003EORFN\u0003 int maxGridSize[3] 7KH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003DOORZHG\u0003DORQJ\u0003HDFK\u0003 GLPHQVLRQ\u0003RI\u0003D\u0003JULG\u0003 size_t totalConstMem 7KH\u0003DPRXQW\u0003RI\u0003DYDLODEOH\u0003FRQVWDQW\u0003PHPRU\\ int major 7KH\u0003PDMRU\u0003UHYLVLRQ\u0003RI\u0003WKH\u0003GHYLFH\u01e2V\u0003FRPSXWH\u0003 FDSDELOLW\\ int minor 7KH\u0003PLQRU\u0003UHYLVLRQ\u0003RI\u0003WKH\u0003GHYLFH\u01e2V\u0003FRPSXWH\u0003 FDSDELOLW\\\u0003 size_t textureAlignment 7KH\u0003GHYLFH\u01e2V\u0003UHTXLUHPHQW\u0003IRU\u0003WH[WXUH\u0003DOLJQPHQW int deviceOverlap $\u0003ERROHDQ\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003ZKHWKHU\u0003WKH\u0003GHYLFH\u0003",
    "int regsPerBlock 7KH\u0003QXPEHU\u0003RI\u0003\u0016\u0015\u0010ELW\u0003UHJLVWHUV\u0003DYDLODEOH\u0003SHU\u0003EORFN int warpSize 7KH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003LQ\u0003D\u0003ZDUS size_t memPitch 7KH\u0003PD[LPXP\u0003SLWFK\u0003DOORZHG\u0003IRU\u0003PHPRU\\\u0003FRSLHV\u0003LQ\u0003 E\\WHV Continued Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /three.lf/zero.lfDEVICE PROPERTY DESCRIPTION int maxThreadsPerBlock 7KH\u0003PD[LPXP\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003WKDW\u0003D\u0003EORFN\u0003PD\\\u0003 FRQWDLQ int maxThreadsDim[3] 7KH\u0003PD[LPXP\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003DOORZHG\u0003DORQJ\u0003 HDFK\u0003GLPHQVLRQ\u0003RI\u0003D\u0003EORFN\u0003 int maxGridSize[3] 7KH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003DOORZHG\u0003DORQJ\u0003HDFK\u0003 GLPHQVLRQ\u0003RI\u0003D\u0003JULG\u0003 size_t totalConstMem 7KH\u0003DPRXQW\u0003RI\u0003DYDLODEOH\u0003FRQVWDQW\u0003PHPRU\\ int major 7KH\u0003PDMRU\u0003UHYLVLRQ\u0003RI\u0003WKH\u0003GHYLFH\u01e2V\u0003FRPSXWH\u0003 FDSDELOLW\\ int minor 7KH\u0003PLQRU\u0003UHYLVLRQ\u0003RI\u0003WKH\u0003GHYLFH\u01e2V\u0003FRPSXWH\u0003 FDSDELOLW\\\u0003 size_t textureAlignment 7KH\u0003GHYLFH\u01e2V\u0003UHTXLUHPHQW\u0003IRU\u0003WH[WXUH\u0003DOLJQPHQW int deviceOverlap $\u0003ERROHDQ\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003ZKHWKHU\u0003WKH\u0003GHYLFH\u0003 FDQ\u0003VLPXOWDQHRXVO\\\u0003SHUIRUP\u0003D\u0003 cudaMemcpy() DQG\u0003NHUQHO\u0003H[HFXWLRQ int multiProcessorCount 7KH\u0003QXPEHU\u0003RI\u0003PXOWLSURFHVVRUV\u0003RQ\u0003WKH\u0003GHYLFH int kernelExecTimeoutEnabled $\u0003ERROHDQ\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003ZKHWKHU\u0003WKHUH\u0003LV\u0003D\u0003 UXQWLPH\u0003OLPLW\u0003IRU\u0003NHUQHOV\u0003H[HFXWHG\u0003RQ\u0003WKLV\u0003GHYLFH int integrated $\u0003ERROHDQ\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003ZKHWKHU\u0003WKH\u0003GHYLFH\u0003LV\u0003 DQ\u0003LQWHJUDWHG\u0003*38\u0003 L\u0011H\u0011\u000f\u0003SDUW\u0003RI\u0003WKH\u0003FKLSVHW\u0003DQG\u0003QRW\u0003D\u0003 GLVFUHWH\u0003*38 \u0003 int canMapHostMemory $\u0003ERROHDQ\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003ZKHWKHU\u0003WKH\u0003GHYLFH\u0003 FDQ\u0003PDS\u0003KRVW\u0003PHPRU\\\u0003LQWR\u0003WKH\u0003&8'$\u0003GHYLFH\u0003 DGGUHVV\u0003VSDFH int computeMode $\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003WKH\u0003GHYLFH\u01e2V\u0003FRPSXWLQJ\u0003PRGH \u0003 GHIDXOW\u000f\u0003H[FOXVLYH\u000f\u0003RU\u0003SURKLELWHG int maxTexture1D 7KH\u0003PD[LPXP\u0003VL]H\u0003VXSSRUWHG\u0003IRU\u0003\u0014'\u0003WH[WXUHVTable 3.1 &DSWLRQ\u0003QHHGHG\u0003 &RQWLQXHG Download from www.wowebook.comptgQUERY ING DEVICES /three.lf/one.lf\u0016\u0011\u0016\u000348(5<,1*\u0003'(9,&(6DEVICE PROPERTY DESCRIPTION int maxTexture2D[2] 7KH\u0003PD[LPXP\u0003GLPHQVLRQV\u0003VXSSRUWHG\u0003IRU\u0003\u0015'\u0003 WH[WXUHV int maxTexture3D[3] 7KH\u0003PD[LPXP\u0003GLPHQVLRQV\u0003VXSSRUWHG\u0003IRU\u0003\u0016'\u0003 WH[WXUHV int maxTexture2DArray[3] 7KH\u0003PD[LPXP\u0003GLPHQVLRQV\u0003VXSSRUWHG\u0003IRU\u0003\u0015'\u0003 WH[WXUH\u0003DUUD\\V\u0003 int concurrentKernels $\u0003ERROHDQ\u0003YDOXH\u0003UHSUHVHQWLQJ\u0003ZKHWKHU\u0003WKH\u0003GHYLFH\u0003 VXSSRUWV\u0003H[HFXWLQJ\u0003PXOWLSOH\u0003NHUQHOV\u0003ZLWKLQ\u0003WKH\u0003 VDPH\u0003FRQWH[W\u0003VLPXOWDQHRXVO\\:H\u01e2G\u0003OLNH\u0003WR\u0003DYRLG\u0003JRLQJ\u0003WRR\u0003IDU\u000f\u0003WRR\u0003IDVW\u0003GRZQ\u0003RXU\u0003UDEELW\u0003KROH\u000f\u0003VR\u0003ZH\u0003ZLOO\u0003QRW\u0003 JR\u0003LQWR\u0003H[WHQVLYH\u0003GHWDLO\u0003DERXW\u0003WKHVH\u0003SURSHUWLHV\u0003QRZ\u0011\u0003,Q\u0003IDFW\u000f\u0003WKH\u0003SUHYLRXV\u0003OLVW\u0003LV\u0003 PLVVLQJ\u0003VRPH\u0003LPSRUWDQW\u0003GHWDLOV\u0003DERXW\u0003VRPH\u0003RI\u0003WKHVH\u0003SURSHUWLHV\u000f\u0003VR\u0003\\RX\u0003ZLOO\u0003ZDQW\u0003 WR\u0003FRQVXOW\u0003WKH\u0003 NVIDIA CUDA Programming Guide \u0003IRU\u0003PRUH\u0003LQIRUPDWLRQ\u0011\u0003:KHQ\u0003\\RX\u0003 PRYH\u0003RQ\u0003WR\u0003ZULWH\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u000f\u0003WKHVH\u0003SURSHUWLHV\u0003ZLOO\u0003SURYH\u0003H[WUHPHO\\\u0003 XVHIXO\u0011\u0003+RZHYHU\u000f\u0003IRU\u0003QRZ\u0003ZH\u0003ZLOO\u0003VLPSO\\\u0003VKRZ\u0003KRZ\u0003WR\u0003TXHU\\\u0003HDFK\u0003GHYLFH\u0003DQG\u0003UHSRUW\u0003 WKH\u0003SURSHUWLHV\u0003RI\u0003HDFK\u0011\u00036R\u0003IDU\u000f\u0003RXU\u0003GHYLFH\u0003TXHU\\\u0003ORRNV\u0003VRPHWKLQJ\u0003OLNH\u0003WKLV #include \"../common/book.h\" int main( void ) { cudaDeviceProp prop; int count; HANDLE_ERROR( cudaGetDeviceCount( &count ) ); for (int i=0; i< count; i++) { HANDLE_ERROR( cudaGetDeviceProperties( &prop, i ) ); //Do something with our device's properties } }Table 3.1 &8'$\u0003'HYLFH\u00033URSHUWLHV\u0003 &RQWLQXHG Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /three.lf/two.lf1RZ\u0003WKDW\u0003ZH\u0003NQRZ\u0003HDFK\u0003RI\u0003WKH\u0003\u020cHOGV\u0003DYDLODEOH\u0003WR\u0003XV\u000f\u0003ZH\u0003FDQ\u0003H[SDQG\u0003RQ\u0003WKH\u0003 DPELJXRXV\u0003\u01e4'R\u0003VRPHWKLQJ\u0011\u0011\u0011\u01e5\u0003VHFWLRQ\u0003DQG\u0003LPSOHPHQW\u0003VRPHWKLQJ\u0003PDUJLQDOO\\\u0003OHVV\u0003 WULYLDO #include \"../common/book.h\" int main( void ) { cudaDeviceProp prop; int count; HANDLE_ERROR( cudaGetDeviceCount( &count ) ); for (int i=0; i< count; i++) { HANDLE_ERROR( cudaGetDeviceProperties( &prop, i ) ); printf( \" --- General Information for device %d ---\\n\" , i ); printf( \"Name: %s\\n\" , prop.name ); printf( \"Compute capability: %d.%d\\n\" , prop.major, prop.minor ); printf( \"Clock rate: %d\\n\" , prop.clockRate ); printf( \"Device copy overlap: \" ); if (prop.deviceOverlap) printf( \"Enabled\\n\" ); else printf( \"Disabled\\n\" ); printf( \"Kernel execition timeout : \" ); if (prop.kernelExecTimeoutEnabled) printf( \"Enabled\\n\" ); else printf( \"Disabled\\n\" ); printf( \" --- Memory Information for device %d ---\\n\" , i ); printf( \"Total global mem: %ld\\n\" , prop.totalGlobalMem ); printf( \"Total constant Mem: %ld\\n\" , prop.totalConstMem ); printf( \"Max mem pitch: %ld\\n\" , prop.memPitch ); printf( \"Texture Alignment: %ld\\n\" , prop.textureAlignment ); Download from www.wowebook.comptgUSING DEVICE PRO PERT IES /three.lf/three.lf\u0016\u0011\u0017\u000386,1*\u0003'(9,&(\u00033523(57,(6 printf( \" --- MP Information for device %d ---\\n\" , i ); printf( \"Multiprocessor count: %d\\n\" , prop.multiProcessorCount ); printf( \"Shared mem per mp: %ld\\n\" , prop.sharedMemPerBlock ); printf( \"Registers per mp: %d\\n\" , prop.regsPerBlock ); printf( \"Threads in warp: %d\\n\" , prop.warpSize ); printf( \"Max threads per block: %d\\n\" , prop.maxThreadsPerBlock ); printf( \"Max thread dimensions: (%d, %d, %d)\\n\" , prop.maxThreadsDim[0], prop.maxThreadsDim[1], prop.maxThreadsDim[2] ); printf( \"Max grid dimensions: (%d, %d, %d)\\n\" , prop.maxGridSize[0], prop.maxGridSize[1], prop.maxGridSize[2] ); printf( \"\\n\" ); } } 8VLQJ\u0003'HYLFH\u00033URSHUWLHV\u0016\u0011\u0017\u0003 2WKHU\u0003WKDQ\u0003ZULWLQJ\u0003DQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003KDQGLO\\\u0003SULQWV\u0003HYHU\\\u0003GHWDLO\u0003RI\u0003HYHU\\\u0003&8'$\u0010 FDSDEOH\u0003FDUG\u000f\u0003ZK\\\u0003PLJKW\u0003ZH\u0003EH\u0003LQWHUHVWHG\u0003LQ\u0003WKH\u0003SURSHUWLHV\u0003RI\u0003HDFK\u0003GHYLFH\u0003LQ\u0003RXU\u0003 V\\VWHP\"\u00036LQFH\u0003ZH\u0003DV\u0003VRIWZDUH\u0003GHYHORSHUV\u0003ZDQW\u0003HYHU\\RQH\u0003WR\u0003WKLQN\u0003RXU\u0003VRIWZDUH\u0003LV\u0003 IDVW\u000f\u0003ZH\u0003PLJKW\u0003EH\u0003LQWHUHVWHG\u0003LQ\u0003FKRRVLQJ\u0003WKH\u0003*38\u0003ZLWK\u0003WKH\u0003PRVW\u0003PXOWLSURFHVVRUV\u0003 RQ\u0003ZKLFK\u0003WR\u0003UXQ\u0003RXU\u0003FRGH\u0011\u00032U\u0003LI\u0003WKH\u0003NHUQHO\u0003QHHGV\u0003FORVH\u0003LQWHUDFWLRQ\u0003ZLWK\u0003WKH\u0003&38\u000f\u0003 ZH\u0003PLJKW\u0003EH\u0003LQWHUHVWHG\u0003LQ\u0003UXQQLQJ\u0003RXU\u0003FRGH\u0003RQ\u0003WKH\u0003LQWHJUDWHG\u0003*38\u0003WKDW\u0003VKDUHV\u0003 V\\VWHP\u0003PHPRU\\\u0003ZLWK\u0003WKH\u0003&38\u0011\u00037KHVH\u0003DUH\u0003ERWK\u0003SURSHUWLHV\u0003ZH\u0003FDQ\u0003TXHU\\\u0003ZLWK\u0003 cudaGetDeviceProperties() \u0011 6XSSRVH\u0003WKDW\u0003ZH\u0003DUH\u0003ZULWLQJ\u0003DQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003GHSHQGV\u0003RQ\u0003KDYLQJ\u0003GRXEOH\u0010 SUHFLVLRQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003VXSSRUW\u0011\u0003$IWHU\u0003D\u0003TXLFN\u0003FRQVXOWDWLRQ\u0003ZLWK\u0003$SSHQGL[\u0003$\u0003RI\u0003WKH\u0003 NVIDIA CUDA Programming Guide \u000f\u0003ZH\u0003NQRZ\u0003WKDW\u0003FDUGV\u0003WKDW\u0003KDYH\u0003FRPSXWH\u0003FDSD - ELOLW\\\u0003\u0014\u0011\u0016\u0003RU\u0003KLJKHU\u0003VXSSRUW\u0003GRXEOH\u0010SUHFLVLRQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003PDWK\u0011\u00036R\u0003WR\u0003VXFFHVV - IXOO\\\u0003UXQ\u0003WKH\u0003GRXEOH\u0010SUHFLVLRQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003ZH\u01e2YH\u0003ZULWWHQ\u000f\u0003ZH\u0003QHHG\u0003WR\u0003\u020cQG\u0003DW\u0003 OHDVW\u0003RQH\u0003GHYLFH\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0016\u0003RU\u0003KLJKHU\u0011 Download from www.wowebook.comptgINTRODUCT ION TO CUDA C /three.lf/four.lf%DVHG\u0003RQ\u0003ZKDW\u0003ZH\u0003KDYH\u0003VHHQ\u0003ZLWK\u0003 cudaGetDeviceCount() \u0003DQG\u0003 cudaGetDeviceProperties() \u000f\u0003ZH\u0003FRXOG\u0003LWHUDWH\u0003WKURXJK\u0003HDFK\u0003GHYLFH\u0003DQG\u0003ORRN\u0003 IRU\u0003RQH\u0003WKDW\u0003HLWKHU\u0003KDV\u0003D\u0003PDMRU\u0003YHUVLRQ\u0003JUHDWHU\u0003WKDQ\u0003\u0014\u0003RU\u0003KDV\u0003D\u0003PDMRU\u0003YHUVLRQ\u0003RI\u0003 \u0014\u0003DQG\u0003PLQRU\u0003YHUVLRQ\u0003JUHDWHU\u0003WKDQ\u0003RU\u0003HTXDO\u0003WR\u0003\u0016\u0011\u0003%XW\u0003VLQFH\u0003WKLV\u0003UHODWLYHO\\\u0003FRPPRQ\u0003 SURFHGXUH\u0003LV\u0003DOVR\u0003UHODWLYHO\\\u0003DQQR\\LQJ\u0003WR\u0003SHUIRUP\u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003RIIHUV\u0003XV\u0003DQ\u0003 DXWRPDWHG\u0003ZD\\\u0003WR\u0003GR\u0003WKLV\u0011\u0003:H\u0003\u020cUVW\u0003\u020cOO\u0003D\u0003 cudaDeviceProp \u0003VWUXFWXUH\u0003ZLWK\u0003WKH\u0003 SURSHUWLHV\u0003ZH\u0003QHHG\u0003RXU\u0003GHYLFH\u0003WR\u0003KDYH\u0011 cudaDeviceProp prop; memset( &prop, 0, sizeof( cudaDeviceProp ) ); prop.major = 1; prop.minor = 3; $IWHU\u0003\u020cOOLQJ\u0003D\u0003 cudaDeviceProp \u0003VWUXFWXUH\u000f\u0003ZH\u0003SDVV\u0003LW\u0003WR\u0003 cudaChooseDevice() \u0003WR\u0003KDYH\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003\u020cQG\u0003D\u0003GHYLFH\u0003WKDW\u0003VDWLV\u020cHV\u0003 WKLV\u0003FRQVWUDLQW\u0011\u00037KH\u0003FDOO\u0003WR\u0003 cudaChooseDevice() \u0003UHWXUQV\u0003D\u0003GHYLFH\u0003,'\u0003WKDW\u0003ZH\u0003 FDQ\u0003WKHQ\u0003SDVV\u0003WR\u0003 \u0003cudaSetDevice() \u0011\u0003)URP\u0003WKLV\u0003SRLQW\u0003IRUZDUG\u000f\u0003DOO\u0003GHYLFH\u0003RSHUD - WLRQV\u0003ZLOO\u0003WDNH\u0003SODFH\u0003RQ\u0003WKH\u0003GHYLFH\u0003ZH\u0003IRXQG\u0003LQ\u0003 cudaChooseDevice() \u0011 #include \"../common/book.h\" int main( void ) { cudaDeviceProp prop; int dev; HANDLE_ERROR( cudaGetDevice( &dev ) ); printf( \"ID of current CUDA device: %d\\n\" , dev ); memset( &prop, 0, sizeof( cudaDeviceProp ) ); prop.major",
    "3; $IWHU\u0003\u020cOOLQJ\u0003D\u0003 cudaDeviceProp \u0003VWUXFWXUH\u000f\u0003ZH\u0003SDVV\u0003LW\u0003WR\u0003 cudaChooseDevice() \u0003WR\u0003KDYH\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003\u020cQG\u0003D\u0003GHYLFH\u0003WKDW\u0003VDWLV\u020cHV\u0003 WKLV\u0003FRQVWUDLQW\u0011\u00037KH\u0003FDOO\u0003WR\u0003 cudaChooseDevice() \u0003UHWXUQV\u0003D\u0003GHYLFH\u0003,'\u0003WKDW\u0003ZH\u0003 FDQ\u0003WKHQ\u0003SDVV\u0003WR\u0003 \u0003cudaSetDevice() \u0011\u0003)URP\u0003WKLV\u0003SRLQW\u0003IRUZDUG\u000f\u0003DOO\u0003GHYLFH\u0003RSHUD - WLRQV\u0003ZLOO\u0003WDNH\u0003SODFH\u0003RQ\u0003WKH\u0003GHYLFH\u0003ZH\u0003IRXQG\u0003LQ\u0003 cudaChooseDevice() \u0011 #include \"../common/book.h\" int main( void ) { cudaDeviceProp prop; int dev; HANDLE_ERROR( cudaGetDevice( &dev ) ); printf( \"ID of current CUDA device: %d\\n\" , dev ); memset( &prop, 0, sizeof( cudaDeviceProp ) ); prop.major = 1; prop.minor = 3; HANDLE_ERROR( cudaChooseDevice( &dev, &prop ) ); printf( \"ID of CUDA device closest to revision 1.3: %d\\n\" , dev ); HANDLE_ERROR( cudaSetDevice( dev ) ); } Download from www.wowebook.comptg&&&+++ $$$ 333555555((( 999((( : :: /three.lf/five.lf\u0016\u0011\u0018\u0003777 (((\u0003\u0003\u0003,,, 6\\VWHPV\u0003ZLWK\u0003PXOWLSOH\u0003*38V\u0003DUH\u0003EHFRPLQJ\u0003PRUH\u0003DQG\u0003PRUH\u0003FRPPRQ\u0011\u0003)RU\u0003 H[DPSOH\u000f\u0003PDQ\\\u0003RI\u000319,',$\u01e2V\u0003PRWKHUERDUG\u0003FKLSVHWV\u0003FRQWDLQ\u0003LQWHJUDWHG\u000f\u0003&8'$\u0010 FDSDEOH\u0003*38V\u0011\u0003:KHQ\u0003D\u0003GLVFUHWH\u0003*38\u0003LV\u0003DGGHG\u0003WR\u0003RQH\u0003RI\u0003WKHVH\u0003V\\VWHPV\u000f\u0003\\RX\u0003 VXGGHQO\\\u0003KDYH\u0003D\u0003PXOWL\u0010*38\u0003SODWIRUP\u0011\u00030RUHRYHU\u000f\u000319,',$\u01e2V\u00036/,\u0003WHFKQRORJ\\\u0003DOORZV\u0003 PXOWLSOH\u0003GLVFUHWH\u0003*38V\u0003WR\u0003EH\u0003LQVWDOOHG\u0003VLGH\u0003E\\\u0003VLGH\u0011\u0003,Q\u0003HLWKHU\u0003RI\u0003WKHVH\u0003FDVHV\u000f\u0003\\RXU\u0003 DSSOLFDWLRQ\u0003PD\\\u0003KDYH\u0003D\u0003SUHIHUHQFH\u0003RI\u0003RQH\u0003*38\u0003RYHU\u0003DQRWKHU\u0011\u0003,I\u0003\\RXU\u0003DSSOLFDWLRQ\u0003 GHSHQGV\u0003RQ\u0003FHUWDLQ\u0003IHDWXUHV\u0003RI\u0003WKH\u0003*38\u0003RU\u0003GHSHQGV\u0003RQ\u0003KDYLQJ\u0003WKH\u0003IDVWHVW\u0003*38\u0003 LQ\u0003WKH\u0003V\\VWHP\u000f\u0003\\RX\u0003VKRXOG\u0003IDPLOLDUL]H\u0003\\RXUVHOI\u0003ZLWK\u0003WKLV\u0003$3,\u0003EHFDXVH\u0003WKHUH\u0003LV\u0003QR\u0003 JXDUDQWHH\u0003WKDW\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003ZLOO\u0003FKRRVH\u0003WKH\u0003EHVW\u0003RU\u0003PRVW\u0003DSSURSULDWH\u0003*38\u0003 IRU\u0003\\RXU\u0003DSSOLFDWLRQ\u0011 &KDSWHU\u00035HYLHZ\u0016\u0011\u0018\u0003 :H\u01e2YH\u0003\u020cQDOO\\\u0003JRWWHQ\u0003RXU\u0003KDQGV\u0003GLUW\\\u0003ZULWLQJ\u0003&8'$\u0003&\u000f\u0003DQG\u0003LGHDOO\\\u0003LW\u0003KDV\u0003EHHQ\u0003OHVV\u0003 SDLQIXO\u0003WKDQ\u0003\\RX\u0003PLJKW\u0003KDYH\u0003VXVSHFWHG\u0011\u0003)XQGDPHQWDOO\\\u000f\u0003&8'$\u0003&\u0003LV\u0003VWDQGDUG\u0003&\u0003 ZLWK\u0003VRPH\u0003RUQDPHQWDWLRQ\u0003WR\u0003DOORZ\u0003XV\u0003WR\u0003VSHFLI\\\u0003ZKLFK\u0003FRGH\u0003VKRXOG\u0003UXQ\u0003RQ\u0003WKH\u0003 GHYLFH\u0003DQG\u0003ZKLFK\u0003VKRXOG\u0003UXQ\u0003RQ\u0003WKH\u0003KRVW\u0011\u0003%\\\u0003DGGLQJ\u0003WKH\u0003NH\\ZRUG\u0003 __global__ EHIRUH\u0003D\u0003IXQFWLRQ\u000f\u0003ZH\u0003LQGLFDWHG\u0003WR\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003UXQ\u0003WKH\u0003IXQFWLRQ\u0003 RQ\u0003WKH\u0003*38\u0011\u00037R\u0003XVH\u0003WKH\u0003*38\u01e2V\u0003GHGLFDWHG\u0003PHPRU\\\u000f\u0003ZH\u0003DOVR\u0003OHDUQHG\u0003D\u0003&8'$\u0003$3,\u0003 VLPLODU\u0003WR\u0003&\u01e2V\u0003 malloc() , memcpy() \u000f\u0003DQG\u0003free()\u0003$3,V\u0011\u00037KH\u0003&8'$\u0003YHUVLRQV\u0003RI\u0003 WKHVH\u0003IXQFWLRQV\u000f\u0003 cudaMalloc() , cudaMemcpy() \u000f\u0003DQG\u0003cudaFree() \u000f\u0003DOORZ\u0003XV\u0003 WR\u0003DOORFDWH\u0003GHYLFH\u0003PHPRU\\\u000f\u0003FRS\\\u0003GDWD\u0003EHWZHHQ\u0003WKH\u0003GHYLFH\u0003DQG\u0003KRVW\u000f\u0003DQG\u0003IUHH\u0003WKH\u0003 GHYLFH\u0003PHPRU\\\u0003ZKHQ\u0003ZH\u01e2YH\u0003\u020cQLVKHG\u0003ZLWK\u0003LW\u0011\u0003 $V\u0003ZH\u0003SURJUHVV\u0003WKURXJK\u0003WKLV\u0003ERRN\u000f\u0003ZH\u0003ZLOO\u0003VHH\u0003PRUH\u0003LQWHUHVWLQJ\u0003H[DPSOHV\u0003RI\u0003 KRZ\u0003ZH\u0003FDQ\u0003HIIHFWLYHO\\\u0003XVH\u0003WKH\u0003GHYLFH\u0003DV\u0003D\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003FRSURFHVVRU\u0011\u0003)RU\u0003 QRZ\u000f\u0003\\RX\u0003VKRXOG\u0003NQRZ\u0003KRZ\u0003HDV\\\u0003LW\u0003LV\u0003WR\u0003JHW\u0003VWDUWHG\u0003ZLWK\u0003&8'$\u0003&\u000f\u0003DQG\u0003LQ\u0003WKH\u0003QH[W\u0003 FKDSWHU\u0003ZH\u0003ZLOO\u0003VHH\u0003KRZ\u0003HDV\\\u0003LW\u0003LV\u0003WR\u0003H[HFXWH\u0003SDUDOOHO\u0003FRGH\u0003RQ\u0003WKH\u0003*38\u0011 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /three.lf/seven.lfChapter 4 Parallel Programming in CUDA C ,Q\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u000f\u0003ZH\u0003VDZ\u0003KRZ\u0003VLPSOH\u0003LW\u0003FDQ\u0003EH\u0003WR\u0003ZULWH\u0003FRGH\u0003WKDW\u0003H[HFXWHV\u0003 RQ\u0003WKH\u0003*38\u0011\u0003:H\u0003KDYH\u0003HYHQ\u0003JRQH\u0003VR\u0003IDU\u0003DV\u0003WR\u0003OHDUQ\u0003KRZ\u0003WR\u0003DGG\u0003WZR\u0003QXPEHUV\u0003 WRJHWKHU\u000f\u0003DOEHLW\u0003MXVW\u0003WKH\u0003QXPEHUV\u0003\u0015\u0003DQG\u0003\u001a\u0011\u0003$GPLWWHGO\\\u000f\u0003WKDW\u0003H[DPSOH\u0003ZDV\u0003QRW\u0003 LPPHQVHO\\\u0003LPSUHVVLYH\u000f\u0003QRU\u0003ZDV\u0003LW\u0003LQFUHGLEO\\\u0003LQWHUHVWLQJ\u0011\u0003%XW\u0003ZH\u0003KRSH\u0003\\RX\u0003DUH\u0003 FRQYLQFHG\u0003WKDW\u0003LW\u0003LV\u0003HDV\\\u0003WR\u0003JHW\u0003VWDUWHG\u0003ZLWK\u0003&8'$\u0003&\u0003DQG\u0003\\RX\u01e2UH\u0003H[FLWHG\u0003WR\u0003OHDUQ\u0003 PRUH\u0011\u00030XFK\u0003RI\u0003WKH\u0003SURPLVH\u0003RI\u0003*38\u0003FRPSXWLQJ\u0003OLHV\u0003LQ\u0003H[SORLWLQJ\u0003WKH\u0003PDVVLYHO\\\u0003 SDUDOOHO\u0003VWUXFWXUH\u0003RI\u0003PDQ\\\u0003SUREOHPV\u0011\u0003,Q\u0003WKLV\u0003YHLQ\u000f\u0003ZH\u0003LQWHQG\u0003WR\u0003VSHQG\u0003WKLV\u0003FKDSWHU\u0003 H[DPLQLQJ\u0003KRZ\u0003WR\u0003H[HFXWH\u0003SDUDOOHO\u0003FRGH\u0003RQ\u0003WKH\u0003*38\u0003XVLQJ\u0003&8'$\u0003&\u0011\u0003 Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /three.lf/eight.lf&KDSWHU\u00032EMHFWLYHV\u0017\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003RQH\u0003RI\u0003WKH\u0003IXQGDPHQWDO\u0003ZD\\V\u0003&8'$\u0003H[SRVHV\u0003LWV\u0003SDUDOOHOLVP\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003ZULWH\u0003\\RXU\u0003\u020cUVW\u0003SDUDOOHO\u0003FRGH\u0003ZLWK\u0003&8'$\u0003&\u0011\u01e9\u0003 &8'$\u00033DUDOOHO\u00033URJUDPPLQJ\u0017\u0011\u0015\u0003 3UHYLRXVO\\\u000f\u0003ZH\u0003VDZ\u0003KRZ\u0003HDV\\\u0003LW\u0003ZDV\u0003WR\u0003JHW\u0003D\u0003VWDQGDUG\u0003&\u0003IXQFWLRQ\u0003WR\u0003VWDUW\u0003UXQQLQJ\u0003 RQ\u0003D\u0003GHYLFH\u0011\u0003%\\\u0003DGGLQJ\u0003WKH\u0003 __global__ \u0003TXDOL\u020cHU\u0003WR\u0003WKH\u0003IXQFWLRQ\u0003DQG\u0003E\\\u0003FDOOLQJ\u0003 LW\u0003XVLQJ\u0003D\u0003VSHFLDO\u0003DQJOH\u0003EUDFNHW\u0003V\\QWD[\u000f\u0003ZH\u0003H[HFXWHG\u0003WKH\u0003IXQFWLRQ\u0003RQ\u0003RXU\u0003*38\u0011\u0003 $OWKRXJK\u0003WKLV\u0003ZDV\u0003H[WUHPHO\\\u0003VLPSOH\u000f\u0003LW\u0003ZDV\u0003DOVR\u0003H[WUHPHO\\\u0003LQHI\u020cFLHQW\u0003EHFDXVH\u0003 19,',$\u01e2V\u0003KDUGZDUH\u0003HQJLQHHULQJ\u0003PLQLRQV\u0003KDYH\u0003RSWLPL]HG\u0003WKHLU\u0003JUDSKLFV\u0003SURFHVVRUV\u0003 WR\u0003SHUIRUP\u0003KXQGUHGV\u0003RI\u0003FRPSXWDWLRQV\u0003LQ\u0003SDUDOOHO\u0011\u0003+RZHYHU\u000f\u0003WKXV\u0003IDU\u0003ZH\u0003KDYH\u0003RQO\\\u0003 HYHU\u0003ODXQFKHG\u0003D\u0003NHUQHO\u0003WKDW\u0003UXQV\u0003VHULDOO\\\u0003RQ\u0003WKH\u0003*38\u0011\u0003,Q\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003VHH\u0003KRZ\u0003 VWUDLJKWIRUZDUG\u0003LW\u0003LV\u0003WR\u0003ODXQFK\u0003D\u0003GHYLFH\u0003NHUQHO\u0003WKDW\u0003SHUIRUPV\u0003LWV\u0003FRPSXWDWLRQV\u0003LQ\u0003 SDUDOOHO\u0011\u0003 SUMM ING VECTORS \u0017\u0011\u0015\u0011\u0014\u0003 :H\u0003ZLOO\u0003FRQWULYH\u0003D\u0003VLPSOH\u0003H[DPSOH\u0003WR\u0003LOOXVWUDWH\u0003WKUHDGV\u0003DQG\u0003KRZ\u0003ZH\u0003XVH\u0003WKHP\u0003WR\u0003 FRGH\u0003ZLWK\u0003&8'$\u0003&\u0011\u0003,PDJLQH\u0003KDYLQJ\u0003WZR\u0003OLVWV\u0003RI\u0003QXPEHUV\u0003ZKHUH\u0003ZH\u0003ZDQW\u0003WR\u0003VXP\u0003 FRUUHVSRQGLQJ\u0003HOHPHQWV\u0003RI\u0003HDFK\u0003OLVW\u0003DQG\u0003VWRUH\u0003WKH\u0003UHVXOW\u0003LQ\u0003D\u0003WKLUG\u0003OLVW\u0011\u0003)LJXUH\u0003\u0017\u0011\u0014\u0003 VKRZV\u0003WKLV\u0003SURFHVV\u0011\u0003,I\u0003\\RX\u0003KDYH\u0003DQ\\\u0003EDFNJURXQG\u0003LQ\u0003OLQHDU\u0003DOJHEUD\u000f\u0003\\RX\u0003ZLOO\u0003UHFRJ - QL]H\u0003WKLV\u0003RSHUDWLRQ\u0003DV\u0003VXPPLQJ\u0003WZR\u0003YHFWRUV\u0011 Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /three.lf/nine.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1* \u0003\u0001 \u0002Figure 4.1 6XPPLQJ\u0003WZR\u0003YHFWRUV CPU VECTOR SUMS )LUVW\u0003ZH\u01e2OO\u0003ORRN\u0003DW\u0003RQH\u0003ZD\\\u0003WKLV\u0003DGGLWLRQ\u0003FDQ\u0003EH\u0003DFFRPSOLVKHG\u0003ZLWK\u0003WUDGLWLRQDO\u0003& \u0003FRGH #include \"../common/book.h\" #define N 10 void add( int *a, int *b, int *c ) { int tid = 0; // this is CPU zero, so we start at zero while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 1; // we have one CPU, so we increment by one } } int main( void ) { int a[N], b[N], c[N]; // fill the arrays 'a' and 'b' on the CPU for (int i=0; i<N; i++) { a[i] = -i; b[i] = i * i; } add( a, b, c ); Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /four.lf/zero.lf // display the results for (int i=0; i<N; i++) { printf( \"%d + %d = %d\\n\" , a[i], b[i], c[i] ); } return 0; } 0RVW\u0003RI\u0003WKLV\u0003H[DPSOH\u0003EHDUV\u0003DOPRVW\u0003QR\u0003H[SODQDWLRQ\u000f\u0003EXW\u0003ZH\u0003ZLOO\u0003EULH\u020d\\\u0003ORRN\u0003DW\u0003WKH\u0003 add()\u0003IXQFWLRQ\u0003WR\u0003H[SODLQ\u0003ZK\\\u0003ZH\u0003RYHUO\\\u0003FRPSOLFDWHG\u0003LW\u0011 void add( int *a, int *b, int *c ) { int tid = 0; // this is CPU zero, so we start at zero while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 1; // we have one CPU, so we increment by one } } :H\u0003FRPSXWH\u0003WKH\u0003VXP\u0003ZLWKLQ\u0003D\u0003 while\u0003ORRS\u0003ZKHUH\u0003WKH\u0003LQGH[\u0003 tid\u0003UDQJHV\u0003IURP\u0003 0\u0003WR\u0003 N-1\u0011\u0003:H\u0003DGG\u0003FRUUHVSRQGLQJ\u0003HOHPHQWV\u0003RI\u0003 a[]\u0003DQG\u0003b[]\u000f\u0003SODFLQJ\u0003WKH\u0003UHVXOW\u0003LQ\u0003WKH\u0003 FRUUHVSRQGLQJ\u0003HOHPHQW\u0003RI\u0003 c[]\u0011\u00032QH\u0003ZRXOG\u0003W\\SLFDOO\\\u0003FRGH\u0003WKLV\u0003LQ\u0003D\u0003VOLJKWO\\\u0003VLPSOHU\u0003 PDQQHU\u000f\u0003OLNH\u0003VR void add( int *a, int *b, int *c ) { for (i=0; i < N; i++) { c[i] = a[i] + b[i]; } } 2XU\u0003VOLJKWO\\\u0003PRUH\u0003FRQYROXWHG\u0003PHWKRG\u0003ZDV\u0003LQWHQGHG\u0003WR\u0003VXJJHVW\u0003D\u0003SRWHQWLDO\u0003ZD\\\u0003WR\u0003 SDUDOOHOL]H\u0003WKH\u0003FRGH\u0003RQ\u0003D\u0003V\\VWHP\u0003ZLWK\u0003PXOWLSOH\u0003&38V\u0003RU\u0003&38\u0003FRUHV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003 ZLWK\u0003D\u0003GXDO\u0010FRUH\u0003SURFHVVRU\u000f\u0003RQH\u0003FRXOG\u0003FKDQJH\u0003WKH\u0003LQFUHPHQW\u0003WR\u0003\u0015\u0003DQG\u0003KDYH\u0003RQH\u0003 FRUH\u0003LQLWLDOL]H\u0003WKH\u0003ORRS\u0003ZLWK\u0003 tid = 0\u0003DQG\u0003DQRWKHU\u0003ZLWK\u0003 tid = 1\u0011\u00037KH\u0003\u020cUVW\u0003FRUH\u0003 ZRXOG\u0003DGG\u0003WKH\u0003HYHQ\u0010LQGH[HG\u0003HOHPHQWV\u000f\u0003DQG\u0003WKH\u0003VHFRQG\u0003FRUH\u0003ZRXOG\u0003DGG\u0003WKH\u0003RGG\u0010 LQGH[HG\u0003HOHPHQWV\u0011\u00037KLV\u0003DPRXQWV\u0003WR\u0003H[HFXWLQJ\u0003WKH\u0003IROORZLQJ\u0003FRGH\u0003RQ\u0003HDFK\u0003RI\u0003WKH\u0003 WZR\u0003&38\u0003FRUHV Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /four.lf/one.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1*CPU CORE 1 CPU CORE 2 void add( int *a, int *b, int *c ) { int tid = 0; while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 2; } }void add( int *a, int *b, int *c ) { int tid = 1; while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 2; } } 2I\u0003FRXUVH\u000f\u0003GRLQJ\u0003WKLV\u0003RQ\u0003D\u0003&38\u0003ZRXOG\u0003UHTXLUH\u0003FRQVLGHUDEO\\\u0003PRUH\u0003FRGH\u0003WKDQ\u0003ZH\u0003 KDYH\u0003LQFOXGHG\u0003LQ\u0003WKLV\u0003H[DPSOH\u0011\u0003<RX\u0003ZRXOG\u0003QHHG\u0003WR\u0003SURYLGH\u0003D\u0003UHDVRQDEOH\u0003DPRXQW\u0003RI\u0003 LQIUDVWUXFWXUH\u0003WR\u0003FUHDWH\u0003WKH\u0003ZRUNHU\u0003WKUHDGV\u0003WKDW\u0003H[HFXWH\u0003WKH\u0003IXQFWLRQ\u0003 add()\u0003DV\u0003 ZHOO\u0003DV\u0003PDNH\u0003WKH\u0003DVVXPSWLRQ\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003ZRXOG\u0003H[HFXWH\u0003LQ\u0003SDUDOOHO\u000f\u0003D\u0003VFKHG - XOLQJ\u0003DVVXPSWLRQ\u0003WKDW\u0003LV\u0003XQIRUWXQDWHO\\\u0003QRW\u0003DOZD\\V\u0003WUXH\u0011",
    "while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 2; } }void add( int *a, int *b, int *c ) { int tid = 1; while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 2; } } 2I\u0003FRXUVH\u000f\u0003GRLQJ\u0003WKLV\u0003RQ\u0003D\u0003&38\u0003ZRXOG\u0003UHTXLUH\u0003FRQVLGHUDEO\\\u0003PRUH\u0003FRGH\u0003WKDQ\u0003ZH\u0003 KDYH\u0003LQFOXGHG\u0003LQ\u0003WKLV\u0003H[DPSOH\u0011\u0003<RX\u0003ZRXOG\u0003QHHG\u0003WR\u0003SURYLGH\u0003D\u0003UHDVRQDEOH\u0003DPRXQW\u0003RI\u0003 LQIUDVWUXFWXUH\u0003WR\u0003FUHDWH\u0003WKH\u0003ZRUNHU\u0003WKUHDGV\u0003WKDW\u0003H[HFXWH\u0003WKH\u0003IXQFWLRQ\u0003 add()\u0003DV\u0003 ZHOO\u0003DV\u0003PDNH\u0003WKH\u0003DVVXPSWLRQ\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003ZRXOG\u0003H[HFXWH\u0003LQ\u0003SDUDOOHO\u000f\u0003D\u0003VFKHG - XOLQJ\u0003DVVXPSWLRQ\u0003WKDW\u0003LV\u0003XQIRUWXQDWHO\\\u0003QRW\u0003DOZD\\V\u0003WUXH\u0011 GPU VECTOR SUMS :H\u0003FDQ\u0003DFFRPSOLVK\u0003WKH\u0003VDPH\u0003DGGLWLRQ\u0003YHU\\\u0003VLPLODUO\\\u0003RQ\u0003D\u0003*38\u0003E\\\u0003ZULWLQJ\u0003 add() DV\u0003D\u0003GHYLFH\u0003IXQFWLRQ\u0011\u00037KLV\u0003VKRXOG\u0003ORRN\u0003VLPLODU\u0003WR\u0003FRGH\u0003\\RX\u0003VDZ\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003 FKDSWHU\u0011\u0003%XW\u0003EHIRUH\u0003ZH\u0003ORRN\u0003DW\u0003WKH\u0003GHYLFH\u0003FRGH\u000f\u0003ZH\u0003SUHVHQW\u0003 main()\u0011\u0003$OWKRXJK\u0003WKH\u0003 *38\u0003LPSOHPHQWDWLRQ\u0003RI\u0003 main()\u0003LV\u0003GLIIHUHQW\u0003IURP\u0003WKH\u0003FRUUHVSRQGLQJ\u0003&38\u0003YHUVLRQ\u000f\u0003 QRWKLQJ\u0003KHUH\u0003VKRXOG\u0003ORRN\u0003QHZ \u0003 #include \"../common/book.h\" #define N 10 int main( void ) { int a[N], b[N], c[N]; int *dev_a, *dev_b, *dev_c; // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c, N * sizeof(int) ) ); // fill the arrays 'a' and 'b' on the CPU for (int i=0; i<N; i++) { a[i] = -i; b[i] = i * i; } Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /four.lf/two.lf // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, N * sizeof(int), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, N * sizeof(int), cudaMemcpyHostToDevice ) ); add<<<N,1>>>( dev_a, dev_b, dev_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( c, dev_c, N * sizeof(int), cudaMemcpyDeviceToHost ) ); // display the results for (int i=0; i<N; i++) { printf( \"%d + %d = %d\\n\" , a[i], b[i], c[i] ); } // free the memory allocated on the GPU cudaFree( dev_a ); cudaFree( dev_b ); cudaFree( dev_c ); return 0; } <RX\u0003ZLOO\u0003QRWLFH\u0003VRPH\u0003FRPPRQ\u0003SDWWHUQV\u0003WKDW\u0003ZH\u0003HPSOR\\\u0003DJDLQ :H\u0003DOORFDWH\u0003WKUHH\u0003DUUD\\V\u0003RQ\u0003WKH\u0003GHYLFH\u0003XVLQJ\u0003FDOOV\u0003WR\u0003\u01e9\u0003 cudaMalloc() \u0003WZR\u0003 DUUD\\V\u000f\u0003dev_a\u0003DQG\u0003dev_b\u000f\u0003WR\u0003KROG\u0003LQSXWV\u000f\u0003DQG\u0003RQH\u0003DUUD\\\u000f\u0003 dev_c\u000f\u0003WR\u0003KROG\u0003WKH\u0003 UHVXOW\u0011\u0003 %HFDXVH\u0003ZH\u0003DUH\u0003HQYLURQPHQWDOO\\\u0003FRQVFLHQWLRXV\u0003FRGHUV\u000f\u0003ZH\u0003FOHDQ\u0003XS\u0003DIWHU\u0003\u01e9\u0003 RXUVHOYHV\u0003ZLWK\u0003 cudaFree() \u0011 8VLQJ\u0003\u01e9\u0003cudaMemcpy() \u000f\u0003ZH\u0003FRS\\\u0003WKH\u0003LQSXW\u0003GDWD\u0003WR\u0003WKH\u0003GHYLFH\u0003ZLWK\u0003WKH\u0003SDUDPHWHU\u0003 cudaMemcpyHostToDevice \u0003DQG\u0003FRS\\\u0003WKH\u0003UHVXOW\u0003GDWD\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0003ZLWK\u0003 cudaMemcpyDeviceToHost \u0011 :H\u0003H[HFXWH\u0003WKH\u0003GHYLFH\u0003FRGH\u0003LQ\u0003\u01e9\u0003 add()\u0003IURP\u0003WKH\u0003KRVW\u0003FRGH\u0003LQ\u0003 main()\u0003XVLQJ\u0003WKH\u0003 WULSOH\u0003DQJOH\u0003EUDFNHW\u0003V\\QWD[\u0011 Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /four.lf/three.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1*$V\u0003DQ\u0003DVLGH\u000f\u0003\\RX\u0003PD\\\u0003EH\u0003ZRQGHULQJ\u0003ZK\\\u0003ZH\u0003\u020cOO\u0003WKH\u0003LQSXW\u0003DUUD\\V\u0003RQ\u0003WKH\u0003&38\u0011\u00037KHUH\u0003 LV\u0003QR\u0003UHDVRQ\u0003LQ\u0003SDUWLFXODU\u0003ZK\\\u0003ZH\u0003 need \u0003WR\u0003GR\u0003WKLV\u0011\u0003,Q\u0003IDFW\u000f\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003WKLV\u0003 VWHS\u0003ZRXOG\u0003EH\u0003IDVWHU\u0003LI\u0003ZH\u0003\u020cOOHG\u0003WKH\u0003DUUD\\V\u0003RQ\u0003WKH\u0003*38\u0011\u0003%XW\u0003ZH\u0003LQWHQG\u0003WR\u0003VKRZ\u0003KRZ\u0003 D\u0003SDUWLFXODU\u0003RSHUDWLRQ\u000f\u0003QDPHO\\\u000f\u0003WKH\u0003DGGLWLRQ\u0003RI\u0003WZR\u0003YHFWRUV\u000f\u0003FDQ\u0003EH\u0003LPSOHPHQWHG\u0003 RQ\u0003D\u0003JUDSKLFV\u0003SURFHVVRU\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003ZH\u0003DVN\u0003\\RX\u0003WR\u0003LPDJLQH\u0003WKDW\u0003WKLV\u0003LV\u0003EXW\u0003RQH\u0003 VWHS\u0003RI\u0003D\u0003ODUJHU\u0003DSSOLFDWLRQ\u0003ZKHUH\u0003WKH\u0003LQSXW\u0003DUUD\\V\u0003 a[]\u0003DQG\u0003b[]\u0003KDYH\u0003EHHQ\u0003 JHQHUDWHG\u0003E\\\u0003VRPH\u0003RWKHU\u0003DOJRULWKP\u0003RU\u0003ORDGHG\u0003IURP\u0003WKH\u0003KDUG\u0003GULYH\u0003E\\\u0003WKH\u0003XVHU\u0011\u0003,Q\u0003 VXPPDU\\\u000f\u0003LW\u0003ZLOO\u0003VXI\u020cFH\u0003WR\u0003SUHWHQG\u0003WKDW\u0003WKLV\u0003GDWD\u0003DSSHDUHG\u0003RXW\u0003RI\u0003QRZKHUH\u0003DQG\u0003 QRZ\u0003ZH\u0003QHHG\u0003WR\u0003GR\u0003VRPHWKLQJ\u0003ZLWK\u0003LW\u0011 0RYLQJ\u0003RQ\u000f\u0003RXU\u0003 add()\u0003URXWLQH\u0003ORRNV\u0003VLPLODU\u0003WR\u0003LWV\u0003FRUUHVSRQGLQJ\u0003&38\u0003 LPSOHPHQWDWLRQ __global__ void add( int *a, int *b, int *c ) { int tid = blockIdx.x; // handle the data at this index if (tid < N) c[tid] = a[tid] + b[tid]; } $JDLQ\u0003ZH\u0003VHH\u0003D\u0003FRPPRQ\u0003SDWWHUQ\u0003ZLWK\u0003WKH\u0003IXQFWLRQ\u0003 add() :H\u0003KDYH\u0003ZULWWHQ\u0003D\u0003IXQFWLRQ\u0003FDOOHG\u0003\u01e9\u0003 add()\u0003WKDW\u0003H[HFXWHV\u0003RQ\u0003WKH\u0003GHYLFH\u0011\u0003:H\u0003 DFFRPSOLVKHG\u0003WKLV\u0003E\\\u0003WDNLQJ\u0003&\u0003FRGH\u0003DQG\u0003DGGLQJ\u0003D\u0003 __global__ \u0003TXDOL\u020cHU\u0003WR\u0003 WKH\u0003IXQFWLRQ\u0003QDPH\u0011 6R\u0003IDU\u000f\u0003WKHUH\u0003LV\u0003QRWKLQJ\u0003QHZ\u0003LQ\u0003WKLV\u0003H[DPSOH\u0003H[FHSW\u0003LW\u0003FDQ\u0003GR\u0003PRUH\u0003WKDQ\u0003DGG\u0003\u0015\u0003DQG\u0003 \u001a\u0011\u0003+RZHYHU\u000f\u0003WKHUH\u0003 are\u0003WZR\u0003QRWHZRUWK\\\u0003FRPSRQHQWV\u0003RI\u0003WKLV\u0003H[DPSOH \u00037KH\u0003SDUDP - HWHUV\u0003ZLWKLQ\u0003WKH\u0003WULSOH\u0003DQJOH\u0003EUDFNHWV\u0003DQG\u0003WKH\u0003FRGH\u0003FRQWDLQHG\u0003LQ\u0003WKH\u0003NHUQHO\u0003LWVHOI\u0003 ERWK\u0003LQWURGXFH\u0003QHZ\u0003FRQFHSWV\u0011 8S\u0003WR\u0003WKLV\u0003SRLQW\u000f\u0003ZH\u0003KDYH\u0003DOZD\\V\u0003VHHQ\u0003NHUQHOV\u0003ODXQFKHG\u0003LQ\u0003WKH\u0003IROORZLQJ\u0003IRUP kernel<<<1,1>>>( param1, param2, \u2026 ); %XW\u0003LQ\u0003WKLV\u0003H[DPSOH\u0003ZH\u0003DUH\u0003ODXQFKLQJ\u0003ZLWK\u0003D\u0003QXPEHU\u0003LQ\u0003WKH\u0003DQJOH\u0003EUDFNHWV\u0003WKDW\u0003LV\u0003 QRW\u0003\u0014 add<<<N,1>>>( dev _ a, dev _ b, dev _ c ); :KDW\u0003JLYHV\" Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /four.lf/four.lf5HFDOO\u0003WKDW\u0003ZH\u0003OHIW\u0003WKRVH\u0003WZR\u0003QXPEHUV\u0003LQ\u0003WKH\u0003DQJOH\u0003EUDFNHWV\u0003XQH[SODLQHG \u0003ZH\u0003 VWDWHG\u0003YDJXHO\\\u0003WKDW\u0003WKH\\\u0003ZHUH\u0003SDUDPHWHUV\u0003WR\u0003WKH\u0003UXQWLPH\u0003WKDW\u0003GHVFULEH\u0003KRZ\u0003WR\u0003 ODXQFK\u0003WKH\u0003NHUQHO\u0011\u0003:HOO\u000f\u0003WKH\u0003\u020cUVW\u0003QXPEHU\u0003LQ\u0003WKRVH\u0003SDUDPHWHUV\u0003UHSUHVHQWV\u0003WKH\u0003 QXPEHU\u0003RI\u0003SDUDOOHO\u0003EORFNV\u0003LQ\u0003ZKLFK\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WKH\u0003GHYLFH\u0003WR\u0003H[HFXWH\u0003RXU\u0003NHUQHO\u0011\u0003 ,Q\u0003WKLV\u0003FDVH\u000f\u0003ZH\u01e2UH\u0003SDVVLQJ\u0003WKH\u0003YDOXH\u0003 N\u0003IRU\u0003WKLV\u0003SDUDPHWHU\u0011\u0003 )RU\u0003H[DPSOH\u000f\u0003LI\u0003ZH\u0003ODXQFK\u0003ZLWK\u0003 kernel<<<2,1>>>() \u000f\u0003\\RX\u0003FDQ\u0003WKLQN\u0003RI\u0003WKH\u0003 UXQWLPH\u0003FUHDWLQJ\u0003WZR\u0003FRSLHV\u0003RI\u0003WKH\u0003NHUQHO\u0003DQG\u0003UXQQLQJ\u0003WKHP\u0003LQ\u0003SDUDOOHO\u0011\u0003:H\u0003FDOO\u0003 HDFK\u0003RI\u0003WKHVH\u0003SDUDOOHO\u0003LQYRFDWLRQV\u0003D\u0003 block \u0011\u0003:LWK\u0003kernel<<<256,1 >>>()\u000f\u0003\\RX\u0003 ZRXOG\u0003JHW\u0003\u0015\u0018\u0019\u0003 blocks \u0003UXQQLQJ\u0003RQ\u0003WKH\u0003*38\u0011\u00033DUDOOHO\u0003SURJUDPPLQJ\u0003KDV\u0003QHYHU\u0003EHHQ\u0003 HDVLHU\u0011 %XW\u0003WKLV\u0003UDLVHV\u0003DQ\u0003H[FHOOHQW\u0003TXHVWLRQ \u00037KH\u0003*38\u0003UXQV\u0003 N\u0003FRSLHV\u0003RI\u0003RXU\u0003NHUQHO\u0003FRGH\u000f\u0003 EXW\u0003KRZ\u0003FDQ\u0003ZH\u0003WHOO\u0003IURP\u0003ZLWKLQ\u0003WKH\u0003FRGH\u0003ZKLFK\u0003EORFN\u0003LV\u0003FXUUHQWO\\\u0003UXQQLQJ\"\u00037KLV\u0003 TXHVWLRQ\u0003EULQJV\u0003XV\u0003WR\u0003WKH\u0003VHFRQG\u0003QHZ\u0003IHDWXUH\u0003RI\u0003WKH\u0003H[DPSOH\u000f\u0003WKH\u0003NHUQHO\u0003FRGH\u0003 LWVHOI\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003LW\u0003EULQJV\u0003XV\u0003WR\u0003WKH\u0003YDULDEOH\u0003 blockIdx.x __global__ void add( int *a, int *b, int *c ) { int tid = blockIdx.x ; // handle the data at this index if (tid < N) c[tid] = a[tid] + b[tid]; } $W\u0003\u020cUVW\u0003JODQFH\u000f\u0003LW\u0003ORRNV\u0003OLNH\u0003WKLV\u0003YDULDEOH\u0003VKRXOG\u0003FDXVH\u0003D\u0003V\\QWD[\u0003HUURU\u0003DW\u0003FRPSLOH\u0003 WLPH\u0003VLQFH\u0003ZH\u0003XVH\u0003LW\u0003WR\u0003DVVLJQ\u0003WKH\u0003YDOXH\u0003RI\u0003 tid\u000f\u0003EXW\u0003ZH\u0003KDYH\u0003QHYHU\u0003GH\u020cQHG\u0003LW\u0011\u0003 +RZHYHU\u000f\u0003WKHUH\u0003LV\u0003QR\u0003QHHG\u0003WR\u0003GH\u020cQH\u0003WKH\u0003YDULDEOH\u0003 blockIdx \u0003WKLV\u0003LV\u0003RQH\u0003RI\u0003WKH\u0003 EXLOW\u0010LQ\u0003YDULDEOHV\u0003WKDW\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003GH\u020cQHV\u0003IRU\u0003XV\u0011\u0003)XUWKHUPRUH\u000f\u0003ZH\u0003XVH\u0003WKLV\u0003 YDULDEOH\u0003IRU\u0003H[DFWO\\\u0003ZKDW\u0003LW\u0003VRXQGV\u0003OLNH\u0003LW\u0003PHDQV\u0011\u0003,W\u0003FRQWDLQV\u0003WKH\u0003YDOXH\u0003RI\u0003WKH\u0003EORFN\u0003 LQGH[\u0003IRU\u0003ZKLFKHYHU\u0003EORFN\u0003LV\u0003FXUUHQWO\\\u0003UXQQLQJ\u0003WKH\u0003GHYLFH\u0003FRGH\u0011 :K\\\u000f\u0003\\RX\u0003PD\\\u0003WKHQ\u0003DVN\u000f\u0003LV\u0003LW\u0003QRW\u0003MXVW\u0003 blockIdx \"\u0003:K\\\u0003blockIdx.x \"\u0003$V\u0003LW\u0003WXUQV\u0003 RXW\u000f\u0003&8'$\u0003&\u0003DOORZV\u0003\\RX\u0003WR\u0003GH\u020cQH\u0003D\u0003JURXS\u0003RI\u0003EORFNV\u0003LQ\u0003WZR\u0003GLPHQVLRQV\u0011\u0003)RU\u0003SURE - OHPV\u0003ZLWK\u0003WZR\u0010GLPHQVLRQDO\u0003GRPDLQV\u000f\u0003VXFK\u0003DV\u0003PDWUL[\u0003PDWK\u0003RU\u0003LPDJH\u0003SURFHVVLQJ\u000f\u0003 LW\u0003LV\u0003RIWHQ\u0003FRQYHQLHQW\u0003WR\u0003XVH\u0003WZR\u0010GLPHQVLRQDO\u0003LQGH[LQJ\u0003WR\u0003DYRLG\u0003DQQR\\LQJ\u0003WUDQVOD - WLRQV\u0003IURP\u0003OLQHDU\u0003WR\u0003UHFWDQJXODU\u0003LQGLFHV\u0011\u0003'RQ\u01e2W\u0003ZRUU\\\u0003LI\u0003\\RX\u0003DUHQ\u01e2W\u0003IDPLOLDU\u0003ZLWK\u0003 WKHVH\u0003SUREOHP\u0003W\\SHV \u0003MXVW\u0003NQRZ\u0003WKDW\u0003XVLQJ\u0003WZR\u0010GLPHQVLRQDO\u0003LQGH[LQJ\u0003FDQ\u0003VRPH - WLPHV\u0003EH\u0003PRUH\u0003FRQYHQLHQW\u0003WKDQ\u0003RQH\u0010GLPHQVLRQDO\u0003LQGH[LQJ\u0011\u0003%XW\u0003\\RX\u0003QHYHU\u0003 have \u0003WR\u0003 XVH\u0003LW\u0011\u0003:H\u0003ZRQ\u01e2W\u0003EH\u0003RIIHQGHG\u0011 Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /four.lf/five.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1* :KHQ\u0003ZH\u0003ODXQFKHG\u0003WKH\u0003NHUQHO\u000f\u0003ZH\u0003VSHFL\u020cHG\u0003 N\u0003DV\u0003WKH\u0003QXPEHU\u0003RI\u0003SDUDOOHO\u0003EORFNV\u0011\u0003 :H\u0003FDOO\u0003WKH\u0003FROOHFWLRQ\u0003RI\u0003SDUDOOHO\u0003EORFNV\u0003D\u0003 grid\u0011\u00037KLV\u0003VSHFL\u020cHV\u0003WR\u0003WKH\u0003UXQWLPH\u0003 V\\VWHP\u0003WKDW\u0003ZH\u0003ZDQW\u0003D\u0003RQH\u0010GLPHQVLRQDO\u0003 grid\u0003RI\u0003N\u0003EORFNV\u0003 VFDODU\u0003YDOXHV\u0003DUH\u0003 LQWHUSUHWHG\u0003DV\u0003RQH\u0010GLPHQVLRQDO \u0011\u00037KHVH\u0003WKUHDGV\u0003ZLOO\u0003KDYH\u0003YDU\\LQJ\u0003YDOXHV\u0003IRU\u0003 blockIdx.x \u000f\u0003WKH\u0003\u020cUVW\u0003WDNLQJ\u0003YDOXH\u0003\u0013\u0003DQG\u0003WKH\u0003ODVW\u0003WDNLQJ\u0003YDOXH\u0003 N-1\u0011\u00036R\u000f\u0003LPDJLQH\u0003 IRXU\u0003EORFNV\u000f\u0003DOO\u0003UXQQLQJ\u0003WKURXJK\u0003WKH\u0003VDPH\u0003FRS\\\u0003RI\u0003WKH\u0003GHYLFH\u0003FRGH\u0003EXW\u0003KDYLQJ\u0003 GLIIHUHQW\u0003YDOXHV\u0003IRU\u0003WKH\u0003YDULDEOH\u0003 blockIdx.x \u0011\u00037KLV\u0003LV\u0003ZKDW\u0003WKH\u0003DFWXDO\u0003FRGH\u0003EHLQJ\u0003 H[HFXWHG\u0003LQ\u0003HDFK\u0003RI\u0003WKH\u0003IRXU\u0003SDUDOOHO\u0003EORFNV\u0003ORRNV\u0003OLNH\u0003DIWHU\u0003WKH\u0003UXQWLPH\u0003VXEVWL - WXWHV\u0003WKH\u0003DSSURSULDWH\u0003EORFN\u0003LQGH[\u0003IRU\u0003 blockIdx.x BLOCK 1 BLOCK 2 __global__ void add( int *a, int *b, int *c ) { int tid = 0; if (tid < N) c[tid]",
    "from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /four.lf/five.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1* :KHQ\u0003ZH\u0003ODXQFKHG\u0003WKH\u0003NHUQHO\u000f\u0003ZH\u0003VSHFL\u020cHG\u0003 N\u0003DV\u0003WKH\u0003QXPEHU\u0003RI\u0003SDUDOOHO\u0003EORFNV\u0011\u0003 :H\u0003FDOO\u0003WKH\u0003FROOHFWLRQ\u0003RI\u0003SDUDOOHO\u0003EORFNV\u0003D\u0003 grid\u0011\u00037KLV\u0003VSHFL\u020cHV\u0003WR\u0003WKH\u0003UXQWLPH\u0003 V\\VWHP\u0003WKDW\u0003ZH\u0003ZDQW\u0003D\u0003RQH\u0010GLPHQVLRQDO\u0003 grid\u0003RI\u0003N\u0003EORFNV\u0003 VFDODU\u0003YDOXHV\u0003DUH\u0003 LQWHUSUHWHG\u0003DV\u0003RQH\u0010GLPHQVLRQDO \u0011\u00037KHVH\u0003WKUHDGV\u0003ZLOO\u0003KDYH\u0003YDU\\LQJ\u0003YDOXHV\u0003IRU\u0003 blockIdx.x \u000f\u0003WKH\u0003\u020cUVW\u0003WDNLQJ\u0003YDOXH\u0003\u0013\u0003DQG\u0003WKH\u0003ODVW\u0003WDNLQJ\u0003YDOXH\u0003 N-1\u0011\u00036R\u000f\u0003LPDJLQH\u0003 IRXU\u0003EORFNV\u000f\u0003DOO\u0003UXQQLQJ\u0003WKURXJK\u0003WKH\u0003VDPH\u0003FRS\\\u0003RI\u0003WKH\u0003GHYLFH\u0003FRGH\u0003EXW\u0003KDYLQJ\u0003 GLIIHUHQW\u0003YDOXHV\u0003IRU\u0003WKH\u0003YDULDEOH\u0003 blockIdx.x \u0011\u00037KLV\u0003LV\u0003ZKDW\u0003WKH\u0003DFWXDO\u0003FRGH\u0003EHLQJ\u0003 H[HFXWHG\u0003LQ\u0003HDFK\u0003RI\u0003WKH\u0003IRXU\u0003SDUDOOHO\u0003EORFNV\u0003ORRNV\u0003OLNH\u0003DIWHU\u0003WKH\u0003UXQWLPH\u0003VXEVWL - WXWHV\u0003WKH\u0003DSSURSULDWH\u0003EORFN\u0003LQGH[\u0003IRU\u0003 blockIdx.x BLOCK 1 BLOCK 2 __global__ void add( int *a, int *b, int *c ) { int tid = 0; if (tid < N) c[tid] = a[tid] + b[tid]; }__global__ void add( int *a, int *b, int *c ) { int tid = 1; if (tid < N) c[tid] = a[tid] + b[tid]; } BLOCK 3 BLOCK 4 __global__ void add( int *a, int *b, int *c ) { int tid = 2; if (tid < N) c[tid] = a[tid] + b[tid]; }__global__ void add( int *a, int *b, int *c ) { int tid = 3; if (tid < N) c[tid] = a[tid] + b[tid]; } ,I\u0003\\RX\u0003UHFDOO\u0003WKH\u0003&38\u0010EDVHG\u0003H[DPSOH\u0003ZLWK\u0003ZKLFK\u0003ZH\u0003EHJDQ\u000f\u0003\\RX\u0003ZLOO\u0003UHFDOO\u0003WKDW\u0003ZH\u0003 QHHGHG\u0003WR\u0003ZDON\u0003WKURXJK\u0003LQGLFHV\u0003IURP\u0003\u0013\u0003WR\u0003 N-1\u0003LQ\u0003RUGHU\u0003WR\u0003VXP\u0003WKH\u0003WZR\u0003YHFWRUV\u0011\u0003 6LQFH\u0003WKH\u0003UXQWLPH\u0003V\\VWHP\u0003LV\u0003DOUHDG\\\u0003ODXQFKLQJ\u0003D\u0003NHUQHO\u0003ZKHUH\u0003HDFK\u0003EORFN\u0003ZLOO\u0003 KDYH\u0003RQH\u0003RI\u0003WKHVH\u0003LQGLFHV\u000f\u0003QHDUO\\\u0003DOO\u0003RI\u0003WKLV\u0003ZRUN\u0003KDV\u0003DOUHDG\\\u0003EHHQ\u0003GRQH\u0003IRU\u0003XV\u0011\u0003 %HFDXVH\u0003ZH\u01e2UH\u0003VRPHWKLQJ\u0003RI\u0003D\u0003OD]\\\u0003ORW\u000f\u0003WKLV\u0003LV\u0003D\u0003JRRG\u0003WKLQJ\u0011\u0003,W\u0003DIIRUGV\u0003XV\u0003PRUH\u0003WLPH\u0003 WR\u0003EORJ\u000f\u0003SUREDEO\\\u0003DERXW\u0003KRZ\u0003OD]\\\u0003ZH\u0003DUH\u0011 7KH\u0003ODVW\u0003UHPDLQLQJ\u0003TXHVWLRQ\u0003WR\u0003EH\u0003DQVZHUHG\u0003LV\u000f\u0003ZK\\\u0003GR\u0003ZH\u0003FKHFN\u0003ZKHWKHU\u0003 tid LV\u0003OHVV\u0003WKDQ\u0003 N\"\u0003,W\u0003should \u0003DOZD\\V\u0003EH\u0003OHVV\u0003WKDQ\u0003 N\u000f\u0003VLQFH\u0003ZH\u01e2YH\u0003VSHFL\u020cFDOO\\\u0003ODXQFKHG\u0003 RXU\u0003NHUQHO\u0003VXFK\u0003WKDW\u0003WKLV\u0003DVVXPSWLRQ\u0003KROGV\u0011\u0003%XW\u0003RXU\u0003GHVLUH\u0003WR\u0003EH\u0003OD]\\\u0003DOVR\u0003PDNHV\u0003 XV\u0003SDUDQRLG\u0003DERXW\u0003VRPHRQH\u0003EUHDNLQJ\u0003DQ\u0003DVVXPSWLRQ\u0003ZH\u01e2YH\u0003PDGH\u0003LQ\u0003RXU\u0003FRGH\u0011\u0003 %UHDNLQJ\u0003FRGH\u0003DVVXPSWLRQV\u0003PHDQV\u0003EURNHQ\u0003FRGH\u0011\u00037KLV\u0003PHDQV\u0003EXJ\u0003UHSRUWV\u000f\u0003ODWH\u0003 Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /four.lf/six.lfQLJKWV\u0003WUDFNLQJ\u0003GRZQ\u0003EDG\u0003EHKDYLRU\u000f\u0003DQG\u0003JHQHUDOO\\\u0003ORWV\u0003RI\u0003DFWLYLWLHV\u0003WKDW\u0003VWDQG\u0003 EHWZHHQ\u0003XV\u0003DQG\u0003RXU\u0003EORJ\u0011\u0003,I\u0003ZH\u0003GLGQ\u01e2W\u0003FKHFN\u0003WKDW\u0003 tid\u0003LV\u0003OHVV\u0003WKDQ\u0003 N\u0003DQG\u0003VXEVH - TXHQWO\\\u0003IHWFKHG\u0003PHPRU\\\u0003WKDW\u0003ZDVQ\u01e2W\u0003RXUV\u000f\u0003WKLV\u0003ZRXOG\u0003EH\u0003EDG\u0011\u0003,Q\u0003IDFW\u000f\u0003LW\u0003FRXOG\u0003 SRVVLEO\\\u0003NLOO\u0003WKH\u0003H[HFXWLRQ\u0003RI\u0003\\RXU\u0003NHUQHO\u000f\u0003VLQFH\u0003*38V\u0003KDYH\u0003VRSKLVWLFDWHG\u0003PHPRU\\\u0003 PDQDJHPHQW\u0003XQLWV\u0003WKDW\u0003NLOO\u0003SURFHVVHV\u0003WKDW\u0003VHHP\u0003WR\u0003EH\u0003YLRODWLQJ\u0003PHPRU\\\u0003UXOHV\u0011 ,I\u0003\\RX\u0003HQFRXQWHU\u0003SUREOHPV\u0003OLNH\u0003WKH\u0003RQHV\u0003MXVW\u0003PHQWLRQHG\u000f\u0003RQH\u0003RI\u0003WKH\u0003 \u0003HANDLE_ ERROR()\u0003PDFURV\u0003WKDW\u0003ZH\u01e2YH\u0003VSULQNOHG\u0003VR\u0003OLEHUDOO\\\u0003WKURXJKRXW\u0003WKH\u0003FRGH\u0003ZLOO\u0003 GHWHFW\u0003DQG\u0003DOHUW\u0003\\RX\u0003WR\u0003WKH\u0003VLWXDWLRQ\u0011\u0003$V\u0003ZLWK\u0003WUDGLWLRQDO\u0003&\u0003SURJUDPPLQJ\u000f\u0003WKH\u0003 OHVVRQ\u0003KHUH\u0003LV\u0003WKDW\u0003IXQFWLRQV\u0003UHWXUQ\u0003HUURU\u0003FRGHV\u0003IRU\u0003D\u0003UHDVRQ\u0011\u0003$OWKRXJK\u0003LW\u0003LV\u0003 DOZD\\V\u0003WHPSWLQJ\u0003WR\u0003LJQRUH\u0003WKHVH\u0003HUURU\u0003FRGHV\u000f\u0003ZH\u0003ZRXOG\u0003ORYH\u0003WR\u0003VDYH\u0003 you\u0003WKH\u0003KRXUV\u0003 RI\u0003SDLQ\u0003WKURXJK\u0003ZKLFK\u0003 we\u0003KDYH\u0003VXIIHUHG\u0003E\\\u0003XUJLQJ\u0003WKDW\u0003\\RX\u0003 check the results of every operation that can fail \u0011\u0003$V\u0003LV\u0003RIWHQ\u0003WKH\u0003FDVH\u000f\u0003WKH\u0003SUHVHQFH\u0003RI\u0003WKHVH\u0003HUURUV\u0003 ZLOO\u0003QRW\u0003SUHYHQW\u0003\\RX\u0003IURP\u0003FRQWLQXLQJ\u0003WKH\u0003H[HFXWLRQ\u0003RI\u0003\\RXU\u0003DSSOLFDWLRQ\u000f\u0003EXW\u0003WKH\\\u0003 ZLOO\u0003PRVW\u0003FHUWDLQO\\\u0003FDXVH\u0003DOO\u0003PDQQHU\u0003RI\u0003XQSUHGLFWDEOH\u0003DQG\u0003XQVDYRU\\\u0003VLGH\u0003HIIHFWV\u0003 GRZQVWUHDP\u0011 $W\u0003WKLV\u0003SRLQW\u000f\u0003\\RX\u01e2UH\u0003UXQQLQJ\u0003FRGH\u0003LQ\u0003SDUDOOHO\u0003RQ\u0003WKH\u0003*38\u0011\u00033HUKDSV\u0003\\RX\u0003KDG\u0003KHDUG\u0003 WKLV\u0003ZDV\u0003WULFN\\\u0003RU\u0003WKDW\u0003\\RX\u0003KDG\u0003WR\u0003XQGHUVWDQG\u0003FRPSXWHU\u0003JUDSKLFV\u0003WR\u0003GR\u0003JHQHUDO\u0010 SXUSRVH\u0003SURJUDPPLQJ\u0003RQ\u0003D\u0003JUDSKLFV\u0003SURFHVVRU\u0011\u0003:H\u0003KRSH\u0003\\RX\u0003DUH\u0003VWDUWLQJ\u0003WR\u0003VHH\u0003 KRZ\u0003&8'$\u0003&\u0003PDNHV\u0003LW\u0003PXFK\u0003HDVLHU\u0003WR\u0003JHW\u0003VWDUWHG\u0003ZULWLQJ\u0003SDUDOOHO\u0003FRGH\u0003RQ\u0003D\u0003*38\u0011\u0003 :H\u0003XVHG\u0003WKH\u0003H[DPSOH\u0003RQO\\\u0003WR\u0003VXP\u0003YHFWRUV\u0003RI\u0003OHQJWK\u0003\u0014\u0013\u0011\u0003,I\u0003\\RX\u0003ZRXOG\u0003OLNH\u0003WR\u0003VHH\u0003 KRZ\u0003HDV\\\u0003LW\u0003LV\u0003WR\u0003JHQHUDWH\u0003D\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003DSSOLFDWLRQ\u000f\u0003WU\\\u0003FKDQJLQJ\u0003WKH\u0003\u0014\u0013\u0003LQ\u0003 WKH\u0003OLQH\u0003#define N 10 \u0003WR\u0003\u0014\u0013\u0013\u0013\u0013\u0003RU\u0003\u0018\u0013\u0013\u0013\u0013\u0003WR\u0003ODXQFK\u0003WHQV\u0003RI\u0003WKRXVDQGV\u0003RI\u0003SDUDOOHO\u0003 EORFNV\u0011\u0003%H\u0003ZDUQHG\u000f\u0003WKRXJK \u00031R\u0003GLPHQVLRQ\u0003RI\u0003\\RXU\u0003ODXQFK\u0003RI\u0003EORFNV\u0003PD\\\u0003H[FHHG\u0003 \u0019\u0018\u000f\u0018\u0016\u0018\u0011\u00037KLV\u0003LV\u0003VLPSO\\\u0003D\u0003KDUGZDUH\u0010LPSRVHG\u0003OLPLW\u000f\u0003VR\u0003\\RX\u0003ZLOO\u0003VWDUW\u0003WR\u0003VHH\u0003IDLOXUHV\u0003LI\u0003 \\RX\u0003DWWHPSW\u0003ODXQFKHV\u0003ZLWK\u0003PRUH\u0003EORFNV\u0003WKDQ\u0003WKLV\u0011\u0003,Q\u0003WKH\u0003QH[W\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003VHH\u0003 KRZ\u0003WR\u0003ZRUN\u0003ZLWKLQ\u0003WKLV\u0003OLPLWDWLRQ\u0011 $\u0003)81\u0003(;$03/( \u0017\u0011\u0015\u0011\u0015\u0003 :H\u0003GRQ\u01e2W\u0003PHDQ\u0003WR\u0003LPSO\\\u0003WKDW\u0003DGGLQJ\u0003YHFWRUV\u0003LV\u0003DQ\\WKLQJ\u0003OHVV\u0003WKDQ\u0003IXQ\u000f\u0003EXW\u0003WKH\u0003 IROORZLQJ\u0003H[DPSOH\u0003ZLOO\u0003VDWLVI\\\u0003WKRVH\u0003ORRNLQJ\u0003IRU\u0003VRPH\u0003\u020dDVK\\\u0003H[DPSOHV\u0003RI\u0003SDUDOOHO\u0003 &8'$\u0003&\u0011\u0003 7KH\u0003IROORZLQJ\u0003H[DPSOH\u0003ZLOO\u0003GHPRQVWUDWH\u0003FRGH\u0003WR\u0003GUDZ\u0003VOLFHV\u0003RI\u0003WKH\u0003-XOLD\u00036HW\u0011\u0003)RU\u0003 WKH\u0003XQLQLWLDWHG\u000f\u0003WKH\u0003-XOLD\u00036HW\u0003LV\u0003WKH\u0003ERXQGDU\\\u0003RI\u0003D\u0003FHUWDLQ\u0003FODVV\u0003RI\u0003IXQFWLRQV\u0003RYHU\u0003 FRPSOH[\u0003QXPEHUV\u0011\u00038QGRXEWHGO\\\u000f\u0003WKLV\u0003VRXQGV\u0003HYHQ\u0003OHVV\u0003IXQ\u0003WKDQ\u0003YHFWRU\u0003DGGL - WLRQ\u0003DQG\u0003PDWUL[\u0003PXOWLSOLFDWLRQ\u0011\u0003+RZHYHU\u000f\u0003IRU\u0003DOPRVW\u0003DOO\u0003YDOXHV\u0003RI\u0003WKH\u0003 \u0003IXQFWLRQ\u01e2V\u0003 Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /four.lf/seven.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1*SDUDPHWHUV\u000f\u0003WKLV\u0003ERXQGDU\\\u0003IRUPV\u0003D\u0003IUDFWDO\u000f\u0003RQH\u0003RI\u0003WKH\u0003PRVW\u0003LQWHUHVWLQJ\u0003DQG\u0003EHDX - WLIXO\u0003FXULRVLWLHV\u0003RI\u0003PDWKHPDWLFV\u0011 7KH\u0003FDOFXODWLRQV\u0003LQYROYHG\u0003LQ\u0003JHQHUDWLQJ\u0003VXFK\u0003D\u0003VHW\u0003DUH\u0003TXLWH\u0003VLPSOH\u0011\u0003$W\u0003LWV\u0003KHDUW\u000f\u0003 WKH\u0003-XOLD\u00036HW\u0003HYDOXDWHV\u0003D\u0003VLPSOH\u0003LWHUDWLYH\u0003HTXDWLRQ\u0003IRU\u0003SRLQWV\u0003LQ\u0003WKH\u0003FRPSOH[\u0003SODQH\u0011\u0003 $\u0003SRLQW\u0003LV\u0003 not\u0003LQ\u0003WKH\u0003VHW\u0003LI\u0003WKH\u0003SURFHVV\u0003RI\u0003LWHUDWLQJ\u0003WKH\u0003HTXDWLRQ\u0003GLYHUJHV\u0003IRU\u0003WKDW\u0003 SRLQW\u0011\u00037KDW\u0003LV\u000f\u0003LI\u0003WKH\u0003VHTXHQFH\u0003RI\u0003YDOXHV\u0003SURGXFHG\u0003E\\\u0003LWHUDWLQJ\u0003WKH\u0003HTXDWLRQ\u0003JURZV\u0003 WRZDUG\u0003LQ\u020cQLW\\\u000f\u0003D\u0003SRLQW\u0003LV\u0003FRQVLGHUHG\u0003 outside \u0003WKH\u0003VHW\u0011\u0003&RQYHUVHO\\\u000f\u0003LI\u0003WKH\u0003YDOXHV\u0003 WDNHQ\u0003E\\\u0003WKH\u0003HTXDWLRQ\u0003UHPDLQ\u0003ERXQGHG\u000f\u0003WKH\u0003SRLQW\u0003 is\u0003LQ\u0003WKH\u0003VHW\u0011\u0003 &RPSXWDWLRQDOO\\\u000f\u0003WKH\u0003LWHUDWLYH\u0003HTXDWLRQ\u0003LQ\u0003TXHVWLRQ\u0003LV\u0003UHPDUNDEO\\\u0003VLPSOH\u000f\u0003DV\u0003 VKRZQ\u0003LQ\u0003(TXDWLRQ\u0003\u0017\u0011\u0014\u0011 Equation 4.1 &RPSXWLQJ\u0003DQ\u0003LWHUDWLRQ\u0003RI\u0003(TXDWLRQ\u0003\u0017\u0011\u0014\u0003ZRXOG\u0003WKHUHIRUH\u0003LQYROYH\u0003VTXDULQJ\u0003WKH\u0003 FXUUHQW\u0003YDOXH\u0003DQG\u0003DGGLQJ\u0003D\u0003FRQVWDQW\u0003WR\u0003JHW\u0003WKH\u0003QH[W\u0003YDOXH\u0003RI\u0003WKH\u0003HTXDWLRQ\u0011\u0003 CPU JUL IA SET :H\u0003ZLOO\u0003H[DPLQH\u0003D\u0003VRXUFH\u0003OLVWLQJ\u0003QRZ\u0003WKDW\u0003ZLOO\u0003FRPSXWH\u0003DQG\u0003YLVXDOL]H\u0003WKH\u0003-XOLD\u0003 6HW\u0011\u00036LQFH\u0003WKLV\u0003LV\u0003D\u0003PRUH\u0003FRPSOLFDWHG\u0003SURJUDP\u0003WKDQ\u0003ZH\u0003KDYH\u0003VWXGLHG\u0003VR\u0003IDU\u000f\u0003ZH\u0003ZLOO\u0003 VSOLW\u0003LW\u0003LQWR\u0003SLHFHV\u0003KHUH\u0011\u0003/DWHU\u0003LQ\u0003WKH\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003VHH\u0003WKH\u0003HQWLUH\u0003VRXUFH\u0003OLVWLQJ\u0011 int main( void ) { CPUBitmap bitmap( DIM, DIM ); unsigned char *ptr = bitmap.get_ptr(); kernel( ptr ); bitmap.display_and_exit(); } 2XU\u0003PDLQ\u0003URXWLQH\u0003LV\u0003UHPDUNDEO\\\u0003VLPSOH\u0011\u0003,W\u0003FUHDWHV\u0003WKH\u0003DSSURSULDWH\u0003VL]H\u0003ELWPDS\u0003 LPDJH\u0003XVLQJ\u0003D\u0003XWLOLW\\\u0003OLEUDU\\\u0003SURYLGHG\u0011\u00031H[W\u000f\u0003LW\u0003SDVVHV\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003ELWPDS\u0003GDWD\u0003 WR\u0003WKH\u0003NHUQHO\u0003IXQFWLRQ\u0011 Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /four.lf/eight.lfvoid kernel( unsigned char *ptr ){ for (int y=0; y<DIM; y++) { for (int x=0; x<DIM; x++) { int offset = x + y * DIM; int juliaValue = julia( x, y ); ptr[offset*4 + 0] = 255 * juliaValue; ptr[offset*4 + 1] = 0; ptr[offset*4 + 2] = 0; ptr[offset*4 + 3] = 255; } } } 7KH\u0003FRPSXWDWLRQ\u0003NHUQHO\u0003GRHV\u0003QRWKLQJ\u0003PRUH\u0003WKDQ\u0003LWHUDWH\u0003WKURXJK\u0003DOO\u0003SRLQWV\u0003ZH\u0003 FDUH\u0003WR\u0003UHQGHU\u000f\u0003FDOOLQJ\u0003 julia()RQ\u0003HDFK\u0003WR\u0003GHWHUPLQH\u0003PHPEHUVKLS\u0003LQ\u0003WKH\u0003-XOLD\u0003 6HW\u0011\u00037KH\u0003IXQFWLRQ\u0003 julia()ZLOO\u0003UHWXUQ\u0003\u0014\u0003LI\u0003WKH\u0003SRLQW\u0003LV\u0003LQ\u0003WKH\u0003VHW\u0003DQG\u0003\u0013\u0003LI\u0003LW\u0003LV\u0003QRW\u0003 LQ\u0003WKH\u0003VHW\u0011\u0003:H\u0003VHW\u0003WKH\u0003SRLQW\u01e2V\u0003FRORU\u0003WR\u0003EH\u0003UHG\u0003LI\u0003 julia()UHWXUQV\u0003\u0014\u0003DQG\u0003EODFN\u0003LI\u0003LW\u0003 UHWXUQV\u0003\u0013\u0011\u00037KHVH\u0003FRORUV\u0003DUH\u0003DUELWUDU\\\u000f\u0003DQG\u0003\\RX\u0003VKRXOG\u0003IHHO\u0003IUHH\u0003WR\u0003FKRRVH\u0003D\u0003FRORU\u0003 VFKHPH\u0003WKDW\u0003PDWFKHV\u0003\\RXU\u0003SHUVRQDO\u0003DHVWKHWLFV\u0011 int julia( int x, int y ) { const float scale = 1.5; float jx = scale * ( float)(DIM/2 - x)/(DIM/2); float jy = scale * ( float)(DIM/2 - y)/(DIM/2); cuComplex c(-0.8, 0.156); cuComplex a(jx, jy); int i = 0; for (i=0; i<200; i++) { a = a * a + c; if (a.magnitude2() > 1000) return 0; } return 1; } Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /four.lf/nine.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1* 7KLV\u0003IXQFWLRQ\u0003LV\u0003WKH\u0003PHDW\u0003RI\u0003WKH\u0003H[DPSOH\u0011\u0003:H\u0003EHJLQ\u0003E\\\u0003WUDQVODWLQJ\u0003RXU\u0003SL[HO\u0003 FRRUGLQDWH\u0003WR\u0003D\u0003FRRUGLQDWH\u0003LQ\u0003FRPSOH[\u0003VSDFH\u0011\u00037R\u0003FHQWHU\u0003WKH\u0003FRPSOH[\u0003SODQH\u0003DW\u0003WKH\u0003 LPDJH\u0003FHQWHU\u000f\u0003ZH\u0003VKLIW\u0003E\\\u0003 DIM/2\u0011\u00037KHQ\u000f\u0003WR\u0003HQVXUH\u0003WKDW\u0003WKH\u0003LPDJH\u0003VSDQV\u0003WKH\u0003UDQJH\u0003 RI\u0003\u0010\u0014\u0011\u0013\u0003WR\u0003\u0014\u0011\u0013\u000f\u0003ZH\u0003VFDOH\u0003WKH\u0003LPDJH\u0003FRRUGLQDWH\u0003E\\\u0003 DIM/2\u0011\u00037KXV\u000f\u0003JLYHQ\u0003DQ\u0003LPDJH\u0003 SRLQW\u0003DW\u0003(x,y)\u000f\u0003ZH\u0003JHW\u0003D\u0003SRLQW\u0003LQ\u0003FRPSOH[\u0003VSDFH\u0003DW\u0003 ( (DIM/2 \u2013 x)/(DIM/2), ((DIM/2 \u2013 y)/(DIM/2) ) \u0011 7KHQ\u000f\u0003WR\u0003SRWHQWLDOO\\\u0003]RRP\u0003LQ\u0003RU\u0003RXW\u000f\u0003ZH\u0003LQWURGXFH\u0003D\u0003 scale\u0003IDFWRU\u0011\u0003&XUUHQWO\\\u000f\u0003WKH\u0003VFDOH\u0003 LV\u0003KDUG\u0010FRGHG\u0003WR\u0003EH\u0003\u0014\u0011\u0018\u000f\u0003EXW\u0003\\RX\u0003VKRXOG\u0003WZHDN\u0003WKLV\u0003SDUDPHWHU\u0003WR\u0003]RRP\u0003LQ\u0003RU\u0003RXW\u0011\u0003,I\u0003\\RX\u0003 DUH\u0003IHHOLQJ\u0003UHDOO\\\u0003DPELWLRXV\u000f\u0003\\RX\u0003FRXOG\u0003PDNH\u0003WKLV\u0003D\u0003FRPPDQG\u0010OLQH\u0003SDUDPHWHU\u0011\u0003 $IWHU\u0003REWDLQLQJ\u0003WKH\u0003SRLQW\u0003LQ\u0003FRPSOH[\u0003VSDFH\u000f\u0003ZH\u0003WKHQ\u0003QHHG\u0003WR\u0003GHWHUPLQH\u0003ZKHWKHU\u0003 WKH\u0003SRLQW\u0003LV\u0003LQ\u0003RU\u0003RXW\u0003RI\u0003WKH\u0003-XOLD\u00036HW\u0011\u0003,I\u0003\\RX\u0003UHFDOO\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003ZH\u0003GR\u0003WKLV\u0003 E\\\u0003FRPSXWLQJ\u0003WKH\u0003YDOXHV\u0003RI\u0003WKH\u0003LWHUDWLYH\u0003HTXDWLRQ\u0003=Q\u000e\u0014\u0003 \u0003]Q2\u0003\u000e\u0003&\u0011\u00036LQFH\u0003&\u0003LV\u0003VRPH\u0003 DUELWUDU\\\u0003FRPSOH[\u0010YDOXHG\u0003FRQVWDQW\u000f\u0003ZH\u0003KDYH\u0003FKRVHQ\u0003 -0.8 + 0.156i \u0003EHFDXVH\u0003LW\u0003 KDSSHQV\u0003WR\u0003\\LHOG\u0003DQ\u0003LQWHUHVWLQJ\u0003SLFWXUH\u0011\u0003<RX\u0003VKRXOG\u0003SOD\\\u0003ZLWK\u0003WKLV\u0003FRQVWDQW\u0003LI\u0003\\RX\u0003 ZDQW\u0003WR\u0003VHH\u0003RWKHU\u0003YHUVLRQV\u0003RI\u0003WKH\u0003-XOLD\u00036HW\u0011 ,Q\u0003WKH\u0003H[DPSOH\u000f\u0003ZH\u0003FRPSXWH\u0003\u0015\u0013\u0013\u0003LWHUDWLRQV\u0003RI\u0003WKLV\u0003IXQFWLRQ\u0011\u0003$IWHU\u0003HDFK\u0003LWHUDWLRQ\u000f\u0003 ZH\u0003FKHFN\u0003ZKHWKHU\u0003WKH\u0003PDJQLWXGH\u0003RI\u0003WKH\u0003UHVXOW\u0003H[FHHGV\u0003VRPH\u0003WKUHVKROG\u0003 \u0014\u000f\u0013\u0013\u0013\u0003IRU\u0003 RXU\u0003SXUSRVHV \u0011\u0003,I\u0003VR\u000f\u0003WKH\u0003HTXDWLRQ\u0003LV\u0003GLYHUJLQJ\u000f\u0003DQG\u0003ZH\u0003FDQ\u0003UHWXUQ\u0003\u0013\u0003WR\u0003LQGLFDWH\u0003WKDW\u0003 WKH\u0003SRLQW\u0003LV\u0003 not\u0003LQ\u0003WKH\u0003VHW\u0011\u00032Q\u0003WKH\u0003RWKHU\u0003KDQG\u000f\u0003LI\u0003ZH\u0003\u020cQLVK\u0003DOO\u0003\u0015\u0013\u0013\u0003LWHUDWLRQV\u0003DQG\u0003WKH\u0003 PDJQLWXGH\u0003LV\u0003VWLOO\u0003ERXQGHG\u0003XQGHU\u0003\u0014\u000f\u0013\u0013\u0013\u000f\u0003ZH\u0003DVVXPH\u0003WKDW\u0003WKH\u0003SRLQW\u0003LV\u0003LQ\u0003WKH\u0003VHW\u000f\u0003 DQG\u0003ZH\u0003UHWXUQ\u0003\u0014\u0003WR\u0003WKH\u0003FDOOHU\u000f\u0003 kernel() \u0011\u0003 6LQFH\u0003DOO\u0003WKH\u0003FRPSXWDWLRQV\u0003DUH\u0003EHLQJ\u0003SHUIRUPHG\u0003RQ\u0003FRPSOH[\u0003QXPEHUV\u000f\u0003ZH\u0003GH\u020cQH\u0003 D\u0003JHQHULF\u0003VWUXFWXUH\u0003WR\u0003VWRUH\u0003FRPSOH[\u0003QXPEHUV\u0011\u0003 struct cuComplex { float r; float i; cuComplex( float a, float b ) : r(a), i(b) {} float magnitude2( void ) { return r * r + i * i; } cuComplex operator *(const cuComplex& a) { return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i);",
    "PDJQLWXGH\u0003LV\u0003VWLOO\u0003ERXQGHG\u0003XQGHU\u0003\u0014\u000f\u0013\u0013\u0013\u000f\u0003ZH\u0003DVVXPH\u0003WKDW\u0003WKH\u0003SRLQW\u0003LV\u0003LQ\u0003WKH\u0003VHW\u000f\u0003 DQG\u0003ZH\u0003UHWXUQ\u0003\u0014\u0003WR\u0003WKH\u0003FDOOHU\u000f\u0003 kernel() \u0011\u0003 6LQFH\u0003DOO\u0003WKH\u0003FRPSXWDWLRQV\u0003DUH\u0003EHLQJ\u0003SHUIRUPHG\u0003RQ\u0003FRPSOH[\u0003QXPEHUV\u000f\u0003ZH\u0003GH\u020cQH\u0003 D\u0003JHQHULF\u0003VWUXFWXUH\u0003WR\u0003VWRUH\u0003FRPSOH[\u0003QXPEHUV\u0011\u0003 struct cuComplex { float r; float i; cuComplex( float a, float b ) : r(a), i(b) {} float magnitude2( void ) { return r * r + i * i; } cuComplex operator *(const cuComplex& a) { return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i); } cuComplex operator +(const cuComplex& a) { return cuComplex(r+a.r, i+a.i); } }; Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /five.lf/zero.lf7KH\u0003FODVV\u0003UHSUHVHQWV\u0003FRPSOH[\u0003QXPEHUV\u0003ZLWK\u0003WZR\u0003GDWD\u0003HOHPHQWV \u0003D\u0003VLQJOH\u0010 SUHFLVLRQ\u0003UHDO\u0003FRPSRQHQW\u0003 r\u0003DQG\u0003D\u0003VLQJOH\u0010SUHFLVLRQ\u0003LPDJLQDU\\\u0003FRPSRQHQW\u0003 i\u0011\u0003 7KH\u0003FODVV\u0003GH\u020cQHV\u0003DGGLWLRQ\u0003DQG\u0003PXOWLSOLFDWLRQ\u0003RSHUDWRUV\u0003WKDW\u0003FRPELQH\u0003FRPSOH[\u0003 QXPEHUV\u0003DV\u0003H[SHFWHG\u0011\u0003 ,I\u0003\\RX\u0003DUH\u0003FRPSOHWHO\\\u0003XQIDPLOLDU\u0003ZLWK\u0003FRPSOH[\u0003QXPEHUV\u000f\u0003 \\RX\u0003FDQ\u0003JHW\u0003D\u0003TXLFN\u0003SULPHU\u0003RQOLQH\u0011 \u0003)LQDOO\\\u000f\u0003ZH\u0003GH\u020cQH\u0003D\u0003PHWKRG\u0003WKDW\u0003UHWXUQV\u0003WKH\u0003 PDJQLWXGH\u0003RI\u0003WKH\u0003FRPSOH[\u0003QXPEHU\u0011\u0003 GPU JUL IA SET 7KH\u0003GHYLFH\u0003LPSOHPHQWDWLRQ\u0003LV\u0003UHPDUNDEO\\\u0003VLPLODU\u0003WR\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003FRQWLQXLQJ\u0003D\u0003 WUHQG\u0003\\RX\u0003PD\\\u0003KDYH\u0003QRWLFHG\u0011 int main( void ) { CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); dim3 grid(DIM,DIM); kernel<<<grid,1>>>( dev_bitmap ); HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); bitmap.display_and_exit(); cudaFree( dev_bitmap ); } 7KLV\u0003YHUVLRQ\u0003RI\u0003 main()\u0003ORRNV\u0003PXFK\u0003PRUH\u0003FRPSOLFDWHG\u0003WKDQ\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003EXW\u0003 WKH\u0003\u020dRZ\u0003LV\u0003DFWXDOO\\\u0003LGHQWLFDO\u0011\u0003/LNH\u0003ZLWK\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003ZH\u0003FUHDWH\u0003D\u0003 DIM\u0003[\u0003DIM Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /five.lf/one.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1* ELWPDS\u0003LPDJH\u0003XVLQJ\u0003RXU\u0003XWLOLW\\\u0003OLEUDU\\\u0011\u0003%XW\u0003EHFDXVH\u0003ZH\u0003ZLOO\u0003EH\u0003GRLQJ\u0003FRPSXWD - WLRQ\u0003RQ\u0003D\u0003*38\u000f\u0003ZH\u0003DOVR\u0003GHFODUH\u0003D\u0003SRLQWHU\u0003FDOOHG\u0003 dev_bitmap \u0003WR\u0003KROG\u0003D\u0003FRS\\\u0003 RI\u0003WKH\u0003GDWD\u0003RQ\u0003WKH\u0003GHYLFH\u0011\u0003$QG\u0003WR\u0003KROG\u0003GDWD\u000f\u0003ZH\u0003QHHG\u0003WR\u0003DOORFDWH\u0003PHPRU\\\u0003XVLQJ\u0003 cudaMalloc() \u0011\u0003 :H\u0003WKHQ\u0003UXQ\u0003RXU\u0003 kernel() \u0003IXQFWLRQ\u0003H[DFWO\\\u0003OLNH\u0003LQ\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003DOWKRXJK\u0003 QRZ\u0003LW\u0003LV\u0003D\u0003 __global__ \u0003IXQFWLRQ\u000f\u0003PHDQLQJ\u0003LW\u0003ZLOO\u0003UXQ\u0003RQ\u0003WKH\u0003*38\u0011\u0003$V\u0003ZLWK\u0003WKH\u0003 &38\u0003H[DPSOH\u000f\u0003ZH\u0003SDVV\u0003 kernel() \u0003WKH\u0003SRLQWHU\u0003ZH\u0003DOORFDWHG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003OLQH\u0003WR\u0003 VWRUH\u0003WKH\u0003UHVXOWV\u0011\u00037KH\u0003RQO\\\u0003GLIIHUHQFH\u0003LV\u0003WKDW\u0003WKH\u0003PHPRU\\\u0003UHVLGHV\u0003RQ\u0003WKH\u0003*38\u0003QRZ\u000f\u0003 QRW\u0003RQ\u0003WKH\u0003KRVW\u0003V\\VWHP\u0011 7KH\u0003PRVW\u0003VLJQL\u020cFDQW\u0003GLIIHUHQFH\u0003LV\u0003WKDW\u0003ZH\u0003VSHFLI\\\u0003KRZ\u0003PDQ\\\u0003SDUDOOHO\u0003EORFNV\u0003RQ\u0003 ZKLFK\u0003WR\u0003H[HFXWH\u0003WKH\u0003IXQFWLRQ\u0003 kernel() \u0011\u0003%HFDXVH\u0003HDFK\u0003SRLQW\u0003FDQ\u0003EH\u0003FRPSXWHG\u0003 LQGHSHQGHQWO\\\u0003RI\u0003HYHU\\\u0003RWKHU\u0003SRLQW\u000f\u0003ZH\u0003VLPSO\\\u0003VSHFLI\\\u0003RQH\u0003FRS\\\u0003RI\u0003WKH\u0003IXQFWLRQ\u0003IRU\u0003 HDFK\u0003SRLQW\u0003ZH\u0003ZDQW\u0003WR\u0003FRPSXWH\u0011\u0003:H\u0003PHQWLRQHG\u0003WKDW\u0003IRU\u0003VRPH\u0003SUREOHP\u0003GRPDLQV\u000f\u0003 LW\u0003KHOSV\u0003WR\u0003XVH\u0003WZR\u0010GLPHQVLRQDO\u0003LQGH[LQJ\u0011\u00038QVXUSULVLQJO\\\u000f\u0003FRPSXWLQJ\u0003IXQFWLRQ\u0003 YDOXHV\u0003RYHU\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003GRPDLQ\u0003VXFK\u0003DV\u0003WKH\u0003FRPSOH[\u0003SODQH\u0003LV\u0003RQH\u0003RI\u0003WKHVH\u0003 SUREOHPV\u0011\u00036R\u000f\u0003ZH\u0003VSHFLI\\\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003JULG\u0003RI\u0003EORFNV\u0003LQ\u0003WKLV\u0003OLQH dim3 grid(DIM,DIM); 7KH\u0003W\\SH\u0003 dim3\u0003LV\u0003QRW\u0003D\u0003VWDQGDUG\u0003&\u0003W\\SH\u000f\u0003OHVW\u0003\\RX\u0003IHDUHG\u0003\\RX\u0003KDG\u0003IRUJRWWHQ\u0003VRPH\u0003 NH\\\u0003SLHFHV\u0003RI\u0003LQIRUPDWLRQ\u0011\u00035DWKHU\u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003KHDGHU\u0003\u020cOHV\u0003GH\u020cQH\u0003VRPH\u0003 FRQYHQLHQFH\u0003W\\SHV\u0003WR\u0003HQFDSVXODWH\u0003PXOWLGLPHQVLRQDO\u0003WXSOHV\u0011\u00037KH\u0003W\\SH\u0003 dim3 repre - VHQWV\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u0003WXSOH\u0003WKDW\u0003ZLOO\u0003EH\u0003XVHG\u0003WR\u0003VSHFLI\\\u0003WKH\u0003VL]H\u0003RI\u0003RXU\u0003ODXQFK\u0011\u0003 %XW\u0003ZK\\\u0003GR\u0003ZH\u0003XVH\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u0003YDOXH\u0003ZKHQ\u0003ZH\u0003RK\u0010VR\u0010FOHDUO\\\u0003VWDWHG\u0003WKDW\u0003 RXU\u0003ODXQFK\u0003LV\u0003D\u0003 two-dimensional \u0003JULG\"\u0003 )UDQNO\\\u000f\u0003ZH\u0003GR\u0003WKLV\u0003EHFDXVH\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u000f\u0003 dim3\u0003YDOXH\u0003LV\u0003ZKDW\u0003WKH\u0003&8'$\u0003 UXQWLPH\u0003H[SHFWV\u0011\u0003$OWKRXJK\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u0003ODXQFK\u0003JULG\u0003LV\u0003QRW\u0003FXUUHQWO\\\u0003 VXSSRUWHG\u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003VWLOO\u0003H[SHFWV\u0003D\u0003 dim3\u0003YDULDEOH\u0003ZKHUH\u0003WKH\u0003ODVW\u0003FRPSR - QHQW\u0003HTXDOV\u0003\u0014\u0011\u0003:KHQ\u0003ZH\u0003LQLWLDOL]H\u0003LW\u0003ZLWK\u0003RQO\\\u0003WZR\u0003YDOXHV\u000f\u0003DV\u0003ZH\u0003GR\u0003LQ\u0003WKH\u0003VWDWH - PHQW\u0003dim3 grid(DIM,DIM) \u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003DXWRPDWLFDOO\\\u0003\u020cOOV\u0003WKH\u0003WKLUG\u0003 GLPHQVLRQ\u0003ZLWK\u0003WKH\u0003YDOXH\u0003\u0014\u000f\u0003VR\u0003HYHU\\WKLQJ\u0003KHUH\u0003ZLOO\u0003ZRUN\u0003DV\u0003H[SHFWHG\u0011\u0003$OWKRXJK\u0003 LW\u01e2V\u0003SRVVLEOH\u0003WKDW\u000319,',$\u0003ZLOO\u0003VXSSRUW\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u0003JULG\u0003LQ\u0003WKH\u0003IXWXUH\u000f\u0003IRU\u0003 QRZ\u0003ZH\u01e2OO\u0003MXVW\u0003SOD\\\u0003QLFHO\\\u0003ZLWK\u0003WKH\u0003NHUQHO\u0003ODXQFK\u0003$3,\u0003EHFDXVH\u0003ZKHQ\u0003FRGHUV\u0003DQG\u0003 $3,V\u0003\u020cJKW\u000f\u0003WKH\u0003$3,\u0003DOZD\\V\u0003ZLQV\u0011 Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /five.lf/two.lf:H\u0003WKHQ\u0003SDVV\u0003RXU\u0003 dim3\u0003YDULDEOH\u0003 grid\u0003WR\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003LQ\u0003WKLV\u0003OLQH kernel<<<grid,1>>>( dev _ bitmap ); )LQDOO\\\u000f\u0003D\u0003FRQVHTXHQFH\u0003RI\u0003WKH\u0003UHVXOWV\u0003UHVLGLQJ\u0003RQ\u0003WKH\u0003GHYLFH\u0003LV\u0003WKDW\u0003DIWHU\u0003H[HFXWLQJ\u0003 kernel() \u000f\u0003ZH\u0003KDYH\u0003WR\u0003FRS\\\u0003WKH\u0003UHVXOWV\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0011\u0003$V\u0003ZH\u0003OHDUQHG\u0003LQ\u0003 SUHYLRXV\u0003FKDSWHUV\u000f\u0003ZH\u0003DFFRPSOLVK\u0003WKLV\u0003ZLWK\u0003D\u0003FDOO\u0003WR\u0003 cudaMemcpy() \u000f\u0003VSHFLI\\LQJ\u0003 WKH\u0003GLUHFWLRQ\u0003 cudaMemcpyDeviceToHost \u0003DV\u0003WKH\u0003ODVW\u0003DUJXPHQW\u0011 HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); 2QH\u0003RI\u0003WKH\u0003ODVW\u0003ZULQNOHV\u0003LQ\u0003WKH\u0003GLIIHUHQFH\u0003RI\u0003LPSOHPHQWDWLRQ\u0003FRPHV\u0003LQ\u0003WKH\u0003LPSOH - PHQWDWLRQ\u0003RI\u0003 kernel() \u0011 __global__ void kernel( unsigned char *ptr ) { // map from threadIdx/BlockIdx to pixel position int x = blockIdx.x; int y = blockIdx.y; int offset = x + y * gridDim.x; // now calculate the value at that position int juliaValue = julia( x, y ); ptr[offset*4 + 0] = 255 * juliaValue; ptr[offset*4 + 1] = 0; ptr[offset*4 + 2] = 0; ptr[offset*4 + 3] = 255; } )LUVW\u000f\u0003ZH\u0003QHHG\u0003 kernel() \u0003WR\u0003EH\u0003GHFODUHG\u0003DV\u0003D\u0003 __global__ \u0003IXQFWLRQ\u0003VR\u0003LW\u0003UXQV\u0003 RQ\u0003WKH\u0003GHYLFH\u0003EXW\u0003FDQ\u0003EH\u0003FDOOHG\u0003IURP\u0003WKH\u0003KRVW\u0011\u00038QOLNH\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003ZH\u0003QR\u0003 ORQJHU\u0003QHHG\u0003QHVWHG\u0003 for()\u0003ORRSV\u0003WR\u0003JHQHUDWH\u0003WKH\u0003SL[HO\u0003LQGLFHV\u0003WKDW\u0003JHW\u0003SDVVHG\u0003 Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /five.lf/three.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1* WR\u0003julia()\u0011\u0003$V\u0003ZLWK\u0003WKH\u0003YHFWRU\u0003DGGLWLRQ\u0003H[DPSOH\u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003JHQHUDWHV\u0003 WKHVH\u0003LQGLFHV\u0003IRU\u0003XV\u0003LQ\u0003WKH\u0003YDULDEOH\u0003 blockIdx \u0011\u00037KLV\u0003ZRUNV\u0003EHFDXVH\u0003ZH\u0003GHFODUHG\u0003 RXU\u0003JULG\u0003RI\u0003EORFNV\u0003WR\u0003KDYH\u0003WKH\u0003VDPH\u0003GLPHQVLRQV\u0003DV\u0003RXU\u0003LPDJH\u000f\u0003VR\u0003ZH\u0003JHW\u0003RQH\u0003EORFN\u0003 IRU\u0003HDFK\u0003SDLU\u0003RI\u0003LQWHJHUV\u0003 (x,y)\u0003EHWZHHQ\u0003 (0,0)\u0003DQG\u0003(DIM-1, DIM-1) \u0011\u0003 1H[W\u000f\u0003WKH\u0003RQO\\\u0003DGGLWLRQDO\u0003LQIRUPDWLRQ\u0003ZH\u0003QHHG\u0003LV\u0003D\u0003OLQHDU\u0003RIIVHW\u0003LQWR\u0003RXU\u0003RXWSXW\u0003 EXIIHU\u000f\u0003ptr\u0011\u00037KLV\u0003JHWV\u0003FRPSXWHG\u0003XVLQJ\u0003DQRWKHU\u0003EXLOW\u0010LQ\u0003YDULDEOH\u000f\u0003 gridDim\u0011\u00037KLV\u0003 YDULDEOH\u0003LV\u0003D\u0003FRQVWDQW\u0003DFURVV\u0003DOO\u0003EORFNV\u0003DQG\u0003VLPSO\\\u0003KROGV\u0003WKH\u0003GLPHQVLRQV\u0003RI\u0003WKH\u0003 JULG\u0003WKDW\u0003ZDV\u0003ODXQFKHG\u0011\u0003,Q\u0003WKLV\u0003H[DPSOH\u000f\u0003LW\u0003ZLOO\u0003DOZD\\V\u0003EH\u0003WKH\u0003YDOXH\u0003 DIM, DIM) \u0011\u0003 6R\u000f\u0003PXOWLSO\\LQJ\u0003WKH\u0003URZ\u0003LQGH[\u0003E\\\u0003WKH\u0003JULG\u0003ZLGWK\u0003DQG\u0003DGGLQJ\u0003WKH\u0003FROXPQ\u0003LQGH[\u0003ZLOO\u0003 JLYH\u0003XV\u0003D\u0003XQLTXH\u0003LQGH[\u0003LQWR\u0003 ptr\u0003WKDW\u0003UDQJHV\u0003IURP\u0003 0\u0003WR\u0003(DIM*DIM-1) \u0011 int offset = x + y * gridDim.x; )LQDOO\\\u000f\u0003ZH\u0003H[DPLQH\u0003WKH\u0003DFWXDO\u0003FRGH\u0003WKDW\u0003GHWHUPLQHV\u0003ZKHWKHU\u0003D\u0003SRLQW\u0003LV\u0003LQ\u0003RU\u0003RXW\u0003 RI\u0003WKH\u0003-XOLD\u00036HW\u0011\u00037KLV\u0003FRGH\u0003VKRXOG\u0003ORRN\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003FRQWLQXLQJ\u0003D\u0003 WUHQG\u0003ZH\u0003KDYH\u0003VHHQ\u0003LQ\u0003PDQ\\\u0003H[DPSOHV\u0003QRZ\u0011 __device__ int julia( int x, int y ) { const float scale = 1.5; float jx = scale * ( float)(DIM/2 - x)/(DIM/2); float jy = scale * ( float)(DIM/2 - y)/(DIM/2); cuComplex c(-0.8, 0.156); cuComplex a(jx, jy); int i = 0; for (i=0; i<200; i++) { a = a * a + c; if (a.magnitude2() > 1000) return 0; } return 1; } Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /five.lf/four.lf$JDLQ\u000f\u0003ZH\u0003GH\u020cQH\u0003D\u0003 cuComplex \u0003VWUXFWXUH\u0003WKDW\u0003GH\u020cQHV\u0003D\u0003PHWKRG\u0003IRU\u0003VWRULQJ\u0003D\u0003 FRPSOH[\u0003QXPEHU\u0003ZLWK\u0003VLQJOH\u0010SUHFLVLRQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003FRPSRQHQWV\u0011\u00037KH\u0003VWUXFWXUH\u0003 DOVR\u0003GH\u020cQHV\u0003DGGLWLRQ\u0003DQG\u0003PXOWLSOLFDWLRQ\u0003RSHUDWRUV\u0003DV\u0003ZHOO\u0003DV\u0003D\u0003IXQFWLRQ\u0003WR\u0003UHWXUQ\u0003 WKH\u0003PDJQLWXGH\u0003RI\u0003WKH\u0003FRPSOH[\u0003YDOXH\u0011\u0003 struct cuComplex { float r; float i; cuComplex( float a, float b ) : r(a), i(b) {} __device__ float magnitude2( void ) { return r * r + i * i; } __device__ cuComplex operator *(const cuComplex& a) { return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i); } __device__ cuComplex operator +(const cuComplex& a) { return cuComplex(r+a.r, i+a.i); } }; 1RWLFH\u0003WKDW\u0003ZH\u0003XVH\u0003WKH\u0003VDPH\u0003ODQJXDJH\u0003FRQVWUXFWV\u0003LQ\u0003&8'$\u0003&\u0003WKDW\u0003ZH\u0003XVH\u0003LQ\u0003RXU\u0003 &38\u0003YHUVLRQ\u0011\u00037KH\u0003RQH\u0003GLIIHUHQFH\u0003LV\u0003WKH\u0003TXDOL\u020cHU\u0003 __device__ \u000f\u0003ZKLFK\u0003LQGLFDWHV\u0003 WKDW\u0003WKLV\u0003FRGH\u0003ZLOO\u0003UXQ\u0003RQ\u0003D\u0003*38\u0003DQG\u0003QRW\u0003RQ\u0003WKH\u0003KRVW\u0011\u00035HFDOO\u0003WKDW\u0003EHFDXVH\u0003WKHVH\u0003 IXQFWLRQV\u0003DUH\u0003GHFODUHG\u0003DV\u0003 __device__ \u0003IXQFWLRQV\u000f\u0003WKH\\\u0003ZLOO\u0003EH\u0003FDOODEOH\u0003RQO\\\u0003IURP\u0003 RWKHU\u0003__device__ \u0003IXQFWLRQV\u0003RU\u0003IURP\u0003 __global__ \u0003IXQFWLRQV\u0011 6LQFH\u0003ZH\u01e2YH\u0003LQWHUUXSWHG\u0003WKH\u0003FRGH\u0003ZLWK\u0003FRPPHQWDU\\\u0003VR\u0003IUHTXHQWO\\\u000f\u0003KHUH\u0003LV\u0003WKH\u0003 HQWLUH\u0003VRXUFH\u0003OLVWLQJ\u0003IURP\u0003VWDUW\u0003WR\u0003\u020cQLVK",
    "return r * r + i * i; } __device__ cuComplex operator *(const cuComplex& a) { return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i); } __device__ cuComplex operator +(const cuComplex& a) { return cuComplex(r+a.r, i+a.i); } }; 1RWLFH\u0003WKDW\u0003ZH\u0003XVH\u0003WKH\u0003VDPH\u0003ODQJXDJH\u0003FRQVWUXFWV\u0003LQ\u0003&8'$\u0003&\u0003WKDW\u0003ZH\u0003XVH\u0003LQ\u0003RXU\u0003 &38\u0003YHUVLRQ\u0011\u00037KH\u0003RQH\u0003GLIIHUHQFH\u0003LV\u0003WKH\u0003TXDOL\u020cHU\u0003 __device__ \u000f\u0003ZKLFK\u0003LQGLFDWHV\u0003 WKDW\u0003WKLV\u0003FRGH\u0003ZLOO\u0003UXQ\u0003RQ\u0003D\u0003*38\u0003DQG\u0003QRW\u0003RQ\u0003WKH\u0003KRVW\u0011\u00035HFDOO\u0003WKDW\u0003EHFDXVH\u0003WKHVH\u0003 IXQFWLRQV\u0003DUH\u0003GHFODUHG\u0003DV\u0003 __device__ \u0003IXQFWLRQV\u000f\u0003WKH\\\u0003ZLOO\u0003EH\u0003FDOODEOH\u0003RQO\\\u0003IURP\u0003 RWKHU\u0003__device__ \u0003IXQFWLRQV\u0003RU\u0003IURP\u0003 __global__ \u0003IXQFWLRQV\u0011 6LQFH\u0003ZH\u01e2YH\u0003LQWHUUXSWHG\u0003WKH\u0003FRGH\u0003ZLWK\u0003FRPPHQWDU\\\u0003VR\u0003IUHTXHQWO\\\u000f\u0003KHUH\u0003LV\u0003WKH\u0003 HQWLUH\u0003VRXUFH\u0003OLVWLQJ\u0003IURP\u0003VWDUW\u0003WR\u0003\u020cQLVK #include \"../common/book.h\" #include \"../common/cpu_bitmap.h\" #define DIM 1000 Download from www.wowebook.comptgCUDA PARALLEL PRO GRAMMING /five.lf/five.lf\u0017\u0011\u0015\u0003&8'$\u00033$5$//(/\u0003352*5$00,1*struct cuComplex { float r; float i; cuComplex( float a, float b ) : r(a), i(b) {} __device__ float magnitude2( void ) { return r * r + i * i; } __device__ cuComplex operator *(const cuComplex& a) { return cuComplex(r*a.r - i*a.i, i*a.r + r*a.i); } __device__ cuComplex operator +(const cuComplex& a) { return cuComplex(r+a.r, i+a.i); } }; __device__ int julia( int x, int y ) { const float scale = 1.5; float jx = scale * ( float)(DIM/2 - x)/(DIM/2); float jy = scale * ( float)(DIM/2 - y)/(DIM/2); cuComplex c(-0.8, 0.156); cuComplex a(jx, jy); int i = 0; for (i=0; i<200; i++) { a = a * a + c; if (a.magnitude2() > 1000) return 0; } return 1; } Download from www.wowebook.comptgPARALLEL PRO GRAMMING IN CUDA C /five.lf/six.lf__global__ void kernel( unsigned char *ptr ) { // map from threadIdx/BlockIdx to pixel position int x = blockIdx.x; int y = blockIdx.y; int offset = x + y * gridDim.x; // now calculate the value at that position int juliaValue = julia( x, y ); ptr[offset*4 + 0] = 255 * juliaValue; ptr[offset*4 + 1] = 0; ptr[offset*4 + 2] = 0; ptr[offset*4 + 3] = 255; } int main( void ) { CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); dim3 grid(DIM,DIM); kernel<<<grid,1>>>( dev_bitmap ); HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); bitmap.display_and_exit(); HANDLE_ERROR( cudaFree( dev_bitmap ) ); } :KHQ\u0003\\RX\u0003UXQ\u0003WKH\u0003DSSOLFDWLRQ\u000f\u0003\\RX\u0003VKRXOG\u0003VHH\u0003DQ\u0003DQLPDWLQJ\u0003YLVXDOL]DWLRQ\u0003RI\u0003WKH\u0003 -XOLD\u00036HW\u0011\u00037R\u0003FRQYLQFH\u0003\\RX\u0003WKDW\u0003LW\u0003KDV\u0003HDUQHG\u0003WKH\u0003WLWOH\u0003\u01e4$\u0003)XQ\u0003([DPSOH\u000f\u01e5\u0003)LJXUH\u0003\u0017\u0011\u0015\u0003 VKRZV\u0003D\u0003VFUHHQVKRW\u0003WDNHQ\u0003IURP\u0003WKLV\u0003DSSOLFDWLRQ\u0011 Download from www.wowebook.comptg&&&$$$ 333555555999((( : :: /five.lf/seven.lf\u0017\u0011\u0016\u0003+++777 (((\u0003\u0003\u0003(((,,, Figure 4.2 $\u0003VFUHHQVKRW\u0003IURP\u0003WKH\u0003*38\u0003-XOLD\u00036HW\u0003DSSOLFDWLRQ &KDSWHU\u00035HYLHZ\u0017\u0011\u0016\u0003 &RQJUDWXODWLRQV\u000f\u0003\\RX\u0003FDQ\u0003QRZ\u0003ZULWH\u000f\u0003FRPSLOH\u000f\u0003DQG\u0003UXQ\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003FRGH\u0003 RQ\u0003D\u0003JUDSKLFV\u0003SURFHVVRU\u0004\u0003<RX\u0003VKRXOG\u0003JR\u0003EUDJ\u0003WR\u0003\\RXU\u0003IULHQGV\u0011\u0003$QG\u0003LI\u0003WKH\\\u0003DUH\u0003VWLOO\u0003 XQGHU\u0003WKH\u0003PLVFRQFHSWLRQ\u0003WKDW\u0003*38\u0003FRPSXWLQJ\u0003LV\u0003H[RWLF\u0003DQG\u0003GLI\u020cFXOW\u0003WR\u0003PDVWHU\u000f\u0003 WKH\\\u0003ZLOO\u0003EH\u0003PRVW\u0003LPSUHVVHG\u0011\u00037KH\u0003HDVH\u0003ZLWK\u0003ZKLFK\u0003\\RX\u0003DFFRPSOLVKHG\u0003LW\u0003ZLOO\u0003EH\u0003 RXU\u0003VHFUHW\u0011\u0003,I\u0003WKH\\\u01e2UH\u0003SHRSOH\u0003\\RX\u0003WUXVW\u0003ZLWK\u0003\\RXU\u0003VHFUHWV\u000f\u0003VXJJHVW\u0003WKDW\u0003WKH\\\u0003EX\\\u0003WKH\u0003 ERRN\u000f\u0003WRR\u0011 :H\u0003KDYH\u0003VR\u0003IDU\u0003ORRNHG\u0003DW\u0003KRZ\u0003WR\u0003LQVWUXFW\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003WR\u0003H[HFXWH\u0003PXOWLSOH\u0003 FRSLHV\u0003RI\u0003RXU\u0003SURJUDP\u0003LQ\u0003SDUDOOHO\u0003RQ\u0003ZKDW\u0003ZH\u0003FDOOHG\u0003 blocks \u0011\u0003:H\u0003FDOOHG\u0003WKH\u0003FROOHF - WLRQ\u0003RI\u0003EORFNV\u0003ZH\u0003ODXQFK\u0003RQ\u0003WKH\u0003*38\u0003D\u0003 grid\u0011\u0003$V\u0003WKH\u0003QDPH\u0003PLJKW\u0003LPSO\\\u000f\u0003D\u0003JULG\u0003FDQ\u0003 EH\u0003HLWKHU\u0003D\u0003RQH\u0010\u0003RU\u0003WZR\u0010GLPHQVLRQDO\u0003FROOHFWLRQ\u0003RI\u0003EORFNV\u0011\u0003(DFK\u0003FRS\\\u0003RI\u0003WKH\u0003NHUQHO\u0003 FDQ\u0003GHWHUPLQH\u0003ZKLFK\u0003EORFN\u0003LW\u0003LV\u0003H[HFXWLQJ\u0003ZLWK\u0003WKH\u0003EXLOW\u0010LQ\u0003YDULDEOH\u0003 blockIdx \u0011\u0003 /LNHZLVH\u000f\u0003LW\u0003FDQ\u0003GHWHUPLQH\u0003WKH\u0003VL]H\u0003RI\u0003WKH\u0003JULG\u0003E\\\u0003XVLQJ\u0003WKH\u0003EXLOW\u0010LQ\u0003YDULDEOH\u0003 gridDim\u0011\u0003%RWK\u0003RI\u0003WKHVH\u0003EXLOW\u0010LQ\u0003YDULDEOHV\u0003SURYHG\u0003XVHIXO\u0003ZLWKLQ\u0003RXU\u0003NHUQHO\u0003WR\u0003 FDOFXODWH\u0003WKH\u0003GDWD\u0003LQGH[\u0003IRU\u0003ZKLFK\u0003HDFK\u0003EORFN\u0003LV\u0003UHVSRQVLEOH\u0011 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /five.lf/nine.lfChapter 5 Thread Cooperation :H\u0003KDYH\u0003QRZ\u0003ZULWWHQ\u0003RXU\u0003\u020cUVW\u0003SURJUDP\u0003XVLQJ\u0003&8'$\u0003&\u0003DV\u0003ZHOO\u0003DV\u0003KDYH\u0003VHHQ\u0003KRZ\u0003 WR\u0003ZULWH\u0003FRGH\u0003WKDW\u0003H[HFXWHV\u0003LQ\u0003SDUDOOHO\u0003RQ\u0003D\u0003*38\u0011\u00037KLV\u0003LV\u0003DQ\u0003H[FHOOHQW\u0003VWDUW\u0004\u0003%XW\u0003 DUJXDEO\\\u0003RQH\u0003RI\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003FRPSRQHQWV\u0003WR\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003LV\u0003 WKH\u0003PHDQV\u0003E\\\u0003ZKLFK\u0003WKH\u0003SDUDOOHO\u0003SURFHVVLQJ\u0003HOHPHQWV\u0003FRRSHUDWH\u0003RQ\u0003VROYLQJ\u0003D\u0003 SUREOHP\u0011\u00035DUH\u0003DUH\u0003WKH\u0003SUREOHPV\u0003ZKHUH\u0003HYHU\\\u0003SURFHVVRU\u0003FDQ\u0003FRPSXWH\u0003UHVXOWV\u0003 DQG\u0003WHUPLQDWH\u0003H[HFXWLRQ\u0003ZLWKRXW\u0003D\u0003SDVVLQJ\u0003WKRXJKW\u0003DV\u0003WR\u0003ZKDW\u0003WKH\u0003RWKHU\u0003SURFHV - VRUV\u0003DUH\u0003GRLQJ\u0011\u0003)RU\u0003HYHQ\u0003PRGHUDWHO\\\u0003VRSKLVWLFDWHG\u0003DOJRULWKPV\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003WKH\u0003 SDUDOOHO\u0003FRSLHV\u0003RI\u0003RXU\u0003FRGH\u0003WR\u0003FRPPXQLFDWH\u0003DQG\u0003FRRSHUDWH\u0011\u00036R\u0003IDU\u000f\u0003ZH\u0003KDYH\u0003QRW\u0003 VHHQ\u0003DQ\\\u0003PHFKDQLVPV\u0003IRU\u0003DFFRPSOLVKLQJ\u0003WKLV\u0003FRPPXQLFDWLRQ\u0003EHWZHHQ\u0003VHFWLRQV\u0003 RI\u0003&8'$\u0003&\u0003FRGH\u0003H[HFXWLQJ\u0003LQ\u0003SDUDOOHO\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKHUH\u0003LV\u0003D\u0003VROXWLRQ\u000f\u0003RQH\u0003WKDW\u0003ZH\u0003 ZLOO\u0003EHJLQ\u0003WR\u0003H[SORUH\u0003LQ\u0003WKLV\u0003FKDSWHU\u0011 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /six.lf/zero.lf&KDSWHU\u00032EMHFWLYHV\u0018\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003ZKDW\u0003&8'$\u0003&\u0003FDOOV\u0003\u01e9\u0003 threads \u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003D\u0003PHFKDQLVP\u0003IRU\u0003GLIIHUHQW\u0003WKUHDGV\u0003WR\u0003FRPPXQLFDWH\u0003ZLWK\u0003HDFK\u0003RWKHU\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003D\u0003PHFKDQLVP\u0003WR\u0003V\\QFKURQL]H\u0003WKH\u0003SDUDOOHO\u0003H[HFXWLRQ\u0003RI\u0003GLIIHUHQW\u0003\u01e9\u0003 WKUHDGV\u0011 6SOLWWLQJ\u00033DUDOOHO\u0003%ORFNV\u0018\u0011\u0015\u0003 ,Q\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u000f\u0003ZH\u0003ORRNHG\u0003DW\u0003KRZ\u0003WR\u0003ODXQFK\u0003SDUDOOHO\u0003FRGH\u0003RQ\u0003WKH\u0003*38\u0011\u0003:H\u0003 GLG\u0003WKLV\u0003E\\\u0003LQVWUXFWLQJ\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003V\\VWHP\u0003RQ\u0003KRZ\u0003PDQ\\\u0003SDUDOOHO\u0003FRSLHV\u0003RI\u0003 RXU\u0003NHUQHO\u0003WR\u0003ODXQFK\u0011\u0003:H\u0003FDOO\u0003WKHVH\u0003SDUDOOHO\u0003FRSLHV\u0003 blocks \u0011\u0003 7KH\u0003&8'$\u0003UXQWLPH\u0003DOORZV\u0003WKHVH\u0003EORFNV\u0003WR\u0003EH\u0003VSOLW\u0003LQWR\u0003 threads \u0011\u00035HFDOO\u0003WKDW\u0003ZKHQ\u0003 ZH\u0003ODXQFKHG\u0003PXOWLSOH\u0003SDUDOOHO\u0003EORFNV\u000f\u0003ZH\u0003FKDQJHG\u0003WKH\u0003\u020cUVW\u0003DUJXPHQW\u0003LQ\u0003WKH\u0003DQJOH\u0003 EUDFNHWV\u0003IURP\u0003\u0014\u0003WR\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003ZH\u0003ZDQWHG\u0003WR\u0003ODXQFK\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003ZKHQ\u0003 ZH\u0003VWXGLHG\u0003YHFWRU\u0003DGGLWLRQ\u000f\u0003ZH\u0003ODXQFKHG\u0003D\u0003EORFN\u0003IRU\u0003HDFK\u0003HOHPHQW\u0003LQ\u0003WKH\u0003YHFWRU\u0003RI\u0003 VL]H\u00031\u0003E\\\u0003FDOOLQJ\u0003WKLV add<<<N,1>>>( dev_a, dev_b, dev_c ); ,QVLGH\u0003WKH\u0003DQJOH\u0003EUDFNHWV\u000f\u0003WKH\u0003VHFRQG\u0003SDUDPHWHU\u0003DFWXDOO\\\u0003UHSUHVHQWV\u0003WKH\u0003QXPEHU\u0003 RI\u0003WKUHDGV\u0003SHU\u0003EORFN\u0003ZH\u0003ZDQW\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003WR\u0003FUHDWH\u0003RQ\u0003RXU\u0003EHKDOI\u0011\u00037R\u0003WKLV\u0003 SRLQW\u000f\u0003ZH\u0003KDYH\u0003RQO\\\u0003HYHU\u0003ODXQFKHG\u0003RQH\u0003WKUHDG\u0003SHU\u0003EORFN\u0011\u0003,Q\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u000f\u0003 ZH\u0003ODXQFKHG\u0003WKH\u0003IROORZLQJ 1\u0003EORFNV\u0003[\u0003\u0014\u0003WKUHDG\u0012EORFN\u0003 \u00031\u0003SDUDOOHO\u0003WKUHDGV 6R\u0003UHDOO\\\u000f\u0003ZH\u0003FRXOG\u0003KDYH\u0003ODXQFKHG\u0003 N/2\u0003EORFNV\u0003ZLWK\u0003WZR\u0003WKUHDGV\u0003SHU\u0003EORFN\u000f\u0003 N/4 EORFNV\u0003ZLWK\u0003IRXU\u0003WKUHDGV\u0003SHU\u0003EORFN\u000f\u0003DQG\u0003VR\u0003RQ\u0011\u0003/HW\u01e2V\u0003UHYLVLW\u0003RXU\u0003YHFWRU\u0003DGGLWLRQ\u0003 H[DPSOH\u0003DUPHG\u0003ZLWK\u0003WKLV\u0003QHZ\u0003LQIRUPDWLRQ\u0003DERXW\u0003WKH\u0003FDSDELOLWLHV\u0003RI\u0003&8'$\u0003&\u0011 9(&725\u00036806 \u00035('8; \u0018\u0011\u0015\u0011\u0014\u0003 :H\u0003HQGHDYRU\u0003WR\u0003DFFRPSOLVK\u0003WKH\u0003VDPH\u0003WDVN\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u0011\u00037KDW\u0003 LV\u000f\u0003ZH\u0003ZDQW\u0003WR\u0003WDNH\u0003WZR\u0003LQSXW\u0003YHFWRUV\u0003DQG\u0003VWRUH\u0003WKHLU\u0003VXP\u0003LQ\u0003D\u0003WKLUG\u0003RXWSXW\u0003YHFWRU\u0011\u0003 +RZHYHU\u000f\u0003WKLV\u0003WLPH\u0003ZH\u0003ZLOO\u0003XVH\u0003WKUHDGV\u0003LQVWHDG\u0003RI\u0003EORFNV\u0003WR\u0003DFFRPSOLVK \u0003WKLV\u0011\u0003 Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /six.lf/one.lf\u0018\u0011\u0015\u0003 333555 %%%666 <RX\u0003PD\\\u0003EH\u0003ZRQGHULQJ\u000f\u0003ZKDW\u0003LV\u0003WKH\u0003DGYDQWDJH\u0003RI\u0003XVLQJ\u0003WKUHDGV\u0003UDWKHU\u0003WKDQ\u0003 EORFNV\"\u0003:HOO\u000f\u0003IRU\u0003QRZ\u000f\u0003WKHUH\u0003LV\u0003QR\u0003DGYDQWDJH\u0003ZRUWK\u0003GLVFXVVLQJ\u0011\u0003%XW\u0003SDUDOOHO\u0003 WKUHDGV\u0003ZLWKLQ\u0003D\u0003EORFN\u0003ZLOO\u0003KDYH\u0003WKH\u0003DELOLW\\\u0003WR\u0003GR\u0003WKLQJV\u0003WKDW\u0003SDUDOOHO\u0003EORFNV\u0003FDQQRW\u0003 GR\u0011\u00036R\u0003IRU\u0003QRZ\u000f\u0003EH\u0003SDWLHQW\u0003DQG\u0003KXPRU\u0003XV\u0003ZKLOH\u0003ZH\u0003ZDON\u0003WKURXJK\u0003D\u0003SDUDOOHO\u0003WKUHDG\u0003 YHUVLRQ\u0003RI\u0003WKH\u0003SDUDOOHO\u0003EORFN\u0003H[DPSOH\u0003IURP\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u0011 *38\u00039(&725\u00036806\u000386,1*\u00037+5($'6 :H\u0003ZLOO\u0003VWDUW\u0003E\\\u0003DGGUHVVLQJ\u0003WKH\u0003WZR\u0003FKDQJHV\u0003RI\u0003QRWH\u0003ZKHQ\u0003PRYLQJ\u0003IURP\u0003SDUDOOHO\u0003 EORFNV\u0003WR\u0003SDUDOOHO\u0003WKUHDGV\u0011\u00032XU\u0003NHUQHO\u0003LQYRFDWLRQ\u0003ZLOO\u0003FKDQJH\u0003IURP\u0003RQH\u0003WKDW\u0003 ODXQFKHV\u0003 N\u0003EORFNV\u0003RI\u0003RQH\u0003WKUHDG\u0003DSLHFH add<<<N,1>>>( dev _ a, dev _ b, dev _ c ); WR\u0003D\u0003YHUVLRQ\u0003WKDW\u0003ODXQFKHV\u0003 N\u0003WKUHDGV\u000f\u0003DOO\u0003ZLWKLQ\u0003RQH\u0003EORFN add<<<1,N>>>( dev _ a, dev _ b, dev _ c ); 7KH\u0003RQO\\\u0003RWKHU\u0003FKDQJH\u0003DULVHV\u0003LQ\u0003WKH\u0003PHWKRG\u0003E\\\u0003ZKLFK\u0003ZH\u0003LQGH[\u0003RXU\u0003GDWD\u0011\u0003 3UHYLRXVO\\\u000f\u0003ZLWKLQ\u0003RXU\u0003NHUQHO\u0003ZH\u0003LQGH[HG\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003GDWD\u0003E\\\u0003EORFN\u0003LQGH[\u0011 int tid = blockIdx.x; 7KH\u0003SXQFK\u0003OLQH\u0003KHUH\u0003VKRXOG\u0003QRW\u0003EH\u0003D\u0003VXUSULVH\u0011\u00031RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003RQO\\\u0003D\u0003VLQJOH\u0003 EORFN\u000f\u0003ZH\u0003KDYH\u0003WR\u0003LQGH[\u0003WKH\u0003GDWD\u0003E\\\u0003WKUHDG\u0003LQGH[\u0011 int tid = threadIdx.x; 7KHVH\u0003DUH\u0003WKH\u0003RQO\\\u0003WZR\u0003FKDQJHV\u0003UHTXLUHG\u0003WR\u0003PRYH\u0003IURP\u0003D\u0003SDUDOOHO\u0003EORFN\u0003LPSOH - PHQWDWLRQ\u0003WR\u0003D\u0003SDUDOOHO\u0003WKUHDG\u0003LPSOHPHQWDWLRQ\u0011\u0003)RU\u0003FRPSOHWHQHVV\u000f\u0003KHUH\u0003LV\u0003WKH\u0003 HQWLUH\u0003VRXUFH\u0003OLVWLQJ\u0003ZLWK\u0003WKH\u0003FKDQJHG\u0003OLQHV\u0003LQ\u0003EROG #include \"../common/book.h\" #define N 10 __global__ void add( int",
    "N\u0003EORFNV\u0003RI\u0003RQH\u0003WKUHDG\u0003DSLHFH add<<<N,1>>>( dev _ a, dev _ b, dev _ c ); WR\u0003D\u0003YHUVLRQ\u0003WKDW\u0003ODXQFKHV\u0003 N\u0003WKUHDGV\u000f\u0003DOO\u0003ZLWKLQ\u0003RQH\u0003EORFN add<<<1,N>>>( dev _ a, dev _ b, dev _ c ); 7KH\u0003RQO\\\u0003RWKHU\u0003FKDQJH\u0003DULVHV\u0003LQ\u0003WKH\u0003PHWKRG\u0003E\\\u0003ZKLFK\u0003ZH\u0003LQGH[\u0003RXU\u0003GDWD\u0011\u0003 3UHYLRXVO\\\u000f\u0003ZLWKLQ\u0003RXU\u0003NHUQHO\u0003ZH\u0003LQGH[HG\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003GDWD\u0003E\\\u0003EORFN\u0003LQGH[\u0011 int tid = blockIdx.x; 7KH\u0003SXQFK\u0003OLQH\u0003KHUH\u0003VKRXOG\u0003QRW\u0003EH\u0003D\u0003VXUSULVH\u0011\u00031RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003RQO\\\u0003D\u0003VLQJOH\u0003 EORFN\u000f\u0003ZH\u0003KDYH\u0003WR\u0003LQGH[\u0003WKH\u0003GDWD\u0003E\\\u0003WKUHDG\u0003LQGH[\u0011 int tid = threadIdx.x; 7KHVH\u0003DUH\u0003WKH\u0003RQO\\\u0003WZR\u0003FKDQJHV\u0003UHTXLUHG\u0003WR\u0003PRYH\u0003IURP\u0003D\u0003SDUDOOHO\u0003EORFN\u0003LPSOH - PHQWDWLRQ\u0003WR\u0003D\u0003SDUDOOHO\u0003WKUHDG\u0003LPSOHPHQWDWLRQ\u0011\u0003)RU\u0003FRPSOHWHQHVV\u000f\u0003KHUH\u0003LV\u0003WKH\u0003 HQWLUH\u0003VRXUFH\u0003OLVWLQJ\u0003ZLWK\u0003WKH\u0003FKDQJHG\u0003OLQHV\u0003LQ\u0003EROG #include \"../common/book.h\" #define N 10 __global__ void add( int *a, int *b, int *c ) { int tid = threadIdx.x; if (tid < N) c[tid] = a[tid] + b[tid]; } Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /six.lf/two.lfint main( void ) { int a[N], b[N], c[N]; int *dev_a, *dev_b, *dev_c; // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c, N * sizeof(int) ) ); // fill the arrays \u2018a\u2019 and \u2018b\u2019 on the CPU for (int i=0; i<N; i++) { a[i] = i; b[i] = i * i; } // copy the arrays \u2018a\u2019 and \u2018b\u2019 to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, N * sizeof(int), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, N * sizeof(int), cudaMemcpyHostToDevice ) ); add<<<1,N>>>( dev_a, dev_b, dev_c ); // copy the array \u2018c\u2019 back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( c, dev_c, N * sizeof(int), cudaMemcpyDeviceToHost ) ); // display the results for (int i=0; i<N; i++) { printf( \u201c%d + %d = %d\\n\u201d , a[i], b[i], c[i] ); } Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /six.lf/three.lf\u0018\u0011\u0015\u0003 333555 %%%666 // free the memory allocated on the GPU cudaFree( dev_a ); cudaFree( dev_b ); cudaFree( dev_c ); return 0; } 3UHWW\\\u0003VLPSOH\u0003VWXII\u000f\u0003ULJKW\"\u0003,Q\u0003WKH\u0003QH[W\u0003VHFWLRQ\u000f\u0003ZH\u01e2OO\u0003VHH\u0003RQH\u0003RI\u0003WKH\u0003OLPLWDWLRQV\u0003 RI\u0003WKLV\u0003WKUHDG\u0010RQO\\\u0003DSSURDFK\u0011\u0003$QG\u0003RI\u0003FRXUVH\u000f\u0003ODWHU\u0003ZH\u01e2OO\u0003VHH\u0003ZK\\\u0003ZH\u0003ZRXOG\u0003HYHQ\u0003 ERWKHU\u0003VSOLWWLQJ\u0003EORFNV\u0003LQWR\u0003RWKHU\u0003SDUDOOHO\u0003FRPSRQHQWV\u0011 *38\u00036806\u00032)\u0003$\u0003/21*(5\u00039(&725 ,Q\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u000f\u0003ZH\u0003QRWHG\u0003WKDW\u0003WKH\u0003KDUGZDUH\u0003OLPLWV\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003 LQ\u0003D\u0003VLQJOH\u0003ODXQFK\u0003WR\u0003\u0019\u0018\u000f\u0018\u0016\u0018\u0011\u00036LPLODUO\\\u000f\u0003WKH\u0003KDUGZDUH\u0003OLPLWV\u0003WKH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003 SHU\u0003EORFN\u0003ZLWK\u0003ZKLFK\u0003ZH\u0003FDQ\u0003ODXQFK\u0003D\u0003NHUQHO\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003WKLV\u0003QXPEHU\u0003FDQQRW\u0003 H[FHHG\u0003WKH\u0003YDOXH\u0003VSHFL\u020cHG\u0003E\\\u0003WKH\u0003 maxThreadsPerBlock \u0003\u020cHOG\u0003RI\u0003WKH\u0003GHYLFH\u0003 SURSHUWLHV\u0003VWUXFWXUH\u0003ZH\u0003ORRNHG\u0003DW\u0003LQ\u0003&KDSWHU\u0003\u0016\u0011\u0003)RU\u0003PDQ\\\u0003RI\u0003WKH\u0003JUDSKLFV\u0003SURFHV - VRUV\u0003FXUUHQWO\\\u0003DYDLODEOH\u000f\u0003WKLV\u0003OLPLW\u0003LV\u0003\u0018\u0014\u0015\u0003WKUHDGV\u0003SHU\u0003EORFN\u000f\u0003VR\u0003KRZ\u0003ZRXOG\u0003ZH\u0003XVH\u0003 D\u0003WKUHDG\u0010EDVHG\u0003DSSURDFK\u0003WR\u0003DGG\u0003WZR\u0003YHFWRUV\u0003RI\u0003VL]H\u0003JUHDWHU\u0003WKDQ\u0003\u0018\u0014\u0015\"\u0003:H\u0003ZLOO\u0003 KDYH\u0003WR\u0003XVH\u0003D\u0003FRPELQDWLRQ\u0003RI\u0003WKUHDGV\u0003DQG\u0003EORFNV\u0003WR\u0003DFFRPSOLVK\u0003WKLV\u0011\u0003 $V\u0003EHIRUH\u000f\u0003WKLV\u0003ZLOO\u0003UHTXLUH\u0003WZR\u0003FKDQJHV \u0003:H\u0003ZLOO\u0003KDYH\u0003WR\u0003FKDQJH\u0003WKH\u0003LQGH[\u0003FRPSX - WDWLRQ\u0003ZLWKLQ\u0003WKH\u0003NHUQHO\u000f\u0003DQG\u0003ZH\u0003ZLOO\u0003KDYH\u0003WR\u0003FKDQJH\u0003WKH\u0003NHUQHO\u0003ODXQFK\u0003LWVHOI\u0011\u0003 1RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003PXOWLSOH\u0003EORFNV\u0003DQG\u0003WKUHDGV\u000f\u0003WKH\u0003LQGH[LQJ\u0003ZLOO\u0003VWDUW\u0003WR\u0003ORRN\u0003 VLPLODU\u0003WR\u0003WKH\u0003VWDQGDUG\u0003PHWKRG\u0003IRU\u0003FRQYHUWLQJ\u0003IURP\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003LQGH[\u0003 VSDFH\u0003WR\u0003D\u0003OLQHDU\u0003VSDFH\u0011 int tid = threadIdx.x + blockIdx.x * blockDim.x; 7KLV\u0003DVVLJQPHQW\u0003XVHV\u0003D\u0003QHZ\u0003EXLOW\u0010LQ\u0003YDULDEOH\u000f\u0003 blockDim \u0011\u00037KLV\u0003YDULDEOH\u0003LV\u0003D\u0003 FRQVWDQW\u0003IRU\u0003DOO\u0003EORFNV\u0003DQG\u0003VWRUHV\u0003WKH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003DORQJ\u0003HDFK\u0003GLPHQ - VLRQ\u0003RI\u0003WKH\u0003EORFN\u0011\u00036LQFH\u0003ZH\u0003DUH\u0003XVLQJ\u0003D\u0003RQH\u0010GLPHQVLRQDO\u0003EORFN\u000f\u0003ZH\u0003UHIHU\u0003RQO\\\u0003WR\u0003 blockDim.x \u0011\u0003,I\u0003\\RX\u0003UHFDOO\u000f\u0003 gridDim\u0003VWRUHG\u0003D\u0003VLPLODU\u0003YDOXH\u000f\u0003EXW\u0003LW\u0003VWRUHG\u0003WKH\u0003 QXPEHU\u0003RI\u0003EORFNV\u0003DORQJ\u0003HDFK\u0003GLPHQVLRQ\u0003RI\u0003WKH\u0003HQWLUH\u0003JULG\u0011\u00030RUHRYHU\u000f\u0003 gridDim\u0003LV\u0003 WZR\u0010GLPHQVLRQDO\u000f\u0003ZKHUHDV\u0003 blockDim \u0003LV\u0003DFWXDOO\\\u0003WKUHH\u0010GLPHQVLRQDO\u0011\u00037KDW\u0003LV\u000f\u0003WKH\u0003 &8'$\u0003UXQWLPH\u0003DOORZV\u0003\\RX\u0003WR\u0003ODXQFK\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003JULG\u0003RI\u0003EORFNV\u0003ZKHUH\u0003HDFK\u0003 EORFN\u0003LV\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u0003DUUD\\\u0003RI\u0003WKUHDGV\u0011\u0003<HV\u000f\u0003WKLV\u0003LV\u0003D\u0003ORW\u0003RI\u0003GLPHQVLRQV\u000f\u0003DQG\u0003 LW\u0003LV\u0003XQOLNHO\\\u0003\\RX\u0003ZLOO\u0003UHJXODUO\\\u0003QHHG\u0003WKH\u0003\u020cYH\u0003GHJUHHV\u0003RI\u0003LQGH[LQJ\u0003IUHHGRP\u0003DIIRUGHG\u0003 \\RX\u000f\u0003EXW\u0003WKH\\\u0003DUH\u0003DYDLODEOH\u0003LI\u0003VR\u0003GHVLUHG\u0011 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /six.lf/four.lf,QGH[LQJ\u0003WKH\u0003GDWD\u0003LQ\u0003D\u0003OLQHDU\u0003DUUD\\\u0003XVLQJ\u0003WKH\u0003SUHYLRXV\u0003DVVLJQPHQW\u0003DFWXDOO\\\u0003LV\u0003TXLWH\u0003 LQWXLWLYH\u0011\u0003,I\u0003\\RX\u0003GLVDJUHH\u000f\u0003LW\u0003PD\\\u0003KHOS\u0003WR\u0003WKLQN\u0003DERXW\u0003\\RXU\u0003FROOHFWLRQ\u0003RI\u0003EORFNV\u0003RI\u0003 WKUHDGV\u0003VSDWLDOO\\\u000f\u0003VLPLODU\u0003WR\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003DUUD\\\u0003RI\u0003SL[HOV\u0011\u0003:H\u0003GHSLFW\u0003WKLV\u0003 DUUDQJHPHQW\u0003LQ\u0003)LJXUH\u0003\u0018\u0011\u0014\u0011 ,I\u0003WKH\u0003WKUHDGV\u0003UHSUHVHQW\u0003FROXPQV\u0003DQG\u0003WKH\u0003EORFNV\u0003UHSUHVHQW\u0003URZV\u000f\u0003ZH\u0003FDQ\u0003JHW\u0003D\u0003 XQLTXH\u0003LQGH[\u0003E\\\u0003WDNLQJ\u0003WKH\u0003SURGXFW\u0003RI\u0003WKH\u0003EORFN\u0003LQGH[\u0003ZLWK\u0003WKH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003 LQ\u0003HDFK\u0003EORFN\u0003DQG\u0003DGGLQJ\u0003WKH\u0003WKUHDG\u0003LQGH[\u0003ZLWKLQ\u0003WKH\u0003EORFN\u0011\u00037KLV\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003 PHWKRG\u0003ZH\u0003XVHG\u0003WR\u0003OLQHDUL]H\u0003WKH\u0003WZR\u0010GLPHQVLRQDO\u0003LPDJH\u0003LQGH[\u0003LQ\u0003WKH\u0003-XOLD\u00036HW\u0003 H[DPSOH\u0011 int offset = x + y * DIM; +HUH\u000f\u0003DIM\u0003LV\u0003WKH\u0003EORFN\u0003GLPHQVLRQ\u0003 PHDVXUHG\u0003LQ\u0003WKUHDGV \u000f\u0003 y\u0003LV\u0003WKH\u0003EORFN\u0003LQGH[\u000f\u0003 DQG\u0003x\u0003LV\u0003WKH\u0003WKUHDG\u0003LQGH[\u0003ZLWKLQ\u0003WKH\u0003EORFN\u0011\u0003+HQFH\u000f\u0003ZH\u0003DUULYH\u0003DW\u0003WKH\u0003LQGH[ \u0003 tid = threadIdx.x + blockIdx.x * blockDim.x \u0011 7KH\u0003RWKHU\u0003FKDQJH\u0003LV\u0003WR\u0003WKH\u0003NHUQHO\u0003ODXQFK\u0003LWVHOI\u0011\u0003:H\u0003VWLOO\u0003QHHG\u0003 N\u0003SDUDOOHO\u0003WKUHDGV\u0003WR\u0003 ODXQFK\u000f\u0003EXW\u0003ZH\u0003ZDQW\u0003WKHP\u0003WR\u0003ODXQFK\u0003DFURVV\u0003PXOWLSOH\u0003EORFNV\u0003VR\u0003ZH\u0003GR\u0003QRW\u0003KLW\u0003WKH\u0003 \u0018\u0014\u0015\u0010WKUHDG\u0003OLPLWDWLRQ\u0003LPSRVHG\u0003XSRQ\u0003XV\u0011\u00032QH\u0003VROXWLRQ\u0003LV\u0003WR\u0003DUELWUDULO\\\u0003VHW\u0003WKH\u0003EORFN\u0003 VL]H\u0003WR\u0003VRPH\u0003\u020c[HG\u0003QXPEHU\u0003RI\u0003WKUHDGV \u0003IRU\u0003WKLV\u0003H[DPSOH\u000f\u0003OHW\u01e2V\u0003XVH\u0003\u0014\u0015\u001b\u0003WKUHDGV\u0003SHU\u0003 EORFN\u0011\u00037KHQ\u0003ZH\u0003FDQ\u0003MXVW\u0003ODXQFK\u0003 N/128\u0003EORFNV\u0003WR\u0003JHW\u0003RXU\u0003WRWDO\u0003RI\u0003 N\u0003WKUHDGV\u0003UXQQLQJ\u0011\u0003 7KH\u0003ZULQNOH\u0003KHUH\u0003LV\u0003WKDW\u0003 N/128\u0003LV\u0003DQ\u0003LQWHJHU\u0003GLYLVLRQ\u0011\u00037KLV\u0003LPSOLHV\u0003WKDW\u0003LI\u0003 N were \u0014\u0015\u001a\u000f\u0003N/128\u0003ZRXOG\u0003EH\u0003]HUR\u000f\u0003DQG\u0003ZH\u0003ZLOO\u0003QRW\u0003DFWXDOO\\\u0003FRPSXWH\u0003DQ\\WKLQJ\u0003LI\u0003ZH\u0003ODXQFK\u0003\u0006 \u0007\b\u0001\u0002\u0006 \u0007\b\u0001\u0003\u0001\u0006 \u0007\b\u0001\u0004\u0006 \u0007\b\u0001\u0005\u0006 \u0007\b\u0001\u0002\u0006 \u0007\b\u0001\u0003\u0001\u0006 \u0007\b\u0001\u0004\u0006 \u0007\b\u0001\u0005\u0006 \u0007\b\u0001\u0002\u0006 \u0007\b\u0001\u0003\u0001\u0006 \u0007\b\u0001\u0004\u0006 \u0007\b\u0001\u0005\u0006 \u0007\b\u0001\u0002\u0006 \u0007\b\u0001\u0002 \u0006 \u0007\b\u0001\u0003 \u0006 \u0007\b\u0001\u0004 \u0006 \u0007\b\u0001\u0005\u0006 \u0007\b\u0001\u0003\u0001\u0006 \u0007\b\u0001\u0004\u0006 \u0007\b\u0001\u0005Figure 5.1 $\u0003WZR\u0010GLPHQVLRQDO\u0003DUUDQJHPHQW\u0003RI\u0003D\u0003FROOHFWLRQ\u0003RI\u0003EORFNV\u0003DQG\u0003WKUHDGV\u0003 Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /six.lf/five.lf\u0018\u0011\u0015\u0003 333555 %%%666 ]HUR\u0003WKUHDGV\u0011\u0003,Q\u0003IDFW\u000f\u0003ZH\u0003ZLOO\u0003ODXQFK\u0003WRR\u0003IHZ\u0003WKUHDGV\u0003ZKHQHYHU\u0003 N\u0003LV\u0003QRW\u0003DQ\u0003H[DFW\u0003 PXOWLSOH\u0003RI\u0003\u0014\u0015\u001b\u0011\u00037KLV\u0003LV\u0003EDG\u0011\u0003:H\u0003DFWXDOO\\\u0003ZDQW\u0003WKLV\u0003GLYLVLRQ\u0003WR\u0003URXQG\u0003XS\u0011\u0003 7KHUH\u0003LV\u0003D\u0003FRPPRQ\u0003WULFN\u0003WR\u0003DFFRPSOLVK\u0003WKLV\u0003LQ\u0003LQWHJHU\u0003GLYLVLRQ\u0003ZLWKRXW\u0003FDOOLQJ\u0003 ceil()\u0011\u0003:H\u0003DFWXDOO\\\u0003FRPSXWH\u0003 (N+127)/128 \u0003LQVWHDG\u0003RI\u0003 N/128\u0011\u0003(LWKHU\u0003\\RX\u0003FDQ\u0003 WDNH\u0003RXU\u0003ZRUG\u0003WKDW\u0003WKLV\u0003ZLOO\u0003FRPSXWH\u0003WKH\u0003VPDOOHVW\u0003PXOWLSOH\u0003RI\u0003\u0014\u0015\u001b\u0003JUHDWHU\u0003WKDQ\u0003RU\u0003 HTXDO\u0003WR\u0003N\u0003RU\u0003\\RX\u0003FDQ\u0003WDNH\u0003D\u0003PRPHQW\u0003QRZ\u0003WR\u0003FRQYLQFH\u0003\\RXUVHOI\u0003RI\u0003WKLV\u0003IDFW\u0011 :H\u0003KDYH\u0003FKRVHQ\u0003\u0014\u0015\u001b\u0003WKUHDGV\u0003SHU\u0003EORFN\u0003DQG\u0003WKHUHIRUH\u0003XVH\u0003WKH\u0003IROORZLQJ\u0003NHUQHO\u0003 ODXQFK add<<< (N+127)/128, 128 >>>( dev _ a, dev _ b, dev _ c ); %HFDXVH\u0003RI\u0003RXU\u0003FKDQJH\u0003WR\u0003WKH\u0003GLYLVLRQ\u0003WKDW\u0003HQVXUHV\u0003ZH\u0003ODXQFK\u0003HQRXJK\u0003WKUHDGV\u000f\u0003ZH\u0003 ZLOO\u0003DFWXDOO\\\u0003QRZ\u0003ODXQFK\u0003 too many WKUHDGV\u0003ZKHQ\u0003 N\u0003LV\u0003QRW\u0003DQ\u0003H[DFW\u0003PXOWLSOH\u0003RI\u0003\u0014\u0015\u001b\u0011\u0003 %XW\u0003WKHUH\u0003LV\u0003D\u0003VLPSOH\u0003UHPHG\\\u0003WR\u0003WKLV\u0003SUREOHP\u000f\u0003DQG\u0003RXU\u0003NHUQHO\u0003DOUHDG\\\u0003WDNHV\u0003FDUH\u0003RI\u0003 LW\u0011\u0003:H\u0003KDYH\u0003WR\u0003FKHFN\u0003ZKHWKHU\u0003D\u0003WKUHDG\u01e2V\u0003RIIVHW\u0003LV\u0003DFWXDOO\\\u0003EHWZHHQ\u0003\u0013\u0003DQG\u0003 N\u0003EHIRUH\u0003 ZH\u0003XVH\u0003LW\u0003WR\u0003DFFHVV\u0003RXU\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003DUUD\\V if (tid < N) c[tid] = a[tid] + b[tid]; 7KXV\u000f\u0003ZKHQ\u0003RXU\u0003LQGH[\u0003RYHUVKRRWV\u0003WKH\u0003HQG\u0003RI\u0003RXU\u0003DUUD\\\u000f\u0003DV\u0003ZLOO\u0003DOZD\\V\u0003KDSSHQ\u0003 ZKHQ\u0003ZH\u0003ODXQFK\u0003D\u0003QRQPXOWLSOH\u0003RI\u0003\u0014\u0015\u001b\u000f\u0003ZH\u0003DXWRPDWLFDOO\\\u0003UHIUDLQ\u0003IURP\u0003SHUIRUPLQJ\u0003 WKH\u0003FDOFXODWLRQ\u0011\u00030RUH\u0003LPSRUWDQW\u000f\u0003ZH\u0003UHIUDLQ\u0003IURP\u0003UHDGLQJ\u0003DQG\u0003ZULWLQJ\u0003PHPRU\\\u0003RII\u0003 WKH\u0003HQG\u0003RI\u0003RXU\u0003DUUD\\\u0011 *38\u00036806\u00032)\u0003$5%,75$5,/<\u0003/21*\u00039(&7256 :H\u0003ZHUH\u0003QRW\u0003FRPSOHWHO\\\u0003IRUWKFRPLQJ\u0003ZKHQ\u0003ZH\u0003\u020cUVW\u0003GLVFXVVHG\u0003ODXQFKLQJ\u0003SDUDOOHO\u0003 EORFNV\u0003RQ\u0003D\u0003*38\u0011\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003WKH\u0003OLPLWDWLRQ\u0003RQ\u0003WKUHDG\u0003FRXQW\u000f\u0003WKHUH\u0003LV\u0003DOVR\u0003D\u0003 KDUGZDUH\u0003OLPLWDWLRQ\u0003RQ\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003 DOEHLW\u0003PXFK\u0003JUHDWHU\u0003WKDQ\u0003WKH\u0003WKUHDG\u0003 OLPLWDWLRQ \u0011\u0003$V\u0003ZH\u01e2YH\u0003PHQWLRQHG\u0003SUHYLRXVO\\\u000f\u0003QHLWKHU\u0003GLPHQVLRQ\u0003RI\u0003D\u0003JULG\u0003RI\u0003EORFNV\u0003 PD\\\u0003H[FHHG\u0003\u0019\u0018\u000f\u0018\u0016\u0018\u0011\u0003 6R\u000f\u0003WKLV\u0003UDLVHV\u0003D\u0003SUREOHP\u0003ZLWK\u0003RXU\u0003FXUUHQW\u0003YHFWRU\u0003DGGLWLRQ\u0003LPSOHPHQWDWLRQ\u0011\u0003,I\u0003 ZH\u0003ODXQFK\u0003 N/128\u0003EORFNV\u0003WR\u0003DGG\u0003RXU\u0003YHFWRUV\u000f\u0003ZH\u0003ZLOO\u0003KLW\u0003ODXQFK\u0003IDLOXUHV\u0003ZKHQ\u0003 RXU\u0003YHFWRUV\u0003H[FHHG\u0003\u0019\u0018\u000f\u0018\u0016\u0018\u0003 \u0003\u0014\u0015\u001b\u0003 \u0003\u001b\u000f\u0016\u001b\u001b\u000f\u0017\u001b\u0013\u0003HOHPHQWV\u0011\u00037KLV\u0003VHHPV\u0003OLNH\u0003D\u0003ODUJH\u0003 QXPEHU\u000f\u0003EXW\u0003ZLWK\u0003FXUUHQW\u0003PHPRU\\\u0003FDSDFLWLHV\u0003EHWZHHQ\u0003\u0014*%\u0003DQG\u0003\u0017*%\u000f\u0003WKH\u0003KLJK\u0010HQG\u0003 JUDSKLFV\u0003SURFHVVRUV\u0003FDQ\u0003KROG\u0003RUGHUV\u0003RI\u0003PDJQLWXGH\u0003PRUH\u0003GDWD\u0003WKDQ\u0003YHFWRUV\u0003ZLWK\u0003 \u001b\u0003PLOOLRQ\u0003HOHPHQWV\u0011 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /six.lf/six.lf)RUWXQDWHO\\\u000f\u0003WKH\u0003VROXWLRQ\u0003WR\u0003WKLV\u0003LVVXH\u0003LV\u0003H[WUHPHO\\\u0003VLPSOH\u0011\u0003:H\u0003\u020cUVW\u0003PDNH\u0003D\u0003FKDQJH\u0003 WR\u0003RXU\u0003NHUQHO\u0011 __global__ void add(",
    "c ); %HFDXVH\u0003RI\u0003RXU\u0003FKDQJH\u0003WR\u0003WKH\u0003GLYLVLRQ\u0003WKDW\u0003HQVXUHV\u0003ZH\u0003ODXQFK\u0003HQRXJK\u0003WKUHDGV\u000f\u0003ZH\u0003 ZLOO\u0003DFWXDOO\\\u0003QRZ\u0003ODXQFK\u0003 too many WKUHDGV\u0003ZKHQ\u0003 N\u0003LV\u0003QRW\u0003DQ\u0003H[DFW\u0003PXOWLSOH\u0003RI\u0003\u0014\u0015\u001b\u0011\u0003 %XW\u0003WKHUH\u0003LV\u0003D\u0003VLPSOH\u0003UHPHG\\\u0003WR\u0003WKLV\u0003SUREOHP\u000f\u0003DQG\u0003RXU\u0003NHUQHO\u0003DOUHDG\\\u0003WDNHV\u0003FDUH\u0003RI\u0003 LW\u0011\u0003:H\u0003KDYH\u0003WR\u0003FKHFN\u0003ZKHWKHU\u0003D\u0003WKUHDG\u01e2V\u0003RIIVHW\u0003LV\u0003DFWXDOO\\\u0003EHWZHHQ\u0003\u0013\u0003DQG\u0003 N\u0003EHIRUH\u0003 ZH\u0003XVH\u0003LW\u0003WR\u0003DFFHVV\u0003RXU\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003DUUD\\V if (tid < N) c[tid] = a[tid] + b[tid]; 7KXV\u000f\u0003ZKHQ\u0003RXU\u0003LQGH[\u0003RYHUVKRRWV\u0003WKH\u0003HQG\u0003RI\u0003RXU\u0003DUUD\\\u000f\u0003DV\u0003ZLOO\u0003DOZD\\V\u0003KDSSHQ\u0003 ZKHQ\u0003ZH\u0003ODXQFK\u0003D\u0003QRQPXOWLSOH\u0003RI\u0003\u0014\u0015\u001b\u000f\u0003ZH\u0003DXWRPDWLFDOO\\\u0003UHIUDLQ\u0003IURP\u0003SHUIRUPLQJ\u0003 WKH\u0003FDOFXODWLRQ\u0011\u00030RUH\u0003LPSRUWDQW\u000f\u0003ZH\u0003UHIUDLQ\u0003IURP\u0003UHDGLQJ\u0003DQG\u0003ZULWLQJ\u0003PHPRU\\\u0003RII\u0003 WKH\u0003HQG\u0003RI\u0003RXU\u0003DUUD\\\u0011 *38\u00036806\u00032)\u0003$5%,75$5,/<\u0003/21*\u00039(&7256 :H\u0003ZHUH\u0003QRW\u0003FRPSOHWHO\\\u0003IRUWKFRPLQJ\u0003ZKHQ\u0003ZH\u0003\u020cUVW\u0003GLVFXVVHG\u0003ODXQFKLQJ\u0003SDUDOOHO\u0003 EORFNV\u0003RQ\u0003D\u0003*38\u0011\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003WKH\u0003OLPLWDWLRQ\u0003RQ\u0003WKUHDG\u0003FRXQW\u000f\u0003WKHUH\u0003LV\u0003DOVR\u0003D\u0003 KDUGZDUH\u0003OLPLWDWLRQ\u0003RQ\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003 DOEHLW\u0003PXFK\u0003JUHDWHU\u0003WKDQ\u0003WKH\u0003WKUHDG\u0003 OLPLWDWLRQ \u0011\u0003$V\u0003ZH\u01e2YH\u0003PHQWLRQHG\u0003SUHYLRXVO\\\u000f\u0003QHLWKHU\u0003GLPHQVLRQ\u0003RI\u0003D\u0003JULG\u0003RI\u0003EORFNV\u0003 PD\\\u0003H[FHHG\u0003\u0019\u0018\u000f\u0018\u0016\u0018\u0011\u0003 6R\u000f\u0003WKLV\u0003UDLVHV\u0003D\u0003SUREOHP\u0003ZLWK\u0003RXU\u0003FXUUHQW\u0003YHFWRU\u0003DGGLWLRQ\u0003LPSOHPHQWDWLRQ\u0011\u0003,I\u0003 ZH\u0003ODXQFK\u0003 N/128\u0003EORFNV\u0003WR\u0003DGG\u0003RXU\u0003YHFWRUV\u000f\u0003ZH\u0003ZLOO\u0003KLW\u0003ODXQFK\u0003IDLOXUHV\u0003ZKHQ\u0003 RXU\u0003YHFWRUV\u0003H[FHHG\u0003\u0019\u0018\u000f\u0018\u0016\u0018\u0003 \u0003\u0014\u0015\u001b\u0003 \u0003\u001b\u000f\u0016\u001b\u001b\u000f\u0017\u001b\u0013\u0003HOHPHQWV\u0011\u00037KLV\u0003VHHPV\u0003OLNH\u0003D\u0003ODUJH\u0003 QXPEHU\u000f\u0003EXW\u0003ZLWK\u0003FXUUHQW\u0003PHPRU\\\u0003FDSDFLWLHV\u0003EHWZHHQ\u0003\u0014*%\u0003DQG\u0003\u0017*%\u000f\u0003WKH\u0003KLJK\u0010HQG\u0003 JUDSKLFV\u0003SURFHVVRUV\u0003FDQ\u0003KROG\u0003RUGHUV\u0003RI\u0003PDJQLWXGH\u0003PRUH\u0003GDWD\u0003WKDQ\u0003YHFWRUV\u0003ZLWK\u0003 \u001b\u0003PLOOLRQ\u0003HOHPHQWV\u0011 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /six.lf/six.lf)RUWXQDWHO\\\u000f\u0003WKH\u0003VROXWLRQ\u0003WR\u0003WKLV\u0003LVVXH\u0003LV\u0003H[WUHPHO\\\u0003VLPSOH\u0011\u0003:H\u0003\u020cUVW\u0003PDNH\u0003D\u0003FKDQJH\u0003 WR\u0003RXU\u0003NHUQHO\u0011 __global__ void add( int *a, int *b, int *c ) { int tid = threadIdx.x + blockIdx.x * blockDim.x; while (tid < N) { c[tid] = a[tid] + b[tid]; tid += blockDim.x * gridDim.x; } } 7KLV\u0003ORRNV\u0003UHPDUNDEO\\\u0003OLNH\u0003RXU\u0003 original \u0003YHUVLRQ\u0003RI\u0003YHFWRU\u0003DGGLWLRQ\u0004\u0003,Q\u0003IDFW\u000f\u0003FRPSDUH\u0003 LW\u0003WR\u0003WKH\u0003IROORZLQJ\u0003&38\u0003LPSOHPHQWDWLRQ\u0003IURP\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU void add( int *a, int *b, int *c ) { int tid = 0; // this is CPU zero, so we start at zero while (tid < N) { c[tid] = a[tid] + b[tid]; tid += 1; // we have one CPU, so we increment by one } } +HUH\u0003ZH\u0003DOVR\u0003XVHG\u0003D\u0003 while()\u0003ORRS\u0003WR\u0003LWHUDWH\u0003WKURXJK\u0003WKH\u0003GDWD\u0011\u00035HFDOO\u0003WKDW\u0003ZH\u0003 FODLPHG\u0003WKDW\u0003UDWKHU\u0003WKDQ\u0003LQFUHPHQWLQJ\u0003WKH\u0003DUUD\\\u0003LQGH[\u0003E\\\u0003\u0014\u000f\u0003D\u0003PXOWL\u0010&38\u0003RU\u0003PXOWL - FRUH\u0003YHUVLRQ\u0003FRXOG\u0003LQFUHPHQW\u0003E\\\u0003WKH\u0003QXPEHU\u0003RI\u0003SURFHVVRUV\u0003ZH\u0003ZDQWHG\u0003WR\u0003XVH\u0011\u0003:H\u0003 ZLOO\u0003QRZ\u0003XVH\u0003WKDW\u0003VDPH\u0003SULQFLSOH\u0003LQ\u0003WKH\u0003*38\u0003YHUVLRQ\u0011 ,Q\u0003WKH\u0003*38\u0003LPSOHPHQWDWLRQ\u000f\u0003ZH\u0003FRQVLGHU\u0003WKH\u0003QXPEHU\u0003RI\u0003SDUDOOHO\u0003WKUHDGV\u0003ODXQFKHG\u0003 WR\u0003EH\u0003WKH\u0003QXPEHU\u0003RI\u0003SURFHVVRUV\u0011\u0003$OWKRXJK\u0003WKH\u0003DFWXDO\u0003*38\u0003PD\\\u0003KDYH\u0003IHZHU\u0003 RU\u0003 PRUH \u0003SURFHVVLQJ\u0003XQLWV\u0003WKDQ\u0003WKLV\u000f\u0003ZH\u0003WKLQN\u0003RI\u0003HDFK\u0003WKUHDG\u0003DV\u0003ORJLFDOO\\\u0003H[HFXWLQJ\u0003 LQ\u0003SDUDOOHO\u0003DQG\u0003WKHQ\u0003DOORZ\u0003WKH\u0003KDUGZDUH\u0003WR\u0003VFKHGXOH\u0003WKH\u0003DFWXDO\u0003H[HFXWLRQ\u0011\u0003 'HFRXSOLQJ\u0003WKH\u0003SDUDOOHOL]DWLRQ\u0003IURP\u0003WKH\u0003DFWXDO\u0003PHWKRG\u0003RI\u0003KDUGZDUH\u0003H[HFXWLRQ\u0003LV\u0003 RQH\u0003RI\u0003EXUGHQV\u0003WKDW\u0003&8'$\u0003&\u0003OLIWV\u0003RII\u0003D\u0003VRIWZDUH\u0003GHYHORSHU\u01e2V\u0003VKRXOGHUV\u0011\u00037KLV\u0003VKRXOG\u0003 FRPH\u0003DV\u0003D\u0003UHOLHI\u000f\u0003FRQVLGHULQJ\u0003FXUUHQW\u000319,',$\u0003KDUGZDUH\u0003FDQ\u0003VKLS\u0003ZLWK\u0003DQ\\ZKHUH\u0003 EHWZHHQ\u0003\u001b\u0003DQG\u0003\u0017\u001b\u0013\u0003DULWKPHWLF\u0003XQLWV\u0003SHU\u0003FKLS\u0004 1RZ\u0003WKDW\u0003ZH\u0003XQGHUVWDQG\u0003WKH\u0003SULQFLSOH\u0003EHKLQG\u0003WKLV\u0003LPSOHPHQWDWLRQ\u000f\u0003ZH\u0003MXVW\u0003QHHG\u0003 WR\u0003XQGHUVWDQG\u0003KRZ\u0003ZH\u0003GHWHUPLQH\u0003WKH\u0003LQLWLDO\u0003LQGH[\u0003YDOXH\u0003IRU\u0003HDFK\u0003SDUDOOHO\u0003WKUHDG\u0003 Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /six.lf/seven.lf\u0018\u0011\u0015\u0003 333555 %%%666 DQG\u0003KRZ\u0003ZH\u0003GHWHUPLQH\u0003WKH\u0003LQFUHPHQW\u0011\u0003:H\u0003ZDQW\u0003HDFK\u0003SDUDOOHO\u0003WKUHDG\u0003WR\u0003VWDUW\u0003RQ\u0003 D\u0003GLIIHUHQW\u0003GDWD\u0003LQGH[\u000f\u0003VR\u0003ZH\u0003MXVW\u0003QHHG\u0003WR\u0003WDNH\u0003RXU\u0003WKUHDG\u0003DQG\u0003EORFN\u0003LQGH[HV\u0003DQG\u0003 OLQHDUL]H\u0003WKHP\u0003DV\u0003ZH\u0003VDZ\u0003LQ\u0003WKH\u0003\u01e4*38\u00036XPV\u0003RI\u0003D\u0003/RQJHU\u00039HFWRU\u01e5\u0003VHFWLRQ\u0011\u0003(DFK\u0003 WKUHDG\u0003ZLOO\u0003VWDUW\u0003DW\u0003DQ\u0003LQGH[\u0003JLYHQ\u0003E\\\u0003WKH\u0003IROORZLQJ int tid = threadIdx.x + blockIdx.x * blockDim.x; $IWHU\u0003HDFK\u0003WKUHDG\u0003\u020cQLVKHV\u0003LWV\u0003ZRUN\u0003DW\u0003WKH\u0003FXUUHQW\u0003LQGH[\u000f\u0003ZH\u0003QHHG\u0003WR\u0003LQFUHPHQW\u0003 HDFK\u0003RI\u0003WKHP\u0003E\\\u0003WKH\u0003WRWDO\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003UXQQLQJ\u0003LQ\u0003WKH\u0003JULG\u0011\u00037KLV\u0003LV\u0003VLPSO\\\u0003WKH\u0003 QXPEHU\u0003RI\u0003WKUHDGV\u0003SHU\u0003EORFN\u0003PXOWLSOLHG\u0003E\\\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003LQ\u0003WKH\u0003JULG\u000f\u0003RU\u0003 blockDim.x * gridDim.x \u0011\u0003+HQFH\u000f\u0003WKH\u0003LQFUHPHQW\u0003VWHS\u0003LV\u0003DV\u0003IROORZV tid += blockDim.x * gridDim.x; :H\u0003DUH\u0003DOPRVW\u0003WKHUH\u0004\u00037KH\u0003RQO\\\u0003UHPDLQLQJ\u0003SLHFH\u0003LV\u0003WR\u0003\u020c[\u0003WKH\u0003ODXQFK\u0003 LWVHOI\u0011\u0003,I\u0003\\RX\u0003UHPHPEHU\u000f\u0003ZH\u0003WRRN\u0003WKLV\u0003GHWRXU\u0003EHFDXVH\u0003WKH\u0003ODXQFK\u0003 add<<<(N+127)/128,128>>>( dev_a, dev_b, dev_c ) \u0003ZLOO\u0003IDLO\u0003ZKHQ\u0003 (N+127)/128 \u0003LV\u0003JUHDWHU\u0003WKDQ\u0003\u0019\u0018\u000f\u0018\u0016\u0018\u0011\u00037R\u0003HQVXUH\u0003ZH\u0003QHYHU\u0003ODXQFK\u0003WRR\u0003PDQ\\\u0003EORFNV\u000f\u0003 ZH\u0003ZLOO\u0003MXVW\u0003\u020c[\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003WR\u0003VRPH\u0003UHDVRQDEO\\\u0003VPDOO\u0003YDOXH\u0011\u00036LQFH\u0003ZH\u0003OLNH\u0003 FRS\\LQJ\u0003DQG\u0003SDVWLQJ\u0003VR\u0003PXFK\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003\u0014\u0015\u001b\u0003EORFNV\u000f\u0003HDFK\u0003ZLWK\u0003\u0014\u0015\u001b\u0003WKUHDGV\u0011\u0003 add<<<128,128>>>( dev _ a, dev _ b, dev _ c ); <RX\u0003VKRXOG\u0003IHHO\u0003IUHH\u0003WR\u0003DGMXVW\u0003WKHVH\u0003YDOXHV\u0003KRZHYHU\u0003\\RX\u0003VHH\u0003\u020cW\u000f\u0003SURYLGHG\u0003WKDW\u0003 \\RXU\u0003YDOXHV\u0003UHPDLQ\u0003ZLWKLQ\u0003WKH\u0003OLPLWV\u0003ZH\u01e2YH\u0003GLVFXVVHG\u0011\u0003/DWHU\u0003LQ\u0003WKH\u0003ERRN\u000f\u0003ZH\u0003ZLOO\u0003 GLVFXVV\u0003WKH\u0003SRWHQWLDO\u0003SHUIRUPDQFH\u0003LPSOLFDWLRQV\u0003RI\u0003WKHVH\u0003FKRLFHV\u000f\u0003EXW\u0003IRU\u0003QRZ\u0003LW\u0003 VXI\u020cFHV\u0003WR\u0003FKRRVH\u0003\u0014\u0015\u001b\u0003WKUHDGV\u0003SHU\u0003EORFN\u0003DQG\u0003\u0014\u0015\u001b\u0003EORFNV\u0011\u00031RZ\u0003ZH\u0003FDQ\u0003DGG\u0003YHFWRUV\u0003 RI\u0003DUELWUDU\\\u0003OHQJWK\u000f\u0003OLPLWHG\u0003RQO\\\u0003E\\\u0003WKH\u0003DPRXQW\u0003RI\u00035$0\u0003ZH\u0003KDYH\u0003RQ\u0003RXU\u0003*38\u0011\u0003+HUH\u0003 LV\u0003WKH\u0003HQWLUH\u0003VRXUFH\u0003OLVWLQJ #include \"../common/book.h\" #define N (33 * 1024) __global__ void add( int *a, int *b, int *c ) { int tid = threadIdx.x + blockIdx.x * blockDim.x; while (tid < N) { c[tid] = a[tid] + b[tid]; tid += blockDim.x * gridDim.x; } } Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /six.lf/eight.lfint main( void ) { int a[N], b[N], c[N]; int *dev_a, *dev_b, *dev_c; // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c, N * sizeof(int) ) ); // fill the arrays \u2018a\u2019 and \u2018b\u2019 on the CPU for (int i=0; i<N; i++) { a[i] = i; b[i] = i * i; } // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, N * sizeof(int), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, N * sizeof(int), cudaMemcpyHostToDevice ) ); add<<<128,128>>>( dev_a, dev_b, dev_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( c, dev_c, N * sizeof(int), cudaMemcpyDeviceToHost ) ); // verify that the GPU did the work we requested bool success = true; for (int i=0; i<N; i++) { if ((a[i] + b[i]) != c[i]) { printf( \u201cError: %d + %d != %d\\n\u201d , a[i], b[i], c[i] ); success = false; Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /six.lf/nine.lf\u0018\u0011\u0015\u0003 333555 %%%666 } } if (success) printf( \"We did it!\\n\" ); // free the memory allocated on the",
    "); success = false; Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /six.lf/nine.lf\u0018\u0011\u0015\u0003 333555 %%%666 } } if (success) printf( \"We did it!\\n\" ); // free the memory allocated on the GPU cudaFree( dev_a ); cudaFree( dev_b ); cudaFree( dev_c ); return 0; } *38\u00035,33/(\u000386,1*\u00037+5($'6 \u0018\u0011\u0015\u0011\u0015\u0003 $V\u0003ZLWK\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003UHZDUG\u0003\\RXU\u0003SDWLHQFH\u0003ZLWK\u0003YHFWRU\u0003DGGLWLRQ\u0003E\\\u0003 SUHVHQWLQJ\u0003D\u0003PRUH\u0003IXQ\u0003H[DPSOH\u0003WKDW\u0003GHPRQVWUDWHV\u0003VRPH\u0003RI\u0003WKH\u0003WHFKQLTXHV\u0003ZH\u01e2YH\u0003 EHHQ\u0003XVLQJ\u0011\u0003:H\u0003ZLOO\u0003DJDLQ\u0003XVH\u0003RXU\u0003*38\u0003FRPSXWLQJ\u0003SRZHU\u0003WR\u0003JHQHUDWH\u0003SLFWXUHV\u0003 SURFHGXUDOO\\\u0011\u0003%XW\u0003WR\u0003PDNH\u0003WKLQJV\u0003HYHQ\u0003PRUH\u0003LQWHUHVWLQJ\u000f\u0003WKLV\u0003WLPH\u0003ZH\u0003ZLOO\u0003DQLPDWH\u0003 WKHP\u0011\u0003%XW\u0003GRQ\u01e2W\u0003ZRUU\\\u000f\u0003ZH\u01e2YH\u0003SDFNDJHG\u0003DOO\u0003WKH\u0003XQUHODWHG\u0003DQLPDWLRQ\u0003FRGH\u0003LQWR\u0003 KHOSHU\u0003IXQFWLRQV\u0003VR\u0003\\RX\u0003ZRQ\u01e2W\u0003KDYH\u0003WR\u0003PDVWHU\u0003DQ\\\u0003JUDSKLFV\u0003RU\u0003DQLPDWLRQ\u0011 struct DataBlock { unsigned char *dev_bitmap; CPUAnimBitmap *bitmap; }; // clean up memory allocated on the GPU void cleanup( DataBlock *d ) { cudaFree( d->dev_bitmap ); } int main( void ) { DataBlock data; CPUAnimBitmap bitmap( DIM, DIM, &data ); data.bitmap = &bitmap; Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /seven.lf/zero.lf HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_bitmap, bitmap.image_size() ) ); bitmap.anim_and_exit( ( void (*)(void*,int))generate_frame, ( void (*)(void*))cleanup ); } 0RVW\u0003RI\u0003WKH\u0003FRPSOH[LW\\\u0003RI\u0003 main()\u0003LV\u0003KLGGHQ\u0003LQ\u0003WKH\u0003KHOSHU\u0003FODVV\u0003 CPUAnimBitmap \u0011\u0003<RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003ZH\u0003DJDLQ\u0003KDYH\u0003D\u0003SDWWHUQ\u0003RI\u0003GRLQJ\u0003D\u0003 cudaMalloc() \u000f\u0003H[HFXWLQJ\u0003GHYLFH\u0003FRGH\u0003WKDW\u0003XVHV\u0003WKH\u0003DOORFDWHG\u0003PHPRU\\\u000f\u0003DQG\u0003 WKHQ\u0003FOHDQLQJ\u0003XS\u0003ZLWK\u0003 \u0003cudaFree() \u0011\u00037KLV\u0003VKRXOG\u0003EH\u0003ROG\u0003KDW\u0003WR\u0003\\RX\u0003E\\\u0003QRZ\u0011 ,Q\u0003WKLV\u0003H[DPSOH\u000f\u0003ZH\u0003KDYH\u0003VOLJKWO\\\u0003FRQYROXWHG\u0003WKH\u0003PHDQV\u0003E\\\u0003ZKLFK\u0003ZH\u0003DFFRPSOLVK\u0003 WKH\u0003PLGGOH\u0003VWHS\u000f\u0003\u01e4H[HFXWLQJ\u0003GHYLFH\u0003FRGH\u0003WKDW\u0003XVHV\u0003WKH\u0003DOORFDWHG\u0003PHPRU\\\u0011\u01e5\u0003:H\u0003 SDVV\u0003WKH\u0003 anim_and_exit() \u0003PHWKRG\u0003D\u0003IXQFWLRQ\u0003SRLQWHU\u0003WR\u0003 generate_frame() \u0011\u0003 7KLV\u0003IXQFWLRQ\u0003ZLOO\u0003EH\u0003FDOOHG\u0003E\\\u0003WKH\u0003FODVV\u0003HYHU\\\u0003WLPH\u0003LW\u0003ZDQWV\u0003WR\u0003JHQHUDWH\u0003D\u0003QHZ\u0003 IUDPH\u0003RI\u0003WKH\u0003DQLPDWLRQ\u0011\u0003 void generate_frame( DataBlock *d, int ticks ) { dim3 blocks(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<blocks,threads>>>( d->dev_bitmap, ticks ); HANDLE_ERROR( cudaMemcpy( d->bitmap->get_ptr(), d->dev_bitmap, d->bitmap->image_size(), cudaMemcpyDeviceToHost ) ); } $OWKRXJK\u0003WKLV\u0003IXQFWLRQ\u0003FRQVLVWV\u0003RQO\\\u0003RI\u0003IRXU\u0003OLQHV\u000f\u0003WKH\\\u0003DOO\u0003LQYROYH\u0003LPSRUWDQW\u0003 &8'$\u0003&\u0003FRQFHSWV\u0011\u0003)LUVW\u000f\u0003ZH\u0003GHFODUH\u0003WZR\u0003WZR\u0010GLPHQVLRQDO\u0003YDULDEOHV\u000f\u0003 blocks DQG\u0003threads\u0011\u0003$V\u0003RXU\u0003QDPLQJ\u0003FRQYHQWLRQ\u0003PDNHV\u0003SDLQIXOO\\\u0003REYLRXV\u000f\u0003WKH\u0003YDULDEOH\u0003 blocks\u0003UHSUHVHQWV\u0003WKH\u0003QXPEHU\u0003RI\u0003SDUDOOHO\u0003EORFNV\u0003ZH\u0003ZLOO\u0003ODXQFK\u0003LQ\u0003RXU\u0003JULG\u0011\u00037KH\u0003 YDULDEOH\u0003threads\u0003UHSUHVHQWV\u0003WKH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003ZH\u0003ZLOO\u0003ODXQFK\u0003SHU\u0003EORFN\u0011\u0003 %HFDXVH\u0003ZH\u0003DUH\u0003JHQHUDWLQJ\u0003DQ\u0003LPDJH\u000f\u0003ZH\u0003XVH\u0003WZR\u0010GLPHQVLRQDO\u0003LQGH[LQJ\u0003VR\u0003WKDW\u0003 HDFK\u0003WKUHDG\u0003ZLOO\u0003KDYH\u0003D\u0003XQLTXH\u0003 (x,y)\u0003LQGH[\u0003WKDW\u0003ZH\u0003FDQ\u0003HDVLO\\\u0003SXW\u0003LQWR\u0003FRUUHVSRQ - GHQFH\u0003ZLWK\u0003D\u0003SL[HO\u0003LQ\u0003WKH\u0003RXWSXW\u0003LPDJH\u0011\u0003:H\u0003KDYH\u0003FKRVHQ\u0003WR\u0003XVH\u0003EORFNV\u0003WKDW\u0003FRQVLVW\u0003 Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /seven.lf/one.lf\u0018\u0011\u0015\u0003 333555 %%%666 RI\u0003D\u0003\u0014\u0019\u0003[\u0003\u0014\u0019\u0003DUUD\\\u0003RI\u0003WKUHDGV\u0011\u0003,I\u0003WKH\u0003LPDJH\u0003KDV\u0003 DIM\u0003[\u0003DIM\u0003SL[HOV\u000f\u0003ZH\u0003QHHG\u0003WR\u0003ODXQFK\u0003 DIM/16\u0003[\u0003DIM/16\u0003EORFNV\u0003WR\u0003JHW\u0003RQH\u0003WKUHDG\u0003SHU\u0003SL[HO\u0011\u0003)LJXUH\u0003\u0018\u0011\u0015\u0003VKRZV\u0003KRZ\u0003WKLV\u0003 EORFN\u0003DQG\u0003WKUHDG\u0003FRQ\u020cJXUDWLRQ\u0003ZRXOG\u0003ORRN\u0003LQ\u0003D\u0003 ULGLFXORXVO\\ \u0003VPDOO\u000f\u0003\u0017\u001b\u0010SL[HO\u0010ZLGH\u000f\u0003 \u0016\u0015\u0010SL[HO\u0010KLJK\u0003LPDJH\u0011 \u0012\u0013 \u0011\u0001\u0002\u0006\u0004\u0006\u0003 \u0012\u0013 \u0011\u0001\u0002\u0006\u0004\u0007\u0003 \u0012\u0013 \u0011\u0001\u0002\u0007\u0004\u0006\u0003 \u0012\u0013 \u0011\u0001\u0002\u0007\u0004\u0007\u0003 \u0010\u0014\u000f \u000e \u0002\u0006\u0005\u0006\u0003 \u0010\u0014\u000f \u000e \u0002\u0006\u0004\u0007\u0003 \u0010\u0014\u000f \u000e \u0002\u0006\u0004\u0007 \u0003 \u0010\u0014\u000f \u000e \u0002\u0007\u0004\u0006\u0003 \u0010\u0014\u000f \u000e \u0002\u0007\u0004\u0007\u0003 \u0010\u0014\u000f \u000e \u0002\u0007\u0004\u0007 \u0003 \u0010\u0014\u000f \u000e \u0002\b\u0004\u0006\u0003 \u0010\u0014\u000f \u000e \u0002\b\u0004\u0007\u0003 \u0010\u0014\u000f \u000e \u0002\b\u0004\u0007 \u0003 \u0010\u0014\u000f \u000e \u0002\u0007 \u0004\u0006\u0003 \u0010\u0014\u000f \u000e \u0002\u0007 \u0004\u0007\u0003 \u0010\u0014\u000f \u000e \u0002\u0007 \u0004\u0007 \u0003 \u0012\u0013 \u0011\u0001\u0002\b\u0004\u0006\u0003 \u0012\u0013 \u0011\u0001\u0002\b\u0004\u0007\u0003 Figure 5.2 $\u0003\u0015'\u0003KLHUDUFK\\\u0003RI\u0003EORFNV\u0003DQG\u0003WKUHDGV\u0003WKDW\u0003FRXOG\u0003EH\u0003XVHG\u0003WR\u0003SURFHVV\u0003D\u0003 \u0017\u001b\u0003[\u0003\u0016\u0015\u0003SL[HO\u0003LPDJH\u0003XVLQJ\u0003RQH\u0003WKUHDG\u0003SHU\u0003SL[HO Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /seven.lf/two.lf,I\u0003\\RX\u0003KDYH\u0003GRQH\u0003DQ\\\u0003PXOWLWKUHDGHG\u0003&38\u0003SURJUDPPLQJ\u000f\u0003\\RX\u0003PD\\\u0003EH\u0003ZRQGHULQJ\u0003 ZK\\\u0003ZH\u0003ZRXOG\u0003ODXQFK\u0003VR\u0003PDQ\\\u0003WKUHDGV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003WR\u0003UHQGHU\u0003D\u0003IXOO\u0003KLJK\u0010 GH\u020cQLWLRQ\u0003DQLPDWLRQ\u0003DW\u0003\u0014 \u0015\u0013\u0003[\u0003\u0014\u0013\u001b\u0013\u000f\u0003WKLV\u0003PHWKRG\u0003ZRXOG\u0003FUHDWH\u0003PRUH\u0003WKDQ\u0003\u0015\u0003PLOOLRQ\u0003 WKUHDGV\u0011\u0003$OWKRXJK\u0003ZH\u0003URXWLQHO\\\u0003FUHDWH\u0003DQG\u0003VFKHGXOH\u0003WKLV\u0003PDQ\\\u0003WKUHDGV\u0003RQ\u0003D\u0003*38\u000f\u0003 RQH\u0003ZRXOG\u0003QRW\u0003GUHDP\u0003RI\u0003FUHDWLQJ\u0003WKLV\u0003PDQ\\\u0003WKUHDGV\u0003RQ\u0003D\u0003&38\u0011\u0003%HFDXVH\u0003&38\u0003 WKUHDG\u0003PDQDJHPHQW\u0003DQG\u0003VFKHGXOLQJ\u0003PXVW\u0003EH\u0003GRQH\u0003LQ\u0003VRIWZDUH\u000f\u0003LW\u0003VLPSO\\\u0003FDQQRW\u0003 VFDOH\u0003WR\u0003WKH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003WKDW\u0003D\u0003*38\u0003FDQ\u0011\u0003%HFDXVH\u0003ZH\u0003FDQ\u0003VLPSO\\\u0003FUHDWH\u0003D\u0003 WKUHDG\u0003IRU\u0003HDFK\u0003GDWD\u0003HOHPHQW\u0003ZH\u0003ZDQW\u0003WR\u0003SURFHVV\u000f\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003RQ\u0003D\u0003*38\u0003 FDQ\u0003EH\u0003IDU\u0003VLPSOHU\u0003WKDQ\u0003RQ\u0003D\u0003&38\u0011 $IWHU\u0003GHFODULQJ\u0003WKH\u0003YDULDEOHV\u0003WKDW\u0003KROG\u0003WKH\u0003GLPHQVLRQV\u0003RI\u0003RXU\u0003ODXQFK\u000f\u0003ZH\u0003VLPSO\\\u0003 ODXQFK\u0003WKH\u0003NHUQHO\u0003WKDW\u0003ZLOO\u0003FRPSXWH\u0003RXU\u0003SL[HO\u0003YDOXHV\u0011 kernel<<< blocks,threads>>>( d->dev _ bitmap, ticks ); 7KH\u0003NHUQHO\u0003ZLOO\u0003QHHG\u0003WZR\u0003SLHFHV\u0003RI\u0003LQIRUPDWLRQ\u0003WKDW\u0003ZH\u0003SDVV\u0003DV\u0003SDUDPHWHUV\u0011\u0003)LUVW\u000f\u0003 LW\u0003QHHGV\u0003D\u0003SRLQWHU\u0003WR\u0003GHYLFH\u0003PHPRU\\\u0003WKDW\u0003KROGV\u0003WKH\u0003RXWSXW\u0003SL[HOV\u0011\u00037KLV\u0003LV\u0003D\u0003JOREDO\u0003 YDULDEOH\u0003WKDW\u0003KDG\u0003LWV\u0003PHPRU\\\u0003DOORFDWHG\u0003LQ\u0003 main()\u0011\u0003%XW\u0003WKH\u0003YDULDEOH\u0003LV\u0003\u01e4JOREDO\u01e5\u0003 RQO\\\u0003IRU\u0003KRVW\u0003FRGH\u000f\u0003VR\u0003ZH\u0003QHHG\u0003WR\u0003SDVV\u0003LW\u0003DV\u0003D\u0003SDUDPHWHU\u0003WR\u0003HQVXUH\u0003WKDW\u0003WKH\u0003&8'$\u0003 UXQWLPH\u0003ZLOO\u0003PDNH\u0003LW\u0003DYDLODEOH\u0003IRU\u0003RXU\u0003GHYLFH\u0003FRGH\u0011 6HFRQG\u000f\u0003RXU\u0003NHUQHO\u0003ZLOO\u0003QHHG\u0003WR\u0003NQRZ\u0003WKH\u0003FXUUHQW\u0003DQLPDWLRQ\u0003WLPH\u0003VR\u0003LW\u0003FDQ\u0003 JHQHUDWH\u0003WKH\u0003FRUUHFW\u0003IUDPH\u0011\u00037KH\u0003FXUUHQW\u0003WLPH\u000f\u0003 ticks\u000f\u0003LV\u0003SDVVHG\u0003WR\u0003WKH\u0003 generate_frame() \u0003IXQFWLRQ\u0003IURP\u0003WKH\u0003LQIUDVWUXFWXUH\u0003FRGH\u0003LQ\u0003 CPUAnimBitmap , VR\u0003ZH\u0003FDQ\u0003VLPSO\\\u0003SDVV\u0003WKLV\u0003RQ\u0003WR\u0003RXU\u0003NHUQHO\u0011 $QG\u0003QRZ\u000f\u0003KHUH\u01e2V\u0003WKH\u0003NHUQHO\u0003FRGH\u0003LWVHOI __global__ void kernel( unsigned char *ptr, int ticks ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; // now calculate the value at that position float fx = x - DIM/2; float fy = y - DIM/2; float d = sqrtf( fx * fx + fy * fy ); Download from www.wowebook.comptg666333 /// , , , 777 777 , , , 111 *** \u0003\u0003\u0003$$$$$$ /// /// ((( ///\u0003\u0003\u0003/ / /2 2 2& & &. . . /seven.lf/three.lf\u0018\u0011\u0015\u0003 333555 %%%666 unsigned char grey = ( unsigned char )(128.0f + 127.0f * cos(d/10.0f - ticks/7.0f) / (d/10.0f + 1.0f)); ptr[offset*4 + 0] = grey; ptr[offset*4 + 1] = grey; ptr[offset*4 + 2] = grey; ptr[offset*4 + 3] = 255; } 7KH\u0003\u020cUVW\u0003WKUHH\u0003DUH\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003OLQHV\u0003LQ\u0003WKH\u0003NHUQHO\u0011 int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; ,Q\u0003WKHVH\u0003OLQHV\u000f\u0003HDFK\u0003WKUHDG\u0003WDNHV\u0003LWV\u0003LQGH[\u0003ZLWKLQ\u0003LWV\u0003EORFN\u0003DV\u0003ZHOO\u0003DV\u0003WKH\u0003LQGH[\u0003 RI\u0003LWV\u0003EORFN\u0003ZLWKLQ\u0003WKH\u0003JULG\u000f\u0003DQG\u0003LW\u0003WUDQVODWHV\u0003WKLV\u0003LQWR\u0003D\u0003XQLTXH\u0003 (x,y)\u0003LQGH[\u0003 ZLWKLQ\u0003WKH\u0003LPDJH\u0011\u00036R\u0003ZKHQ\u0003WKH\u0003WKUHDG\u0003DW\u0003LQGH[\u0003 (3, 5)\u0003LQ\u0003EORFN\u0003 (12, 8)\u0003EHJLQV\u0003",
    "+ 1] = grey; ptr[offset*4 + 2] = grey; ptr[offset*4 + 3] = 255; } 7KH\u0003\u020cUVW\u0003WKUHH\u0003DUH\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003OLQHV\u0003LQ\u0003WKH\u0003NHUQHO\u0011 int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; ,Q\u0003WKHVH\u0003OLQHV\u000f\u0003HDFK\u0003WKUHDG\u0003WDNHV\u0003LWV\u0003LQGH[\u0003ZLWKLQ\u0003LWV\u0003EORFN\u0003DV\u0003ZHOO\u0003DV\u0003WKH\u0003LQGH[\u0003 RI\u0003LWV\u0003EORFN\u0003ZLWKLQ\u0003WKH\u0003JULG\u000f\u0003DQG\u0003LW\u0003WUDQVODWHV\u0003WKLV\u0003LQWR\u0003D\u0003XQLTXH\u0003 (x,y)\u0003LQGH[\u0003 ZLWKLQ\u0003WKH\u0003LPDJH\u0011\u00036R\u0003ZKHQ\u0003WKH\u0003WKUHDG\u0003DW\u0003LQGH[\u0003 (3, 5)\u0003LQ\u0003EORFN\u0003 (12, 8)\u0003EHJLQV\u0003 H[HFXWLQJ\u000f\u0003LW\u0003NQRZV\u0003WKDW\u0003WKHUH\u0003DUH\u0003\u0014\u0015\u0003HQWLUH\u0003EORFNV\u0003WR\u0003WKH\u0003OHIW\u0003RI\u0003LW\u0003DQG\u0003\u001b\u0003HQWLUH\u0003 EORFNV\u0003DERYH\u0003LW\u0011\u0003:LWKLQ\u0003LWV\u0003EORFN\u000f\u0003WKH\u0003WKUHDG\u0003DW\u0003 (3, 5)\u0003KDV\u0003WKUHH\u0003WKUHDGV\u0003WR\u0003WKH\u0003 OHIW\u0003DQG\u0003\u020cYH\u0003DERYH\u0003LW\u0011\u0003%HFDXVH\u0003WKHUH\u0003DUH\u0003\u0014\u0019\u0003WKUHDGV\u0003SHU\u0003EORFN\u000f\u0003WKLV\u0003PHDQV\u0003WKH\u0003 WKUHDG\u0003LQ\u0003TXHVWLRQ\u0003KDV\u0003WKH\u0003IROORZLQJ \u0016\u0003WKUHDGV\u0003\u000e\u0003\u0014\u0015\u0003EORFNV\u0003 \u0003\u0014\u0019\u0003WKUHDGV\u0012EORFN\u0003 \u0003\u0014 \u0018\u0003WKUHDGV\u0003WR\u0003WKH\u0003OHIW\u0003RI\u0003LW \u0018\u0003WKUHDGV\u0003\u000e\u0003\u001b\u0003EORFNV\u0003 \u0003\u0014\u0019\u0003WKUHDGV\u0012EORFN\u0003 \u0003\u0014\u0015\u001b\u0003WKUHDGV\u0003DERYH\u0003LW 7KLV\u0003FRPSXWDWLRQ\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003FRPSXWDWLRQ\u0003RI\u0003 x\u0003DQG\u0003y\u0003LQ\u0003WKH\u0003\u020cUVW\u0003WZR\u0003OLQHV\u0003 DQG\u0003LV\u0003KRZ\u0003ZH\u0003PDS\u0003WKH\u0003WKUHDG\u0003DQG\u0003EORFN\u0003LQGLFHV\u0003WR\u0003LPDJH\u0003FRRUGLQDWHV\u0011\u00037KHQ\u0003ZH\u0003 VLPSO\\\u0003OLQHDUL]H\u0003WKHVH\u0003 x\u0003DQG\u0003y\u0003YDOXHV\u0003WR\u0003JHW\u0003DQ\u0003RIIVHW\u0003LQWR\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0011\u0003$JDLQ\u000f\u0003 WKLV\u0003LV\u0003LGHQWLFDO\u0003WR\u0003ZKDW\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003\u01e4*38\u00036XPV\u0003RI\u0003D\u0003/RQJHU\u00039HFWRU\u01e5\u0003DQG\u0003\u01e4*38\u0003 6XPV\u0003RI\u0003$UELWUDULO\\\u0003/RQJ\u00039HFWRUV\u01e5\u0003VHFWLRQV\u0011 int offset = x + y * blockDim.x * gridDim.x; 6LQFH\u0003ZH\u0003NQRZ\u0003ZKLFK\u0003 (x,y)\u0003SL[HO\u0003LQ\u0003WKH\u0003LPDJH\u0003WKH\u0003WKUHDG\u0003VKRXOG\u0003FRPSXWH\u0003DQG\u0003 ZH\u0003NQRZ\u0003WKH\u0003WLPH\u0003DW\u0003ZKLFK\u0003LW\u0003QHHGV\u0003WR\u0003FRPSXWH\u0003WKLV\u0003YDOXH\u000f\u0003ZH\u0003FDQ\u0003FRPSXWH\u0003DQ\\\u0003 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /seven.lf/four.lfIXQFWLRQ\u0003RI\u0003 (x,y,t)\u0003DQG\u0003VWRUH\u0003WKLV\u0003YDOXH\u0003LQ\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0011\u0003,Q\u0003WKLV\u0003FDVH\u000f\u0003WKH\u0003 IXQFWLRQ\u0003SURGXFHV\u0003D\u0003WLPH\u0010YDU\\LQJ\u0003VLQXVRLGDO\u0003\u01e4ULSSOH\u0011\u01e5\u0003 float fx = x - DIM/2; float fy = y - DIM/2; float d = sqrtf( fx * fx + fy * fy ); unsigned char grey = ( unsigned char )(128.0f + 127.0f * cos(d/10.0f - ticks/7.0f) / (d/10.0f + 1.0f)); :H\u0003UHFRPPHQG\u0003WKDW\u0003\\RX\u0003QRW\u0003JHW\u0003WRR\u0003KXQJ\u0003XS\u0003RQ\u0003WKH\u0003FRPSXWDWLRQ\u0003RI\u0003 grey\u0011\u0003,W\u01e2V\u0003 HVVHQWLDOO\\\u0003MXVW\u0003D\u0003\u0015'\u0003IXQFWLRQ\u0003RI\u0003WLPH\u0003WKDW\u0003PDNHV\u0003D\u0003QLFH\u0003ULSSOLQJ\u0003HIIHFW\u0003ZKHQ\u0003LW\u01e2V\u0003 DQLPDWHG\u0011\u0003$\u0003VFUHHQVKRW\u0003RI\u0003RQH\u0003IUDPH\u0003VKRXOG\u0003ORRN\u0003VRPHWKLQJ\u0003OLNH\u0003)LJXUH\u0003\u0018\u0011\u0016\u0011 Figure 5.3 $\u0003VFUHHQVKRW\u0003IURP\u0003WKH\u0003*38\u0003ULSSOH\u0003H[DPSOH Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /seven.lf/five.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 6KDUHG\u00030HPRU\\\u0003DQG\u0003\u0018\u0011\u0016\u0003 6\\QFKURQL]DWLRQ 6R\u0003IDU\u000f\u0003WKH\u0003PRWLYDWLRQ\u0003IRU\u0003VSOLWWLQJ\u0003EORFNV\u0003LQWR\u0003WKUHDGV\u0003ZDV\u0003VLPSO\\\u0003RQH\u0003RI\u0003ZRUNLQJ\u0003 DURXQG\u0003KDUGZDUH\u0003OLPLWDWLRQV\u0003WR\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003ZH\u0003FDQ\u0003KDYH\u0003LQ\u0003\u020dLJKW\u0011\u00037KLV\u0003 LV\u0003IDLUO\\\u0003ZHDN\u0003PRWLYDWLRQ\u000f\u0003EHFDXVH\u0003WKLV\u0003FRXOG\u0003HDVLO\\\u0003EH\u0003GRQH\u0003EHKLQG\u0003WKH\u0003VFHQHV\u0003E\\\u0003 WKH\u0003&8'$\u0003UXQWLPH\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKHUH\u0003DUH\u0003RWKHU\u0003UHDVRQV\u0003RQH\u0003PLJKW\u0003ZDQW\u0003WR\u0003VSOLW\u0003D\u0003 EORFN\u0003LQWR\u0003WKUHDGV\u0011 &8'$\u0003&\u0003PDNHV\u0003DYDLODEOH\u0003D\u0003UHJLRQ\u0003RI\u0003PHPRU\\\u0003WKDW\u0003ZH\u0003FDOO\u0003 shared memory \u0011\u00037KLV\u0003 UHJLRQ\u0003RI\u0003PHPRU\\\u0003EULQJV\u0003DORQJ\u0003ZLWK\u0003LW\u0003DQRWKHU\u0003H[WHQVLRQ\u0003WR\u0003WKH\u0003&\u0003ODQJXDJH\u0003DNLQ\u0003 WR\u0003__device__ DQG\u0003__global__ \u0011\u0003$V\u0003D\u0003SURJUDPPHU\u000f\u0003\\RX\u0003FDQ\u0003PRGLI\\\u0003\\RXU\u0003YDUL - DEOH\u0003GHFODUDWLRQV\u0003ZLWK\u0003WKH\u0003&8'$\u0003&\u0003NH\\ZRUG\u0003 __shared__ \u0003WR\u0003PDNH\u0003WKLV\u0003YDULDEOH\u0003 UHVLGHQW\u0003LQ\u0003VKDUHG\u0003PHPRU\\\u0011\u0003%XW\u0003ZKDW\u01e2V\u0003WKH\u0003SRLQW\" :H\u01e2UH\u0003JODG\u0003\\RX\u0003DVNHG\u0011\u00037KH\u0003&8'$\u0003&\u0003FRPSLOHU\u0003WUHDWV\u0003YDULDEOHV\u0003LQ\u0003VKDUHG\u0003PHPRU\\\u0003 GLIIHUHQWO\\\u0003WKDQ\u0003W\\SLFDO\u0003YDULDEOHV\u0011\u0003,W\u0003FUHDWHV\u0003D\u0003FRS\\\u0003RI\u0003WKH\u0003YDULDEOH\u0003IRU\u0003HDFK\u0003EORFN\u0003 WKDW\u0003\\RX\u0003ODXQFK\u0003RQ\u0003WKH\u0003*38\u0011\u0003(YHU\\\u0003WKUHDG\u0003LQ\u0003WKDW\u0003EORFN\u0003VKDUHV\u0003WKH\u0003PHPRU\\\u000f\u0003EXW\u0003 WKUHDGV\u0003FDQQRW\u0003VHH\u0003RU\u0003PRGLI\\\u0003WKH\u0003FRS\\\u0003RI\u0003WKLV\u0003YDULDEOH\u0003WKDW\u0003LV\u0003VHHQ\u0003ZLWKLQ\u0003RWKHU\u0003 EORFNV\u0011\u00037KLV\u0003SURYLGHV\u0003DQ\u0003H[FHOOHQW\u0003PHDQV\u0003E\\\u0003ZKLFK\u0003WKUHDGV\u0003ZLWKLQ\u0003D\u0003EORFN\u0003FDQ\u0003 FRPPXQLFDWH\u0003DQG\u0003FROODERUDWH\u0003RQ\u0003FRPSXWDWLRQV\u0011\u0003)XUWKHUPRUH\u000f\u0003VKDUHG\u0003PHPRU\\\u0003 EXIIHUV\u0003UHVLGH\u0003SK\\VLFDOO\\\u0003RQ\u0003WKH\u0003*38\u0003DV\u0003RSSRVHG\u0003WR\u0003UHVLGLQJ\u0003LQ\u0003RII\u0010FKLS\u0003'5$0\u0011\u0003 %HFDXVH\u0003RI\u0003WKLV\u000f\u0003WKH\u0003ODWHQF\\\u0003WR\u0003DFFHVV\u0003VKDUHG\u0003PHPRU\\\u0003WHQGV\u0003WR\u0003EH\u0003IDU\u0003ORZHU\u0003 WKDQ\u0003W\\SLFDO\u0003EXIIHUV\u000f\u0003PDNLQJ\u0003VKDUHG\u0003PHPRU\\\u0003HIIHFWLYH\u0003DV\u0003D\u0003SHU\u0010EORFN\u000f\u0003VRIWZDUH\u0010 PDQDJHG\u0003FDFKH\u0003RU\u0003VFUDWFKSDG\u0011 7KH\u0003SURVSHFW\u0003RI\u0003FRPPXQLFDWLRQ\u0003EHWZHHQ\u0003WKUHDGV\u0003VKRXOG\u0003H[FLWH\u0003\\RX\u0011\u0003,W\u0003H[FLWHV\u0003XV\u000f\u0003 WRR\u0011\u0003%XW\u0003QRWKLQJ\u0003LQ\u0003OLIH\u0003LV\u0003IUHH\u000f\u0003DQG\u0003LQWHUWKUHDG\u0003FRPPXQLFDWLRQ\u0003LV\u0003QR\u0003H[FHSWLRQ\u0011\u0003 ,I\u0003ZH\u0003H[SHFW\u0003WR\u0003FRPPXQLFDWH\u0003EHWZHHQ\u0003WKUHDGV\u000f\u0003ZH\u0003DOVR\u0003QHHG\u0003D\u0003PHFKDQLVP\u0003IRU\u0003 V\\QFKURQL]LQJ\u0003EHWZHHQ\u0003WKUHDGV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LI\u0003WKUHDG\u0003$\u0003ZULWHV\u0003D\u0003YDOXH\u0003WR\u0003VKDUHG\u0003 PHPRU\\\u0003DQG\u0003ZH\u0003ZDQW\u0003WKUHDG\u0003%\u0003WR\u0003GR\u0003VRPHWKLQJ\u0003ZLWK\u0003WKLV\u0003YDOXH\u000f\u0003ZH\u0003FDQ\u01e2W\u0003KDYH\u0003 WKUHDG\u0003%\u0003VWDUW\u0003LWV\u0003ZRUN\u0003XQWLO\u0003ZH\u0003NQRZ\u0003WKH\u0003ZULWH\u0003IURP\u0003WKUHDG\u0003$\u0003LV\u0003FRPSOHWH\u0011\u0003:LWKRXW\u0003 V\\QFKURQL]DWLRQ\u000f\u0003ZH\u0003KDYH\u0003FUHDWHG\u0003D\u0003UDFH\u0003FRQGLWLRQ\u0003ZKHUH\u0003WKH\u0003FRUUHFWQHVV\u0003RI\u0003WKH\u0003 H[HFXWLRQ\u0003UHVXOWV\u0003GHSHQGV\u0003RQ\u0003WKH\u0003QRQGHWHUPLQLVWLF\u0003GHWDLOV\u0003RI\u0003WKH\u0003KDUGZDUH\u0011\u0003 /HW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003DQ\u0003H[DPSOH\u0003WKDW\u0003XVHV\u0003WKHVH\u0003IHDWXUHV\u0011 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /seven.lf/six.lfDOT PRODUCT\u0018\u0011\u0016\u0011\u0014\u0003 &RQJUDWXODWLRQV\u0004\u0003:H\u0003KDYH\u0003JUDGXDWHG\u0003IURP\u0003YHFWRU\u0003DGGLWLRQ\u0003DQG\u0003ZLOO\u0003QRZ\u0003WDNH\u0003D\u0003ORRN\u0003 DW\u0003YHFWRU\u0003GRW\u0003SURGXFWV\u0003 VRPHWLPHV\u0003FDOOHG\u0003DQ\u0003 inner product \u0011\u0003:H\u0003ZLOO\u0003TXLFNO\\\u0003UHYLHZ\u0003 ZKDW\u0003D\u0003GRW\u0003SURGXFW\u0003LV\u000f\u0003MXVW\u0003LQ\u0003FDVH\u0003\\RX\u0003DUH\u0003XQIDPLOLDU\u0003ZLWK\u0003YHFWRU\u0003PDWKHPDWLFV\u0003 RU\u0003 LW\u0003KDV\u0003EHHQ\u0003D\u0003IHZ\u0003\\HDUV \u0011\u00037KH\u0003FRPSXWDWLRQ\u0003FRQVLVWV\u0003RI\u0003WZR\u0003VWHSV\u0011\u0003)LUVW\u000f\u0003ZH\u0003PXOWLSO\\\u0003 FRUUHVSRQGLQJ\u0003HOHPHQWV\u0003RI\u0003WKH\u0003WZR\u0003LQSXW\u0003YHFWRUV\u0011\u00037KLV\u0003LV\u0003YHU\\\u0003VLPLODU\u0003WR\u0003YHFWRU\u0003 DGGLWLRQ\u0003EXW\u0003XWLOL]HV\u0003PXOWLSOLFDWLRQ\u0003LQVWHDG\u0003RI\u0003DGGLWLRQ\u0011\u0003+RZHYHU\u000f\u0003LQVWHDG\u0003RI\u0003WKHQ\u0003 VWRULQJ\u0003WKHVH\u0003YDOXHV\u0003WR\u0003D\u0003WKLUG\u000f\u0003RXWSXW\u0003YHFWRU\u000f\u0003ZH\u0003VXP\u0003WKHP\u0003DOO\u0003WR\u0003SURGXFH\u0003D\u0003VLQJOH\u0003 VFDODU\u0003RXWSXW\u0011 )RU\u0003H[DPSOH\u000f\u0003LI\u0003ZH\u0003WDNH\u0003WKH\u0003GRW\u0003SURGXFW\u0003RI\u0003WZR\u0003IRXU\u0010HOHPHQW\u0003YHFWRUV\u000f\u0003ZH\u0003ZRXOG\u0003JHW\u0003 (TXDWLRQ\u0003\u0018\u0011\u0014\u0011 Equation 5.1 3HUKDSV\u0003WKH\u0003DOJRULWKP\u0003ZH\u0003WHQG\u0003WR\u0003XVH\u0003LV\u0003EHFRPLQJ\u0003REYLRXV\u0011\u0003:H\u0003FDQ\u0003GR\u0003WKH\u0003\u020cUVW\u0003 VWHS\u0003H[DFWO\\\u0003KRZ\u0003ZH\u0003GLG\u0003YHFWRU\u0003DGGLWLRQ\u0011\u0003(DFK\u0003WKUHDG\u0003PXOWLSOLHV\u0003D\u0003SDLU\u0003RI\u0003FRUUH - VSRQGLQJ\u0003HQWULHV\u000f\u0003DQG\u0003WKHQ\u0003HYHU\\\u0003WKUHDG\u0003PRYHV\u0003RQ\u0003WR\u0003LWV\u0003QH[W\u0003SDLU\u0011\u0003%HFDXVH\u0003WKH\u0003 UHVXOW\u0003QHHGV\u0003WR\u0003EH\u0003WKH\u0003VXP\u0003RI\u0003DOO\u0003WKHVH\u0003SDLUZLVH\u0003SURGXFWV\u000f\u0003HDFK\u0003WKUHDG\u0003NHHSV\u0003 D\u0003UXQQLQJ\u0003VXP\u0003RI\u0003WKH\u0003SDLUV\u0003LW\u0003KDV\u0003DGGHG\u0011\u0003-XVW\u0003OLNH\u0003LQ\u0003WKH\u0003DGGLWLRQ\u0003H[DPSOH\u000f\u0003WKH\u0003 WKUHDGV\u0003LQFUHPHQW\u0003WKHLU\u0003LQGLFHV\u0003E\\\u0003WKH\u0003WRWDO\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003WR\u0003HQVXUH\u0003ZH\u0003GRQ\u01e2W\u0003 PLVV\u0003DQ\\\u0003HOHPHQWV\u0003DQG\u0003GRQ\u01e2W\u0003PXOWLSO\\\u0003D\u0003SDLU\u0003WZLFH\u0011\u0003+HUH\u0003LV\u0003WKH\u0003\u020cUVW\u0003VWHS\u0003RI\u0003WKH\u0003GRW\u0003 SURGXFW\u0003URXWLQH #include \"../common/book.h\" #define imin(a,b) (a<b?a:b) const int N = 33 * 1024; const int threadsPerBlock = 256; __global__ void dot( float *a, float *b, float *c ) { __shared__ float cache[threadsPerBlock]; int tid = threadIdx.x + blockIdx.x * blockDim.x; int cacheIndex = threadIdx.x; Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /seven.lf/seven.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 float temp = 0; while (tid < N) { temp += a[tid] * b[tid]; tid += blockDim.x * gridDim.x; } // set the cache values cache[cacheIndex] = temp; $V\u0003\\RX\u0003FDQ\u0003VHH\u000f\u0003ZH\u0003KDYH\u0003GHFODUHG\u0003D\u0003EXIIHU\u0003RI\u0003VKDUHG\u0003PHPRU\\\u0003QDPHG\u0003 cache\u0011\u00037KLV\u0003 EXIIHU\u0003ZLOO\u0003EH\u0003XVHG\u0003WR\u0003VWRUH\u0003HDFK\u0003WKUHDG\u01e2V\u0003UXQQLQJ\u0003VXP\u0011\u00036RRQ\u0003ZH\u0003ZLOO\u0003VHH\u0003 why we GR\u0003WKLV\u000f\u0003EXW\u0003IRU\u0003QRZ\u0003ZH\u0003ZLOO\u0003VLPSO\\\u0003H[DPLQH\u0003WKH\u0003PHFKDQLFV\u0003E\\\u0003ZKLFK\u0003ZH\u0003DFFRP - SOLVK\u0003LW\u0011\u0003,W\u0003LV\u0003WULYLDO\u0003WR\u0003GHFODUH\u0003D\u0003YDULDEOH\u0003WR\u0003UHVLGH\u0003LQ\u0003VKDUHG\u0003PHPRU\\\u000f\u0003DQG\u0003LW\u0003LV\u0003 LGHQWLFDO\u0003WR\u0003WKH\u0003PHDQV\u0003E\\\u0003ZKLFK\u0003\\RX\u0003GHFODUH\u0003D\u0003YDULDEOH\u0003DV\u0003 static\u0003RU\u0003volatile LQ\u0003VWDQGDUG\u0003& __shared__ float cache[threadsPerBlock]; :H\u0003GHFODUH\u0003WKH\u0003DUUD\\\u0003RI\u0003VL]H\u0003 threadsPerBlock \u0003VR\u0003HDFK\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003 KDV\u0003D\u0003SODFH\u0003WR\u0003VWRUH\u0003LWV\u0003WHPSRUDU\\\u0003UHVXOW\u0011\u00035HFDOO\u0003WKDW\u0003ZKHQ\u0003ZH\u0003KDYH\u0003DOORFDWHG\u0003 PHPRU\\\u0003JOREDOO\\\u000f\u0003ZH\u0003DOORFDWHG\u0003HQRXJK\u0003IRU\u0003HYHU\\\u0003WKUHDG\u0003WKDW\u0003UXQV\u0003WKH\u0003NHUQHO\u000f\u0003RU\u0003 threadsPerBlock \u0003WLPHV\u0003WKH\u0003WRWDO\u0003QXPEHU\u0003RI\u0003EORFNV\u0011\u0003%XW\u0003VLQFH\u0003WKH\u0003FRPSLOHU\u0003 ZLOO\u0003FUHDWH\u0003D\u0003FRS\\\u0003RI\u0003WKH\u0003VKDUHG\u0003YDULDEOHV\u0003IRU\u0003HDFK\u0003EORFN\u000f\u0003ZH\u0003QHHG\u0003WR\u0003DOORFDWH\u0003RQO\\\u0003 HQRXJK\u0003PHPRU\\\u0003VXFK\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003KDV\u0003DQ\u0003HQWU\\\u0011 $IWHU\u0003DOORFDWLQJ\u0003WKH\u0003VKDUHG\u0003PHPRU\\\u000f\u0003ZH\u0003FRPSXWH\u0003RXU\u0003GDWD\u0003LQGLFHV\u0003PXFK\u0003OLNH\u0003ZH\u0003 KDYH\u0003LQ\u0003WKH\u0003SDVW int tid = threadIdx.x + blockIdx.x * blockDim.x; int cacheIndex = threadIdx.x; 7KH\u0003FRPSXWDWLRQ\u0003IRU\u0003WKH\u0003YDULDEOH\u0003 tid\u0003VKRXOG\u0003ORRN\u0003IDPLOLDU\u0003E\\\u0003QRZ \u0003ZH\u0003DUH\u0003MXVW\u0003 FRPELQLQJ\u0003WKH\u0003EORFN\u0003DQG\u0003WKUHDG\u0003LQGLFHV\u0003WR\u0003JHW\u0003D\u0003JOREDO\u0003RIIVHW\u0003LQWR\u0003RXU\u0003LQSXW\u0003DUUD\\V\u0011\u0003 7KH\u0003RIIVHW\u0003LQWR\u0003RXU\u0003VKDUHG\u0003PHPRU\\\u0003FDFKH\u0003LV\u0003VLPSO\\\u0003RXU\u0003WKUHDG\u0003LQGH[\u0011\u0003$JDLQ\u000f\u0003ZH\u0003 GRQ\u01e2W\u0003QHHG\u0003WR\u0003LQFRUSRUDWH\u0003RXU\u0003EORFN\u0003LQGH[\u0003LQWR\u0003WKLV\u0003RIIVHW\u0003EHFDXVH\u0003HDFK\u0003EORFN\u0003KDV\u0003 LWV\u0003RZQ\u0003SULYDWH\u0003FRS\\\u0003RI\u0003WKLV\u0003VKDUHG\u0003PHPRU\\\u0011\u0003 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /seven.lf/eight.lf)LQDOO\\\u000f\u0003ZH\u0003FOHDU\u0003RXU\u0003VKDUHG\u0003PHPRU\\\u0003EXIIHU\u0003VR\u0003WKDW\u0003ODWHU\u0003ZH\u0003ZLOO\u0003EH\u0003DEOH\u0003WR\u0003EOLQGO\\\u0003 VXP\u0003WKH\u0003HQWLUH\u0003DUUD\\\u0003ZLWKRXW\u0003ZRUU\\LQJ\u0003ZKHWKHU\u0003D\u0003SDUWLFXODU\u0003HQWU\\\u0003KDV\u0003YDOLG\u0003GDWD\u0003 VWRUHG\u0003WKHUH // set the cache values cache[cacheIndex] = temp; ,W\u0003ZLOO\u0003EH\u0003SRVVLEOH\u0003WKDW\u0003QRW\u0003HYHU\\\u0003HQWU\\\u0003ZLOO\u0003EH\u0003XVHG\u0003LI\u0003WKH\u0003VL]H\u0003RI\u0003WKH\u0003LQSXW\u0003YHFWRUV\u0003 LV\u0003QRW\u0003D\u0003PXOWLSOH\u0003RI\u0003WKH\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003SHU\u0003EORFN\u0011\u0003,Q\u0003WKLV\u0003FDVH\u000f\u0003WKH\u0003ODVW\u0003EORFN\u0003 ZLOO\u0003KDYH\u0003VRPH\u0003WKUHDGV\u0003WKDW\u0003GR\u0003QRWKLQJ\u0003DQG\u0003WKHUHIRUH\u0003GR\u0003QRW\u0003ZULWH\u0003YDOXHV\u0011 (DFK\u0003WKUHDG\u0003FRPSXWHV\u0003D\u0003UXQQLQJ\u0003VXP\u0003RI\u0003WKH\u0003SURGXFW\u0003RI\u0003FRUUHVSRQGLQJ\u0003HQWULHV\u0003LQ\u0003 a DQG\u0003b\u0011\u0003$IWHU\u0003UHDFKLQJ\u0003WKH\u0003HQG\u0003RI\u0003WKH\u0003DUUD\\\u000f\u0003HDFK\u0003WKUHDG\u0003VWRUHV\u0003LWV\u0003WHPSRUDU\\\u0003VXP\u0003 LQWR\u0003WKH\u0003VKDUHG\u0003EXIIHU\u0011 float temp = 0; while (tid < N) { temp += a[tid] * b[tid]; tid += blockDim.x * gridDim.x; } // set the cache values cache[cacheIndex] = temp; $W\u0003WKLV\u0003SRLQW\u0003LQ\u0003WKH\u0003DOJRULWKP\u000f\u0003ZH\u0003QHHG\u0003WR\u0003VXP\u0003DOO\u0003WKH\u0003WHPSRUDU\\\u0003YDOXHV\u0003ZH\u01e2YH\u0003 SODFHG\u0003LQ\u0003WKH\u0003FDFKH\u0011\u00037R\u0003GR\u0003WKLV\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003VRPH\u0003RI\u0003WKH\u0003WKUHDGV\u0003WR\u0003UHDG\u0003WKH\u0003 YDOXHV\u0003WKDW\u0003KDYH\u0003EHHQ\u0003VWRUHG\u0003WKHUH\u0011\u0003+RZHYHU\u000f\u0003DV\u0003ZH\u0003PHQWLRQHG\u000f\u0003WKLV\u0003LV\u0003D\u0003SRWHQ - WLDOO\\\u0003GDQJHURXV\u0003RSHUDWLRQ\u0011\u0003:H\u0003QHHG\u0003D\u0003PHWKRG\u0003WR\u0003JXDUDQWHH\u0003WKDW\u0003DOO\u0003RI\u0003WKHVH\u0003 ZULWHV\u0003WR\u0003WKH\u0003VKDUHG\u0003DUUD\\\u0003 cache[]\u0003FRPSOHWH\u0003EHIRUH\u0003DQ\\RQH\u0003WULHV\u0003WR\u0003UHDG\u0003IURP\u0003 WKLV\u0003EXIIHU\u0011\u0003)RUWXQDWHO\\\u000f\u0003VXFK\u0003D\u0003PHWKRG\u0003H[LVWV // synchronize threads in this block __syncthreads(); 7KLV\u0003FDOO\u0003JXDUDQWHHV\u0003WKDW\u0003HYHU\\\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003KDV\u0003FRPSOHWHG\u0003LQVWUXFWLRQV\u0003 SULRU\u0003WR\u0003WKH\u0003 __syncthreads() \u0003EHIRUH\u0003WKH\u0003KDUGZDUH\u0003ZLOO\u0003H[HFXWH\u0003WKH\u0003QH[W\u0003 Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /seven.lf/nine.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 LQVWUXFWLRQ\u0003RQ\u0003DQ\\\u0003WKUHDG\u0011\u00037KLV\u0003LV\u0003H[DFWO\\\u0003ZKDW\u0003ZH\u0003QHHG\u0004\u0003:H\u0003QRZ\u0003NQRZ\u0003WKDW\u0003ZKHQ\u0003 WKH\u0003\u020cUVW\u0003WKUHDG\u0003H[HFXWHV\u0003WKH\u0003\u020cUVW\u0003LQVWUXFWLRQ\u0003DIWHU\u0003RXU\u0003 __syncthreads() , HYHU\\\u0003RWKHU\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003KDV\u0003DOVR\u0003\u020cQLVKHG\u0003H[HFXWLQJ\u0003XS\u0003WR\u0003WKH\u0003 __syncthreads() \u0011 1RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003JXDUDQWHHG\u0003WKDW\u0003RXU\u0003WHPSRUDU\\\u0003FDFKH\u0003KDV\u0003EHHQ\u0003\u020cOOHG\u000f\u0003ZH\u0003 FDQ\u0003VXP\u0003WKH\u0003YDOXHV\u0003LQ\u0003LW\u0011\u0003:H\u0003FDOO\u0003WKH\u0003JHQHUDO\u0003SURFHVV\u0003RI\u0003WDNLQJ\u0003DQ\u0003LQSXW\u0003DUUD\\\u0003",
    "in this block __syncthreads(); 7KLV\u0003FDOO\u0003JXDUDQWHHV\u0003WKDW\u0003HYHU\\\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003KDV\u0003FRPSOHWHG\u0003LQVWUXFWLRQV\u0003 SULRU\u0003WR\u0003WKH\u0003 __syncthreads() \u0003EHIRUH\u0003WKH\u0003KDUGZDUH\u0003ZLOO\u0003H[HFXWH\u0003WKH\u0003QH[W\u0003 Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /seven.lf/nine.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 LQVWUXFWLRQ\u0003RQ\u0003DQ\\\u0003WKUHDG\u0011\u00037KLV\u0003LV\u0003H[DFWO\\\u0003ZKDW\u0003ZH\u0003QHHG\u0004\u0003:H\u0003QRZ\u0003NQRZ\u0003WKDW\u0003ZKHQ\u0003 WKH\u0003\u020cUVW\u0003WKUHDG\u0003H[HFXWHV\u0003WKH\u0003\u020cUVW\u0003LQVWUXFWLRQ\u0003DIWHU\u0003RXU\u0003 __syncthreads() , HYHU\\\u0003RWKHU\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003KDV\u0003DOVR\u0003\u020cQLVKHG\u0003H[HFXWLQJ\u0003XS\u0003WR\u0003WKH\u0003 __syncthreads() \u0011 1RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003JXDUDQWHHG\u0003WKDW\u0003RXU\u0003WHPSRUDU\\\u0003FDFKH\u0003KDV\u0003EHHQ\u0003\u020cOOHG\u000f\u0003ZH\u0003 FDQ\u0003VXP\u0003WKH\u0003YDOXHV\u0003LQ\u0003LW\u0011\u0003:H\u0003FDOO\u0003WKH\u0003JHQHUDO\u0003SURFHVV\u0003RI\u0003WDNLQJ\u0003DQ\u0003LQSXW\u0003DUUD\\\u0003 DQG\u0003SHUIRUPLQJ\u0003VRPH\u0003FRPSXWDWLRQV\u0003WKDW\u0003SURGXFH\u0003D\u0003VPDOOHU\u0003DUUD\\\u0003RI\u0003UHVXOWV\u0003D\u0003 reduction \u0011\u00035HGXFWLRQV\u0003DULVH\u0003RIWHQ\u0003LQ\u0003SDUDOOHO\u0003FRPSXWLQJ\u000f\u0003ZKLFK\u0003OHDGV\u0003WR\u0003WKH\u0003GHVLUH\u0003 WR\u0003JLYH\u0003WKHP\u0003D\u0003QDPH\u0011\u0003 7KH\u0003QD\u00b1YH\u0003ZD\\\u0003WR\u0003DFFRPSOLVK\u0003WKLV\u0003UHGXFWLRQ\u0003ZRXOG\u0003EH\u0003KDYLQJ\u0003RQH\u0003WKUHDG\u0003LWHUDWH\u0003 RYHU\u0003WKH\u0003VKDUHG\u0003PHPRU\\\u0003DQG\u0003FDOFXODWH\u0003D\u0003UXQQLQJ\u0003VXP\u0011\u00037KLV\u0003ZLOO\u0003WDNH\u0003XV\u0003WLPH\u0003 SURSRUWLRQDO\u0003WR\u0003WKH\u0003OHQJWK\u0003RI\u0003WKH\u0003DUUD\\\u0011\u0003+RZHYHU\u000f\u0003VLQFH\u0003ZH\u0003KDYH\u0003KXQGUHGV\u0003RI\u0003 WKUHDGV\u0003DYDLODEOH\u0003WR\u0003GR\u0003RXU\u0003ZRUN\u000f\u0003ZH\u0003FDQ\u0003GR\u0003WKLV\u0003UHGXFWLRQ\u0003LQ\u0003SDUDOOHO\u0003DQG\u0003WDNH\u0003 WLPH\u0003WKDW\u0003LV\u0003SURSRUWLRQDO\u0003WR\u0003WKH\u0003ORJDULWKP\u0003RI\u0003WKH\u0003OHQJWK\u0003RI\u0003WKH\u0003DUUD\\\u0011\u0003$W\u0003\u020cUVW\u000f\u0003WKH\u0003 IROORZLQJ\u0003FRGH\u0003ZLOO\u0003ORRN\u0003FRQYROXWHG \u0003ZH\u01e2OO\u0003EUHDN\u0003LW\u0003GRZQ\u0003LQ\u0003D\u0003PRPHQW\u0011 7KH\u0003JHQHUDO\u0003LGHD\u0003LV\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003ZLOO\u0003DGG\u0003WZR\u0003RI\u0003WKH\u0003YDOXHV\u0003LQ\u0003 cache[]\u0003DQG\u0003 VWRUH\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003 cache[]\u0011\u00036LQFH\u0003HDFK\u0003WKUHDG\u0003FRPELQHV\u0003WZR\u0003HQWULHV\u0003LQWR\u0003 RQH\u000f\u0003ZH\u0003FRPSOHWH\u0003WKLV\u0003VWHS\u0003ZLWK\u0003KDOI\u0003DV\u0003PDQ\\\u0003HQWULHV\u0003DV\u0003ZH\u0003VWDUWHG\u0003ZLWK\u0011\u0003,Q\u0003WKH\u0003 QH[W\u0003VWHS\u000f\u0003ZH\u0003GR\u0003WKH\u0003VDPH\u0003WKLQJ\u0003RQ\u0003WKH\u0003UHPDLQLQJ\u0003KDOI\u0011\u0003:H\u0003FRQWLQXH\u0003LQ\u0003WKLV\u0003IDVKLRQ\u0003 IRU\u0003log2(threadsPerBlock) \u0003VWHSV\u0003XQWLO\u0003ZH\u0003KDYH\u0003WKH\u0003VXP\u0003RI\u0003HYHU\\\u0003HQWU\\\u0003LQ\u0003 cache[]\u0011\u0003)RU\u0003RXU\u0003H[DPSOH\u000f\u0003ZH\u01e2UH\u0003XVLQJ\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003SHU\u0003EORFN\u000f\u0003VR\u0003LW\u0003WDNHV\u0003\u001b\u0003LWHUD - WLRQV\u0003RI\u0003WKLV\u0003SURFHVV\u0003WR\u0003UHGXFH\u0003WKH\u0003\u0015\u0018\u0019\u0003HQWULHV\u0003LQ\u0003 cache[]\u0003WR\u0003D\u0003VLQJOH\u0003VXP\u0011 7KH\u0003FRGH\u0003IRU\u0003WKLV\u0003IROORZV // for reductions, threadsPerBlock must be a power of 2 // because of the following code int i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); i /= 2; } Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /eight.lf/zero.lfFigure 5.4 2QH\u0003VWHS\u0003RI\u0003D\u0003VXPPDWLRQ\u0003UHGXFWLRQ )RU\u0003WKH\u0003\u020cUVW\u0003VWHS\u000f\u0003ZH\u0003VWDUW\u0003ZLWK\u0003 i\u0003DV\u0003KDOI\u0003WKH\u0003QXPEHU\u0003RI\u0003 threadsPerBlock \u0011\u0003 :H\u0003RQO\\\u0003ZDQW\u0003WKH\u0003WKUHDGV\u0003ZLWK\u0003LQGLFHV\u0003OHVV\u0003WKDQ\u0003WKLV\u0003YDOXH\u0003WR\u0003GR\u0003DQ\\\u0003ZRUN\u000f\u0003VR\u0003ZH\u0003 FRQGLWLRQDOO\\\u0003DGG\u0003WZR\u0003HQWULHV\u0003RI\u0003 cache[]\u0003LI\u0003WKH\u0003WKUHDG\u01e2V\u0003LQGH[\u0003LV\u0003OHVV\u0003WKDQ\u0003 i\u0011\u0003:H\u0003 SURWHFW\u0003RXU\u0003DGGLWLRQ\u0003ZLWKLQ\u0003DQ\u0003 if(cacheIndex < i) \u0003EORFN\u0011\u0003(DFK\u0003WKUHDG\u0003ZLOO\u0003 WDNH\u0003WKH\u0003HQWU\\\u0003DW\u0003LWV\u0003LQGH[\u0003LQ\u0003 cache[]\u000f\u0003DGG\u0003LW\u0003WR\u0003WKH\u0003HQWU\\\u0003DW\u0003LWV\u0003LQGH[\u0003RIIVHW\u0003E\\\u0003 i, DQG\u0003VWRUH\u0003WKLV\u0003VXP\u0003EDFN\u0003WR\u0003 cache[]\u0011\u0003 6XSSRVH\u0003WKHUH\u0003ZHUH\u0003HLJKW\u0003HQWULHV\u0003LQ\u0003 cache[]\u0003DQG\u000f\u0003DV\u0003D\u0003UHVXOW\u000f\u0003 i\u0003KDG\u0003WKH\u0003YDOXH\u0003\u0017\u0011\u0003 2QH\u0003VWHS\u0003RI\u0003WKH\u0003UHGXFWLRQ\u0003ZRXOG\u0003ORRN\u0003OLNH\u0003)LJXUH\u0003\u0018\u0011\u0017\u0011 $IWHU\u0003ZH\u0003KDYH\u0003FRPSOHWHG\u0003D\u0003VWHS\u000f\u0003ZH\u0003KDYH\u0003WKH\u0003VDPH\u0003UHVWULFWLRQ\u0003ZH\u0003GLG\u0003DIWHU\u0003 FRPSXWLQJ\u0003DOO\u0003WKH\u0003SDLUZLVH\u0003SURGXFWV\u0011\u0003%HIRUH\u0003ZH\u0003FDQ\u0003UHDG\u0003WKH\u0003YDOXHV\u0003ZH\u0003MXVW\u0003VWRUHG\u0003 LQ\u0003cache[]\u000f\u0003ZH\u0003QHHG\u0003WR\u0003HQVXUH\u0003WKDW\u0003HYHU\\\u0003WKUHDG\u0003WKDW\u0003QHHGV\u0003WR\u0003ZULWH\u0003WR\u0003 cache[] KDV\u0003DOUHDG\\\u0003GRQH\u0003VR\u0011\u00037KH\u0003 __syncthreads() \u0003DIWHU\u0003WKH\u0003DVVLJQPHQW\u0003HQVXUHV\u0003WKLV\u0003 FRQGLWLRQ\u0003LV\u0003PHW\u0011 $IWHU\u0003WHUPLQDWLRQ\u0003RI\u0003WKLV\u0003 while()\u0003ORRS\u000f\u0003HDFK\u0003EORFN\u0003KDV\u0003EXW\u0003D\u0003VLQJOH\u0003QXPEHU\u0003 UHPDLQLQJ\u0011\u00037KLV\u0003QXPEHU\u0003LV\u0003VLWWLQJ\u0003LQ\u0003WKH\u0003\u020cUVW\u0003HQWU\\\u0003RI\u0003 cache[]\u0003DQG\u0003LV\u0003WKH\u0003VXP\u0003 RI\u0003HYHU\\\u0003SDLUZLVH\u0003SURGXFW\u0003WKH\u0003WKUHDGV\u0003LQ\u0003WKDW\u0003EORFN\u0003FRPSXWHG\u0011\u0003:H\u0003WKHQ\u0003VWRUH\u0003WKLV\u0003 VLQJOH\u0003YDOXH\u0003WR\u0003JOREDO\u0003PHPRU\\\u0003DQG\u0003HQG\u0003RXU\u0003NHUQHO if (cacheIndex == 0) c[blockIdx.x] = cache[0]; } Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /eight.lf/one.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 :K\\\u0003GR\u0003ZH\u0003GR\u0003WKLV\u0003JOREDO\u0003VWRUH\u0003RQO\\\u0003IRU\u0003WKH\u0003WKUHDG\u0003ZLWK\u0003 cacheIndex == 0 \"\u0003:HOO\u000f\u0003 VLQFH\u0003WKHUH\u0003LV\u0003RQO\\\u0003RQH\u0003QXPEHU\u0003WKDW\u0003QHHGV\u0003ZULWLQJ\u0003WR\u0003JOREDO\u0003PHPRU\\\u000f\u0003RQO\\\u0003D\u0003VLQJOH\u0003 WKUHDG\u0003QHHGV\u0003WR\u0003SHUIRUP\u0003WKLV\u0003RSHUDWLRQ\u0011\u0003&RQFHLYDEO\\\u000f\u0003HYHU\\\u0003WKUHDG\u0003FRXOG\u0003SHUIRUP\u0003 WKLV\u0003ZULWH\u0003DQG\u0003WKH\u0003SURJUDP\u0003ZRXOG\u0003VWLOO\u0003ZRUN\u000f\u0003EXW\u0003GRLQJ\u0003VR\u0003ZRXOG\u0003FUHDWH\u0003DQ\u0003XQQHF - HVVDULO\\\u0003ODUJH\u0003DPRXQW\u0003RI\u0003PHPRU\\\u0003WUDI\u020cF\u0003WR\u0003ZULWH\u0003D\u0003VLQJOH\u0003YDOXH\u0011\u0003)RU\u0003VLPSOLFLW\\\u000f\u0003 ZH\u0003FKRVH\u0003WKH\u0003WKUHDG\u0003ZLWK\u0003LQGH[\u0003\u0013\u000f\u0003WKRXJK\u0003\\RX\u0003FRXOG\u0003FRQFHLYDEO\\\u0003KDYH\u0003FKRVHQ\u0003DQ\\\u0003 cacheIndex \u0003WR\u0003ZULWH cache[0 @\u0003WR\u0003JOREDO\u0003PHPRU\\\u0011\u0003)LQDOO\\\u000f\u0003VLQFH\u0003HDFK\u0003EORFN\u0003 ZLOO\u0003ZULWH\u0003H[DFWO\\\u0003RQH\u0003YDOXH\u0003WR\u0003WKH\u0003JOREDO\u0003DUUD\\\u0003 c[]\u000f\u0003ZH\u0003FDQ\u0003VLPSO\\\u0003LQGH[\u0003LW\u0003E\\\u0003 blockIdx \u0011 :H\u0003DUH\u0003OHIW\u0003ZLWK\u0003DQ\u0003DUUD\\\u0003 c[]\u000f\u0003HDFK\u0003HQWU\\\u0003RI\u0003ZKLFK\u0003FRQWDLQV\u0003WKH\u0003VXP\u0003SURGXFHG\u0003E\\\u0003 RQH\u0003RI\u0003WKH\u0003SDUDOOHO\u0003EORFNV\u0011\u00037KH\u0003ODVW\u0003VWHS\u0003RI\u0003WKH\u0003GRW\u0003SURGXFW\u0003LV\u0003WR\u0003VXP\u0003WKH\u0003HQWULHV\u0003 RI\u0003c[]\u0011\u0003(YHQ\u0003WKRXJK\u0003WKH\u0003GRW\u0003SURGXFW\u0003LV\u0003QRW\u0003IXOO\\\u0003FRPSXWHG\u000f\u0003ZH\u0003H[LW\u0003WKH\u0003NHUQHO\u0003DQG\u0003 UHWXUQ\u0003FRQWURO\u0003WR\u0003WKH\u0003KRVW\u0003DW\u0003WKLV\u0003SRLQW\u0011\u0003%XW\u0003ZK\\\u0003GR\u0003ZH\u0003UHWXUQ\u0003WR\u0003WKH\u0003KRVW\u0003EHIRUH\u0003 WKH\u0003FRPSXWDWLRQ\u0003LV\u0003FRPSOHWH\"\u0003 3UHYLRXVO\\\u000f\u0003ZH\u0003UHIHUUHG\u0003WR\u0003DQ\u0003RSHUDWLRQ\u0003OLNH\u0003D\u0003GRW\u0003SURGXFW\u0003DV\u0003D\u0003 reduction \u0011\u00035RXJKO\\\u0003 VSHDNLQJ\u000f\u0003WKLV\u0003LV\u0003EHFDXVH\u0003ZH\u0003SURGXFH\u0003IHZHU\u0003RXWSXW\u0003GDWD\u0003HOHPHQWV\u0003WKDQ\u0003ZH\u0003LQSXW\u0011\u0003 ,Q\u0003WKH\u0003FDVH\u0003RI\u0003D\u0003GRW\u0003SURGXFW\u000f\u0003ZH\u0003DOZD\\V\u0003SURGXFH\u0003H[DFWO\\\u0003RQH\u0003RXWSXW\u000f\u0003UHJDUGOHVV\u0003 RI\u0003WKH\u0003VL]H\u0003RI\u0003RXU\u0003LQSXW\u0011\u0003,W\u0003WXUQV\u0003RXW\u0003WKDW\u0003D\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003PDFKLQH\u0003OLNH\u0003D\u0003*38\u0003 WHQGV\u0003WR\u0003ZDVWH\u0003LWV\u0003UHVRXUFHV\u0003ZKHQ\u0003SHUIRUPLQJ\u0003WKH\u0003ODVW\u0003VWHSV\u0003RI\u0003D\u0003UHGXFWLRQ\u000f\u0003VLQFH\u0003 WKH\u0003VL]H\u0003RI\u0003WKH\u0003GDWD\u0003VHW\u0003LV\u0003VR\u0003VPDOO\u0003DW\u0003WKDW\u0003SRLQW \u0003LW\u0003LV\u0003KDUG\u0003WR\u0003XWLOL]H\u0003\u0017\u001b\u0013\u0003DULWKPHWLF\u0003 XQLWV\u0003WR\u0003DGG\u0003\u0016\u0015\u0003QXPEHUV\u0004\u0003 )RU\u0003WKLV\u0003UHDVRQ\u000f\u0003ZH\u0003UHWXUQ\u0003FRQWURO\u0003WR\u0003WKH\u0003KRVW\u0003DQG\u0003OHW\u0003WKH\u0003&38\u0003\u020cQLVK\u0003WKH\u0003\u020cQDO\u0003VWHS\u0003 RI\u0003WKH\u0003DGGLWLRQ\u000f\u0003VXPPLQJ\u0003WKH\u0003DUUD\\\u0003 c[]\u0011\u0003,Q\u0003D\u0003ODUJHU\u0003DSSOLFDWLRQ\u000f\u0003WKH\u0003*38\u0003ZRXOG\u0003 QRZ\u0003EH\u0003IUHH\u0003WR\u0003VWDUW\u0003DQRWKHU\u0003GRW\u0003SURGXFW\u0003RU\u0003ZRUN\u0003RQ\u0003DQRWKHU\u0003ODUJH\u0003FRPSXWDWLRQ\u0011\u0003 +RZHYHU\u000f\u0003LQ\u0003WKLV\u0003H[DPSOH\u000f\u0003ZH\u0003DUH\u0003GRQH\u0003ZLWK\u0003WKH\u0003*38\u0011 ,Q\u0003H[SODLQLQJ\u0003WKLV\u0003H[DPSOH\u000f\u0003ZH\u0003EURNH\u0003ZLWK\u0003WUDGLWLRQ\u0003DQG\u0003MXPSHG\u0003ULJKW\u0003LQWR\u0003WKH\u0003 DFWXDO\u0003NHUQHO\u0003FRPSXWDWLRQ\u0011\u0003:H\u0003KRSH\u0003\\RX\u0003ZLOO\u0003KDYH\u0003QR\u0003WURXEOH\u0003XQGHUVWDQGLQJ\u0003WKH\u0003 ERG\\\u0003RI\u0003main()\u0003XS\u0003WR\u0003WKH\u0003NHUQHO\u0003FDOO\u000f\u0003VLQFH\u0003LW\u0003LV\u0003RYHUZKHOPLQJO\\\u0003VLPLODU\u0003WR\u0003ZKDW\u0003 ZH\u0003KDYH\u0003VKRZQ\u0003EHIRUH\u0011 const int blocksPerGrid = imin( 32, (N+threadsPerBlock-1) / threadsPerBlock ); int main( void ) { float *a, *b, c, *partial_c; float *dev_a, *dev_b, *dev_partial_c; Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /eight.lf/two.lf // allocate memory on the CPU side a = new float [N]; b = new float [N]; partial_c = new float[blocksPerGrid]; // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, N* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_partial_c, blocksPerGrid* sizeof(float) ) ); // fill in the host memory with data for (int i=0; i<N; i++) { a[i] = i; b[i] = i*2; } // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, N* sizeof(float), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, N* sizeof(float), cudaMemcpyHostToDevice ) ); dot<<<blocksPerGrid,threadsPerBlock>>>( dev_a, dev_b, dev_partial_c ); 7R\u0003DYRLG\u0003\\RX\u0003SDVVLQJ\u0003RXW\u0003IURP\u0003ERUHGRP\u000f\u0003ZH\u0003ZLOO\u0003TXLFNO\\\u0003VXPPDUL]H\u0003WKLV\u0003FRGH $OORFDWH\u0003KRVW\u0003DQG\u0003GHYLFH\u0003PHPRU\\\u0003IRU\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003DUUD\\V\u0011\u0014\u0011\u0003 )LOO\u0003LQSXW\u0003DUUD\\V\u0003\u0015\u0011\u0003 a[]\u0003DQG\u0003b[]\u000f\u0003DQG\u0003WKHQ\u0003FRS\\\u0003WKHVH\u0003WR\u0003WKH\u0003GHYLFH\u0003XVLQJ\u0003 cudaMemcpy() \u0011 &DOO\u0003RXU\u0003GRW\u0003SURGXFW\u0003NHUQHO\u0003XVLQJ\u0003VRPH\u0003SUHGHWHUPLQHG\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003\u0016\u0011\u0003 SHU\u0003EORFN\u0003DQG\u0003EORFNV\u0003SHU\u0003JULG\u0011 Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /eight.lf/three.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 'HVSLWH\u0003PRVW\u0003RI\u0003WKLV\u0003EHLQJ\u0003FRPPRQSODFH\u0003WR\u0003\\RX\u0003QRZ\u000f\u0003LW\u0003LV\u0003ZRUWK\u0003H[DPLQLQJ\u0003WKH\u0003 FRPSXWDWLRQ\u0003IRU\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003ZH\u0003ODXQFK\u0011\u0003:H\u0003GLVFXVVHG\u0003KRZ\u0003WKH\u0003GRW\u0003 SURGXFW\u0003LV\u0003D\u0003UHGXFWLRQ\u0003DQG\u0003KRZ\u0003HDFK\u0003EORFN\u0003ODXQFKHG\u0003ZLOO\u0003FRPSXWH\u0003D\u0003SDUWLDO\u0003VXP\u0011\u0003 7KH\u0003OHQJWK\u0003RI\u0003WKLV\u0003OLVW\u0003RI\u0003SDUWLDO\u0003VXPV\u0003VKRXOG\u0003EH\u0003VRPHWKLQJ\u0003PDQDJHDEO\\\u0003VPDOO\u0003 IRU\u0003WKH\u0003&38\u0003\\HW\u0003ODUJH\u0003HQRXJK\u0003VXFK\u0003WKDW\u0003ZH\u0003KDYH\u0003HQRXJK\u0003EORFNV\u0003LQ\u0003\u020dLJKW\u0003WR\u0003NHHS\u0003 HYHQ\u0003WKH\u0003IDVWHVW\u0003*38V\u0003EXV\\\u0011\u0003:H\u0003KDYH\u0003FKRVHQ\u0003\u0016\u0015\u0003EORFNV\u000f\u0003DOWKRXJK\u0003WKLV\u0003LV\u0003D\u0003FDVH\u0003 ZKHUH\u0003\\RX\u0003PD\\\u0003QRWLFH\u0003EHWWHU\u0003RU\u0003ZRUVH\u0003SHUIRUPDQFH\u0003IRU\u0003RWKHU\u0003FKRLFHV\u000f\u0003HVSHFLDOO\\\u0003 GHSHQGLQJ\u0003RQ\u0003WKH\u0003UHODWLYH\u0003VSHHGV\u0003RI\u0003\\RXU\u0003&38\u0003DQG\u0003*38\u0011\u0003 %XW\u0003ZKDW\u0003LI\u0003ZH\u0003DUH\u0003JLYHQ\u0003D\u0003YHU\\\u0003VKRUW\u0003OLVW\u0003DQG\u0003\u0016\u0015\u0003EORFNV\u0003RI\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003DSLHFH\u0003 LV\u0003WRR\u0003PDQ\\\"\u0003,I\u0003ZH\u0003KDYH\u0003 N\u0003GDWD\u0003HOHPHQWV\u000f\u0003ZH\u0003QHHG\u0003RQO\\\u0003 N\u0003WKUHDGV\u0003LQ\u0003RUGHU\u0003 WR\u0003FRPSXWH\u0003RXU\u0003GRW\u0003SURGXFW\u0011\u00036R\u0003LQ\u0003WKLV\u0003FDVH\u000f\u0003ZH\u0003QHHG\u0003WKH\u0003VPDOOHVW\u0003PXOWLSOH\u0003 RI\u0003threadsPerBlock \u0003WKDW\u0003LV\u0003JUHDWHU\u0003WKDQ\u0003RU\u0003HTXDO\u0003WR\u0003 N\u0011\u0003:H\u0003KDYH\u0003VHHQ\u0003WKLV\u0003 RQFH\u0003EHIRUH\u0003ZKHQ\u0003ZH\u0003ZHUH\u0003DGGLQJ\u0003YHFWRUV\u0011\u0003,Q\u0003WKLV\u0003FDVH\u000f\u0003ZH\u0003JHW\u0003WKH\u0003VPDOOHVW\u0003 PXOWLSOH\u0003RI\u0003 threadsPerBlock \u0003WKDW\u0003LV\u0003JUHDWHU\u0003WKDQ\u0003RU\u0003HTXDO\u0003WR\u0003 N\u0003E\\\u0003FRPSXWLQJ\u0003 (N+(threadsPerBlock-1)) / threadsPerBlock \u0011\u0003$V\u0003\\RX\u0003PD\\\u0003EH\u0003DEOH\u0003 WR\u0003WHOO\u000f\u0003WKLV\u0003LV\u0003DFWXDOO\\\u0003D\u0003IDLUO\\\u0003FRPPRQ\u0003WULFN\u0003LQ\u0003LQWHJHU\u0003PDWK\u000f\u0003VR\u0003LW\u0003LV\u0003ZRUWK\u0003 GLJHVWLQJ\u0003WKLV\u0003HYHQ\u0003LI\u0003\\RX\u0003VSHQG\u0003PRVW\u0003RI\u0003\\RXU\u0003WLPH\u0003ZRUNLQJ\u0003RXWVLGH\u0003WKH\u0003 &8'$\u0003&\u0003UHDOP\u0011 7KHUHIRUH\u000f\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003ZH\u0003ODXQFK\u0003VKRXOG\u0003EH\u0003HLWKHU\u0003\u0016\u0015\u0003RU\u0003 (N+(threadsPerBlock-1)) / threadsPerBlock \u000f\u0003ZKLFKHYHU\u0003YDOXH\u0003LV\u0003 VPDOOHU\u0011 const int blocksPerGrid = imin( 32, (N+threadsPerBlock-1) / threadsPerBlock ); 1RZ\u0003LW\u0003VKRXOG\u0003EH\u0003FOHDU\u0003KRZ\u0003ZH\u0003DUULYH\u0003DW\u0003WKH\u0003FRGH\u0003LQ\u0003 main()\u0011\u0003$IWHU\u0003WKH\u0003NHUQHO\u0003 \u020cQLVKHV\u000f\u0003ZH\u0003VWLOO\u0003KDYH\u0003WR\u0003VXP\u0003WKH\u0003UHVXOW\u0011\u0003%XW\u0003OLNH\u0003WKH\u0003ZD\\\u0003ZH\u0003FRS\\\u0003RXU\u0003LQSXW\u0003WR\u0003 WKH\u0003*38\u0003EHIRUH\u0003ZH\u0003ODXQFK\u0003D\u0003NHUQHO\u000f\u0003ZH\u0003QHHG\u0003WR\u0003FRS\\\u0003RXU\u0003RXWSXW\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0003 EHIRUH\u0003ZH\u0003FRQWLQXH\u0003ZRUNLQJ\u0003ZLWK\u0003LW\u0011\u00036R\u0003DIWHU\u0003WKH\u0003NHUQHO\u0003\u020cQLVKHV\u000f\u0003ZH\u0003FRS\\\u0003EDFN\u0003WKH\u0003 OLVW\u0003RI\u0003SDUWLDO\u0003VXPV\u0003DQG\u0003FRPSOHWH\u0003WKH\u0003VXP\u0003RQ\u0003WKH\u0003&38\u0011 // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid*sizeof(float), cudaMemcpyDeviceToHost ) ); Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /eight.lf/four.lf // finish up on the CPU side c = 0; for",
    "int blocksPerGrid = imin( 32, (N+threadsPerBlock-1) / threadsPerBlock ); 1RZ\u0003LW\u0003VKRXOG\u0003EH\u0003FOHDU\u0003KRZ\u0003ZH\u0003DUULYH\u0003DW\u0003WKH\u0003FRGH\u0003LQ\u0003 main()\u0011\u0003$IWHU\u0003WKH\u0003NHUQHO\u0003 \u020cQLVKHV\u000f\u0003ZH\u0003VWLOO\u0003KDYH\u0003WR\u0003VXP\u0003WKH\u0003UHVXOW\u0011\u0003%XW\u0003OLNH\u0003WKH\u0003ZD\\\u0003ZH\u0003FRS\\\u0003RXU\u0003LQSXW\u0003WR\u0003 WKH\u0003*38\u0003EHIRUH\u0003ZH\u0003ODXQFK\u0003D\u0003NHUQHO\u000f\u0003ZH\u0003QHHG\u0003WR\u0003FRS\\\u0003RXU\u0003RXWSXW\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0003 EHIRUH\u0003ZH\u0003FRQWLQXH\u0003ZRUNLQJ\u0003ZLWK\u0003LW\u0011\u00036R\u0003DIWHU\u0003WKH\u0003NHUQHO\u0003\u020cQLVKHV\u000f\u0003ZH\u0003FRS\\\u0003EDFN\u0003WKH\u0003 OLVW\u0003RI\u0003SDUWLDO\u0003VXPV\u0003DQG\u0003FRPSOHWH\u0003WKH\u0003VXP\u0003RQ\u0003WKH\u0003&38\u0011 // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid*sizeof(float), cudaMemcpyDeviceToHost ) ); Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /eight.lf/four.lf // finish up on the CPU side c = 0; for (int i=0; i<blocksPerGrid; i++) { c += partial_c[i]; } )LQDOO\\\u000f\u0003ZH\u0003FKHFN\u0003RXU\u0003UHVXOWV\u0003DQG\u0003FOHDQ\u0003XS\u0003WKH\u0003PHPRU\\\u0003ZH\u01e2YH\u0003DOORFDWHG\u0003RQ\u0003ERWK\u0003 WKH\u0003&38\u0003DQG\u0003*38\u0011\u0003&KHFNLQJ\u0003WKH\u0003UHVXOWV\u0003LV\u0003PDGH\u0003HDVLHU\u0003EHFDXVH\u0003ZH\u01e2YH\u0003\u020cOOHG\u0003WKH\u0003 LQSXWV\u0003ZLWK\u0003SUHGLFWDEOH\u0003GDWD\u0011\u0003,I\u0003\\RX\u0003UHFDOO\u000f\u0003 a[]\u0003LV\u0003\u020cOOHG\u0003ZLWK\u0003WKH\u0003LQWHJHUV\u0003IURP\u0003\u0013\u0003WR\u0003 N-1\u0003DQG\u0003b[]\u0003LV\u0003MXVW\u00032*a[]\u0011 // fill in the host memory with data for (int i=0; i<N; i++) { a[i] = i; b[i] = i*2; } 2XU\u0003GRW\u0003SURGXFW\u0003VKRXOG\u0003EH\u0003WZR\u0003WLPHV\u0003WKH\u0003VXP\u0003RI\u0003WKH\u0003VTXDUHV\u0003RI\u0003WKH\u0003LQWHJHUV\u0003 IURP\u0003\u0013\u0003WR\u0003 N-1\u0011\u0003)RU\u0003WKH\u0003UHDGHU\u0003ZKR\u0003ORYHV\u0003GLVFUHWH\u0003PDWKHPDWLFV\u0003 DQG\u0003ZKDW\u01e2V\u0003QRW\u0003WR\u0003 ORYH\"\u0004 \u000f\u0003LW\u0003ZLOO\u0003EH\u0003DQ\u0003DPXVLQJ\u0003GLYHUVLRQ\u0003WR\u0003GHULYH\u0003WKH\u0003FORVHG\u0010IRUP\u0003VROXWLRQ\u0003IRU\u0003WKLV\u0003 VXPPDWLRQ\u0011\u0003)RU\u0003WKRVH\u0003ZLWK\u0003OHVV\u0003SDWLHQFH\u0003RU\u0003LQWHUHVW\u000f\u0003ZH\u0003SUHVHQW\u0003WKH\u0003FORVHG\u0010IRUP\u0003 KHUH\u000f\u0003DV\u0003ZHOO\u0003DV\u0003WKH\u0003UHVW\u0003RI\u0003WKH\u0003ERG\\\u0003RI\u0003 main() #define sum_squares(x) (x*(x+1)*(2*x+1)/6) printf( \"Does GPU value %.6g = %.6g?\\n\" , c, 2 * sum_squares( ( float)(N - 1) ) ); // free memory on the GPU side cudaFree( dev_a ); cudaFree( dev_b ); cudaFree( dev_partial_c ); // free memory on the CPU side delete [] a; delete [] b; delete [] partial_c; } Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /eight.lf/five.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 ,I\u0003\\RX\u0003IRXQG\u0003DOO\u0003RXU\u0003H[SODQDWRU\\\u0003LQWHUUXSWLRQV\u0003ERWKHUVRPH\u000f\u0003KHUH\u0003LV\u0003WKH\u0003HQWLUH\u0003 VRXUFH\u0003OLVWLQJ\u000f\u0003VDQV\u0003FRPPHQWDU\\ #include \"../common/book.h\" #define imin(a,b) (a<b?a:b) const int N = 33 * 1024; const int threadsPerBlock = 256; const int blocksPerGrid = imin( 32, (N+threadsPerBlock-1) / threadsPerBlock ); __global__ void dot( float *a, float *b, float *c ) { __shared__ float cache[threadsPerBlock]; int tid = threadIdx.x + blockIdx.x * blockDim.x; int cacheIndex = threadIdx.x; float temp = 0; while (tid < N) { temp += a[tid] * b[tid]; tid += blockDim.x * gridDim.x; } // set the cache values cache[cacheIndex] = temp; // synchronize threads in this block __syncthreads(); // for reductions, threadsPerBlock must be a power of 2 // because of the following code int i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); i /= 2; } Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /eight.lf/six.lf if (cacheIndex == 0) c[blockIdx.x] = cache[0]; } int main( void ) { float *a, *b, c, *partial_c; float *dev_a, *dev_b, *dev_partial_c; // allocate memory on the CPU side a = (float*)malloc( N* sizeof(float) ); b = ( float*)malloc( N* sizeof(float) ); partial_c = ( float*)malloc( blocksPerGrid* sizeof(float) ); // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( (void**)&dev_b, N*sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( (void**)&dev_partial_c, blocksPerGrid* sizeof(float) ) ); // fill in the host memory with data for (int i=0; i<N; i++) { a[i] = i; b[i] = i*2; } // copy the arrays \u2018a\u2019 and \u2018b\u2019 to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, N* sizeof(float), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, N* sizeof(float), cudaMemcpyHostToDevice ) ); Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /eight.lf/seven.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 dot<<<blocksPerGrid,threadsPerBlock>>>( dev_a, dev_b, dev_partial_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid* sizeof(float), cudaMemcpyDeviceToHost ) ); //",
    "222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 dot<<<blocksPerGrid,threadsPerBlock>>>( dev_a, dev_b, dev_partial_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid* sizeof(float), cudaMemcpyDeviceToHost ) ); // finish up on the CPU side c = 0; for (int i=0; i<blocksPerGrid; i++) { c += partial_c[i]; } #define sum_squares(x) (x*(x+1)*(2*x+1)/6) printf( \u201cDoes GPU value %.6g = %.6g?\\n\u201d , c, 2 * sum_squares( ( float)(N - 1) ) ); // free memory on the GPU side cudaFree( dev_a ); cudaFree( dev_b ); cudaFree( dev_partial_c ); // free memory on the CPU side free( a ); free( b ); free( partial_c ); } '27\u0003352'8&7\u0003237,0,=('\u0003\u020e,1&255(&7/<\u020f \u0018\u0011\u0016\u0011\u0014\u0003 :H\u0003TXLFNO\\\u0003JORVVHG\u0003RYHU\u0003WKH\u0003VHFRQG\u0003 __syncthreads() \u0003LQ\u0003WKH\u0003GRW\u0003SURGXFW\u0003 H[DPSOH\u0011\u00031RZ\u0003ZH\u0003ZLOO\u0003WDNH\u0003D\u0003FORVHU\u0003ORRN\u0003DW\u0003LW\u0003DV\u0003ZHOO\u0003DV\u0003H[DPLQLQJ\u0003DQ\u0003DWWHPSW\u0003 WR\u0003LPSURYH\u0003LW\u0011\u0003,I\u0003\\RX\u0003UHFDOO\u000f\u0003ZH\u0003QHHGHG\u0003WKH\u0003VHFRQG\u0003 __syncthreads() \u0003EHFDXVH\u0003 Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /eight.lf/eight.lfZH\u0003XSGDWH\u0003RXU\u0003VKDUHG\u0003PHPRU\\\u0003YDULDEOH\u0003 cache[]\u0003DQG\u0003QHHG\u0003WKHVH\u0003XSGDWHV\u0003WR\u0003EH\u0003 YLVLEOH\u0003WR\u0003HYHU\\\u0003WKUHDG\u0003RQ\u0003WKH\u0003QH[W\u0003LWHUDWLRQ\u0003WKURXJK\u0003WKH\u0003ORRS\u0011 int i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); i /= 2; } 2EVHUYH\u0003WKDW\u0003ZH\u0003XSGDWH\u0003RXU\u0003VKDUHG\u0003PHPRU\\\u0003EXIIHU\u0003 cache[]\u0003RQO\\\u0003LI\u0003cacheIndex LV\u0003OHVV\u0003WKDQ\u0003 i\u0011\u00036LQFH\u0003cacheIndex \u0003LV\u0003UHDOO\\\u0003MXVW\u0003 threadIdx.x \u000f\u0003WKLV\u0003PHDQV\u0003WKDW\u0003 RQO\\\u0003some \u0003RI\u0003WKH\u0003WKUHDGV\u0003DUH\u0003XSGDWLQJ\u0003HQWULHV\u0003LQ\u0003WKH\u0003VKDUHG\u0003PHPRU\\\u0003FDFKH\u0011\u00036LQFH\u0003 ZH\u0003DUH\u0003XVLQJ\u0003 __syncthreads \u0003RQO\\\u0003WR\u0003HQVXUH\u0003WKDW\u0003WKHVH\u0003XSGDWHV\u0003KDYH\u0003WDNHQ\u0003 SODFH\u0003EHIRUH\u0003SURFHHGLQJ\u000f\u0003LW\u0003VWDQGV\u0003WR\u0003UHDVRQ\u0003WKDW\u0003ZH\u0003PLJKW\u0003VHH\u0003D\u0003VSHHG\u0003LPSURYH - PHQW\u0003RQO\\\u0003LI\u0003ZH\u0003ZDLW\u0003IRU\u0003WKH\u0003WKUHDGV\u0003WKDW\u0003DUH\u0003DFWXDOO\\\u0003ZULWLQJ\u0003WR\u0003VKDUHG\u0003PHPRU\\\u0011\u0003 :H\u0003GR\u0003WKLV\u0003E\\\u0003PRYLQJ\u0003WKH\u0003V\\QFKURQL]DWLRQ\u0003FDOO\u0003LQVLGH\u0003WKH\u0003 if()\u0003EORFN int i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) { cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); } i /= 2; } $OWKRXJK\u0003WKLV\u0003ZDV\u0003D\u0003YDOLDQW\u0003HIIRUW\u0003DW\u0003RSWLPL]DWLRQ\u000f\u0003LW\u0003ZLOO\u0003QRW\u0003DFWXDOO\\\u0003ZRUN\u0011\u0003,Q\u0003IDFW\u000f\u0003 WKH\u0003VLWXDWLRQ\u0003LV\u0003ZRUVH\u0003WKDQ\u0003WKDW\u0011\u00037KLV\u0003FKDQJH\u0003WR\u0003WKH\u0003NHUQHO\u0003ZLOO\u0003DFWXDOO\\\u0003FDXVH\u0003WKH\u0003 *38\u0003WR\u0003VWRS\u0003UHVSRQGLQJ\u000f\u0003IRUFLQJ\u0003\\RX\u0003WR\u0003NLOO\u0003\\RXU\u0003SURJUDP\u0011\u0003%XW\u0003ZKDW\u0003FRXOG\u0003KDYH\u0003 JRQH\u0003VR\u0003FDWDVWURSKLFDOO\\\u0003ZURQJ\u0003ZLWK\u0003VXFK\u0003D\u0003VHHPLQJO\\\u0003LQQRFXRXV\u0003FKDQJH\" 7R\u0003DQVZHU\u0003WKLV\u0003TXHVWLRQ\u000f\u0003LW\u0003KHOSV\u0003WR\u0003LPDJLQH\u0003HYHU\\\u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003PDUFKLQJ\u0003 WKURXJK\u0003WKH\u0003FRGH\u0003RQH\u0003OLQH\u0003DW\u0003D\u0003WLPH\u0011\u0003$W\u0003HDFK\u0003LQVWUXFWLRQ\u0003LQ\u0003WKH\u0003SURJUDP\u000f\u0003HYHU\\\u0003 WKUHDG\u0003H[HFXWHV\u0003WKH\u0003VDPH\u0003LQVWUXFWLRQ\u000f\u0003EXW\u0003HDFK\u0003FDQ\u0003RSHUDWH\u0003RQ\u0003GLIIHUHQW\u0003GDWD\u0011\u0003 %XW\u0003ZKDW\u0003KDSSHQV\u0003ZKHQ\u0003WKH\u0003LQVWUXFWLRQ\u0003WKDW\u0003HYHU\\\u0003WKUHDG\u0003LV\u0003VXSSRVHG\u0003WR\u0003H[HFXWH\u0003 Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /eight.lf/nine.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 LV\u0003LQVLGH\u0003D\u0003FRQGLWLRQDO\u0003EORFN\u0003OLNH\u0003DQ\u0003 if()\"\u00032EYLRXVO\\\u0003QRW\u0003HYHU\\\u0003WKUHDG\u0003VKRXOG\u0003 H[HFXWH\u0003WKDW\u0003LQVWUXFWLRQ\u000f\u0003ULJKW\"\u0003)RU\u0003H[DPSOH\u000f\u0003FRQVLGHU\u0003D\u0003NHUQHO\u0003WKDW\u0003FRQWDLQV\u0003WKH\u0003 IROORZLQJ\u0003IUDJPHQW\u0003RI\u0003FRGH\u0003WKDW\u0003LQWHQGV\u0003IRU\u0003RGG\u0010LQGH[HG\u0003WKUHDGV\u0003WR\u0003XSGDWH\u0003WKH\u0003 YDOXH\u0003RI\u0003VRPH\u0003YDULDEOH int myVar = 0; if( threadIdx.x % 2 ) myVar = threadIdx.x; ,Q\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u000f\u0003ZKHQ\u0003WKH\u0003WKUHDGV\u0003DUULYH\u0003DW\u0003WKH\u0003OLQH\u0003LQ\u0003EROG\u000f\u0003RQO\\\u0003WKH\u0003 WKUHDGV\u0003ZLWK\u0003RGG\u0003LQGLFHV\u0003ZLOO\u0003H[HFXWH\u0003LW\u0003VLQFH\u0003WKH\u0003WKUHDGV\u0003ZLWK\u0003HYHQ\u0003LQGLFHV\u0003GR\u0003QRW\u0003 VDWLVI\\\u0003WKH\u0003FRQGLWLRQ\u0003 if( threadIdx.x % 2 ) \u0011\u00037KH\u0003HYHQ\u0010QXPEHUHG\u0003WKUHDGV\u0003 VLPSO\\\u0003GR\u0003QRWKLQJ\u0003ZKLOH\u0003WKH\u0003RGG\u0003WKUHDGV\u0003H[HFXWH\u0003WKLV\u0003LQVWUXFWLRQ\u0011\u0003:KHQ\u0003VRPH\u0003RI\u0003 WKH\u0003WKUHDGV\u0003QHHG\u0003WR\u0003H[HFXWH\u0003DQ\u0003LQVWUXFWLRQ\u0003ZKLOH\u0003RWKHUV\u0003GRQ\u01e2W\u000f\u0003WKLV\u0003VLWXDWLRQ\u0003LV\u0003 NQRZQ\u0003DV\u0003 thread divergence \u0011\u00038QGHU\u0003QRUPDO\u0003FLUFXPVWDQFHV\u000f\u0003GLYHUJHQW\u0003EUDQFKHV\u0003 VLPSO\\\u0003UHVXOW\u0003LQ\u0003VRPH\u0003WKUHDGV\u0003UHPDLQLQJ\u0003LGOH\u000f\u0003ZKLOH\u0003WKH\u0003RWKHU\u0003WKUHDGV\u0003DFWXDOO\\\u0003 H[HFXWH\u0003WKH\u0003LQVWUXFWLRQV\u0003LQ\u0003WKH\u0003EUDQFK\u0011\u0003 %XW\u0003LQ\u0003WKH\u0003FDVH\u0003RI\u0003 __syncthreads() \u000f\u0003WKH\u0003UHVXOW\u0003LV\u0003VRPHZKDW\u0003WUDJLF\u0011\u00037KH\u0003 &8'$\u0003$UFKLWHFWXUH\u0003JXDUDQWHHV\u0003WKDW\u0003 no thread \u0003ZLOO\u0003DGYDQFH\u0003WR\u0003DQ\u0003LQVWUXFWLRQ\u0003 EH\\RQG\u0003WKH\u0003 __syncthreads() \u0003XQWLO\u0003every \u0003WKUHDG\u0003LQ\u0003WKH\u0003EORFN\u0003KDV\u0003H[HFXWHG\u0003WKH\u0003 __syncthreads() \u0011\u00038QIRUWXQDWHO\\\u000f\u0003LI\u0003WKH\u0003 __syncthreads() \u0003VLWV\u0003LQ\u0003D\u0003GLYHUJHQW\u0003 EUDQFK\u000f\u0003VRPH\u0003RI\u0003WKH\u0003WKUHDGV\u0003ZLOO\u0003 never \u0003UHDFK\u0003WKH\u0003 __syncthreads() \u0011\u00037KHUHIRUH\u000f\u0003 EHFDXVH\u0003RI\u0003WKH\u0003JXDUDQWHH\u0003WKDW\u0003QR\u0003LQVWUXFWLRQ\u0003DIWHU\u0003D\u0003 __syncthreads() \u0003FDQ\u0003EH\u0003 H[HFXWHG\u0003EHIRUH\u0003HYHU\\\u0003WKUHDG\u0003KDV\u0003H[HFXWHG\u0003LW\u000f\u0003WKH\u0003KDUGZDUH\u0003VLPSO\\\u0003FRQWLQXHV\u0003WR\u0003 ZDLW\u0003IRU\u0003WKHVH\u0003WKUHDGV\u0011\u0003$QG\u0003ZDLWV\u0011\u0003$QG\u0003ZDLWV\u0011\u0003)RUHYHU\u0011 7KLV\u0003LV\u0003WKH\u0003VLWXDWLRQ\u0003LQ\u0003WKH\u0003GRW\u0003SURGXFW\u0003H[DPSOH\u0003ZKHQ\u0003ZH\u0003PRYH\u0003WKH\u0003 __syncthreads() \u0003FDOO\u0003LQVLGH\u0003WKH\u0003 if()\u0003EORFN\u0011\u0003$Q\\\u0003WKUHDG\u0003ZLWK\u0003 cacheIndex JUHDWHU\u0003WKDQ\u0003RU\u0003HTXDO\u0003WR\u0003 i will never \u0003H[HFXWH\u0003WKH\u0003 __syncthreads() \u0011\u00037KLV\u0003HIIHF - WLYHO\\\u0003KDQJV\u0003WKH\u0003SURFHVVRU\u0003EHFDXVH\u0003LW\u0003UHVXOWV\u0003LQ\u0003WKH\u0003*38\u0003ZDLWLQJ\u0003IRU\u0003VRPHWKLQJ\u0003 WKDW\u0003ZLOO\u0003QHYHU\u0003KDSSHQ\u0011 if (cacheIndex < i) { cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); } Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /nine.lf/zero.lf7KH\u0003PRUDO\u0003RI\u0003WKLV\u0003VWRU\\\u0003LV\u0003WKDW\u0003 __syncthreads() \u0003LV\u0003D\u0003SRZHUIXO\u0003PHFKDQLVP\u0003 IRU\u0003HQVXULQJ\u0003WKDW\u0003\\RXU\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003DSSOLFDWLRQ\u0003VWLOO\u0003FRPSXWHV\u0003WKH\u0003FRUUHFW\u0003 UHVXOWV\u0011\u0003%XW\u0003EHFDXVH\u0003RI\u0003WKLV\u0003SRWHQWLDO\u0003IRU\u0003XQLQWHQGHG\u0003FRQVHTXHQFHV\u000f\u0003ZH\u0003VWLOO\u0003QHHG\u0003 WR\u0003WDNH\u0003FDUH\u0003ZKHQ\u0003XVLQJ\u0003LW\u0011 6+$5('\u00030(025<\u0003%,70$3 \u0018\u0011\u0016\u0011\u0015\u0003 :H\u0003KDYH\u0003ORRNHG\u0003DW\u0003H[DPSOHV\u0003WKDW\u0003XVH\u0003VKDUHG\u0003PHPRU\\\u0003DQG\u0003HPSOR\\HG\u0003 __syncthreads() \u0003WR\u0003HQVXUH\u0003WKDW\u0003GDWD\u0003LV\u0003UHDG\\\u0003EHIRUH\u0003ZH\u0003FRQWLQXH\u0011\u0003 ,Q\u0003WKH\u0003QDPH\u0003RI\u0003VSHHG\u000f\u0003\\RX\u0003PD\\\u0003EH\u0003WHPSWHG\u0003WR\u0003OLYH\u0003GDQJHURXVO\\\u0003DQG\u0003RPLW\u0003 WKH\u0003__syncthreads() \u0011\u0003:H\u0003ZLOO\u0003QRZ\u0003ORRN\u0003DW\u0003D\u0003JUDSKLFDO\u0003H[DPSOH\u0003WKDW\u0003UHTXLUHV\u0003 __syncthreads() \u0003IRU\u0003FRUUHFWQHVV\u0011\u0003:H\u0003ZLOO\u0003VKRZ\u0003\\RX\u0003VFUHHQVKRWV\u0003RI\u0003WKH\u0003 LQWHQGHG\u0003RXWSXW\u0003DQG\u0003RI\u0003WKH\u0003RXWSXW\u0003ZKHQ\u0003UXQ\u0003ZLWKRXW\u0003 __syncthreads() \u0011\u0003,W\u0003 ZRQ\u01e2W\u0003EH\u0003SUHWW\\\u0011 7KH\u0003ERG\\\u0003RI\u0003 main()\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003*38\u0003-XOLD\u00036HW\u0003H[DPSOH\u000f\u0003DOWKRXJK\u0003WKLV\u0003WLPH\u0003 ZH\u0003ODXQFK\u0003PXOWLSOH\u0003WKUHDGV\u0003SHU\u0003EORFN #include \"cuda.h\" #include \"../common/book.h\" #include \"../common/cpu_bitmap.h\" #define DIM 1024 #define PI 3.1415926535897932f int main( void ) { CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( dev_bitmap ); Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /nine.lf/one.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); bitmap.display_and_exit(); cudaFree( dev_bitmap ); } $V\u0003ZLWK\u0003WKH\u0003-XOLD\u00036HW\u0003H[DPSOH\u000f\u0003HDFK\u0003WKUHDG\u0003ZLOO\u0003EH\u0003FRPSXWLQJ\u0003D\u0003SL[HO\u0003YDOXH\u0003IRU\u0003D\u0003 VLQJOH\u0003RXWSXW\u0003ORFDWLRQ\u0011\u00037KH\u0003\u020cUVW\u0003WKLQJ\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003GRHV\u0003LV\u0003FRPSXWH\u0003LWV\u0003 x\u0003DQG\u0003 y\u0003ORFDWLRQ\u0003LQ\u0003WKH\u0003RXWSXW\u0003LPDJH\u0011\u00037KLV\u0003FRPSXWDWLRQ\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003 tid\u0003FRPSXWD - WLRQ\u0003LQ\u0003WKH\u0003YHFWRU\u0003DGGLWLRQ\u0003H[DPSOH\u000f\u0003DOWKRXJK\u0003ZH\u0003FRPSXWH\u0003LW\u0003LQ\u0003WZR\u0003GLPHQVLRQV\u0003 WKLV\u0003WLPH __global__ void kernel( unsigned char *ptr ) { // map from threadIdx/blockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; 6LQFH\u0003ZH\u0003ZLOO\u0003EH\u0003XVLQJ\u0003D\u0003VKDUHG\u0003PHPRU\\\u0003EXIIHU\u0003WR\u0003FDFKH\u0003RXU\u0003FRPSXWDWLRQV\u000f\u0003ZH\u0003 GHFODUH\u0003RQH\u0003VXFK\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003LQ\u0003RXU\u0003\u0014\u0019\u0003[\u0003\u0014\u0019\u0003EORFN\u0003KDV\u0003DQ\u0003HQWU\\\u0011 __shared__ float shared[16][16]; 7KHQ\u000f\u0003HDFK\u0003WKUHDG\u0003FRPSXWHV\u0003D\u0003YDOXH\u0003WR\u0003EH\u0003VWRUHG\u0003LQWR\u0003WKLV\u0003EXIIHU\u0011 // now calculate the",
    "void kernel( unsigned char *ptr ) { // map from threadIdx/blockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; 6LQFH\u0003ZH\u0003ZLOO\u0003EH\u0003XVLQJ\u0003D\u0003VKDUHG\u0003PHPRU\\\u0003EXIIHU\u0003WR\u0003FDFKH\u0003RXU\u0003FRPSXWDWLRQV\u000f\u0003ZH\u0003 GHFODUH\u0003RQH\u0003VXFK\u0003WKDW\u0003HDFK\u0003WKUHDG\u0003LQ\u0003RXU\u0003\u0014\u0019\u0003[\u0003\u0014\u0019\u0003EORFN\u0003KDV\u0003DQ\u0003HQWU\\\u0011 __shared__ float shared[16][16]; 7KHQ\u000f\u0003HDFK\u0003WKUHDG\u0003FRPSXWHV\u0003D\u0003YDOXH\u0003WR\u0003EH\u0003VWRUHG\u0003LQWR\u0003WKLV\u0003EXIIHU\u0011 // now calculate the value at that position const float period = 128.0f; shared[threadIdx.x][threadIdx.y] = 255 * (sinf(x*2.0f*PI/ period) + 1.0f) * (sinf(y*2.0f*PI/ period) + 1.0f) / 4.0f; Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /nine.lf/two.lf$QG\u0003ODVWO\\\u000f\u0003ZH\u0003VWRUH\u0003WKHVH\u0003YDOXHV\u0003EDFN\u0003RXW\u0003WR\u0003WKH\u0003SL[HO\u000f\u0003UHYHUVLQJ\u0003WKH\u0003RUGHU\u0003RI\u0003 x DQG\u0003y ptr[offset*4 + 0] = 0; ptr[offset*4 + 1] = shared[15-threadIdx.x][15-threadIdx.y]; ptr[offset*4 + 2] = 0; ptr[offset*4 + 3] = 255; } *UDQWHG\u000f\u0003WKHVH\u0003FRPSXWDWLRQV\u0003DUH\u0003VRPHZKDW\u0003DUELWUDU\\\u0011\u0003:H\u01e2YH\u0003VLPSO\\\u0003FRPH\u0003XS\u0003ZLWK\u0003 VRPHWKLQJ\u0003WKDW\u0003ZLOO\u0003GUDZ\u0003D\u0003JULG\u0003RI\u0003JUHHQ\u0003VSKHULFDO\u0003EOREV\u0011\u00036R\u0003DIWHU\u0003FRPSLOLQJ\u0003DQG\u0003 UXQQLQJ\u0003WKLV\u0003NHUQHO\u000f\u0003ZH\u0003RXWSXW\u0003DQ\u0003LPDJH\u0003OLNH\u0003WKH\u0003RQH\u0003LQ\u0003)LJXUH\u0003\u0018\u0011\u0018\u0011 :KDW\u0003KDSSHQHG\u0003KHUH\"\u0003$V\u0003\\RX\u0003PD\\\u0003KDYH\u0003JXHVVHG\u0003IURP\u0003WKH\u0003ZD\\\u0003ZH\u0003VHW\u0003XS\u0003WKLV\u0003 H[DPSOH\u000f\u0003ZH\u01e2UH\u0003PLVVLQJ\u0003DQ\u0003LPSRUWDQW\u0003V\\QFKURQL]DWLRQ\u0003SRLQW\u0011\u0003:KHQ\u0003D\u0003WKUHDG\u0003 VWRUHV\u0003WKH\u0003FRPSXWHG\u0003YDOXH\u0003LQ\u0003 shared[][] \u0003WR\u0003WKH\u0003SL[HO\u000f\u0003LW\u0003LV\u0003SRVVLEOH\u0003WKDW\u0003WKH\u0003 WKUHDG\u0003UHVSRQVLEOH\u0003IRU\u0003ZULWLQJ\u0003WKDW\u0003YDOXH\u0003WR\u0003 shared[][] \u0003KDV\u0003QRW\u0003\u020cQLVKHG\u0003 ZULWLQJ\u0003LW\u0003\\HW\u0011\u00037KH\u0003RQO\\\u0003ZD\\\u0003WR\u0003JXDUDQWHH\u0003WKDW\u0003WKLV\u0003GRHV\u0003QRW\u0003KDSSHQ\u0003LV\u0003E\\\u0003XVLQJ\u0003 __syncthreads() \u0011\u00037KXV\u000f\u0003WKH\u0003UHVXOW\u0003LV\u0003D\u0003FRUUXSWHG\u0003SLFWXUH\u0003RI\u0003JUHHQ\u0003EOREV\u0011\u0003 Figure 5.5 $\u0003VFUHHQVKRW\u0003UHQGHUHG\u0003ZLWKRXW\u0003SURSHU\u0003V\\QFKURQL]DWLRQ Download from www.wowebook.comptg666+++ $$$000<<<\u0003\u0003\u0003$$$ 666<<<=== 111 /nine.lf/three.lf\u0018\u0011\u0016\u0003555 ((( '''\u0003\u0003\u0003((( 000 222 555 111 '''\u0003\u0003\u00031 1 1& & &+ + +5 5 52 2 21 1 1, ,, $$$ 777 , , , 222 $OWKRXJK\u0003WKLV\u0003PD\\\u0003QRW\u0003EH\u0003WKH\u0003HQG\u0003RI\u0003WKH\u0003ZRUOG\u000f\u0003\\RXU\u0003DSSOLFDWLRQ\u0003PLJKW\u0003EH\u0003 FRPSXWLQJ\u0003PRUH\u0003LPSRUWDQW\u0003YDOXHV\u0011\u0003 ,QVWHDG\u000f\u0003ZH\u0003QHHG\u0003WR\u0003DGG\u0003D\u0003V\\QFKURQL]DWLRQ\u0003SRLQW\u0003EHWZHHQ\u0003WKH\u0003ZULWH\u0003WR\u0003VKDUHG\u0003 PHPRU\\\u0003DQG\u0003WKH\u0003VXEVHTXHQW\u0003UHDG\u0003IURP\u0003LW\u0011 shared[threadIdx.x][threadIdx.y] = 255 * (sinf(x*2.0f*PI/ period) + 1.0f) * (sinf(y*2.0f*PI/ period) + 1.0f) / 4.0f; __syncthreads(); ptr[offset*4 + 0] = 0; ptr[offset*4 + 1] = shared[15-threadIdx.x][15-threadIdx.y]; ptr[offset*4 + 2] = 0; ptr[offset*4 + 3] = 255; } :LWK\u0003WKLV\u0003 __syncthreads() \u0003LQ\u0003SODFH\u000f\u0003ZH\u0003WKHQ\u0003JHW\u0003D\u0003IDU\u0003PRUH\u0003SUHGLFWDEOH\u0003 DQG\u0003 DHVWKHWLFDOO\\\u0003SOHDVLQJ \u0003UHVXOW\u000f\u0003DV\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003\u0018\u0011\u0019\u0011 Figure 5.6 $\u0003VFUHHQVKRW\u0003DIWHU\u0003DGGLQJ\u0003WKH\u0003FRUUHFW\u0003V\\QFKURQL]DWLRQ Download from www.wowebook.comptg7+5($'\u0003&223(5$7,21 /nine.lf/four.lf&KDSWHU\u00035HYLHZ\u0018\u0011\u0017\u0003 :H\u0003NQRZ\u0003KRZ\u0003EORFNV\u0003FDQ\u0003EH\u0003VXEGLYLGHG\u0003LQWR\u0003VPDOOHU\u0003SDUDOOHO\u0003H[HFXWLRQ\u0003XQLWV\u0003 NQRZQ\u0003DV\u0003 threads \u0011\u0003:H\u0003UHYLVLWHG\u0003WKH\u0003YHFWRU\u0003DGGLWLRQ\u0003H[DPSOH\u0003RI\u0003WKH\u0003SUHYLRXV\u0003 FKDSWHU\u0003WR\u0003VHH\u0003KRZ\u0003WR\u0003SHUIRUP\u0003DGGLWLRQ\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u0011\u0003:H\u0003DOVR\u0003VKRZHG\u0003 DQ\u0003H[DPSOH\u0003RI\u0003 reduction \u0003DQG\u0003KRZ\u0003ZH\u0003XVH\u0003VKDUHG\u0003PHPRU\\\u0003DQG\u0003V\\QFKURQL]DWLRQ\u0003WR\u0003 DFFRPSOLVK\u0003WKLV\u0011\u0003,Q\u0003IDFW\u000f\u0003WKLV\u0003H[DPSOH\u0003VKRZHG\u0003KRZ\u0003WKH\u0003*38\u0003DQG\u0003&38\u0003FDQ\u0003FROODER - UDWH\u0003RQ\u0003FRPSXWLQJ\u0003UHVXOWV\u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003VKRZHG\u0003KRZ\u0003SHULORXV\u0003LW\u0003FDQ\u0003EH\u0003WR\u0003DQ\u0003DSSOL - FDWLRQ\u0003ZKHQ\u0003ZH\u0003QHJOHFW\u0003WKH\u0003QHHG\u0003IRU\u0003V\\QFKURQL]DWLRQ\u0011 <RX\u0003KDYH\u0003OHDUQHG\u0003PRVW\u0003RI\u0003WKH\u0003EDVLFV\u0003RI\u0003&8'$\u0003&\u0003DV\u0003ZHOO\u0003DV\u0003VRPH\u0003RI\u0003WKH\u0003ZD\\V\u0003LW\u0003 UHVHPEOHV\u0003VWDQGDUG\u0003&\u0003DQG\u0003D\u0003ORW\u0003RI\u0003WKH\u0003LPSRUWDQW\u0003ZD\\V\u0003LW\u0003GLIIHUV\u0003IURP\u0003VWDQGDUG\u0003 &\u0011\u00037KLV\u0003ZRXOG\u0003EH\u0003DQ\u0003H[FHOOHQW\u0003WLPH\u0003WR\u0003FRQVLGHU\u0003VRPH\u0003RI\u0003WKH\u0003SUREOHPV\u0003\\RX\u0003KDYH\u0003 HQFRXQWHUHG\u0003DQG\u0003ZKLFK\u0003RQHV\u0003PLJKW\u0003OHQG\u0003WKHPVHOYHV\u0003WR\u0003SDUDOOHO\u0003LPSOHPHQWDWLRQV\u0003 ZLWK\u0003&8'$\u0003&\u0011\u0003$V\u0003ZH\u0003SURJUHVV\u000f\u0003ZH\u0003ZLOO\u0003ORRN\u0003DW\u0003VRPH\u0003RI\u0003WKH\u0003RWKHU\u0003IHDWXUHV\u0003ZH\u0003FDQ\u0003 XVH\u0003WR\u0003DFFRPSOLVK\u0003WDVNV\u0003RQ\u0003WKH\u0003*38\u000f\u0003DV\u0003ZHOO\u0003DV\u0003VRPH\u0003RI\u0003WKH\u0003PRUH\u0003DGYDQFHG\u0003$3,\u0003 IHDWXUHV\u0003WKDW\u0003&8'$\u0003SURYLGHV\u0003WR\u0003XV\u0011 Download from www.wowebook.comptg /nine.lf/five.lfChapter 6 Constant Memory and Events :H\u0003KRSH\u0003\\RX\u0003KDYH\u0003OHDUQHG\u0003PXFK\u0003DERXW\u0003ZULWLQJ\u0003FRGH\u0003WKDW\u0003H[HFXWHV\u0003RQ\u0003WKH\u0003*38\u0011\u0003 <RX\u0003VKRXOG\u0003NQRZ\u0003KRZ\u0003WR\u0003VSDZQ\u0003SDUDOOHO\u0003EORFNV\u0003WR\u0003H[HFXWH\u0003\\RXU\u0003NHUQHOV\u000f\u0003DQG\u0003\\RX\u0003 VKRXOG\u0003NQRZ\u0003KRZ\u0003WR\u0003IXUWKHU\u0003VSOLW\u0003WKHVH\u0003EORFNV\u0003LQWR\u0003SDUDOOHO\u0003WKUHDGV\u0011\u0003<RX\u0003KDYH\u0003DOVR\u0003 VHHQ\u0003ZD\\V\u0003WR\u0003HQDEOH\u0003FRPPXQLFDWLRQ\u0003DQG\u0003V\\QFKURQL]DWLRQ\u0003EHWZHHQ\u0003WKHVH\u0003WKUHDGV\u0011\u0003 %XW\u0003VLQFH\u0003WKH\u0003ERRN\u0003LV\u0003QRW\u0003RYHU\u0003\\HW\u000f\u0003\\RX\u0003PD\\\u0003KDYH\u0003JXHVVHG\u0003WKDW\u0003&8'$\u0003&\u0003KDV\u0003HYHQ\u0003 PRUH\u0003IHDWXUHV\u0003WKDW\u0003PLJKW\u0003EH\u0003XVHIXO\u0003WR\u0003\\RX\u0011\u0003 7KLV\u0003FKDSWHU\u0003ZLOO\u0003LQWURGXFH\u0003\\RX\u0003WR\u0003D\u0003FRXSOH\u0003RI\u0003WKHVH\u0003PRUH\u0003DGYDQFHG\u0003IHDWXUHV\u0011\u0003 6SHFL\u020cFDOO\\\u000f\u0003WKHUH\u0003H[LVW\u0003ZD\\V\u0003LQ\u0003ZKLFK\u0003\\RX\u0003FDQ\u0003H[SORLW\u0003VSHFLDO\u0003UHJLRQV\u0003RI\u0003PHPRU\\\u0003 RQ\u0003\\RXU\u0003*38\u0003LQ\u0003RUGHU\u0003WR\u0003DFFHOHUDWH\u0003\\RXU\u0003DSSOLFDWLRQV\u0011\u0003,Q\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003 GLVFXVV\u0003RQH\u0003RI\u0003WKHVH\u0003UHJLRQV\u0003RI\u0003PHPRU\\ \u0003 constant memory \u0011\u0003,Q\u0003DGGLWLRQ\u000f\u0003EHFDXVH\u0003 ZH\u0003DUH\u0003ORRNLQJ\u0003DW\u0003RXU\u0003\u020cUVW\u0003PHWKRG\u0003IRU\u0003HQKDQFLQJ\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003\\RXU\u0003&8'$\u0003&\u0003 DSSOLFDWLRQV\u000f\u0003\\RX\u0003ZLOO\u0003DOVR\u0003OHDUQ\u0003KRZ\u0003WR\u0003PHDVXUH\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003\\RXU\u0003DSSOLFD - WLRQV\u0003XVLQJ\u0003&8'$\u0003 events \u0011\u0003)URP\u0003WKHVH\u0003PHDVXUHPHQWV\u000f\u0003\\RX\u0003ZLOO\u0003EH\u0003DEOH\u0003WR\u0003TXDQWLI\\\u0003 WKH\u0003JDLQ\u0003 RU\u0003ORVV\u0004 \u0003IURP\u0003DQ\\\u0003HQKDQFHPHQWV\u0003\\RX\u0003PDNH\u0011 Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /nine.lf/six.lf&KDSWHU\u00032EMHFWLYHV\u0019\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003XVLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003ZLWK\u0003&8'$\u0003&\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003WKH\u0003SHUIRUPDQFH\u0003FKDUDFWHULVWLFV\u0003RI\u0003FRQVWDQW\u0003PHPRU\\\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003XVH\u0003&8'$\u0003HYHQWV\u0003WR\u0003PHDVXUH\u0003DSSOLFDWLRQ\u0003SHUIRUPDQFH\u0011\u01e9\u0003 &RQVWDQW\u00030HPRU\\\u0019\u0011\u0015\u0003 3UHYLRXVO\\\u000f\u0003ZH\u0003GLVFXVVHG\u0003KRZ\u0003PRGHUQ\u0003*38V\u0003DUH\u0003HTXLSSHG\u0003ZLWK\u0003HQRUPRXV\u0003 DPRXQWV\u0003RI\u0003DULWKPHWLF\u0003SURFHVVLQJ\u0003SRZHU\u0011\u0003,Q\u0003IDFW\u000f\u0003WKH\u0003FRPSXWDWLRQDO\u0003DGYDQWDJH\u0003 JUDSKLFV\u0003SURFHVVRUV\u0003KDYH\u0003RYHU\u0003&38V\u0003KHOSHG\u0003SUHFLSLWDWH\u0003WKH\u0003LQLWLDO\u0003LQWHUHVW\u0003LQ\u0003XVLQJ\u0003 JUDSKLFV\u0003SURFHVVRUV\u0003IRU\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWLQJ\u0011\u0003:LWK\u0003KXQGUHGV\u0003RI\u0003DULWKPHWLF\u0003 XQLWV\u0003RQ\u0003WKH\u0003*38\u000f\u0003RIWHQ\u0003WKH\u0003ERWWOHQHFN\u0003LV\u0003QRW\u0003WKH\u0003DULWKPHWLF\u0003WKURXJKSXW\u0003RI\u0003WKH\u0003 FKLS\u0003EXW\u0003UDWKHU\u0003WKH\u0003PHPRU\\\u0003EDQGZLGWK\u0003RI\u0003WKH\u0003FKLS\u0011\u00037KHUH\u0003DUH\u0003VR\u0003PDQ\\\u0003$/8V\u0003RQ\u0003 JUDSKLFV\u0003SURFHVVRUV\u0003WKDW\u0003VRPHWLPHV\u0003ZH\u0003MXVW\u0003FDQ\u01e2W\u0003NHHS\u0003WKH\u0003LQSXW\u0003FRPLQJ\u0003WR\u0003WKHP\u0003 IDVW\u0003HQRXJK\u0003WR\u0003VXVWDLQ\u0003VXFK\u0003KLJK\u0003UDWHV\u0003RI\u0003FRPSXWDWLRQ\u0011\u00036R\u000f\u0003LW\u0003LV\u0003ZRUWK\u0003LQYHVWLJDWLQJ\u0003 PHDQV\u0003E\\\u0003ZKLFK\u0003ZH\u0003FDQ\u0003UHGXFH\u0003WKH\u0003DPRXQW\u0003RI\u0003PHPRU\\\u0003WUDI\u020cF\u0003UHTXLUHG\u0003IRU\u0003D\u0003JLYHQ\u0003 SUREOHP\u0011 :H\u0003KDYH\u0003VHHQ\u0003&8'$\u0003&\u0003SURJUDPV\u0003WKDW\u0003KDYH\u0003XVHG\u0003ERWK\u0003JOREDO\u0003DQG\u0003VKDUHG\u0003PHPRU\\\u0003 VR\u0003IDU\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003ODQJXDJH\u0003PDNHV\u0003DYDLODEOH\u0003DQRWKHU\u0003NLQG\u0003RI\u0003PHPRU\\\u0003NQRZQ\u0003 DV\u0003constant memory \u0011\u0003$V\u0003WKH\u0003QDPH\u0003PD\\\u0003LQGLFDWH\u000f\u0003ZH\u0003XVH\u0003FRQVWDQW\u0003PHPRU\\\u0003IRU\u0003 GDWD\u0003WKDW\u0003ZLOO\u0003QRW\u0003FKDQJH\u0003RYHU\u0003WKH\u0003FRXUVH\u0003RI\u0003D\u0003NHUQHO\u0003H[HFXWLRQ\u0011\u000319,',$\u0003KDUGZDUH\u0003 SURYLGHV\u0003\u0019\u0017.%\u0003RI\u0003FRQVWDQW\u0003PHPRU\\\u0003WKDW\u0003LW\u0003WUHDWV\u0003GLIIHUHQWO\\\u0003WKDQ\u0003LW\u0003WUHDWV\u0003VWDQGDUG\u0003 JOREDO\u0003PHPRU\\\u0011\u0003,Q\u0003VRPH\u0003VLWXDWLRQV\u000f\u0003XVLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003UDWKHU\u0003WKDQ\u0003JOREDO\u0003 PHPRU\\\u0003ZLOO\u0003UHGXFH\u0003WKH\u0003UHTXLUHG\u0003PHPRU\\\u0003EDQGZLGWK\u0011\u0003 RAY TRACING INTRODUCT ION \u0019\u0011\u0015\u0011\u0014\u0003 :H\u0003ZLOO\u0003ORRN\u0003DW\u0003RQH\u0003ZD\\\u0003RI\u0003H[SORLWLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003LQ\u0003WKH\u0003FRQWH[W\u0003RI\u0003D\u0003VLPSOH\u0003 ray tracing \u0003DSSOLFDWLRQ\u0011\u0003)LUVW\u000f\u0003ZH\u0003ZLOO\u0003JLYH\u0003\\RX\u0003VRPH\u0003EDFNJURXQG\u0003LQ\u0003WKH\u0003PDMRU\u0003 FRQFHSWV\u0003EHKLQG\u0003UD\\\u0003WUDFLQJ\u0011\u0003,I\u0003\\RX\u0003DUH\u0003DOUHDG\\\u0003FRPIRUWDEOH\u0003ZLWK\u0003WKH\u0003FRQFHSWV\u0003 EHKLQG\u0003UD\\\u0003WUDFLQJ\u000f\u0003\\RX\u0003FDQ\u0003VNLS\u0003WR\u0003WKH\u0003\u01e45D\\\u00037UDFLQJ\u0003RQ\u0003WKH\u0003*38\u01e5\u0003VHFWLRQ\u0011\u0003 Download from www.wowebook.comCONST ANT MEMORY /nine.lf/seven.lf\u0019\u0011\u0015\u0003&2167$17\u00030(025< 6LPSO\\\u0003SXW\u000f\u0003UD\\\u0003WUDFLQJ\u0003LV\u0003RQH\u0003ZD\\\u0003RI\u0003SURGXFLQJ\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003LPDJH\u0003RI\u0003D\u0003 VFHQH\u0003FRQVLVWLQJ\u0003RI\u0003WKUHH\u0010GLPHQVLRQDO\u0003REMHFWV\u0011\u0003%XW\u0003LVQ\u01e2W\u0003WKLV\u0003ZKDW\u0003*38V\u0003ZHUH\u0003 RULJLQDOO\\\u0003GHVLJQHG\u0003IRU\"\u0003+RZ\u0003LV\u0003WKLV\u0003GLIIHUHQW\u0003IURP\u0003ZKDW\u00032SHQ*/\u0003RU\u0003'LUHFW;\u0003 GR\u0003ZKHQ\u0003\\RX\u0003SOD\\\u0003\\RXU\u0003IDYRULWH\u0003JDPH\"\u0003:HOO\u000f\u0003*38V\u0003GR\u0003LQGHHG\u0003VROYH\u0003WKLV\u0003VDPH\u0003 SUREOHP\u000f\u0003EXW\u0003WKH\\\u0003XVH\u0003D\u0003WHFKQLTXH\u0003NQRZQ\u0003DV\u0003 rasterization \u0011\u00037KHUH\u0003DUH\u0003PDQ\\\u0003H[FHO - OHQW\u0003ERRNV\u0003RQ\u0003UDVWHUL]DWLRQ\u000f\u0003VR\u0003ZH\u0003ZLOO\u0003QRW\u0003HQGHDYRU\u0003WR\u0003H[SODLQ\u0003WKH\u0003GLIIHUHQFHV\u0003 KHUH\u0011\u0003,W\u0003VXI\u020cFHV\u0003WR\u0003VD\\\u0003WKDW\u0003WKH\\\u0003DUH\u0003FRPSOHWHO\\\u0003GLIIHUHQW\u0003PHWKRGV\u0003WKDW\u0003VROYH\u0003WKH\u0003 VDPH\u0003SUREOHP\u0011 6R\u000f\u0003KRZ\u0003GRHV\u0003UD\\\u0003WUDFLQJ\u0003SURGXFH\u0003DQ\u0003LPDJH\u0003RI\u0003D\u0003WKUHH\u0010GLPHQVLRQDO\u0003VFHQH\"\u00037KH\u0003 LGHD\u0003LV\u0003VLPSOH \u0003:H\u0003FKRRVH\u0003D\u0003VSRW\u0003LQ\u0003RXU\u0003VFHQH\u0003WR\u0003SODFH\u0003DQ\u0003LPDJLQDU\\\u0003FDPHUD\u0011\u00037KLV\u0003 VLPSOL\u020cHG\u0003GLJLWDO\u0003FDPHUD\u0003FRQWDLQV\u0003D\u0003OLJKW\u0003VHQVRU\u000f\u0003VR\u0003WR\u0003SURGXFH\u0003DQ\u0003LPDJH\u000f\u0003ZH\u0003 QHHG\u0003WR\u0003GHWHUPLQH\u0003ZKDW\u0003OLJKW\u0003ZRXOG\u0003KLW\u0003WKDW\u0003VHQVRU\u0011\u0003(DFK\u0003SL[HO\u0003RI\u0003WKH\u0003UHVXOWLQJ\u0003 LPDJH\u0003VKRXOG\u0003EH\u0003WKH\u0003VDPH\u0003FRORU\u0003DQG\u0003LQWHQVLW\\\u0003RI\u0003WKH\u0003UD\\\u0003RI\u0003OLJKW\u0003WKDW\u0003KLWV\u0003WKDW\u0003VSRW\u0003 VHQVRU\u0011\u0003 6LQFH\u0003OLJKW\u0003LQFLGHQW\u0003DW\u0003DQ\\\u0003SRLQW\u0003RQ\u0003WKH\u0003VHQVRU\u0003FDQ\u0003FRPH\u0003IURP\u0003DQ\\\u0003SODFH\u0003LQ\u0003RXU\u0003 VFHQH\u000f\u0003LW\u0003WXUQV\u0003RXW\u0003LW\u01e2V\u0003HDVLHU\u0003WR\u0003ZRUN\u0003EDFNZDUG\u0011\u00037KDW\u0003LV\u000f\u0003UDWKHU\u0003WKDQ\u0003WU\\LQJ\u0003WR\u0003 \u020cJXUH\u0003RXW\u0003ZKDW\u0003OLJKW\u0003UD\\\u0003KLWV\u0003WKH\u0003SL[HO\u0003LQ\u0003TXHVWLRQ\u000f\u0003ZKDW\u0003LI\u0003ZH\u0003LPDJLQH\u0003VKRRWLQJ\u0003D\u0003 UD\\\u0003from \u0003WKH\u0003SL[HO\u0003DQG\u0003LQWR\u0003WKH\u0003VFHQH\"\u0003,Q\u0003WKLV\u0003ZD\\\u000f\u0003HDFK\u0003SL[HO\u0003EHKDYHV\u0003VRPHWKLQJ\u0003 OLNH\u0003DQ\u0003H\\H\u0003WKDW\u0003LV\u0003\u01e4ORRNLQJ\u01e5\u0003LQWR\u0003WKH\u0003VFHQH\u0011\u0003)LJXUH\u0003\u0019\u0011\u0014\u0003LOOXVWUDWHV\u0003WKHVH\u0003UD\\V\u0003EHLQJ\u0003 FDVW\u0003RXW\u0003RI\u0003HDFK\u0003SL[HO\u0003DQG\u0003LQWR\u0003WKH\u0003VFHQH\u0011 \u0002\u000e\u0007 \u0005 \u000f \u0001\u0003\b \u0010 \u0006 \u0011\u0001\u0004\u0007\u0012 Figure 6.1 $\u0003VLPSOH\u0003UD\\\u0003WUDFLQJ\u0003VFKHPH Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /nine.lf/eight.lf:H\u0003\u020cJXUH\u0003RXW\u0003ZKDW\u0003FRORU\u0003LV\u0003VHHQ\u0003E\\\u0003HDFK\u0003SL[HO\u0003E\\\u0003WUDFLQJ\u0003D\u0003UD\\\u0003IURP\u0003WKH\u0003SL[HO\u0003LQ\u0003 TXHVWLRQ\u0003WKURXJK\u0003WKH\u0003VFHQH\u0003XQWLO\u0003LW\u0003KLWV\u0003RQH\u0003RI\u0003RXU\u0003REMHFWV\u0011\u0003:H\u0003WKHQ\u0003VD\\\u0003WKDW\u0003WKH\u0003 SL[HO\u0003ZRXOG\u0003\u01e4VHH\u01e5\u0003WKLV\u0003REMHFW\u0003DQG\u0003FDQ\u0003DVVLJQ\u0003LWV\u0003FRORU\u0003EDVHG\u0003RQ\u0003WKH\u0003FRORU\u0003RI\u0003WKH\u0003 REMHFW\u0003LW\u0003VHHV\u0011\u00030RVW\u0003RI\u0003WKH\u0003FRPSXWDWLRQ\u0003UHTXLUHG\u0003E\\\u0003UD\\\u0003WUDFLQJ\u0003LV\u0003LQ\u0003WKH\u0003FRPSXWD - WLRQ\u0003RI\u0003WKHVH\u0003LQWHUVHFWLRQV\u0003RI\u0003WKH\u0003UD\\\u0003ZLWK\u0003WKH\u0003REMHFWV\u0003LQ\u0003WKH\u0003VFHQH\u0011\u0003 0RUHRYHU\u000f\u0003LQ\u0003PRUH\u0003FRPSOH[\u0003UD\\\u0003WUDFLQJ\u0003PRGHOV\u000f\u0003VKLQ\\\u0003REMHFWV\u0003LQ\u0003WKH\u0003VFHQH\u0003FDQ\u0003 UH\u020dHFW\u0003UD\\V\u000f\u0003DQG\u0003WUDQVOXFHQW\u0003REMHFWV\u0003FDQ\u0003UHIUDFW\u0003WKH\u0003UD\\V\u0003RI\u0003OLJKW\u0011\u00037KLV\u0003FUHDWHV\u0003 VHFRQGDU\\\u0003UD\\V\u000f\u0003WHUWLDU\\\u0003UD\\V\u000f\u0003DQG\u0003VR\u0003RQ\u0011\u0003,Q\u0003IDFW\u000f\u0003WKLV\u0003LV\u0003RQH\u0003RI\u0003WKH\u0003DWWUDFWLYH\u0003 IHDWXUHV\u0003RI\u0003UD\\\u0003WUDFLQJ \u0003LW\u0003LV\u0003YHU\\\u0003VLPSOH\u0003WR\u0003JHW\u0003D\u0003EDVLF\u0003UD\\\u0003WUDFHU\u0003ZRUNLQJ\u000f\u0003EXW\u0003ZH\u0003 FDQ\u0003EXLOG\u0003PRGHOV\u0003RI\u0003PRUH\u0003FRPSOH[\u0003SKHQRPHQRQ\u0003LQWR\u0003WKH\u0003UD\\\u0003WUDFHU\u0003LQ\u0003RUGHU\u0003WR\u0003 SURGXFH\u0003PRUH\u0003UHDOLVWLF\u0003LPDJHV\u0011 5$<\u000375$&,1*\u000321\u00037+(\u0003*38 \u0019\u0011\u0015\u0011\u0015\u0003 6LQFH\u0003$3,V\u0003VXFK\u0003DV\u00032SHQ*/\u0003DQG\u0003'LUHFW;\u0003DUH\u0003QRW\u0003GHVLJQHG\u0003WR\u0003DOORZ\u0003UD\\\u0010WUDFHG\u0003 UHQGHULQJ\u000f\u0003ZH\u0003ZLOO\u0003KDYH\u0003WR\u0003XVH\u0003&8'$\u0003&\u0003WR\u0003LPSOHPHQW\u0003RXU\u0003EDVLF\u0003UD\\\u0003WUDFHU\u0011\u00032XU\u0003 UD\\\u0003WUDFHU\u0003ZLOO\u0003EH\u0003H[WUDRUGLQDULO\\\u0003VLPSOH\u0003VR\u0003WKDW\u0003ZH\u0003FDQ\u0003FRQFHQWUDWH\u0003RQ\u0003WKH\u0003XVH\u0003 RI\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003VR\u0003LI\u0003\\RX\u0003ZHUH\u0003H[SHFWLQJ\u0003FRGH\u0003WKDW\u0003FRXOG\u0003IRUP\u0003WKH\u0003EDVLV\u0003RI\u0003 D\u0003IXOO\u0010EORZQ\u0003SURGXFWLRQ\u0003UHQGHUHU\u000f\u0003\\RX\u0003ZLOO\u0003EH\u0003GLVDSSRLQWHG\u0011\u00032XU\u0003EDVLF\u0003UD\\\u0003WUDFHU\u0003 ZLOO\u0003RQO\\\u0003VXSSRUW\u0003VFHQHV\u0003RI\u0003VSKHUHV\u000f\u0003DQG\u0003WKH\u0003FDPHUD\u0003LV\u0003UHVWULFWHG\u0003WR\u0003WKH\u0003]\u0010D[LV\u000f\u0003 IDFLQJ\u0003WKH\u0003RULJLQ\u0011\u00030RUHRYHU\u000f\u0003ZH\u0003ZLOO\u0003QRW\u0003VXSSRUW\u0003DQ\\\u0003OLJKWLQJ\u0003RI\u0003WKH\u0003VFHQH\u0003WR\u0003DYRLG\u0003 WKH\u0003FRPSOLFDWLRQV\u0003RI\u0003VHFRQGDU\\\u0003UD\\V\u0011\u0003,QVWHDG\u0003RI\u0003FRPSXWLQJ\u0003OLJKWLQJ\u0003HIIHFWV\u000f\u0003ZH\u0003ZLOO\u0003 VLPSO\\\u0003DVVLJQ\u0003HDFK\u0003VSKHUH\u0003D\u0003FRORU\u0003DQG\u0003WKHQ\u0003VKDGH\u0003WKHP\u0003ZLWK\u0003VRPH\u0003SUHFRPSXWHG\u0003 IXQFWLRQ\u0003LI\u0003WKH\\\u0003DUH\u0003YLVLEOH\u0011\u0003 6R\u000f\u0003ZKDW\u0003 will\u0003WKH\u0003UD\\\u0003WUDFHU\u0003GR\"\u0003,W\u0003ZLOO\u0003\u020cUH\u0003D\u0003UD\\\u0003IURP\u0003HDFK\u0003SL[HO\u0003DQG\u0003NHHS\u0003WUDFN\u0003RI\u0003 ZKLFK\u0003UD\\V\u0003KLW\u0003ZKLFK\u0003VSKHUHV\u0011\u0003,W\u0003ZLOO\u0003DOVR\u0003WUDFN\u0003WKH\u0003GHSWK\u0003RI\u0003HDFK\u0003RI\u0003WKHVH\u0003KLWV\u0011\u0003,Q\u0003 WKH\u0003FDVH\u0003ZKHUH\u0003D\u0003UD\\\u0003SDVVHV\u0003WKURXJK\u0003PXOWLSOH\u0003VSKHUHV\u000f\u0003RQO\\\u0003WKH\u0003VSKHUH\u0003FORVHVW\u0003 WR\u0003WKH\u0003FDPHUD\u0003FDQ\u0003EH\u0003VHHQ\u0011\u0003,Q\u0003HVVHQFH\u000f\u0003RXU\u0003\u01e4UD\\\u0003WUDFHU\u01e5\u0003LV\u0003QRW\u0003GRLQJ\u0003PXFK\u0003PRUH\u0003 WKDQ\u0003KLGLQJ\u0003VXUIDFHV\u0003WKDW\u0003FDQQRW\u0003EH\u0003VHHQ\u0003E\\\u0003WKH\u0003FDPHUD\u0011 :H\u0003ZLOO\u0003PRGHO\u0003RXU\u0003VSKHUHV\u0003ZLWK\u0003D\u0003GDWD\u0003VWUXFWXUH\u0003WKDW\u0003VWRUHV\u0003WKH\u0003VSKHUH\u01e2V\u0003FHQWHU\u0003 FRRUGLQDWH\u0003RI\u0003 (x, y, z) \u000f\u0003LWV\u0003radius\u000f\u0003DQG\u0003LWV\u0003FRORU\u0003RI\u0003 (r, b, g) \u0011 Download from www.wowebook.comptgCONST ANT MEMORY /nine.lf/nine.lf\u0019\u0011\u0015\u0003&2167$17\u00030(025<#define INF 2e10f struct Sphere { float r,b,g; float radius; float x,y,z; __device__ float hit( float ox, float oy, float *n ) { float dx = ox - x; float dy = oy - y; if (dx*dx + dy*dy < radius*radius) { float dz = sqrtf( radius*radius - dx*dx - dy*dy ); *n = dz / sqrtf( radius * radius ); return dz + z; } return -INF; } }; <RX\u0003ZLOO\u0003DOVR\u0003QRWLFH\u0003WKDW\u0003WKH\u0003VWUXFWXUH\u0003KDV\u0003D\u0003PHWKRG\u0003FDOOHG\u0003 hit( float ox, float oy, float *n ) \u0011\u0003*LYHQ\u0003D\u0003UD\\\u0003VKRW\u0003IURP\u0003WKH\u0003SL[HO\u0003DW\u0003 (ox, oy) \u000f\u0003WKLV\u0003 PHWKRG\u0003FRPSXWHV\u0003ZKHWKHU\u0003WKH\u0003UD\\\u0003LQWHUVHFWV\u0003WKH\u0003VSKHUH\u0011\u0003,I\u0003WKH\u0003UD\\\u0003 does \u0003LQWHUVHFW\u0003 WKH\u0003VSKHUH\u000f\u0003WKH\u0003PHWKRG\u0003FRPSXWHV\u0003WKH\u0003GLVWDQFH\u0003IURP\u0003WKH\u0003FDPHUD\u0003ZKHUH\u0003WKH\u0003UD\\\u0003 KLWV\u0003WKH\u0003VSKHUH\u0011\u0003:H\u0003QHHG\u0003WKLV\u0003LQIRUPDWLRQ\u0003IRU\u0003WKH\u0003UHDVRQ\u0003PHQWLRQHG\u0003EHIRUH \u0003,Q\u0003WKH\u0003 HYHQW\u0003WKDW\u0003WKH\u0003UD\\\u0003KLWV\u0003PRUH\u0003WKDQ\u0003RQH\u0003VSKHUH\u000f\u0003RQO\\\u0003WKH\u0003FORVHVW\u0003VSKHUH\u0003FDQ\u0003DFWXDOO\\\u0003 EH\u0003VHHQ\u0011 2XU\u0003main()\u0003URXWLQH\u0003IROORZV\u0003URXJKO\\\u0003WKH\u0003VDPH\u0003VHTXHQFH\u0003DV\u0003RXU\u0003SUHYLRXV\u0003LPDJH\u0010 JHQHUDWLQJ\u0003H[DPSOHV\u0011 #include \"cuda.h\" #include \"../common/book.h\" #include \"../common/cpu_bitmap.h\" #define rnd( x ) (x * rand()",
    "sqrtf( radius * radius ); return dz + z; } return -INF; } }; <RX\u0003ZLOO\u0003DOVR\u0003QRWLFH\u0003WKDW\u0003WKH\u0003VWUXFWXUH\u0003KDV\u0003D\u0003PHWKRG\u0003FDOOHG\u0003 hit( float ox, float oy, float *n ) \u0011\u0003*LYHQ\u0003D\u0003UD\\\u0003VKRW\u0003IURP\u0003WKH\u0003SL[HO\u0003DW\u0003 (ox, oy) \u000f\u0003WKLV\u0003 PHWKRG\u0003FRPSXWHV\u0003ZKHWKHU\u0003WKH\u0003UD\\\u0003LQWHUVHFWV\u0003WKH\u0003VSKHUH\u0011\u0003,I\u0003WKH\u0003UD\\\u0003 does \u0003LQWHUVHFW\u0003 WKH\u0003VSKHUH\u000f\u0003WKH\u0003PHWKRG\u0003FRPSXWHV\u0003WKH\u0003GLVWDQFH\u0003IURP\u0003WKH\u0003FDPHUD\u0003ZKHUH\u0003WKH\u0003UD\\\u0003 KLWV\u0003WKH\u0003VSKHUH\u0011\u0003:H\u0003QHHG\u0003WKLV\u0003LQIRUPDWLRQ\u0003IRU\u0003WKH\u0003UHDVRQ\u0003PHQWLRQHG\u0003EHIRUH \u0003,Q\u0003WKH\u0003 HYHQW\u0003WKDW\u0003WKH\u0003UD\\\u0003KLWV\u0003PRUH\u0003WKDQ\u0003RQH\u0003VSKHUH\u000f\u0003RQO\\\u0003WKH\u0003FORVHVW\u0003VSKHUH\u0003FDQ\u0003DFWXDOO\\\u0003 EH\u0003VHHQ\u0011 2XU\u0003main()\u0003URXWLQH\u0003IROORZV\u0003URXJKO\\\u0003WKH\u0003VDPH\u0003VHTXHQFH\u0003DV\u0003RXU\u0003SUHYLRXV\u0003LPDJH\u0010 JHQHUDWLQJ\u0003H[DPSOHV\u0011 #include \"cuda.h\" #include \"../common/book.h\" #include \"../common/cpu_bitmap.h\" #define rnd( x ) (x * rand() / RAND_MAX) #define SPHERES 20 Sphere *s; Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/zero.lf/zero.lfint main( void ) { // capture the start time cudaEvent_t start, stop; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; // allocate memory on the GPU for the output bitmap HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); // allocate memory for the Sphere dataset HANDLE_ERROR( cudaMalloc( ( void**)&s, sizeof(Sphere) * SPHERES ) ); :H\u0003DOORFDWH\u0003PHPRU\\\u0003IRU\u0003RXU\u0003LQSXW\u0003GDWD\u000f\u0003ZKLFK\u0003LV\u0003DQ\u0003DUUD\\\u0003RI\u0003VSKHUHV\u0003WKDW\u0003FRPSRVH\u0003 RXU\u0003VFHQH\u0011\u00036LQFH\u0003ZH\u0003QHHG\u0003WKLV\u0003GDWD\u0003RQ\u0003WKH\u0003*38\u0003EXW\u0003DUH\u0003JHQHUDWLQJ\u0003LW\u0003ZLWK\u0003WKH\u0003&38\u000f\u0003 ZH\u0003KDYH\u0003WR\u0003GR\u0003ERWK\u0003D\u0003 cudaMalloc() and a malloc() WR\u0003DOORFDWH\u0003PHPRU\\\u0003RQ\u0003 ERWK\u0003WKH\u0003*38\u0003DQG\u0003WKH\u0003&38\u0011\u0003:H\u0003DOVR\u0003DOORFDWH\u0003D\u0003ELWPDS\u0003LPDJH\u0003WKDW\u0003ZH\u0003ZLOO\u0003\u020cOO\u0003ZLWK\u0003 RXWSXW\u0003SL[HO\u0003GDWD\u0003DV\u0003ZH\u0003UD\\\u0003WUDFH\u0003RXU\u0003VSKHUHV\u0003RQ\u0003WKH\u0003*38\u0011\u0003 $IWHU\u0003DOORFDWLQJ\u0003PHPRU\\\u0003IRU\u0003LQSXW\u0003DQG\u0003RXWSXW\u000f\u0003ZH\u0003UDQGRPO\\\u0003JHQHUDWH\u0003WKH\u0003FHQWHU\u0003 FRRUGLQDWH\u000f\u0003FRORU\u000f\u0003DQG\u0003UDGLXV\u0003IRU\u0003RXU\u0003VSKHUHV // allocate temp memory, initialize it, copy to // memory on the GPU, and then free our temp memory Sphere *temp_s = (Sphere*)malloc( sizeof(Sphere) * SPHERES ); for (int i=0; i<SPHERES; i++) { temp_s[i].r = rnd( 1.0f ); temp_s[i].g = rnd( 1.0f ); temp_s[i].b = rnd( 1.0f ); temp_s[i].x = rnd( 1000.0f ) - 500; temp_s[i].y = rnd( 1000.0f ) - 500; temp_s[i].z = rnd( 1000.0f ) - 500; temp_s[i].radius = rnd( 100.0f ) + 20; } Download from www.wowebook.comptgCONST ANT MEMORY /one.lf/zero.lf/one.lf\u0019\u0011\u0015\u0003&2167$17\u00030(025< 7KH\u0003SURJUDP\u0003FXUUHQWO\\\u0003JHQHUDWHV\u0003D\u0003UDQGRP\u0003DUUD\\\u0003RI\u0003\u0015\u0013\u0003VSKHUHV\u000f\u0003EXW\u0003WKLV\u0003TXDQWLW\\\u0003 LV\u0003VSHFL\u020cHG\u0003LQ\u0003D\u0003 #define\u0003DQG\u0003FDQ\u0003EH\u0003DGMXVWHG\u0003DFFRUGLQJO\\\u0011\u0003 :H\u0003FRS\\\u0003WKLV\u0003DUUD\\\u0003RI\u0003VSKHUHV\u0003WR\u0003WKH\u0003*38\u0003XVLQJ\u0003 cudaMemcpy() DQG\u0003WKHQ\u0003IUHH\u0003WKH\u0003 WHPSRUDU\\\u0003EXIIHU\u0011 HANDLE_ERROR( cudaMemcpy( s, temp_s, sizeof(Sphere) * SPHERES, cudaMemcpyHostToDevice ) ); free( temp_s ); 1RZ\u0003WKDW\u0003RXU\u0003LQSXW\u0003LV\u0003RQ\u0003WKH\u0003*38\u0003DQG\u0003ZH\u0003KDYH\u0003DOORFDWHG\u0003VSDFH\u0003IRU\u0003WKH\u0003RXWSXW\u000f\u0003ZH\u0003 DUH\u0003UHDG\\\u0003WR\u0003ODXQFK\u0003RXU\u0003NHUQHO\u0011 // generate a bitmap from our sphere data dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( dev_bitmap ); :H\u0003ZLOO\u0003H[DPLQH\u0003WKH\u0003NHUQHO\u0003LWVHOI\u0003LQ\u0003D\u0003PRPHQW\u000f\u0003EXW\u0003IRU\u0003QRZ\u0003\\RX\u0003VKRXOG\u0003WDNH\u0003LW\u0003RQ\u0003 IDLWK\u0003WKDW\u0003LW\u0003UD\\\u0003WUDFHV\u0003WKH\u0003VFHQH\u0003DQG\u0003JHQHUDWHV\u0003SL[HO\u0003GDWD\u0003IRU\u0003WKH\u0003LQSXW\u0003VFHQH\u0003RI\u0003 VSKHUHV\u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003FRS\\\u0003WKH\u0003RXWSXW\u0003LPDJH\u0003EDFN\u0003IURP\u0003WKH\u0003*38\u0003DQG\u0003GLVSOD\\\u0003LW\u0011\u0003,W\u0003 VKRXOG\u0003JR\u0003ZLWKRXW\u0003VD\\LQJ\u0003WKDW\u0003ZH\u0003IUHH\u0003DOO\u0003DOORFDWHG\u0003PHPRU\\\u0003WKDW\u0003KDVQ\u01e2W\u0003DOUHDG\\\u0003 EHHQ\u0003IUHHG\u0011 // copy our bitmap back from the GPU for display HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); bitmap.display_and_exit(); // free our memory cudaFree( dev_bitmap ); cudaFree( s ); } Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/zero.lf/two.lf$OO\u0003RI\u0003WKLV\u0003VKRXOG\u0003EH\u0003FRPPRQSODFH\u0003WR\u0003\\RX\u0003QRZ\u0011\u00036R\u000f\u0003KRZ\u0003GR\u0003ZH\u0003GR\u0003WKH\u0003DFWXDO\u0003UD\\\u0003 WUDFLQJ\"\u0003%HFDXVH\u0003ZH\u0003KDYH\u0003VHWWOHG\u0003RQ\u0003D\u0003YHU\\\u0003VLPSOH\u0003UD\\\u0003WUDFLQJ\u0003PRGHO\u000f\u0003RXU\u0003NHUQHO\u0003 ZLOO\u0003EH\u0003YHU\\\u0003HDV\\\u0003WR\u0003XQGHUVWDQG\u0011\u0003(DFK\u0003WKUHDG\u0003LV\u0003JHQHUDWLQJ\u0003RQH\u0003SL[HO\u0003IRU\u0003RXU\u0003RXWSXW\u0003 LPDJH\u000f\u0003VR\u0003ZH\u0003VWDUW\u0003LQ\u0003WKH\u0003XVXDO\u0003PDQQHU\u0003E\\\u0003FRPSXWLQJ\u0003WKH\u0003 x\u0010\u0003DQG\u0003y\u0010FRRUGLQDWHV\u0003 IRU\u0003WKH\u0003WKUHDG\u0003DV\u0003ZHOO\u0003DV\u0003WKH\u0003OLQHDUL]HG\u0003 offset\u0003LQWR\u0003RXU\u0003RXWSXW\u0003EXIIHU\u0011\u0003:H\u0003ZLOO\u0003 DOVR\u0003VKLIW\u0003RXU\u0003 (x,y)\u0003LPDJH\u0003FRRUGLQDWHV\u0003E\\\u0003 DIM/2\u0003VR\u0003WKDW\u0003WKH\u0003]\u0010D[LV\u0003UXQV\u0003WKURXJK\u0003 WKH\u0003FHQWHU\u0003RI\u0003WKH\u0003LPDJH\u0011 __global__ void kernel( unsigned char *ptr ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; float ox = (x - DIM/2); float oy = (y - DIM/2); 6LQFH\u0003HDFK\u0003UD\\\u0003QHHGV\u0003WR\u0003FKHFN\u0003HDFK\u0003VSKHUH\u0003IRU\u0003LQWHUVHFWLRQ\u000f\u0003ZH\u0003ZLOO\u0003QRZ\u0003LWHUDWH\u0003 WKURXJK\u0003WKH\u0003DUUD\\\u0003RI\u0003VSKHUHV\u000f\u0003FKHFNLQJ\u0003HDFK\u0003IRU\u0003D\u0003KLW\u0011 float r=0, g=0, b=0; float maxz = -INF; for(int i=0; i<SPHERES; i++) { float n; float t = s[i].hit( ox, oy, &n ); if (t > maxz) { float fscale = n; r = s[i].r * fscale; g = s[i].g * fscale; b = s[i].b * fscale; } } &OHDUO\\\u000f\u0003WKH\u0003PDMRULW\\\u0003RI\u0003WKH\u0003LQWHUHVWLQJ\u0003FRPSXWDWLRQ\u0003OLHV\u0003LQ\u0003WKH\u0003 for()\u0003ORRS\u0011\u0003:H\u0003 LWHUDWH\u0003WKURXJK\u0003HDFK\u0003RI\u0003WKH\u0003LQSXW\u0003VSKHUHV\u0003DQG\u0003FDOO\u0003LWV\u0003 hit()\u0003PHWKRG\u0003WR\u0003GHWHU - PLQH\u0003ZKHWKHU\u0003WKH\u0003UD\\\u0003IURP\u0003RXU\u0003SL[HO\u0003\u01e4VHHV\u01e5\u0003WKH\u0003VSKHUH\u0011\u0003,I\u0003WKH\u0003UD\\\u0003KLWV\u0003WKH\u0003FXUUHQW\u0003 VSKHUH\u000f\u0003ZH\u0003GHWHUPLQH\u0003ZKHWKHU\u0003WKH\u0003KLW\u0003LV\u0003FORVHU\u0003WR\u0003WKH\u0003FDPHUD\u0003WKDQ\u0003WKH\u0003ODVW\u0003VSKHUH\u0003 ZH\u0003KLW\u0011\u0003,I\u0003LW\u0003LV\u0003FORVHU\u000f\u0003ZH\u0003VWRUH\u0003WKLV\u0003GHSWK\u0003DV\u0003RXU\u0003QHZ\u0003FORVHVW\u0003VSKHUH\u0011\u0003,Q\u0003DGGLWLRQ\u000f\u0003ZH\u0003 Download from www.wowebook.comptgCONST ANT MEMORY /one.lf/zero.lf/three.lf\u0019\u0011\u0015\u0003&2167$17\u00030(025< VWRUH\u0003WKH\u0003FRORU\u0003DVVRFLDWHG\u0003ZLWK\u0003WKLV\u0003VSKHUH\u0003VR\u0003WKDW\u0003ZKHQ\u0003WKH\u0003ORRS\u0003KDV\u0003WHUPLQDWHG\u000f\u0003 WKH\u0003WKUHDG\u0003NQRZV\u0003WKH\u0003FRORU\u0003RI\u0003WKH\u0003VSKHUH\u0003WKDW\u0003LV\u0003FORVHVW\u0003WR\u0003WKH\u0003FDPHUD\u0011\u00036LQFH\u0003WKLV\u0003 LV\u0003WKH\u0003FRORU\u0003WKDW\u0003WKH\u0003UD\\\u0003IURP\u0003RXU\u0003SL[HO\u0003\u01e4VHHV\u000f\u01e5\u0003ZH\u0003FRQFOXGH\u0003WKDW\u0003WKLV\u0003LV\u0003WKH\u0003FRORU\u0003RI\u0003 WKH\u0003SL[HO\u0003DQG\u0003VWRUH\u0003WKLV\u0003YDOXH\u0003LQ\u0003RXU\u0003RXWSXW\u0003LPDJH\u0003EXIIHU\u0011 $IWHU\u0003HYHU\\\u0003VSKHUH\u0003KDV\u0003EHHQ\u0003FKHFNHG\u0003IRU\u0003LQWHUVHFWLRQ\u000f\u0003ZH\u0003FDQ\u0003VWRUH\u0003WKH\u0003FXUUHQW\u0003 FRORU\u0003LQWR\u0003WKH\u0003RXWSXW\u0003LPDJH\u0011 ptr[offset*4 + 0] = ( int)(r * 255); ptr[offset*4 + 1] = ( int)(g * 255); ptr[offset*4 + 2] = ( int)(b * 255); ptr[offset*4 + 3] = 255; } 1RWH\u0003WKDW\u0003LI\u0003QR\u0003VSKHUHV\u0003KDYH\u0003EHHQ\u0003KLW\u000f\u0003WKH\u0003FRORU\u0003WKDW\u0003ZH\u0003VWRUH\u0003ZLOO\u0003EH\u0003ZKDWHYHU\u0003 FRORU\u0003ZH\u0003LQLWLDOL]HG\u0003WKH\u0003YDULDEOHV\u0003 r, b\u000f\u0003DQG\u0003g\u0003WR\u0011\u0003,Q\u0003WKLV\u0003FDVH\u000f\u0003ZH\u0003VHW\u0003 r, b\u000f\u0003DQG\u0003g WR\u0003]HUR\u0003VR\u0003WKH\u0003EDFNJURXQG\u0003ZLOO\u0003EH\u0003EODFN\u0011\u0003<RX\u0003FDQ\u0003FKDQJH\u0003WKHVH\u0003YDOXHV\u0003WR\u0003UHQGHU\u0003 D\u0003GLIIHUHQW\u0003FRORU\u0003EDFNJURXQG\u0011\u0003)LJXUH\u0003\u0019\u0011\u0015\u0003VKRZV\u0003DQ\u0003H[DPSOH\u0003RI\u0003ZKDW\u0003WKH\u0003RXWSXW\u0003 VKRXOG\u0003ORRN\u0003OLNH\u0003ZKHQ\u0003UHQGHUHG\u0003ZLWK\u0003\u0015\u0013\u0003VSKHUHV\u0003DQG\u0003D\u0003EODFN\u0003EDFNJURXQG\u0011 Figure 6.2 $\u0003VFUHHQVKRW\u0003IURP\u0003WKH\u0003UD\\\u0003WUDFLQJ\u0003H[DPSOH Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/zero.lf/four.lf6LQFH\u0003ZH\u0003UDQGRPO\\\u0003JHQHUDWHG\u0003WKH\u0003VSKHUH\u0003SRVLWLRQV\u000f\u0003FRORUV\u000f\u0003DQG\u0003VL]HV\u000f\u0003ZH\u0003DGYLVH\u0003 \\RX\u0003QRW\u0003WR\u0003SDQLF\u0003LI\u0003\\RXU\u0003RXWSXW\u0003GRHVQ\u01e2W\u0003PDWFK\u0003WKLV\u0003LPDJH\u0003LGHQWLFDOO\\\u0011\u0003 5$<\u000375$&,1*\u0003:,7+\u0003&2167$17\u00030(025< \u0019\u0011\u0015\u0011\u0016\u0003 <RX\u0003PD\\\u0003KDYH\u0003QRWLFHG\u0003WKDW\u0003ZH\u0003QHYHU\u0003PHQWLRQHG\u0003FRQVWDQW\u0003PHPRU\\\u0003LQ\u0003WKH\u0003UD\\\u0003 WUDFLQJ\u0003H[DPSOH\u0011\u00031RZ\u0003LW\u01e2V\u0003WLPH\u0003WR\u0003LPSURYH\u0003WKLV\u0003H[DPSOH\u0003XVLQJ\u0003WKH\u0003EHQH\u020cWV\u0003RI\u0003 FRQVWDQW\u0003PHPRU\\\u0011\u00036LQFH\u0003ZH\u0003FDQQRW\u0003PRGLI\\\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003ZH\u0003FOHDUO\\\u0003FDQ\u01e2W\u0003 XVH\u0003LW\u0003IRU\u0003WKH\u0003RXWSXW\u0003LPDJH\u0003GDWD\u0011\u0003$QG\u0003WKLV\u0003H[DPSOH\u0003KDV\u0003RQO\\\u0003RQH\u0003LQSXW\u000f\u0003WKH\u0003DUUD\\\u0003",
    "255); ptr[offset*4 + 1] = ( int)(g * 255); ptr[offset*4 + 2] = ( int)(b * 255); ptr[offset*4 + 3] = 255; } 1RWH\u0003WKDW\u0003LI\u0003QR\u0003VSKHUHV\u0003KDYH\u0003EHHQ\u0003KLW\u000f\u0003WKH\u0003FRORU\u0003WKDW\u0003ZH\u0003VWRUH\u0003ZLOO\u0003EH\u0003ZKDWHYHU\u0003 FRORU\u0003ZH\u0003LQLWLDOL]HG\u0003WKH\u0003YDULDEOHV\u0003 r, b\u000f\u0003DQG\u0003g\u0003WR\u0011\u0003,Q\u0003WKLV\u0003FDVH\u000f\u0003ZH\u0003VHW\u0003 r, b\u000f\u0003DQG\u0003g WR\u0003]HUR\u0003VR\u0003WKH\u0003EDFNJURXQG\u0003ZLOO\u0003EH\u0003EODFN\u0011\u0003<RX\u0003FDQ\u0003FKDQJH\u0003WKHVH\u0003YDOXHV\u0003WR\u0003UHQGHU\u0003 D\u0003GLIIHUHQW\u0003FRORU\u0003EDFNJURXQG\u0011\u0003)LJXUH\u0003\u0019\u0011\u0015\u0003VKRZV\u0003DQ\u0003H[DPSOH\u0003RI\u0003ZKDW\u0003WKH\u0003RXWSXW\u0003 VKRXOG\u0003ORRN\u0003OLNH\u0003ZKHQ\u0003UHQGHUHG\u0003ZLWK\u0003\u0015\u0013\u0003VSKHUHV\u0003DQG\u0003D\u0003EODFN\u0003EDFNJURXQG\u0011 Figure 6.2 $\u0003VFUHHQVKRW\u0003IURP\u0003WKH\u0003UD\\\u0003WUDFLQJ\u0003H[DPSOH Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/zero.lf/four.lf6LQFH\u0003ZH\u0003UDQGRPO\\\u0003JHQHUDWHG\u0003WKH\u0003VSKHUH\u0003SRVLWLRQV\u000f\u0003FRORUV\u000f\u0003DQG\u0003VL]HV\u000f\u0003ZH\u0003DGYLVH\u0003 \\RX\u0003QRW\u0003WR\u0003SDQLF\u0003LI\u0003\\RXU\u0003RXWSXW\u0003GRHVQ\u01e2W\u0003PDWFK\u0003WKLV\u0003LPDJH\u0003LGHQWLFDOO\\\u0011\u0003 5$<\u000375$&,1*\u0003:,7+\u0003&2167$17\u00030(025< \u0019\u0011\u0015\u0011\u0016\u0003 <RX\u0003PD\\\u0003KDYH\u0003QRWLFHG\u0003WKDW\u0003ZH\u0003QHYHU\u0003PHQWLRQHG\u0003FRQVWDQW\u0003PHPRU\\\u0003LQ\u0003WKH\u0003UD\\\u0003 WUDFLQJ\u0003H[DPSOH\u0011\u00031RZ\u0003LW\u01e2V\u0003WLPH\u0003WR\u0003LPSURYH\u0003WKLV\u0003H[DPSOH\u0003XVLQJ\u0003WKH\u0003EHQH\u020cWV\u0003RI\u0003 FRQVWDQW\u0003PHPRU\\\u0011\u00036LQFH\u0003ZH\u0003FDQQRW\u0003PRGLI\\\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003ZH\u0003FOHDUO\\\u0003FDQ\u01e2W\u0003 XVH\u0003LW\u0003IRU\u0003WKH\u0003RXWSXW\u0003LPDJH\u0003GDWD\u0011\u0003$QG\u0003WKLV\u0003H[DPSOH\u0003KDV\u0003RQO\\\u0003RQH\u0003LQSXW\u000f\u0003WKH\u0003DUUD\\\u0003 RI\u0003VSKHUHV\u000f\u0003VR\u0003LW\u0003VKRXOG\u0003EH\u0003SUHWW\\\u0003REYLRXV\u0003ZKDW\u0003GDWD\u0003ZH\u0003ZLOO\u0003VWRUH\u0003LQ\u0003FRQVWDQW\u0003 PHPRU\\\u0011 7KH\u0003PHFKDQLVP\u0003IRU\u0003GHFODULQJ\u0003PHPRU\\\u0003FRQVWDQW\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003RQH\u0003ZH\u0003XVHG\u0003IRU\u0003 GHFODULQJ\u0003D\u0003EXIIHU\u0003DV\u0003VKDUHG\u0003PHPRU\\\u0011\u0003,QVWHDG\u0003RI\u0003GHFODULQJ\u0003RXU\u0003DUUD\\\u0003OLNH\u0003WKLV Sphere *s; ZH\u0003DGG\u0003WKH\u0003PRGL\u020cHU\u0003 __constant__ \u0003EHIRUH\u0003LW __constant__ Sphere s[SPHERES]; 1RWLFH\u0003WKDW\u0003LQ\u0003WKH\u0003RULJLQDO\u0003H[DPSOH\u000f\u0003ZH\u0003GHFODUHG\u0003D\u0003SRLQWHU\u0003DQG\u0003WKHQ\u0003XVHG\u0003 cudaMalloc() \u0003WR\u0003DOORFDWH\u0003*38\u0003PHPRU\\\u0003IRU\u0003LW\u0011\u0003:KHQ\u0003ZH\u0003FKDQJHG\u0003LW\u0003WR\u0003FRQVWDQW\u0003 PHPRU\\\u000f\u0003ZH\u0003DOVR\u0003FKDQJHG\u0003WKH\u0003GHFODUDWLRQ\u0003WR\u0003VWDWLFDOO\\\u0003DOORFDWH\u0003WKH\u0003VSDFH\u0003LQ\u0003 FRQVWDQW\u0003PHPRU\\\u0011\u0003:H\u0003QR\u0003ORQJHU\u0003QHHG\u0003WR\u0003ZRUU\\\u0003DERXW\u0003FDOOLQJ\u0003 cudaMalloc() \u0003RU\u0003 cudaFree() \u0003IRU\u0003RXU\u0003DUUD\\\u0003RI\u0003VSKHUHV\u000f\u0003EXW\u0003ZH\u0003GR\u0003QHHG\u0003WR\u0003FRPPLW\u0003WR\u0003D\u0003VL]H\u0003IRU\u0003WKLV\u0003 DUUD\\\u0003DW\u0003FRPSLOH\u0010WLPH\u0011\u0003)RU\u0003PDQ\\\u0003DSSOLFDWLRQV\u000f\u0003WKLV\u0003LV\u0003DQ\u0003DFFHSWDEOH\u0003WUDGH\u0010RII\u0003IRU\u0003 WKH\u0003SHUIRUPDQFH\u0003EHQH\u020cWV\u0003RI\u0003FRQVWDQW\u0003PHPRU\\\u0011\u0003:H\u0003ZLOO\u0003WDON\u0003DERXW\u0003WKHVH\u0003EHQH\u020cWV\u0003 PRPHQWDULO\\\u000f\u0003EXW\u0003\u020cUVW\u0003ZH\u0003ZLOO\u0003ORRN\u0003DW\u0003KRZ\u0003WKH\u0003XVH\u0003RI\u0003FRQVWDQW\u0003PHPRU\\\u0003FKDQJHV\u0003 RXU\u0003main()\u0003URXWLQH int main( void ) { CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; // allocate memory on the GPU for the output bitmap HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); Download from www.wowebook.comptgCONST ANT MEMORY /one.lf/zero.lf/five.lf\u0019\u0011\u0015\u0003&2167$17\u00030(025< // allocate temp memory, initialize it, copy to constant // memory on the GPU, and then free our temp memory Sphere *temp_s = (Sphere*)malloc( sizeof(Sphere) * SPHERES ); for (int i=0; i<SPHERES; i++) { temp_s[i].r = rnd( 1.0f ); temp_s[i].g = rnd( 1.0f ); temp_s[i].b = rnd( 1.0f ); temp_s[i].x = rnd( 1000.0f ) - 500; temp_s[i].y = rnd( 1000.0f ) - 500; temp_s[i].z = rnd( 1000.0f ) - 500; temp_s[i].radius = rnd( 100.0f ) + 20; } HANDLE_ERROR( cudaMemcpyToSymbol( s, temp_s, sizeof(Sphere) * SPHERES) ); free( temp_s ); // generate a bitmap from our sphere data dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( dev_bitmap ); // copy our bitmap back from the GPU for display HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); bitmap.display_and_exit(); // free our memory cudaFree( dev_bitmap ); } /DUJHO\\\u000f\u0003WKLV\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003SUHYLRXV\u0003LPSOHPHQWDWLRQ\u0003RI\u0003 main()\u0011\u0003$V\u0003ZH\u0003 PHQWLRQHG\u0003SUHYLRXVO\\\u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003QHHG\u0003WKH\u0003FDOO\u0003WR\u0003 cudaMalloc() \u0003WR\u0003DOORFDWH\u0003 Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/zero.lf/six.lfVSDFH\u0003IRU\u0003RXU\u0003DUUD\\\u0003RI\u0003VSKHUHV\u0011\u00037KH\u0003RWKHU\u0003FKDQJH\u0003KDV\u0003EHHQ\u0003KLJKOLJKWHG\u0003LQ\u0003WKH\u0003 OLVWLQJ HANDLE_ERROR( cudaMemcpyToSymbol( s, temp_s, sizeof(Sphere) * SPHERES ) ); :H\u0003XVH\u0003WKLV\u0003VSHFLDO\u0003YHUVLRQ\u0003RI\u0003 cudaMemcpy() \u0003ZKHQ\u0003ZH\u0003FRS\\\u0003IURP\u0003KRVW\u0003 PHPRU\\\u0003WR\u0003FRQVWDQW\u0003PHPRU\\\u0003RQ\u0003WKH\u0003*38\u0011\u00037KH\u0003RQO\\\u0003GLIIHUHQFHV\u0003EHWZHHQ\u0003 cudaMemcpyToSymbol() \u0003DQG\u0003cudaMemcpy() \u0003XVLQJ\u0003\u0003cudaMemcpyHostToDevice DUH\u0003WKDW\u0003cudaMemcpyToSymbol() \u0003FRSLHV\u0003WR\u0003FRQVWDQW\u0003PHPRU\\\u0003DQG\u0003 cudaMemcpy() \u0003FRSLHV\u0003WR\u0003JOREDO\u0003PHPRU\\\u0011 2XWVLGH\u0003WKH\u0003 __constant__ \u0003PRGL\u020cHU\u0003DQG\u0003WKH\u0003WZR\u0003FKDQJHV\u0003WR\u0003 main()\u000f\u0003WKH\u0003 YHUVLRQV\u0003ZLWK\u0003DQG\u0003ZLWKRXW\u0003FRQVWDQW\u0003PHPRU\\\u0003DUH\u0003LGHQWLFDO\u0011 3(5)250$1&(\u0003:,7+\u0003&2167$17\u00030(025< \u0019\u0011\u0015\u0011\u0017\u0003 'HFODULQJ\u0003PHPRU\\\u0003DV\u0003 __constant__ \u0003FRQVWUDLQV\u0003RXU\u0003XVDJH\u0003WR\u0003EH\u0003UHDG\u0010RQO\\\u0011\u0003,Q\u0003 WDNLQJ\u0003RQ\u0003WKLV\u0003FRQVWUDLQW\u000f\u0003ZH\u0003H[SHFW\u0003WR\u0003JHW\u0003VRPHWKLQJ\u0003LQ\u0003UHWXUQ\u0011\u0003$V\u0003ZH\u0003SUHYLRXVO\\\u0003 PHQWLRQHG\u000f\u0003UHDGLQJ\u0003IURP\u0003FRQVWDQW\u0003PHPRU\\\u0003FDQ\u0003FRQVHUYH\u0003PHPRU\\\u0003EDQGZLGWK\u0003 ZKHQ\u0003FRPSDUHG\u0003WR\u0003UHDGLQJ\u0003WKH\u0003VDPH\u0003GDWD\u0003IURP\u0003JOREDO\u0003PHPRU\\\u0011\u00037KHUH\u0003DUH\u0003WZR\u0003 UHDVRQV\u0003ZK\\\u0003UHDGLQJ\u0003IURP\u0003WKH\u0003\u0019\u0017.%\u0003RI\u0003FRQVWDQW\u0003PHPRU\\\u0003FDQ\u0003VDYH\u0003EDQGZLGWK\u0003RYHU\u0003 VWDQGDUG\u0003UHDGV\u0003RI\u0003JOREDO\u0003PHPRU\\ $\u0003VLQJOH\u0003UHDG\u0003IURP\u0003FRQVWDQW\u0003PHPRU\\\u0003FDQ\u0003EH\u0003EURDGFDVW\u0003WR\u0003RWKHU\u0003\u01e4QHDUE\\\u01e5\u0003\u01e9\u0003 WKUHDGV\u000f\u0003HIIHFWLYHO\\\u0003VDYLQJ\u0003XS\u0003WR\u0003\u0014\u0018\u0003UHDGV\u0011 &RQVWDQW\u0003PHPRU\\\u0003LV\u0003FDFKHG\u000f\u0003VR\u0003FRQVHFXWLYH\u0003UHDGV\u0003RI\u0003WKH\u0003VDPH\u0003DGGUHVV\u0003ZLOO\u0003QRW\u0003\u01e9\u0003 LQFXU\u0003DQ\\\u0003DGGLWLRQDO\u0003PHPRU\\\u0003WUDI\u020cF\u0011 :KDW\u0003GR\u0003ZH\u0003PHDQ\u0003E\\\u0003WKH\u0003ZRUG\u0003 nearby \"\u00037R\u0003DQVZHU\u0003WKLV\u0003TXHVWLRQ\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003WR\u0003 H[SODLQ\u0003WKH\u0003FRQFHSW\u0003RI\u0003D\u0003 warp \u0011\u0003)RU\u0003WKRVH\u0003UHDGHUV\u0003ZKR\u0003DUH\u0003PRUH\u0003IDPLOLDU\u0003ZLWK\u0003 Star Trek \u0003WKDQ\u0003ZLWK\u0003ZHDYLQJ\u000f\u0003D\u0003ZDUS\u0003LQ\u0003WKLV\u0003FRQWH[W\u0003KDV\u0003QRWKLQJ\u0003WR\u0003GR\u0003ZLWK\u0003WKH\u0003VSHHG\u0003 RI\u0003WUDYHO\u0003WKURXJK\u0003VSDFH\u0011\u0003,Q\u0003WKH\u0003ZRUOG\u0003RI\u0003ZHDYLQJ\u000f\u0003D\u0003ZDUS\u0003UHIHUV\u0003WR\u0003WKH\u0003JURXS\u0003 RI\u0003threads \u0003EHLQJ\u0003ZRYHQ\u0003WRJHWKHU\u0003LQWR\u0003IDEULF\u0011\u0003,Q\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u000f\u0003D\u0003 warp UHIHUV\u0003WR\u0003D\u0003FROOHFWLRQ\u0003RI\u0003\u0016\u0015\u0003WKUHDGV\u0003WKDW\u0003DUH\u0003\u01e4ZRYHQ\u0003WRJHWKHU\u01e5\u0003DQG\u0003JHW\u0003H[HFXWHG\u0003LQ\u0003 ORFNVWHS\u0011\u0003$W\u0003HYHU\\\u0003OLQH\u0003LQ\u0003\\RXU\u0003SURJUDP\u000f\u0003HDFK\u0003WKUHDG\u0003LQ\u0003D\u0003ZDUS\u0003H[HFXWHV\u0003WKH\u0003VDPH\u0003 LQVWUXFWLRQ\u0003RQ\u0003GLIIHUHQW\u0003GDWD\u0011\u0003 Download from www.wowebook.comptgCONST ANT MEMORY /one.lf/zero.lf/seven.lf\u0019\u0011\u0015\u0003&2167$17\u00030(025< :KHQ\u0003LW\u0003FRPHV\u0003WR\u0003KDQGOLQJ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u000319,',$\u0003KDUGZDUH\u0003FDQ\u0003EURDGFDVW\u0003 D\u0003VLQJOH\u0003PHPRU\\\u0003UHDG\u0003WR\u0003HDFK\u0003KDOI\u0010ZDUS\u0011\u0003$\u0003KDOI\u0010ZDUS\u01dfQRW\u0003QHDUO\\\u0003DV\u0003FUHDWLYHO\\\u0003 QDPHG\u0003DV\u0003D\u0003ZDUS\u01dfLV\u0003D\u0003JURXS\u0003RI\u0003\u0014\u0019\u0003WKUHDGV \u0003KDOI\u0003RI\u0003D\u0003\u0016\u0015\u0010WKUHDG\u0003ZDUS\u0011\u0003,I\u0003HYHU\\\u0003 WKUHDG\u0003LQ\u0003D\u0003KDOI\u0010ZDUS\u0003UHTXHVWV\u0003GDWD\u0003IURP\u0003WKH\u0003VDPH\u0003DGGUHVV\u0003LQ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003 \\RXU\u0003*38\u0003ZLOO\u0003JHQHUDWH\u0003RQO\\\u0003D\u0003VLQJOH\u0003UHDG\u0003UHTXHVW\u0003DQG\u0003VXEVHTXHQWO\\\u0003EURDGFDVW\u0003 WKH\u0003GDWD\u0003WR\u0003HYHU\\\u0003WKUHDG\u0011\u0003,I\u0003\\RX\u0003DUH\u0003UHDGLQJ\u0003D\u0003ORW\u0003RI\u0003GDWD\u0003IURP\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003 \\RX\u0003ZLOO\u0003JHQHUDWH\u0003RQO\\\u0003\u0014\u0012\u0014\u0019\u0003 URXJKO\\\u0003\u0019\u0003SHUFHQW \u0003RI\u0003WKH\u0003PHPRU\\\u0003WUDI\u020cF\u0003DV\u0003\\RX\u0003ZRXOG\u0003 ZKHQ\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0011\u0003 %XW\u0003WKH\u0003VDYLQJV\u0003GRQ\u01e2W\u0003VWRS\u0003DW\u0003D\u0003 \u0017\u0003SHUFHQW\u0003UHGXFWLRQ\u0003LQ\u0003EDQGZLGWK\u0003ZKHQ\u0003 UHDGLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0004\u0003%HFDXVH\u0003ZH\u0003KDYH\u0003FRPPLWWHG\u0003WR\u0003OHDYLQJ\u0003WKH\u0003PHPRU\\\u0003 XQFKDQJHG\u000f\u0003WKH\u0003KDUGZDUH\u0003FDQ\u0003DJJUHVVLYHO\\\u0003FDFKH\u0003WKH\u0003FRQVWDQW\u0003GDWD\u0003RQ\u0003WKH\u0003*38\u0011\u0003 6R\u0003DIWHU\u0003WKH\u0003\u020cUVW\u0003UHDG\u0003IURP\u0003DQ\u0003DGGUHVV\u0003LQ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003RWKHU\u0003KDOI\u0010ZDUSV\u0003 UHTXHVWLQJ\u0003WKH\u0003VDPH\u0003DGGUHVV\u000f\u0003DQG\u0003WKHUHIRUH\u0003KLWWLQJ\u0003WKH\u0003FRQVWDQW\u0003FDFKH\u000f\u0003ZLOO\u0003 JHQHUDWH\u0003QR\u0003DGGLWLRQDO\u0003PHPRU\\\u0003WUDI\u020cF\u0011\u0003 ,Q\u0003WKH\u0003FDVH\u0003RI\u0003RXU\u0003UD\\\u0003WUDFHU\u000f\u0003HYHU\\\u0003WKUHDG\u0003LQ\u0003WKH\u0003ODXQFK\u0003UHDGV\u0003WKH\u0003GDWD\u0003FRUUH - VSRQGLQJ\u0003WR\u0003WKH\u0003\u020cUVW\u0003VSKHUH\u0003VR\u0003WKH\u0003WKUHDG\u0003FDQ\u0003WHVW\u0003LWV\u0003UD\\\u0003IRU\u0003LQWHUVHFWLRQ\u0011\u0003$IWHU\u0003 ZH\u0003PRGLI\\\u0003RXU\u0003DSSOLFDWLRQ\u0003WR\u0003VWRUH\u0003WKH\u0003VSKHUHV\u0003LQ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003WKH\u0003KDUG - ZDUH\u0003QHHGV\u0003WR\u0003PDNH\u0003RQO\\\u0003D\u0003VLQJOH\u0003UHTXHVW\u0003IRU\u0003WKLV\u0003GDWD\u0011\u0003$IWHU\u0003FDFKLQJ\u0003WKH\u0003GDWD\u000f\u0003 HYHU\\\u0003RWKHU\u0003WKUHDG\u0003DYRLGV\u0003JHQHUDWLQJ\u0003PHPRU\\\u0003WUDI\u020cF\u0003DV\u0003D\u0003UHVXOW\u0003RI\u0003RQH\u0003RI\u0003WKH\u0003WZR\u0003 FRQVWDQW\u0003PHPRU\\\u0003EHQH\u020cWV ,W\u0003UHFHLYHV\u0003WKH\u0003GDWD\u0003LQ\u0003D\u0003KDOI\u0010ZDUS\u0003EURDGFDVW\u0011\u01e9\u0003 ,W\u0003UHWULHYHV\u0003WKH\u0003GDWD\u0003IURP\u0003WKH\u0003FRQVWDQW\u0003PHPRU\\\u0003FDFKH\u0011\u01e9\u0003 8QIRUWXQDWHO\\\u000f\u0003WKHUH\u0003FDQ\u0003SRWHQWLDOO\\\u0003EH\u0003D\u0003GRZQVLGH\u0003WR\u0003SHUIRUPDQFH\u0003ZKHQ\u0003XVLQJ\u0003 FRQVWDQW\u0003PHPRU\\\u0011\u00037KH\u0003KDOI\u0010ZDUS\u0003EURDGFDVW\u0003IHDWXUH\u0003LV\u0003LQ\u0003DFWXDOLW\\\u0003D\u0003GRXEOH\u0010HGJHG\u0003 VZRUG\u0011\u0003$OWKRXJK\u0003LW\u0003FDQ\u0003GUDPDWLFDOO\\\u0003DFFHOHUDWH\u0003SHUIRUPDQFH\u0003ZKHQ\u0003DOO\u0003\u0014\u0019\u0003WKUHDGV\u0003 DUH\u0003UHDGLQJ\u0003WKH\u0003VDPH\u0003DGGUHVV\u000f\u0003LW\u0003DFWXDOO\\\u0003VORZV\u0003SHUIRUPDQFH\u0003WR\u0003D\u0003FUDZO\u0003ZKHQ\u0003DOO\u0003 \u0014\u0019\u0003WKUHDGV\u0003UHDG\u0003GLIIHUHQW\u0003DGGUHVVHV\u0011\u0003 7KH\u0003WUDGH\u0010RII\u0003WR\u0003DOORZLQJ\u0003WKH\u0003EURDGFDVW\u0003RI\u0003D\u0003VLQJOH\u0003UHDG\u0003WR\u0003\u0014\u0019\u0003WKUHDGV\u0003LV\u0003WKDW\u0003WKH\u0003 \u0014\u0019\u0003WKUHDGV\u0003DUH\u0003DOORZHG\u0003WR\u0003SODFH\u0003RQO\\\u0003D\u0003VLQJOH\u0003UHDG\u0003UHTXHVW\u0003DW\u0003D\u0003WLPH\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003 LI\u0003DOO\u0003\u0014\u0019\u0003WKUHDGV\u0003LQ\u0003D\u0003KDOI\u0010ZDUS\u0003QHHG\u0003GLIIHUHQW\u0003GDWD\u0003IURP\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003WKH\u0003 \u0014\u0019\u0003GLIIHUHQW\u0003UHDGV\u0003JHW\u0003VHULDOL]HG\u000f\u0003HIIHFWLYHO\\\u0003WDNLQJ\u0003\u0014\u0019\u0003WLPHV\u0003WKH\u0003DPRXQW\u0003RI\u0003WLPH\u0003 WR\u0003SODFH\u0003WKH\u0003UHTXHVW\u0011\u0003,I\u0003WKH\\\u0003ZHUH\u0003UHDGLQJ\u0003IURP\u0003FRQYHQWLRQDO\u0003JOREDO\u0003PHPRU\\\u000f\u0003WKH\u0003 UHTXHVW\u0003FRXOG\u0003EH\u0003LVVXHG\u0003DW\u0003WKH\u0003VDPH\u0003WLPH\u0011\u0003,Q\u0003WKLV\u0003FDVH\u000f\u0003UHDGLQJ\u0003IURP\u0003FRQVWDQW\u0003 PHPRU\\\u0003ZRXOG\u0003SUREDEO\\\u0003EH\u0003VORZHU\u0003WKDQ\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0011 Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/zero.lf/eight.lf0HDVXULQJ\u00033HUIRUPDQFH\u0003ZLWK\u0003(YHQWV\u0019\u0011\u0016\u0003 )XOO\\\u0003DZDUH\u0003WKDW\u0003WKHUH\u0003PD\\\u0003EH\u0003HLWKHU\u0003SRVLWLYH\u0003RU\u0003QHJDWLYH\u0003LPSOLFDWLRQV\u000f\u0003\\RX\u0003KDYH\u0003 FKDQJHG\u0003\\RXU\u0003UD\\\u0003WUDFHU\u0003WR\u0003XVH\u0003FRQVWDQW\u0003PHPRU\\\u0011\u0003+RZ\u0003GR\u0003\\RX\u0003GHWHUPLQH\u0003KRZ\u0003WKLV\u0003 KDV\u0003LPSDFWHG\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003\\RXU\u0003SURJUDP\"\u00032QH\u0003RI\u0003WKH\u0003VLPSOHVW\u0003PHWULFV\u0003 LQYROYHV\u0003DQVZHULQJ\u0003WKLV\u0003VLPSOH\u0003TXHVWLRQ \u0003:KLFK\u0003YHUVLRQ\u0003WDNHV\u0003OHVV\u0003WLPH\u0003WR\u0003\u020cQLVK\"\u0003 :H\u0003FRXOG\u0003XVH\u0003RQH\u0003RI\u0003WKH\u0003&38\u0003RU\u0003RSHUDWLQJ\u0003V\\VWHP\u0003WLPHUV\u000f\u0003EXW\u0003WKLV\u0003ZLOO\u0003LQFOXGH\u0003 ODWHQF\\\u0003DQG\u0003YDULDWLRQ\u0003IURP\u0003DQ\\\u0003QXPEHU\u0003RI\u0003VRXUFHV\u0003 RSHUDWLQJ\u0003V\\VWHP\u0003WKUHDG\u0003 VFKHGXOLQJ\u000f\u0003DYDLODELOLW\\\u0003RI\u0003KLJK\u0010SUHFLVLRQ\u0003&38\u0003WLPHUV\u000f\u0003DQG\u0003VR\u0003RQ \u0011\u0003)XUWKHUPRUH\u000f\u0003 ZKLOH\u0003WKH\u0003*38\u0003NHUQHO\u0003UXQV\u000f\u0003ZH\u0003PD\\\u0003EH\u0003DV\\QFKURQRXVO\\\u0003SHUIRUPLQJ\u0003FRPSXWDWLRQ\u0003 RQ\u0003WKH\u0003KRVW\u0011\u00037KH\u0003RQO\\\u0003ZD\\\u0003WR\u0003WLPH\u0003WKHVH\u0003KRVW\u0003FRPSXWDWLRQV\u0003LV\u0003XVLQJ\u0003WKH\u0003&38\u0003RU\u0003 RSHUDWLQJ\u0003V\\VWHP\u0003WLPLQJ\u0003PHFKDQLVP\u0011\u00036R\u0003WR\u0003PHDVXUH\u0003WKH\u0003WLPH\u0003D\u0003*38\u0003VSHQGV\u0003RQ\u0003D\u0003 WDVN\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003WKH\u0003&8'$\u0003HYHQW\u0003$3,\u0011 $Q\u0003event \u0003LQ\u0003&8'$\u0003LV\u0003HVVHQWLDOO\\\u0003D\u0003*38\u0003WLPH\u0003VWDPS\u0003WKDW\u0003LV\u0003UHFRUGHG\u0003DW\u0003D\u0003XVHU\u0010 VSHFL\u020cHG\u0003SRLQW\u0003LQ\u0003WLPH\u0011\u00036LQFH\u0003WKH\u0003*38\u0003LWVHOI\u0003LV\u0003UHFRUGLQJ\u0003WKH\u0003WLPH\u0003VWDPS\u000f\u0003LW\u0003 HOLPLQDWHV\u0003D\u0003ORW\u0003RI\u0003WKH\u0003SUREOHPV\u0003ZH\u0003PLJKW\u0003HQFRXQWHU\u0003ZKHQ\u0003WU\\LQJ\u0003WR\u0003WLPH\u0003*38\u0003 H[HFXWLRQ\u0003ZLWK\u0003&38\u0003WLPHUV\u0011\u00037KH\u0003$3,\u0003LV\u0003UHODWLYHO\\\u0003HDV\\\u0003WR\u0003XVH\u000f\u0003VLQFH\u0003WDNLQJ\u0003D\u0003WLPH\u0003 VWDPS\u0003FRQVLVWV\u0003RI\u0003MXVW\u0003WZR\u0003VWHSV \u0003FUHDWLQJ\u0003DQ\u0003HYHQW\u0003DQG\u0003VXEVHTXHQWO\\\u0003UHFRUGLQJ\u0003 DQ\u0003HYHQW\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003DW\u0003WKH\u0003EHJLQQLQJ\u0003RI\u0003VRPH\u0003VHTXHQFH\u0003RI\u0003FRGH\u000f\u0003ZH\u0003LQVWUXFW\u0003 WKH\u0003&8'$\u0003UXQWLPH\u0003WR\u0003PDNH\u0003D\u0003UHFRUG\u0003RI\u0003WKH\u0003FXUUHQW\u0003WLPH\u0011\u0003:H\u0003GR\u0003VR\u0003E\\\u0003FUHDWLQJ\u0003DQG\u0003 WKHQ\u0003UHFRUGLQJ\u0003WKH\u0003HYHQW cudaEvent_t start; cudaEventCreate(&start); cudaEventRecord( start, 0 ); <RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003ZKHQ\u0003ZH\u0003LQVWUXFW\u0003WKH\u0003UXQWLPH\u0003WR\u0003UHFRUG\u0003WKH\u0003HYHQW\u0003 start, we DOVR\u0003SDVV\u0003LW\u0003D\u0003VHFRQG\u0003DUJXPHQW\u0011\u0003,Q\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u000f\u0003WKLV\u0003DUJXPHQW\u0003LV\u0003\u0013\u0011\u00037KH\u0003 H[DFW\u0003QDWXUH\u0003RI\u0003WKLV\u0003DUJXPHQW\u0003LV\u0003XQLPSRUWDQW\u0003IRU\u0003RXU\u0003SXUSRVHV\u0003ULJKW\u0003QRZ\u000f\u0003VR\u0003ZH\u0003 LQWHQG\u0003WR\u0003OHDYH\u0003LW\u0003P\\VWHULRXVO\\\u0003XQH[SODLQHG\u0003UDWKHU\u0003WKDQ\u0003RSHQ\u0003D\u0003QHZ\u0003FDQ\u0003RI\u0003ZRUPV\u0011\u0003 ,I\u0003\\RXU\u0003FXULRVLW\\\u0003LV\u0003NLOOLQJ\u0003\\RX\u000f\u0003ZH\u0003LQWHQG\u0003WR\u0003GLVFXVV\u0003WKLV\u0003ZKHQ\u0003ZH\u0003WDON\u0003DERXW\u0003 streams \u0011 7R\u0003WLPH\u0003D\u0003EORFN\u0003RI\u0003FRGH\u000f\u0003ZH\u0003ZLOO\u0003ZDQW\u0003WR\u0003FUHDWH\u0003ERWK\u0003D\u0003VWDUW\u0003HYHQW\u0003DQG\u0003D\u0003VWRS\u0003HYHQW\u0011\u0003 :H\u0003ZLOO\u0003KDYH\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003UHFRUG\u0003ZKHQ\u0003ZH\u0003VWDUW\u0003WHOO\u0003LW\u0003WR\u0003GR\u0003VRPH\u0003RWKHU\u0003ZRUN\u0003 RQ\u0003WKH\u0003*38\u0003DQG\u0003WKHQ\u0003WHOO\u0003LW\u0003WR\u0003UHFRUG\u0003ZKHQ\u0003ZH\u01e2YH\u0003VWRSSHG Download from www.wowebook.comptg000((( $$$ 666 888 555 , , , 111 *** \u0003\u0003\u00033 3 3( ( (5 5 5) ) )2 2 25 5 50 0 0$ $ $1 1 1& & &( ( ( \u0003\u0003\u0003::: , , , 7 7 7\u0003\u0003\u0003( ( (999 ((( 111666 /one.lf/zero.lf/nine.lf\u0019\u0011\u0016\u0003 +++777cudaEvent_t start, stop; cudaEventCreate(&start); cudaEventCreate(&stop); cudaEventRecord( start, 0 ); // do some work on the GPU cudaEventRecord( stop, 0 ); 8QIRUWXQDWHO\\\u000f\u0003WKHUH\u0003LV\u0003VWLOO\u0003D\u0003SUREOHP\u0003ZLWK\u0003WLPLQJ\u0003*38\u0003FRGH\u0003LQ\u0003WKLV\u0003ZD\\\u0011\u00037KH\u0003\u020c[\u0003ZLOO\u0003 UHTXLUH\u0003RQO\\\u0003RQH\u0003OLQH\u0003RI\u0003FRGH\u0003EXW\u0003ZLOO\u0003UHTXLUH\u0003VRPH\u0003H[SODQDWLRQ\u0011\u00037KH\u0003WULFNLHVW\u0003SDUW\u0003RI\u0003 XVLQJ\u0003HYHQWV\u0003DULVHV\u0003DV\u0003D\u0003FRQVHTXHQFH\u0003RI\u0003WKH\u0003IDFW\u0003WKDW\u0003VRPH\u0003RI\u0003WKH\u0003FDOOV\u0003ZH\u0003PDNH\u0003LQ\u0003 &8'$\u0003&\u0003DUH\u0003DFWXDOO\\\u0003 asynchronous \u0011\u0003)RU\u0003H[DPSOH\u000f\u0003ZKHQ\u0003ZH\u0003ODXQFKHG\u0003WKH\u0003NHUQHO\u0003LQ\u0003 RXU\u0003UD\\\u0003WUDFHU\u000f\u0003WKH\u0003*38\u0003EHJLQV\u0003H[HFXWLQJ\u0003RXU\u0003FRGH\u000f\u0003EXW\u0003WKH\u0003&38\u0003FRQWLQXHV\u0003H[HFXWLQJ\u0003 WKH\u0003QH[W\u0003OLQH\u0003RI\u0003RXU\u0003SURJUDP\u0003EHIRUH\u0003WKH\u0003*38\u0003\u020cQLVKHV\u0011\u00037KLV\u0003LV\u0003H[FHOOHQW\u0003IURP\u0003D\u0003 SHUIRUPDQFH\u0003VWDQGSRLQW\u0003EHFDXVH\u0003LW\u0003PHDQV\u0003ZH\u0003FDQ\u0003EH\u0003FRPSXWLQJ\u0003VRPHWKLQJ\u0003RQ\u0003WKH\u0003 *38\u0003DQG\u0003&38\u0003DW\u0003WKH\u0003VDPH\u0003WLPH\u000f\u0003EXW\u0003FRQFHSWXDOO\\\u0003LW\u0003PDNHV\u0003WLPLQJ\u0003WULFN\\\u0011 <RX\u0003VKRXOG\u0003LPDJLQH\u0003FDOOV\u0003WR\u0003 cudaEventRecord() \u0003DV\u0003DQ\u0003LQVWUXFWLRQ\u0003WR\u0003UHFRUG\u0003 WKH\u0003FXUUHQW\u0003WLPH\u0003EHLQJ\u0003SODFHG\u0003LQWR\u0003WKH\u0003*38\u01e2V\u0003SHQGLQJ\u0003TXHXH\u0003RI\u0003ZRUN\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003 RXU\u0003HYHQW\u0003ZRQ\u01e2W\u0003DFWXDOO\\\u0003EH\u0003UHFRUGHG\u0003XQWLO\u0003WKH\u0003*38\u0003\u020cQLVKHV\u0003HYHU\\WKLQJ\u0003SULRU\u0003WR\u0003WKH\u0003 FDOO\u0003WR\u0003cudaEventRecord() \u0011\u0003,Q\u0003WHUPV\u0003RI\u0003KDYLQJ\u0003RXU\u0003 stop\u0003HYHQW\u0003PHDVXUH\u0003WKH\u0003 FRUUHFW\u0003WLPH\u000f\u0003WKLV\u0003LV\u0003SUHFLVHO\\\u0003ZKDW\u0003ZH\u0003ZDQW\u0011\u0003%XW\u0003ZH\u0003FDQQRW\u0003VDIHO\\\u0003 read \u0003WKH\u0003YDOXH\u0003 RI\u0003WKH\u0003stop\u0003HYHQW\u0003XQWLO\u0003WKH\u0003*38\u0003KDV\u0003FRPSOHWHG\u0003LWV\u0003SULRU\u0003ZRUN\u0003DQG\u0003UHFRUGHG\u0003WKH\u0003 stop\u0003HYHQW\u0011\u0003)RUWXQDWHO\\\u000f\u0003ZH\u0003KDYH\u0003D\u0003ZD\\\u0003WR\u0003LQVWUXFW\u0003WKH\u0003&38\u0003WR\u0003V\\QFKURQL]H\u0003RQ\u0003DQ\u0003 HYHQW\u000f\u0003WKH\u0003HYHQW\u0003$3,\u0003IXQFWLRQ\u0003 cudaEventSynchronize()",
    "( (999 ((( 111666 /one.lf/zero.lf/nine.lf\u0019\u0011\u0016\u0003 +++777cudaEvent_t start, stop; cudaEventCreate(&start); cudaEventCreate(&stop); cudaEventRecord( start, 0 ); // do some work on the GPU cudaEventRecord( stop, 0 ); 8QIRUWXQDWHO\\\u000f\u0003WKHUH\u0003LV\u0003VWLOO\u0003D\u0003SUREOHP\u0003ZLWK\u0003WLPLQJ\u0003*38\u0003FRGH\u0003LQ\u0003WKLV\u0003ZD\\\u0011\u00037KH\u0003\u020c[\u0003ZLOO\u0003 UHTXLUH\u0003RQO\\\u0003RQH\u0003OLQH\u0003RI\u0003FRGH\u0003EXW\u0003ZLOO\u0003UHTXLUH\u0003VRPH\u0003H[SODQDWLRQ\u0011\u00037KH\u0003WULFNLHVW\u0003SDUW\u0003RI\u0003 XVLQJ\u0003HYHQWV\u0003DULVHV\u0003DV\u0003D\u0003FRQVHTXHQFH\u0003RI\u0003WKH\u0003IDFW\u0003WKDW\u0003VRPH\u0003RI\u0003WKH\u0003FDOOV\u0003ZH\u0003PDNH\u0003LQ\u0003 &8'$\u0003&\u0003DUH\u0003DFWXDOO\\\u0003 asynchronous \u0011\u0003)RU\u0003H[DPSOH\u000f\u0003ZKHQ\u0003ZH\u0003ODXQFKHG\u0003WKH\u0003NHUQHO\u0003LQ\u0003 RXU\u0003UD\\\u0003WUDFHU\u000f\u0003WKH\u0003*38\u0003EHJLQV\u0003H[HFXWLQJ\u0003RXU\u0003FRGH\u000f\u0003EXW\u0003WKH\u0003&38\u0003FRQWLQXHV\u0003H[HFXWLQJ\u0003 WKH\u0003QH[W\u0003OLQH\u0003RI\u0003RXU\u0003SURJUDP\u0003EHIRUH\u0003WKH\u0003*38\u0003\u020cQLVKHV\u0011\u00037KLV\u0003LV\u0003H[FHOOHQW\u0003IURP\u0003D\u0003 SHUIRUPDQFH\u0003VWDQGSRLQW\u0003EHFDXVH\u0003LW\u0003PHDQV\u0003ZH\u0003FDQ\u0003EH\u0003FRPSXWLQJ\u0003VRPHWKLQJ\u0003RQ\u0003WKH\u0003 *38\u0003DQG\u0003&38\u0003DW\u0003WKH\u0003VDPH\u0003WLPH\u000f\u0003EXW\u0003FRQFHSWXDOO\\\u0003LW\u0003PDNHV\u0003WLPLQJ\u0003WULFN\\\u0011 <RX\u0003VKRXOG\u0003LPDJLQH\u0003FDOOV\u0003WR\u0003 cudaEventRecord() \u0003DV\u0003DQ\u0003LQVWUXFWLRQ\u0003WR\u0003UHFRUG\u0003 WKH\u0003FXUUHQW\u0003WLPH\u0003EHLQJ\u0003SODFHG\u0003LQWR\u0003WKH\u0003*38\u01e2V\u0003SHQGLQJ\u0003TXHXH\u0003RI\u0003ZRUN\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003 RXU\u0003HYHQW\u0003ZRQ\u01e2W\u0003DFWXDOO\\\u0003EH\u0003UHFRUGHG\u0003XQWLO\u0003WKH\u0003*38\u0003\u020cQLVKHV\u0003HYHU\\WKLQJ\u0003SULRU\u0003WR\u0003WKH\u0003 FDOO\u0003WR\u0003cudaEventRecord() \u0011\u0003,Q\u0003WHUPV\u0003RI\u0003KDYLQJ\u0003RXU\u0003 stop\u0003HYHQW\u0003PHDVXUH\u0003WKH\u0003 FRUUHFW\u0003WLPH\u000f\u0003WKLV\u0003LV\u0003SUHFLVHO\\\u0003ZKDW\u0003ZH\u0003ZDQW\u0011\u0003%XW\u0003ZH\u0003FDQQRW\u0003VDIHO\\\u0003 read \u0003WKH\u0003YDOXH\u0003 RI\u0003WKH\u0003stop\u0003HYHQW\u0003XQWLO\u0003WKH\u0003*38\u0003KDV\u0003FRPSOHWHG\u0003LWV\u0003SULRU\u0003ZRUN\u0003DQG\u0003UHFRUGHG\u0003WKH\u0003 stop\u0003HYHQW\u0011\u0003)RUWXQDWHO\\\u000f\u0003ZH\u0003KDYH\u0003D\u0003ZD\\\u0003WR\u0003LQVWUXFW\u0003WKH\u0003&38\u0003WR\u0003V\\QFKURQL]H\u0003RQ\u0003DQ\u0003 HYHQW\u000f\u0003WKH\u0003HYHQW\u0003$3,\u0003IXQFWLRQ\u0003 cudaEventSynchronize() cudaEvent_t start, stop; cudaEventCreate(&start); cudaEventCreate(&stop); cudaEventRecord( start, 0 ); // do some work on the GPU cudaEventRecord( stop, 0 ); cudaEventSynchronize( stop ); 1RZ\u000f\u0003ZH\u0003KDYH\u0003LQVWUXFWHG\u0003WKH\u0003UXQWLPH\u0003WR\u0003EORFN\u0003IXUWKHU\u0003LQVWUXFWLRQ\u0003XQWLO\u0003WKH\u0003*38\u0003 KDV\u0003UHDFKHG\u0003WKH\u0003 stop\u0003HYHQW\u0011\u0003:KHQ\u0003WKH\u0003FDOO\u0003WR\u0003 cudaEventSynchronize() Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/one.lf/zero.lfUHWXUQV\u000f\u0003ZH\u0003NQRZ\u0003WKDW\u0003DOO\u0003*38\u0003ZRUN\u0003EHIRUH\u0003WKH\u0003 stop\u0003HYHQW\u0003KDV\u0003FRPSOHWHG\u000f\u0003VR\u0003LW\u0003 LV\u0003VDIH\u0003WR\u0003UHDG\u0003WKH\u0003WLPH\u0003VWDPS\u0003UHFRUGHG\u0003LQ\u0003 stop\u0011\u0003,W\u0003LV\u0003ZRUWK\u0003QRWLQJ\u0003WKDW\u0003EHFDXVH\u0003 &8'$\u0003HYHQWV\u0003JHW\u0003LPSOHPHQWHG\u0003GLUHFWO\\\u0003RQ\u0003WKH\u0003*38\u000f\u0003WKH\\\u0003DUH\u0003XQVXLWDEOH\u0003IRU\u0003WLPLQJ\u0003 PL[WXUHV\u0003RI\u0003GHYLFH\u0003DQG\u0003KRVW\u0003FRGH\u0011\u00037KDW\u0003LV\u000f\u0003\\RX\u0003ZLOO\u0003JHW\u0003XQUHOLDEOH\u0003UHVXOWV\u0003LI\u0003\\RX\u0003 DWWHPSW\u0003WR\u0003XVH\u0003&8'$\u0003HYHQWV\u0003WR\u0003WLPH\u0003PRUH\u0003WKDQ\u0003NHUQHO\u0003H[HFXWLRQV\u0003DQG\u0003PHPRU\\\u0003 FRSLHV\u0003LQYROYLQJ\u0003WKH\u0003GHYLFH\u0011 0($685,1*\u00035$<\u000375$&(5\u00033(5)250$1&( \u0019\u0011\u0016\u0011\u0014\u0003 7R\u0003WLPH\u0003RXU\u0003UD\\\u0003WUDFHU\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003WR\u0003FUHDWH\u0003D\u0003VWDUW\u0003DQG\u0003VWRS\u0003HYHQW\u000f\u0003MXVW\u0003DV\u0003ZH\u0003GLG\u0003 ZKHQ\u0003OHDUQLQJ\u0003DERXW\u0003HYHQWV\u0011\u00037KH\u0003IROORZLQJ\u0003LV\u0003D\u0003WLPLQJ\u0010HQDEOHG\u0003YHUVLRQ\u0003RI\u0003WKH\u0003UD\\\u0003 WUDFHU\u0003WKDW\u0003GRHV\u0003 not\u0003XVH\u0003FRQVWDQW\u0003PHPRU\\ int main( void ) { // capture the start time cudaEvent_t start, stop; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; // allocate memory on the GPU for the output bitmap HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); // allocate memory for the Sphere dataset HANDLE_ERROR( cudaMalloc( ( void**)&s, sizeof(Sphere) * SPHERES ) ); // allocate temp memory, initialize it, copy to // memory on the GPU, and then free our temp memory Sphere *temp_s = (Sphere*)malloc( sizeof(Sphere) * SPHERES ); for (int i=0; i<SPHERES; i++) { temp_s[i].r = rnd( 1.0f ); temp_s[i].g = rnd( 1.0f ); temp_s[i].b = rnd( 1.0f ); temp_s[i].x = rnd( 1000.0f ) - 500; Download from www.wowebook.comptg000((( $$$ 666 888 555 , , , 111 *** \u0003\u0003\u00033 3 3( ( (5 5 5) ) )2 2 25 5 50 0 0$ $ $1 1 1& & &( ( ( \u0003\u0003\u0003::: , , , 7 7 7\u0003\u0003\u0003( ( (999 ((( 111666 /one.lf/one.lf/one.lf\u0019\u0011\u0016\u0003 +++777 temp_s[i].y = rnd( 1000.0f ) - 500; temp_s[i].z = rnd( 1000.0f ) - 500; temp_s[i].radius = rnd( 100.0f ) + 20; } HANDLE_ERROR( cudaMemcpy( s, temp_s, sizeof(Sphere) * SPHERES, cudaMemcpyHostToDevice ) ); free( temp_s ); // generate a bitmap from our sphere data dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( s, dev_bitmap ); // copy our bitmap back from the GPU for display HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); // get stop time, and display the timing results HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time to generate: %3.1f ms\\n\" , elapsedTime ); HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); // display bitmap.display_and_exit(); // free our memory cudaFree( dev_bitmap ); cudaFree( s ); } Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/one.lf/two.lf1RWLFH\u0003WKDW\u0003ZH\u0003KDYH\u0003WKURZQ\u0003WZR\u0003DGGLWLRQDO\u0003IXQFWLRQV\u0003LQWR\u0003WKH\u0003PL[\u000f\u0003WKH\u0003FDOOV\u0003 WR\u0003cudaEventElapsedTime() \u0003DQG\u0003cudaEventDestroy() \u0011\u00037KH\u0003IXQFWLRQ\u0003 cudaEventElapsedTime() \u0003LV\u0003D\u0003XWLOLW\\\u0003WKDW\u0003FRPSXWHV\u0003WKH\u0003HODSVHG\u0003WLPH\u0003EHWZHHQ\u0003 WZR\u0003SUHYLRXVO\\\u0003UHFRUGHG\u0003HYHQWV\u0011\u00037KH\u0003WLPH\u0003LQ\u0003PLOOLVHFRQGV\u0003HODSVHG\u0003EHWZHHQ\u0003WKH\u0003 WZR\u0003HYHQWV\u0003LV\u0003UHWXUQHG\u0003LQ\u0003WKH\u0003\u020cUVW\u0003DUJXPHQW\u000f\u0003WKH\u0003DGGUHVV\u0003RI\u0003D\u0003\u020dRDWLQJ\u0010SRLQW\u0003 YDULDEOH\u0011 7KH\u0003FDOO\u0003WR\u0003 cudaEventDestroy() \u0003QHHGV\u0003WR\u0003EH\u0003PDGH\u0003ZKHQ\u0003ZH\u01e2UH\u0003\u020cQLVKHG\u0003 XVLQJ\u0003DQ\u0003HYHQW\u0003FUHDWHG\u0003ZLWK\u0003 cudaEventCreate() \u0011\u00037KLV\u0003LV\u0003LGHQWLFDO\u0003WR\u0003FDOOLQJ\u0003 free()\u0003RQ\u0003PHPRU\\\u0003SUHYLRXVO\\\u0003DOORFDWHG\u0003ZLWK\u0003 malloc() \u000f\u0003VR\u0003ZH\u0003QHHGQ\u01e2W\u0003 VWUHVV\u0003KRZ\u0003LPSRUWDQW\u0003LW\u0003LV\u0003WR\u0003PDWFK\u0003HYHU\\\u0003 cudaEventCreate() \u0003ZLWK\u0003D\u0003 cudaEventDestroy() \u0011 :H\u0003FDQ\u0003LQVWUXPHQW\u0003WKH\u0003UD\\\u0003WUDFHU\u0003WKDW\u0003GRHV\u0003XVH\u0003FRQVWDQW\u0003PHPRU\\\u0003LQ\u0003WKH\u0003VDPH\u0003 IDVKLRQ int main( void ) { // capture the start time cudaEvent_t start, stop; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; // allocate memory on the GPU for the output bitmap HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); // allocate temp memory, initialize it, copy to constant // memory on",
    ") ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); CPUBitmap bitmap( DIM, DIM ); unsigned char *dev_bitmap; // allocate memory on the GPU for the output bitmap HANDLE_ERROR( cudaMalloc( ( void**)&dev_bitmap, bitmap.image_size() ) ); // allocate temp memory, initialize it, copy to constant // memory on the GPU, and then free our temp memory Sphere *temp_s = (Sphere*)malloc( sizeof(Sphere) * SPHERES ); for (int i=0; i<SPHERES; i++) { temp_s[i].r = rnd( 1.0f ); temp_s[i].g = rnd( 1.0f ); temp_s[i].b = rnd( 1.0f ); temp_s[i].x = rnd( 1000.0f ) - 500; Download from www.wowebook.comptg000((( $$$ 666 888 555 , , , 111 *** \u0003\u0003\u00033 3 3( ( (5 5 5) ) )2 2 25 5 50 0 0$ $ $1 1 1& & &( ( ( \u0003\u0003\u0003::: , , , 7 7 7\u0003\u0003\u0003( ( (999 ((( 111666 /one.lf/one.lf/three.lf\u0019\u0011\u0016\u0003 +++777 temp_s[i].y = rnd( 1000.0f ) - 500; temp_s[i].z = rnd( 1000.0f ) - 500; temp_s[i].radius = rnd( 100.0f ) + 20; } HANDLE_ERROR( cudaMemcpyToSymbol( s, temp_s, sizeof(Sphere) * SPHERES) ); free( temp_s ); // generate a bitmap from our sphere data dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( dev_bitmap ); // copy our bitmap back from the GPU for display HANDLE_ERROR( cudaMemcpy( bitmap.get_ptr(), dev_bitmap, bitmap.image_size(), cudaMemcpyDeviceToHost ) ); // get stop time, and display the timing results HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time to generate: %3.1f ms\\n\" , elapsedTime ); HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); // display bitmap.display_and_exit(); // free our memory cudaFree( dev_bitmap ); } Download from www.wowebook.comptgCONST ANT MEMORY AND EVENTS /one.lf/one.lf/four.lf1RZ\u0003ZKHQ\u0003ZH\u0003UXQ\u0003RXU\u0003WZR\u0003YHUVLRQV\u0003RI\u0003WKH\u0003UD\\\u0003WUDFHU\u000f\u0003ZH\u0003FDQ\u0003FRPSDUH\u0003WKH\u0003WLPH\u0003LW\u0003 WDNHV\u0003WR\u0003FRPSOHWH\u0003WKH\u0003*38\u0003ZRUN\u0011\u00037KLV\u0003ZLOO\u0003WHOO\u0003XV\u0003DW\u0003D\u0003KLJK\u0003OHYHO\u0003ZKHWKHU\u0003LQWUR - GXFLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003KDV\u0003LPSURYHG\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003RXU\u0003DSSOLFDWLRQ\u0003RU\u0003 ZRUVHQHG\u0003LW\u0011\u0003)RUWXQDWHO\\\u000f\u0003LQ\u0003WKLV\u0003FDVH\u000f\u0003SHUIRUPDQFH\u0003LV\u0003LPSURYHG\u0003GUDPDWLFDOO\\\u0003 E\\\u0003XVLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0011\u00032XU\u0003H[SHULPHQWV\u0003RQ\u0003D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0013\u0003VKRZ\u0003WKH\u0003 FRQVWDQW\u0003PHPRU\\\u0003UD\\\u0003WUDFHU\u0003SHUIRUPLQJ\u0003XS\u0003WR\u0003\u0018\u0013\u0003SHUFHQW\u0003IDVWHU\u0003WKDQ\u0003WKH\u0003YHUVLRQ\u0003 WKDW\u0003XVHV\u0003JOREDO\u0003PHPRU\\\u0011\u00032Q\u0003D\u0003GLIIHUHQW\u0003*38\u000f\u0003\\RXU\u0003PLOHDJH\u0003PLJKW\u0003YDU\\\u000f\u0003DOWKRXJK\u0003 WKH\u0003UD\\\u0003WUDFHU\u0003WKDW\u0003XVHV\u0003FRQVWDQW\u0003PHPRU\\\u0003VKRXOG\u0003DOZD\\V\u0003EH\u0003DW\u0003OHDVW\u0003DV\u0003IDVW\u0003DV\u0003WKH\u0003 YHUVLRQ\u0003ZLWKRXW\u0003LW\u0011 &KDSWHU\u00035HYLHZ\u0019\u0011\u0017\u0003 ,Q\u0003DGGLWLRQ\u0003WR\u0003WKH\u0003JOREDO\u0003DQG\u0003VKDUHG\u0003PHPRU\\\u0003ZH\u0003H[SORUHG\u0003LQ\u0003SUHYLRXV\u0003FKDSWHUV\u000f\u0003 19,',$\u0003KDUGZDUH\u0003PDNHV\u0003RWKHU\u0003W\\SHV\u0003RI\u0003PHPRU\\\u0003DYDLODEOH\u0003IRU\u0003RXU\u0003XVH\u0011\u0003&RQVWDQW\u0003 PHPRU\\\u0003FRPHV\u0003ZLWK\u0003DGGLWLRQDO\u0003FRQVWUDLQWV\u0003RYHU\u0003VWDQGDUG\u0003JOREDO\u0003PHPRU\\\u000f\u0003EXW\u0003 LQ\u0003VRPH\u0003FDVHV\u000f\u0003VXEMHFWLQJ\u0003RXUVHOYHV\u0003WR\u0003WKHVH\u0003FRQVWUDLQWV\u0003FDQ\u0003\\LHOG\u0003DGGLWLRQDO\u0003 SHUIRUPDQFH\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003ZH\u0003FDQ\u0003VHH\u0003DGGLWLRQDO\u0003SHUIRUPDQFH\u0003ZKHQ\u0003WKUHDGV\u0003LQ\u0003D\u0003 ZDUS\u0003QHHG\u0003DFFHVV\u0003WR\u0003WKH\u0003VDPH\u0003UHDG\u0010RQO\\\u0003GDWD\u0011\u00038VLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003IRU\u0003GDWD\u0003 ZLWK\u0003WKLV\u0003DFFHVV\u0003SDWWHUQ\u0003FDQ\u0003FRQVHUYH\u0003EDQGZLGWK\u0003ERWK\u0003EHFDXVH\u0003RI\u0003WKH\u0003FDSDFLW\\\u0003WR\u0003 EURDGFDVW\u0003UHDGV\u0003DFURVV\u0003D\u0003KDOI\u0010ZDUS\u0003DQG\u0003EHFDXVH\u0003RI\u0003WKH\u0003SUHVHQFH\u0003RI\u0003D\u0003FRQVWDQW\u0003 PHPRU\\\u0003FDFKH\u0003RQ\u0003FKLS\u0011\u00030HPRU\\\u0003EDQGZLGWK\u0003ERWWOHQHFNV\u0003D\u0003ZLGH\u0003FODVV\u0003RI\u0003DOJR - ULWKPV\u000f\u0003VR\u0003KDYLQJ\u0003PHFKDQLVPV\u0003WR\u0003DPHOLRUDWH\u0003WKLV\u0003VLWXDWLRQ\u0003FDQ\u0003SURYH\u0003LQFUHGLEO\\\u0003 XVHIXO\u0011 :H\u0003DOVR\u0003OHDUQHG\u0003KRZ\u0003WR\u0003XVH\u0003&8'$\u0003HYHQWV\u0003WR\u0003UHTXHVW\u0003WKH\u0003UXQWLPH\u0003WR\u0003UHFRUG\u0003WLPH\u0003 VWDPSV\u0003DW\u0003VSHFL\u020cF\u0003SRLQWV\u0003GXULQJ\u0003*38\u0003H[HFXWLRQ\u0011\u0003:H\u0003VDZ\u0003KRZ\u0003WR\u0003V\\QFKURQL]H\u0003WKH\u0003 &38\u0003ZLWK\u0003WKH\u0003*38\u0003RQ\u0003RQH\u0003RI\u0003WKHVH\u0003HYHQWV\u0003DQG\u0003WKHQ\u0003KRZ\u0003WR\u0003FRPSXWH\u0003WKH\u0003WLPH\u0003 HODSVHG\u0003EHWZHHQ\u0003WZR\u0003HYHQWV\u0011\u0003,Q\u0003GRLQJ\u0003VR\u000f\u0003ZH\u0003EXLOW\u0003XS\u0003D\u0003PHWKRG\u0003WR\u0003FRPSDUH\u0003WKH\u0003 UXQQLQJ\u0003WLPH\u0003EHWZHHQ\u0003WZR\u0003GLIIHUHQW\u0003PHWKRGV\u0003IRU\u0003UD\\\u0003WUDFLQJ\u0003VSKHUHV\u000f\u0003FRQFOXGLQJ\u0003 WKDW\u000f\u0003IRU\u0003WKH\u0003DSSOLFDWLRQ\u0003DW\u0003KDQG\u000f\u0003XVLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003JDLQHG\u0003XV\u0003D\u0003VLJQL\u020cFDQW\u0003 DPRXQW\u0003RI\u0003SHUIRUPDQFH\u0011 Download from www.wowebook.comptg /one.lf/one.lf/five.lfChapter 7 Texture Memory :KHQ\u0003ZH\u0003ORRNHG\u0003DW\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003ZH\u0003VDZ\u0003KRZ\u0003H[SORLWLQJ\u0003VSHFLDO\u0003PHPRU\\\u0003 VSDFHV\u0003XQGHU\u0003WKH\u0003ULJKW\u0003FLUFXPVWDQFHV\u0003FDQ\u0003GUDPDWLFDOO\\\u0003DFFHOHUDWH\u0003DSSOLFDWLRQV\u0011\u0003 :H\u0003DOVR\u0003OHDUQHG\u0003KRZ\u0003WR\u0003PHDVXUH\u0003WKHVH\u0003SHUIRUPDQFH\u0003JDLQV\u0003LQ\u0003RUGHU\u0003WR\u0003PDNH\u0003 LQIRUPHG\u0003GHFLVLRQV\u0003DERXW\u0003SHUIRUPDQFH\u0003FKRLFHV\u0011\u0003,Q\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003OHDUQ\u0003 DERXW\u0003KRZ\u0003WR\u0003DOORFDWH\u0003DQG\u0003XVH\u0003 texture memory \u0011\u0003/LNH\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003WH[WXUH\u0003 PHPRU\\\u0003LV\u0003DQRWKHU\u0003YDULHW\\\u0003RI\u0003UHDG\u0010RQO\\\u0003PHPRU\\\u0003WKDW\u0003FDQ\u0003LPSURYH\u0003SHUIRUPDQFH\u0003 DQG\u0003UHGXFH\u0003PHPRU\\\u0003WUDI\u020cF\u0003ZKHQ\u0003UHDGV\u0003KDYH\u0003FHUWDLQ\u0003DFFHVV\u0003SDWWHUQV\u0011\u0003$OWKRXJK\u0003 WH[WXUH\u0003PHPRU\\\u0003ZDV\u0003RULJLQDOO\\\u0003GHVLJQHG\u0003IRU\u0003WUDGLWLRQDO\u0003JUDSKLFV\u0003DSSOLFDWLRQV\u000f\u0003LW\u0003 FDQ\u0003DOVR\u0003EH\u0003XVHG\u0003TXLWH\u0003HIIHFWLYHO\\\u0003LQ\u0003VRPH\u0003*38\u0003FRPSXWLQJ\u0003DSSOLFDWLRQV\u0011\u0003 Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/one.lf/six.lf&KDSWHU\u00032EMHFWLYHV\u001a\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003WKH\u0003SHUIRUPDQFH\u0003FKDUDFWHULVWLFV\u0003RI\u0003WH[WXUH\u0003PHPRU\\\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003XVH\u0003RQH\u0010GLPHQVLRQDO\u0003WH[WXUH\u0003PHPRU\\\u0003ZLWK\u0003&8'$\u0003&\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003XVH\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUH\u0003PHPRU\\\u0003ZLWK\u0003&8'$\u0003&\u0011\u01e9\u0003 7H[WXUH\u00030HPRU\\\u00032YHUYLHZ\u001a\u0011\u0015\u0003 ,I\u0003\\RX\u0003UHDG\u0003WKH\u0003LQWURGXFWLRQ\u0003WR\u0003WKLV\u0003FKDSWHU\u000f\u0003WKH\u0003VHFUHW\u0003LV\u0003DOUHDG\\\u0003RXW \u00037KHUH\u0003LV\u0003 \\HW\u0003DQRWKHU\u0003W\\SH\u0003RI\u0003UHDG\u0010RQO\\\u0003PHPRU\\\u0003WKDW\u0003LV\u0003DYDLODEOH\u0003IRU\u0003XVH\u0003LQ\u0003\\RXU\u0003SURJUDPV\u0003 ZULWWHQ\u0003LQ\u0003&8'$\u0003&\u0011\u00035HDGHUV\u0003IDPLOLDU\u0003ZLWK\u0003WKH\u0003ZRUNLQJV\u0003RI\u0003JUDSKLFV\u0003KDUGZDUH\u0003ZLOO\u0003 QRW\u0003EH\u0003VXUSULVHG\u000f\u0003EXW\u0003WKH\u0003*38\u01e2V\u0003VRSKLVWLFDWHG\u0003 texture memory \u0003PD\\\u0003DOVR\u0003EH\u0003XVHG\u0003 IRU\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWLQJ\u0011\u0003$OWKRXJK\u000319,',$\u0003GHVLJQHG\u0003WKH\u0003WH[WXUH\u0003XQLWV\u0003IRU\u0003 WKH\u0003FODVVLFDO\u00032SHQ*/\u0003DQG\u0003'LUHFW;\u0003UHQGHULQJ\u0003SLSHOLQHV\u000f\u0003WH[WXUH\u0003PHPRU\\\u0003KDV\u0003VRPH\u0003 SURSHUWLHV\u0003WKDW\u0003PDNH\u0003LW\u0003H[WUHPHO\\\u0003XVHIXO\u0003IRU\u0003FRPSXWLQJ\u0011\u0003 /LNH\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003WH[WXUH\u0003PHPRU\\\u0003LV\u0003FDFKHG\u0003RQ\u0003FKLS\u000f\u0003VR\u0003LQ\u0003VRPH\u0003VLWXDWLRQV\u0003LW\u0003 ZLOO\u0003SURYLGH\u0003KLJKHU\u0003HIIHFWLYH\u0003EDQGZLGWK\u0003E\\\u0003UHGXFLQJ\u0003PHPRU\\\u0003UHTXHVWV\u0003WR\u0003RII\u0010FKLS\u0003 '5$0\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003WH[WXUH\u0003FDFKHV\u0003DUH\u0003GHVLJQHG\u0003IRU\u0003JUDSKLFV\u0003DSSOLFDWLRQV\u0003ZKHUH\u0003 PHPRU\\\u0003DFFHVV\u0003SDWWHUQV\u0003H[KLELW\u0003D\u0003JUHDW\u0003GHDO\u0003RI\u0003 spatial locality \u0011\u0003,Q\u0003D\u0003FRPSXWLQJ\u0003 DSSOLFDWLRQ\u000f\u0003WKLV\u0003URXJKO\\\u0003LPSOLHV\u0003WKDW\u0003D\u0003WKUHDG\u0003LV\u0003OLNHO\\\u0003WR\u0003UHDG\u0003IURP\u0003DQ\u0003DGGUHVV\u0003 \u01e4QHDU\u01e5\u0003WKH\u0003DGGUHVV\u0003WKDW\u0003QHDUE\\\u0003WKUHDGV\u0003UHDG\u000f\u0003DV\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003\u001a\u0011\u0014\u0011Thread 0 Thread 1 Thread 2 Thread 3Figure 7.1 $\u0003PDSSLQJ\u0003RI\u0003WKUHDGV\u0003LQWR\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003UHJLRQ\u0003RI\u0003PHPRU\\ Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/one.lf/seven.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) ((($ULWKPHWLFDOO\\\u000f\u0003WKH\u0003IRXU\u0003DGGUHVVHV\u0003VKRZQ\u0003DUH\u0003QRW\u0003FRQVHFXWLYH\u000f\u0003VR\u0003WKH\\\u0003ZRXOG\u0003 QRW\u0003EH\u0003FDFKHG\u0003WRJHWKHU\u0003LQ\u0003D\u0003W\\SLFDO\u0003&38\u0003FDFKLQJ\u0003VFKHPH\u0011\u0003%XW\u0003VLQFH\u0003*38\u0003WH[WXUH\u0003 FDFKHV\u0003DUH\u0003GHVLJQHG\u0003WR\u0003DFFHOHUDWH\u0003DFFHVV\u0003SDWWHUQV\u0003VXFK\u0003DV\u0003WKLV\u0003RQH\u000f\u0003\\RX\u0003ZLOO\u0003VHH\u0003 DQ\u0003LQFUHDVH\u0003LQ\u0003SHUIRUPDQFH\u0003LQ\u0003WKLV\u0003FDVH\u0003ZKHQ\u0003XVLQJ\u0003WH[WXUH\u0003PHPRU\\\u0003LQVWHDG\u0003RI\u0003 JOREDO\u0003PHPRU\\\u0011\u0003,Q\u0003IDFW\u000f\u0003WKLV\u0003VRUW\u0003RI\u0003DFFHVV\u0003SDWWHUQ\u0003LV\u0003QRW\u0003LQFUHGLEO\\\u0003XQFRPPRQ\u0003LQ\u0003 JHQHUDO\u0010SXUSRVH\u0003FRPSXWLQJ\u000f\u0003DV\u0003ZH\u0003VKDOO\u0003VHH\u0011 6LPXODWLQJ\u0003+HDW\u00037UDQVIHU\u0003\u001a\u0011\u0016\u0003 3K\\VLFDO\u0003VLPXODWLRQV\u0003FDQ\u0003EH\u0003DPRQJ\u0003WKH\u0003PRVW\u0003FRPSXWDWLRQDOO\\\u0003FKDOOHQJLQJ\u0003SURE - OHPV\u0003WR\u0003VROYH\u0011\u0003)XQGDPHQWDOO\\\u000f\u0003WKHUH\u0003LV\u0003RIWHQ\u0003D\u0003WUDGH\u0010RII\u0003EHWZHHQ\u0003DFFXUDF\\\u0003DQG\u0003 FRPSXWDWLRQDO\u0003FRPSOH[LW\\\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003FRPSXWHU\u0003VLPXODWLRQV\u0003KDYH\u0003EHFRPH\u0003PRUH\u0003 DQG\u0003PRUH\u0003LPSRUWDQW\u0003LQ\u0003UHFHQW\u0003\\HDUV\u000f\u0003WKDQNV\u0003LQ\u0003ODUJH\u0003SDUW\u0003WR\u0003WKH\u0003LQFUHDVHG\u0003DFFX - UDF\\\u0003SRVVLEOH\u0003DV\u0003D\u0003FRQVHTXHQFH\u0003RI\u0003WKH\u0003SDUDOOHO\u0003FRPSXWLQJ\u0003UHYROXWLRQ\u0011\u00036LQFH\u0003PDQ\\\u0003 SK\\VLFDO\u0003VLPXODWLRQV\u0003FDQ\u0003EH\u0003SDUDOOHOL]HG\u0003TXLWH\u0003HDVLO\\\u000f\u0003ZH\u0003ZLOO\u0003ORRN\u0003DW\u0003D\u0003YHU\\\u0003VLPSOH\u0003 VLPXODWLRQ\u0003PRGHO\u0003LQ\u0003WKLV\u0003H[DPSOH\u0011 6,03/(\u0003+($7,1*\u000302'(/ \u001a\u0011\u0016\u0011\u0014\u0003 7R\u0003GHPRQVWUDWH\u0003D\u0003VLWXDWLRQ\u0003ZKHUH\u0003\\RX\u0003FDQ\u0003HIIHFWLYHO\\\u0003HPSOR\\\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003 ZH\u0003ZLOO\u0003FRQVWUXFW\u0003D\u0003VLPSOH\u0003WZR\u0010GLPHQVLRQDO\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0011\u0003:H\u0003VWDUW\u0003 E\\\u0003DVVXPLQJ\u0003WKDW\u0003ZH\u0003KDYH\u0003VRPH\u0003UHFWDQJXODU\u0003URRP\u0003WKDW\u0003ZH\u0003GLYLGH\u0003LQWR\u0003D\u0003JULG\u0011\u0003 ,QVLGH\u0003WKH\u0003JULG\u000f\u0003ZH\u0003ZLOO\u0003UDQGRPO\\\u0003VFDWWHU\u0003D\u0003KDQGIXO\u0003RI\u0003\u01e4KHDWHUV\u01e5\u0003ZLWK\u0003YDULRXV\u0003\u020c[HG\u0003 WHPSHUDWXUHV\u0011\u0003)LJXUH\u0003\u001a\u0011\u0015\u0003VKRZV\u0003DQ\u0003H[DPSOH\u0003RI\u0003ZKDW\u0003WKLV\u0003URRP\u0003PLJKW\u0003ORRN\u0003OLNH\u0011 Figure 7.2 $\u0003URRP\u0003ZLWK\u0003\u01e4KHDWHUV\u01e5\u0003RI\u0003YDULRXV\u0003WHPSHUDWXUH Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/one.lf/eight.lfFigure 7.3 +HDW\u0003GLVVLSDWLQJ\u0003IURP\u0003ZDUP\u0003FHOOV\u0003LQWR\u0003FROG\u0003FHOOV *LYHQ\u0003D\u0003UHFWDQJXODU\u0003JULG\u0003DQG\u0003FRQ\u020cJXUDWLRQ\u0003RI\u0003KHDWHUV\u000f\u0003ZH\u0003DUH\u0003ORRNLQJ\u0003WR\u0003VLPX - ODWH\u0003ZKDW\u0003KDSSHQV\u0003WR\u0003WKH\u0003WHPSHUDWXUH\u0003LQ\u0003HYHU\\\u0003JULG\u0003FHOO\u0003DV\u0003WLPH\u0003SURJUHVVHV\u0011\u0003)RU\u0003 VLPSOLFLW\\\u000f\u0003FHOOV\u0003ZLWK\u0003KHDWHUV\u0003LQ\u0003WKHP\u0003DOZD\\V\u0003UHPDLQ\u0003D\u0003FRQVWDQW\u0003WHPSHUDWXUH\u0011\u0003 $W\u0003HYHU\\\u0003VWHS\u0003LQ\u0003WLPH\u000f\u0003ZH\u0003ZLOO\u0003DVVXPH\u0003WKDW\u0003KHDW\u0003\u01e4\u020dRZV\u01e5\u0003EHWZHHQ\u0003D\u0003FHOO\u0003DQG\u0003LWV\u0003 QHLJKERUV\u0011\u0003,I\u0003D\u0003FHOO\u01e2V\u0003QHLJKERU\u0003LV\u0003ZDUPHU\u0003WKDQ\u0003LW\u0003LV\u000f\u0003WKH\u0003ZDUPHU\u0003QHLJKERU\u0003ZLOO\u0003WHQG\u0003 WR\u0003ZDUP\u0003LW\u0003XS\u0011\u0003&RQYHUVHO\\\u000f\u0003LI\u0003D\u0003FHOO\u0003KDV\u0003D\u0003QHLJKERU\u0003FRROHU\u0003WKDQ\u0003LW\u0003LV\u000f\u0003LW\u0003ZLOO\u0003FRRO\u0003RII\u0011\u0003 4XDOLWDWLYHO\\\u000f\u0003)LJXUH\u0003\u001a\u0011\u0016\u0003UHSUHVHQWV\u0003WKLV\u0003\u020dRZ\u0003RI\u0003KHDW\u0011 ,Q\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003PRGHO\u000f\u0003ZH\u0003ZLOO\u0003FRPSXWH\u0003WKH\u0003QHZ\u0003WHPSHUDWXUH\u0003LQ\u0003D\u0003JULG\u0003FHOO\u0003 DV\u0003D\u0003VXP\u0003RI\u0003WKH\u0003GLIIHUHQFHV\u0003EHWZHHQ\u0003LWV\u0003WHPSHUDWXUH\u0003DQG\u0003WKH\u0003WHPSHUDWXUHV\u0003RI\u0003LWV\u0003 QHLJKERU\u000f\u0003RU\u000f\u0003HVVHQWLDOO\\\u000f\u0003DQ\u0003XSGDWH\u0003HTXDWLRQ\u0003DV\u0003VKRZQ\u0003LQ\u0003(TXDWLRQ\u0003\u001a\u0011\u0014\u0011 Equation 7.1,Q\u0003WKH\u0003HTXDWLRQ\u0003IRU\u0003XSGDWLQJ\u0003D\u0003FHOO\u01e2V\u0003WHPSHUDWXUH\u000f\u0003WKH\u0003FRQVWDQW\u0003 k\u0003VLPSO\\\u0003UHSUH - VHQWV\u0003WKH\u0003UDWH\u0003DW\u0003ZKLFK\u0003KHDW\u0003\u020dRZV\u0003WKURXJK\u0003WKH\u0003VLPXODWLRQ\u0011\u0003$\u0003ODUJH\u0003YDOXH\u0003RI\u0003 k will GULYH\u0003WKH\u0003V\\VWHP\u0003WR\u0003D\u0003FRQVWDQW\u0003WHPSHUDWXUH\u0003TXLFNO\\\u000f\u0003ZKLOH\u0003D\u0003VPDOO\u0003YDOXH\u0003ZLOO\u0003DOORZ\u0003 WKH\u0003VROXWLRQ\u0003WR\u0003UHWDLQ\u0003ODUJH\u0003WHPSHUDWXUH\u0003JUDGLHQWV\u0003ORQJHU\u0011\u00036LQFH\u0003ZH\u0003FRQVLGHU\u0003RQO\\\u0003 IRXU\u0003QHLJKERUV\u0003 WRS\u000f\u0003ERWWRP\u000f\u0003OHIW\u000f\u0003ULJKW \u0003DQG\u0003 k\u0003DQG\u0003TOLD\u0003UHPDLQ\u0003FRQVWDQW\u0003LQ\u0003WKH\u0003 HTXDWLRQ\u000f\u0003WKLV\u0003XSGDWH\u0003EHFRPHV\u0003OLNH\u0003WKH\u0003RQH\u0003VKRZQ\u0003LQ\u0003(TXDWLRQ\u0003\u001a\u0011\u0015\u0011 Equation 7.2 /LNH\u0003ZLWK\u0003WKH\u0003UD\\\u0003WUDFLQJ\u0003H[DPSOH\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u000f\u0003WKLV\u0003PRGHO\u0003LV\u0003QRW\u0003 LQWHQGHG\u0003WR\u0003EH\u0003FORVH\u0003WR\u0003ZKDW\u0003PLJKW\u0003EH\u0003XVHG\u0003LQ\u0003LQGXVWU\\\u0003 LQ\u0003IDFW\u000f\u0003LW\u0003LV\u0003QRW\u0003UHDOO\\\u0003 HYHQ\u0003DQ\u0003DSSUR[LPDWLRQ\u0003RI\u0003VRPHWKLQJ\u0003SK\\VLFDOO\\\u0003DFFXUDWH \u0011\u0003:H\u0003KDYH\u0003VLPSOL\u020cHG\u0003 WKLV\u0003PRGHO\u0003LPPHQVHO\\\u0003LQ\u0003RUGHU\u0003WR\u0003GUDZ\u0003DWWHQWLRQ\u0003WR\u0003WKH\u0003WHFKQLTXHV\u0003DW\u0003KDQG\u0011\u0003:LWK\u0003 WKLV\u0003LQ\u0003PLQG\u000f\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003KRZ\u0003WKH\u0003XSGDWH\u0003JLYHQ\u0003E\\\u0003(TXDWLRQ\u0003\u001a\u0011\u0015\u0003FDQ\u0003EH\u0003 FRPSXWHG\u0003RQ\u0003WKH\u0003*38\u0011 Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/one.lf/nine.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) (((COMPUTING TEMPERATURE UPDATES \u001a\u0011\u0016\u0011\u0015\u0003 :H\u0003ZLOO\u0003FRYHU\u0003WKH\u0003VSHFL\u020cFV\u0003RI\u0003HDFK\u0003VWHS\u0003LQ\u0003D\u0003PRPHQW\u000f\u0003EXW\u0003DW\u0003D\u0003KLJK\u0003OHYHO\u000f\u0003RXU\u0003 XSGDWH\u0003SURFHVV\u0003SURFHHGV\u0003DV\u0003IROORZV *LYHQ\u0003VRPH\u0003JULG\u0003RI\u0003LQSXW\u0003WHPSHUDWXUHV\u000f\u0003FRS\\\u0003WKH\u0003WHPSHUDWXUH\u0003RI\u0003FHOOV\u0003\u0014\u0011\u0003 ZLWK\u0003KHDWHUV\u0003WR\u0003WKLV\u0003JULG\u0011\u00037KLV\u0003ZLOO\u0003RYHUZULWH\u0003DQ\\\u0003SUHYLRXVO\\\u0003FRPSXWHG\u0003 WHPSHUDWXUHV\u0003LQ\u0003WKHVH\u0003FHOOV\u000f\u0003WKHUHE\\\u0003HQIRUFLQJ\u0003RXU\u0003UHVWULFWLRQ\u0003WKDW\u0003\u01e4KHDWLQJ\u0003 FHOOV\u01e5\u0003UHPDLQ\u0003DW\u0003D\u0003FRQVWDQW\u0003WHPSHUDWXUH\u0011\u00037KLV\u0003FRS\\\u0003JHWV\u0003SHUIRUPHG\u0003LQ\u0003 copy_const_kernel() \u0011 *LYHQ\u0003WKH\u0003LQSXW\u0003WHPSHUDWXUH\u0003JULG\u000f\u0003FRPSXWH\u0003WKH\u0003RXWSXW\u0003WHPSHUDWXUHV\u0003EDVHG\u0003RQ\u0003\u0015\u0011\u0003 WKH\u0003XSGDWH\u0003LQ\u0003(TXDWLRQ\u0003\u001a\u0011\u0015\u0011\u00037KLV\u0003XSGDWH\u0003JHWV\u0003SHUIRUPHG\u0003LQ\u0003 blend_kernel() \u0011 6ZDS\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0003LQ\u0003SUHSDUDWLRQ\u0003RI\u0003WKH\u0003QH[W\u0003WLPH\u0003VWHS\u0011\u00037KH\u0003\u0016\u0011\u0003 RXWSXW\u0003WHPSHUDWXUH\u0003JULG\u0003FRPSXWHG\u0003LQ\u0003VWHS\u0003\u0015\u0003ZLOO\u0003EHFRPH\u0003WKH\u0003LQSXW\u0003WHPSHUDWXUH\u0003 JULG\u0003WKDW\u0003ZH\u0003VWDUW\u0003ZLWK\u0003LQ\u0003VWHS\u0003\u0014\u0003ZKHQ\u0003VLPXODWLQJ\u0003WKH\u0003QH[W\u0003WLPH\u0003VWHS\u0011 %HIRUH\u0003EHJLQQLQJ\u0003WKH\u0003VLPXODWLRQ\u000f\u0003ZH\u0003DVVXPH\u0003ZH\u0003KDYH\u0003JHQHUDWHG\u0003D\u0003JULG\u0003RI\u0003 FRQVWDQWV\u0011\u00030RVW\u0003RI\u0003WKH\u0003HQWULHV\u0003LQ\u0003WKLV\u0003JULG\u0003DUH\u0003]HUR\u000f\u0003EXW\u0003VRPH\u0003HQWULHV\u0003FRQWDLQ\u0003 QRQ]HUR\u0003WHPSHUDWXUHV\u0003WKDW\u0003UHSUHVHQW\u0003KHDWHUV\u0003DW\u0003\u020c[HG\u0003WHPSHUDWXUHV\u0011\u00037KLV\u0003EXIIHU\u0003 RI\u0003FRQVWDQWV\u0003ZLOO\u0003QRW\u0003FKDQJH\u0003RYHU\u0003WKH\u0003FRXUVH\u0003RI\u0003WKH\u0003VLPXODWLRQ\u0003DQG\u0003JHWV\u0003UHDG\u0003DW\u0003 HDFK\u0003WLPH\u0003VWHS\u0011 %HFDXVH\u0003RI\u0003WKH\u0003ZD\\\u0003ZH\u0003DUH\u0003PRGHOLQJ\u0003RXU\u0003KHDW\u0003WUDQVIHU\u000f\u0003ZH\u0003VWDUW\u0003ZLWK\u0003WKH\u0003RXWSXW\u0003 JULG\u0003IURP\u0003WKH\u0003SUHYLRXV\u0003WLPH\u0003VWHS\u0011\u00037KHQ\u000f\u0003DFFRUGLQJ\u0003WR\u0003VWHS\u0003\u0014\u000f\u0003ZH\u0003FRS\\\u0003WKH\u0003WHPSHUD - WXUHV\u0003RI\u0003WKH\u0003FHOOV\u0003ZLWK\u0003KHDWHUV\u0003LQWR\u0003WKLV\u0003RXWSXW\u0003JULG\u000f\u0003RYHUZULWLQJ\u0003DQ\\\u0003SUHYLRXVO\\\u0003 FRPSXWHG\u0003WHPSHUDWXUHV\u0011\u0003:H\u0003GR\u0003WKLV\u0003EHFDXVH\u0003ZH\u0003KDYH\u0003DVVXPHG\u0003WKDW\u0003WKH\u0003WHPSHUD -",
    "from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/one.lf/nine.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) (((COMPUTING TEMPERATURE UPDATES \u001a\u0011\u0016\u0011\u0015\u0003 :H\u0003ZLOO\u0003FRYHU\u0003WKH\u0003VSHFL\u020cFV\u0003RI\u0003HDFK\u0003VWHS\u0003LQ\u0003D\u0003PRPHQW\u000f\u0003EXW\u0003DW\u0003D\u0003KLJK\u0003OHYHO\u000f\u0003RXU\u0003 XSGDWH\u0003SURFHVV\u0003SURFHHGV\u0003DV\u0003IROORZV *LYHQ\u0003VRPH\u0003JULG\u0003RI\u0003LQSXW\u0003WHPSHUDWXUHV\u000f\u0003FRS\\\u0003WKH\u0003WHPSHUDWXUH\u0003RI\u0003FHOOV\u0003\u0014\u0011\u0003 ZLWK\u0003KHDWHUV\u0003WR\u0003WKLV\u0003JULG\u0011\u00037KLV\u0003ZLOO\u0003RYHUZULWH\u0003DQ\\\u0003SUHYLRXVO\\\u0003FRPSXWHG\u0003 WHPSHUDWXUHV\u0003LQ\u0003WKHVH\u0003FHOOV\u000f\u0003WKHUHE\\\u0003HQIRUFLQJ\u0003RXU\u0003UHVWULFWLRQ\u0003WKDW\u0003\u01e4KHDWLQJ\u0003 FHOOV\u01e5\u0003UHPDLQ\u0003DW\u0003D\u0003FRQVWDQW\u0003WHPSHUDWXUH\u0011\u00037KLV\u0003FRS\\\u0003JHWV\u0003SHUIRUPHG\u0003LQ\u0003 copy_const_kernel() \u0011 *LYHQ\u0003WKH\u0003LQSXW\u0003WHPSHUDWXUH\u0003JULG\u000f\u0003FRPSXWH\u0003WKH\u0003RXWSXW\u0003WHPSHUDWXUHV\u0003EDVHG\u0003RQ\u0003\u0015\u0011\u0003 WKH\u0003XSGDWH\u0003LQ\u0003(TXDWLRQ\u0003\u001a\u0011\u0015\u0011\u00037KLV\u0003XSGDWH\u0003JHWV\u0003SHUIRUPHG\u0003LQ\u0003 blend_kernel() \u0011 6ZDS\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0003LQ\u0003SUHSDUDWLRQ\u0003RI\u0003WKH\u0003QH[W\u0003WLPH\u0003VWHS\u0011\u00037KH\u0003\u0016\u0011\u0003 RXWSXW\u0003WHPSHUDWXUH\u0003JULG\u0003FRPSXWHG\u0003LQ\u0003VWHS\u0003\u0015\u0003ZLOO\u0003EHFRPH\u0003WKH\u0003LQSXW\u0003WHPSHUDWXUH\u0003 JULG\u0003WKDW\u0003ZH\u0003VWDUW\u0003ZLWK\u0003LQ\u0003VWHS\u0003\u0014\u0003ZKHQ\u0003VLPXODWLQJ\u0003WKH\u0003QH[W\u0003WLPH\u0003VWHS\u0011 %HIRUH\u0003EHJLQQLQJ\u0003WKH\u0003VLPXODWLRQ\u000f\u0003ZH\u0003DVVXPH\u0003ZH\u0003KDYH\u0003JHQHUDWHG\u0003D\u0003JULG\u0003RI\u0003 FRQVWDQWV\u0011\u00030RVW\u0003RI\u0003WKH\u0003HQWULHV\u0003LQ\u0003WKLV\u0003JULG\u0003DUH\u0003]HUR\u000f\u0003EXW\u0003VRPH\u0003HQWULHV\u0003FRQWDLQ\u0003 QRQ]HUR\u0003WHPSHUDWXUHV\u0003WKDW\u0003UHSUHVHQW\u0003KHDWHUV\u0003DW\u0003\u020c[HG\u0003WHPSHUDWXUHV\u0011\u00037KLV\u0003EXIIHU\u0003 RI\u0003FRQVWDQWV\u0003ZLOO\u0003QRW\u0003FKDQJH\u0003RYHU\u0003WKH\u0003FRXUVH\u0003RI\u0003WKH\u0003VLPXODWLRQ\u0003DQG\u0003JHWV\u0003UHDG\u0003DW\u0003 HDFK\u0003WLPH\u0003VWHS\u0011 %HFDXVH\u0003RI\u0003WKH\u0003ZD\\\u0003ZH\u0003DUH\u0003PRGHOLQJ\u0003RXU\u0003KHDW\u0003WUDQVIHU\u000f\u0003ZH\u0003VWDUW\u0003ZLWK\u0003WKH\u0003RXWSXW\u0003 JULG\u0003IURP\u0003WKH\u0003SUHYLRXV\u0003WLPH\u0003VWHS\u0011\u00037KHQ\u000f\u0003DFFRUGLQJ\u0003WR\u0003VWHS\u0003\u0014\u000f\u0003ZH\u0003FRS\\\u0003WKH\u0003WHPSHUD - WXUHV\u0003RI\u0003WKH\u0003FHOOV\u0003ZLWK\u0003KHDWHUV\u0003LQWR\u0003WKLV\u0003RXWSXW\u0003JULG\u000f\u0003RYHUZULWLQJ\u0003DQ\\\u0003SUHYLRXVO\\\u0003 FRPSXWHG\u0003WHPSHUDWXUHV\u0011\u0003:H\u0003GR\u0003WKLV\u0003EHFDXVH\u0003ZH\u0003KDYH\u0003DVVXPHG\u0003WKDW\u0003WKH\u0003WHPSHUD - WXUH\u0003RI\u0003WKHVH\u0003KHDWHU\u0003FHOOV\u0003UHPDLQV\u0003FRQVWDQW\u0011\u0003:H\u0003SHUIRUP\u0003WKLV\u0003FRS\\\u0003RI\u0003WKH\u0003FRQVWDQW\u0003 JULG\u0003RQWR\u0003WKH\u0003LQSXW\u0003JULG\u0003ZLWK\u0003WKH\u0003IROORZLQJ\u0003NHUQHO __global__ void copy_const_kernel( float *iptr, const float *cptr ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; if (cptr[offset] != 0) iptr[offset] = cptr[offset]; } Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/two.lf/zero.lf7KH\u0003\u020cUVW\u0003WKUHH\u0003OLQHV\u0003VKRXOG\u0003ORRN\u0003IDPLOLDU\u0011\u00037KH\u0003\u020cUVW\u0003WZR\u0003OLQHV\u0003FRQYHUW\u0003D\u0003WKUHDG\u01e2V\u0003 threadIdx \u0003DQG\u0003blockIdx \u0003LQWR\u0003DQ\u0003x\u0010\u0003DQG\u0003D\u0003y\u0010FRRUGLQDWH\u0011\u00037KH\u0003WKLUG\u0003OLQH\u0003 FRPSXWHV\u0003D\u0003OLQHDU\u0003 offset\u0003LQWR\u0003RXU\u0003FRQVWDQW\u0003DQG\u0003LQSXW\u0003EXIIHUV\u0011\u00037KH\u0003KLJKOLJKWHG\u0003 OLQH\u0003SHUIRUPV\u0003WKH\u0003FRS\\\u0003RI\u0003WKH\u0003KHDWHU\u0003WHPSHUDWXUH\u0003LQ\u0003 cptr[]\u0003WR\u0003WKH\u0003LQSXW\u0003JULG\u0003LQ\u0003 iptr[]\u0011\u00031RWLFH\u0003WKDW\u0003WKH\u0003FRS\\\u0003LV\u0003SHUIRUPHG\u0003RQO\\\u0003LI\u0003WKH\u0003FHOO\u0003LQ\u0003WKH\u0003FRQVWDQW\u0003JULG\u0003LV\u0003 QRQ]HUR\u0011\u0003:H\u0003GR\u0003WKLV\u0003WR\u0003SUHVHUYH\u0003DQ\\\u0003YDOXHV\u0003WKDW\u0003ZHUH\u0003FRPSXWHG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003 WLPH\u0003VWHS\u0003ZLWKLQ\u0003FHOOV\u0003WKDW\u0003GR\u0003QRW\u0003FRQWDLQ\u0003KHDWHUV\u0011\u0003&HOOV\u0003ZLWK\u0003KHDWHUV\u0003ZLOO\u0003KDYH\u0003 QRQ]HUR\u0003HQWULHV\u0003LQ\u0003 cptr[]\u0003DQG\u0003ZLOO\u0003WKHUHIRUH\u0003KDYH\u0003WKHLU\u0003WHPSHUDWXUHV\u0003SUHVHUYHG\u0003 IURP\u0003VWHS\u0003WR\u0003VWHS\u0003WKDQNV\u0003WR\u0003WKLV\u0003FRS\\\u0003NHUQHO\u0011 6WHS\u0003\u0015\u0003RI\u0003WKH\u0003DOJRULWKP\u0003LV\u0003WKH\u0003PRVW\u0003FRPSXWDWLRQDOO\\\u0003LQYROYHG\u0011\u00037R\u0003SHUIRUP\u0003WKH\u0003 XSGDWHV\u000f\u0003ZH\u0003FDQ\u0003KDYH\u0003HDFK\u0003WKUHDG\u0003WDNH\u0003UHVSRQVLELOLW\\\u0003IRU\u0003D\u0003VLQJOH\u0003FHOO\u0003LQ\u0003RXU\u0003 VLPXODWLRQ\u0011\u0003(DFK\u0003WKUHDG\u0003ZLOO\u0003UHDG\u0003LWV\u0003FHOO\u01e2V\u0003WHPSHUDWXUH\u0003DQG\u0003WKH\u0003WHPSHUDWXUHV\u0003RI\u0003 LWV\u0003QHLJKERULQJ\u0003FHOOV\u000f\u0003SHUIRUP\u0003WKH\u0003SUHYLRXV\u0003XSGDWH\u0003FRPSXWDWLRQ\u000f\u0003DQG\u0003WKHQ\u0003XSGDWH\u0003 LWV\u0003WHPSHUDWXUH\u0003ZLWK\u0003WKH\u0003QHZ\u0003YDOXH\u0011\u00030XFK\u0003RI\u0003WKLV\u0003NHUQHO\u0003UHVHPEOHV\u0003WHFKQLTXHV\u0003 \\RX\u01e2YH\u0003XVHG\u0003EHIRUH\u0011 __global__ void blend_kernel( float *outSrc, const float *inSrc ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; int left = offset - 1; int right = offset + 1; if (x == 0) left++; if (x == DIM-1) right--; int top = offset - DIM; int bottom = offset + DIM; if (y == 0) top += DIM; if (y == DIM-1) bottom -= DIM; outSrc[offset] = inSrc[offset] + SPEED * ( inSrc[top] + inSrc[bottom] + inSrc[left] + inSrc[right] - inSrc[offset]*4); } Download from www.wowebook.comptgLLL EEE TTTRRR AAA NNN SSS /one.lf/two.lf/one.lf7.3 S S SI I IM M MU U U A A AT T TI I IN N NG G G H H H A A AT T T FFF EEE RRRNotice that we start exactly as we did for the examples that produced images as their output. However , instead of computing the color of a pixel, the threads are computing temperatures of simulation grid cells. Nevertheless, they start by converting their threadIdx and blockIdx into an x, y, and offset. You might be able to recite these lines in your sleep by now (although for your sake, we hope you aren\u2019t actually reciting them in your sleep). Next, we determine the offsets of our left, right, top, and bottom neighbors so that we can read the temperatures of those cells. We will need those values to compute the updated temperature in the current cell. The only complication here is that we need to adjust indices on the border so that cells around the edges do not wrap around. Finally, in the highlighted line, we perform the update from Equation 7.2, adding the old temperature and the scaled differences of that temperature and the cell\u2019s neighbors\u2019 temperatures. 7.3.3 ANIMATING T HE SIMULATION The remainder of the code primarily sets up the grid and then displays an animated output of the heat map. We will walk through that code now: #include \"cuda.h\" #include \"../common/book.h\" #include \"../common/cpu_anim.h\" #define DIM 1024 #define PI 3.1415926535897932f #define MAX_TEMP 1.0f #define MIN_TEMP 0.0001f #define SPEED 0.25f // globals needed by the update routine",
    "primarily sets up the grid and then displays an animated output of the heat map. We will walk through that code now: #include \"cuda.h\" #include \"../common/book.h\" #include \"../common/cpu_anim.h\" #define DIM 1024 #define PI 3.1415926535897932f #define MAX_TEMP 1.0f #define MIN_TEMP 0.0001f #define SPEED 0.25f // globals needed by the update routine struct DataBlock { unsigned char *output_bitmap; float *dev_inSrc; float *dev_outSrc; float *dev_constSrc; CPUAnimBitmap *bitmap; Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/two.lf/two.lf cudaEvent_t start, stop; float totalTime; float frames; }; void anim_gpu( DataBlock *d, int ticks ) { HANDLE_ERROR( cudaEventRecord( d->start, 0 ) ); dim3 blocks(DIM/16,DIM/16); dim3 threads(16,16); CPUAnimBitmap *bitmap = d->bitmap; for (int i=0; i<90; i++) { copy_const_kernel<<<blocks,threads>>>( d->dev_inSrc, d->dev_constSrc ); blend_kernel<<<blocks,threads>>>( d->dev_outSrc, d->dev_inSrc ); swap( d->dev_inSrc, d->dev_outSrc ); } float_to_color<<<blocks,threads>>>( d->output_bitmap, d->dev_inSrc ); HANDLE_ERROR( cudaMemcpy( bitmap->get_ptr(), d->output_bitmap, bitmap->image_size(), cudaMemcpyDeviceToHost ) ); HANDLE_ERROR( cudaEventRecord( d->stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( d->stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, d->start, d->stop ) ); d->totalTime += elapsedTime; ++d->frames; printf( \"Average Time per frame: %3.1f ms\\n\" , d->totalTime/d->frames ); } Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/two.lf/three.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) (((void anim_exit( DataBlock *d ) { cudaFree( d->dev_inSrc ); cudaFree( d->dev_outSrc ); cudaFree( d->dev_constSrc ); HANDLE_ERROR( cudaEventDestroy( d->start ) ); HANDLE_ERROR( cudaEventDestroy( d->stop ) ); } :H\u0003KDYH\u0003HTXLSSHG\u0003WKH\u0003FRGH\u0003ZLWK\u0003HYHQW\u0010EDVHG\u0003WLPLQJ\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003SUHYLRXV\u0003FKDS - WHU\u01e2V\u0003UD\\\u0003WUDFLQJ\u0003H[DPSOH\u0011\u00037KH\u0003WLPLQJ\u0003FRGH\u0003VHUYHV\u0003WKH\u0003VDPH\u0003SXUSRVH\u0003DV\u0003LW\u0003GLG\u0003 SUHYLRXVO\\\u0011\u00036LQFH\u0003ZH\u0003ZLOO\u0003HQGHDYRU\u0003WR\u0003DFFHOHUDWH\u0003WKH\u0003LQLWLDO\u0003LPSOHPHQWDWLRQ\u000f\u0003ZH\u0003 KDYH\u0003SXW\u0003LQ\u0003SODFH\u0003D\u0003PHFKDQLVP\u0003E\\\u0003ZKLFK\u0003ZH\u0003FDQ\u0003PHDVXUH\u0003SHUIRUPDQFH\u0003DQG\u0003 FRQYLQFH\u0003RXUVHOYHV\u0003WKDW\u0003ZH\u0003KDYH\u0003VXFFHHGHG\u0011\u0003 7KH\u0003IXQFWLRQ\u0003 anim_gpu() \u0003JHWV\u0003FDOOHG\u0003E\\\u0003WKH\u0003DQLPDWLRQ\u0003IUDPHZRUN\u0003RQ\u0003HYHU\\\u0003 IUDPH\u0011\u00037KH\u0003DUJXPHQWV\u0003WR\u0003WKLV\u0003IXQFWLRQ\u0003DUH\u0003D\u0003SRLQWHU\u0003WR\u0003D\u0003 DataBlock \u0003DQG\u0003WKH\u0003 QXPEHU\u0003RI\u0003 ticks\u0003RI\u0003WKH\u0003DQLPDWLRQ\u0003WKDW\u0003KDYH\u0003HODSVHG\u0011\u0003$V\u0003ZLWK\u0003WKH\u0003DQLPDWLRQ\u0003 H[DPSOHV\u000f\u0003ZH\u0003XVH\u0003EORFNV\u0003RI\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003WKDW\u0003ZH\u0003RUJDQL]H\u0003LQWR\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003 JULG\u0003RI\u0003\u0014\u0019\u0003[\u0003\u0014\u0019\u0011\u0003(DFK\u0003LWHUDWLRQ\u0003RI\u0003WKH\u0003 for()\u0003ORRS\u0003LQ\u0003anim_gpu() \u0003FRPSXWHV\u0003D\u0003 VLQJOH\u0003WLPH\u0003VWHS\u0003RI\u0003WKH\u0003VLPXODWLRQ\u0003DV\u0003GHVFULEHG\u0003E\\\u0003WKH\u0003WKUHH\u0010VWHS\u0003DOJRULWKP\u0003 DW\u0003WKH\u0003EHJLQQLQJ\u0003RI\u00036HFWLRQ\u0003\u001a\u0011\u0015\u0011\u0015 \u0003&RPSXWLQJ\u00037HPSHUDWXUH\u00038SGDWHV\u0011\u00036LQFH\u0003WKH\u0003 DataBlock \u0003FRQWDLQV\u0003WKH\u0003FRQVWDQW\u0003EXIIHU\u0003RI\u0003KHDWHUV\u0003DV\u0003ZHOO\u0003DV\u0003WKH\u0003RXWSXW\u0003RI\u0003WKH\u0003 ODVW\u0003WLPH\u0003VWHS\u000f\u0003LW\u0003HQFDSVXODWHV\u0003WKH\u0003HQWLUH\u0003VWDWH\u0003RI\u0003WKH\u0003DQLPDWLRQ\u000f\u0003DQG\u0003FRQVHTXHQWO\\\u000f\u0003 anim_gpu() \u0003GRHV\u0003QRW\u0003DFWXDOO\\\u0003QHHG\u0003WR\u0003XVH\u0003WKH\u0003YDOXH\u0003RI\u0003 ticks\u0003DQ\\ZKHUH\u0011 <RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003ZH\u0003KDYH\u0003FKRVHQ\u0003WR\u0003GR\u0003 \u0013\u0003WLPH\u0003VWHSV\u0003SHU\u0003IUDPH\u0011\u00037KLV\u0003QXPEHU\u0003 LV\u0003QRW\u0003PDJLFDO\u0003EXW\u0003ZDV\u0003GHWHUPLQHG\u0003VRPHZKDW\u0003H[SHULPHQWDOO\\\u0003DV\u0003D\u0003UHDVRQDEOH\u0003 WUDGH\u0010RII\u0003EHWZHHQ\u0003KDYLQJ\u0003WR\u0003GRZQORDG\u0003D\u0003ELWPDS\u0003LPDJH\u0003IRU\u0003HYHU\\\u0003WLPH\u0003VWHS\u0003DQG\u0003 FRPSXWLQJ\u0003WRR\u0003PDQ\\\u0003WLPH\u0003VWHSV\u0003SHU\u0003IUDPH\u000f\u0003UHVXOWLQJ\u0003LQ\u0003D\u0003MHUN\\\u0003DQLPDWLRQ\u0011\u0003,I\u0003\\RX\u0003 ZHUH\u0003PRUH\u0003FRQFHUQHG\u0003ZLWK\u0003JHWWLQJ\u0003WKH\u0003RXWSXW\u0003RI\u0003HDFK\u0003VLPXODWLRQ\u0003VWHS\u0003WKDQ\u0003\\RX\u0003 ZHUH\u0003ZLWK\u0003DQLPDWLQJ\u0003WKH\u0003UHVXOWV\u0003LQ\u0003UHDO\u0003WLPH\u000f\u0003\\RX\u0003FRXOG\u0003FKDQJH\u0003WKLV\u0003VXFK\u0003WKDW\u0003\\RX\u0003 FRPSXWHG\u0003RQO\\\u0003D\u0003VLQJOH\u0003VWHS\u0003RQ\u0003HDFK\u0003IUDPH\u0011 $IWHU\u0003FRPSXWLQJ\u0003WKH\u0003 \u0013\u0003WLPH\u0003VWHSV\u0003VLQFH\u0003WKH\u0003SUHYLRXV\u0003IUDPH\u000f\u0003 anim_gpu() LV\u0003UHDG\\\u0003WR\u0003FRS\\\u0003D\u0003ELWPDS\u0003IUDPH\u0003RI\u0003WKH\u0003FXUUHQW\u0003DQLPDWLRQ\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0011\u0003 6LQFH\u0003WKH\u0003 for()\u0003ORRS\u0003OHDYHV\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003VZDSSHG\u000f\u0003ZH\u0003\u020cUVW\u0003VZDS\u0003 Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/two.lf/four.lfWKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0003VR\u0003WKDW\u0003WKH\u0003RXWSXW\u0003DFWXDOO\\\u0003FRQWDLQV\u0003WKH\u0003RXWSXW\u0003 RI\u0003WKH\u0003 \u0013WK\u0003WLPH\u0003VWHS\u0011\u0003:H\u0003FRQYHUW\u0003WKH\u0003WHPSHUDWXUHV\u0003WR\u0003FRORUV\u0003XVLQJ\u0003WKH\u0003 NHUQHO\u0003float_to_color() \u0003DQG\u0003WKHQ\u0003FRS\\\u0003WKH\u0003UHVXOWDQW\u0003LPDJH\u0003EDFN\u0003WR\u0003 WKH\u0003&38\u0003ZLWK\u0003D\u0003 cudaMemcpy() \u0003WKDW\u0003VSHFL\u020cHV\u0003WKH\u0003GLUHFWLRQ\u0003RI\u0003FRS\\\u0003DV\u0003 cudaMemcpyDeviceToHost \u0011\u0003)LQDOO\\\u000f\u0003WR\u0003SUHSDUH\u0003IRU\u0003WKH\u0003QH[W\u0003VHTXHQFH\u0003RI\u0003WLPH\u0003 VWHSV\u000f\u0003ZH\u0003VZDS\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0003EDFN\u0003WR\u0003WKH\u0003LQSXW\u0003EXIIHU\u0003VLQFH\u0003LW\u0003ZLOO\u0003VHUYH\u0003DV\u0003 LQSXW\u0003WR\u0003WKH\u0003QH[W\u0003WLPH\u0003VWHS\u0011 int main( void ) { DataBlock data; CPUAnimBitmap bitmap( DIM, DIM, &data ); data.bitmap = &bitmap; data.totalTime = 0; data.frames = 0; HANDLE_ERROR( cudaEventCreate( &data.start ) ); HANDLE_ERROR( cudaEventCreate( &data.stop ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.output_bitmap, bitmap.image_size() ) ); // assume float == 4 chars in size (i.e., rgba) HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_inSrc, bitmap.image_size() ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_outSrc, bitmap.image_size() ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_constSrc, bitmap.image_size() ) ); float *temp = ( float*)malloc( bitmap.image_size() ); for (int i=0; i<DIM*DIM; i++) { temp[i] = 0; int x = i % DIM; int y = i / DIM; if ((x>300) && (x<600) && (y>310) && (y<601)) temp[i] = MAX_TEMP; } Download from www.wowebook.comptgLLL EEE TTTRRR AAA NNN SSS /one.lf/two.lf/five.lf7.3 S S SI I IM M MU U U A A AT T TI I IN N NG G G H H H A A AT T T FFF EEE RRR temp[DIM*100+100] = (MAX_TEMP + MIN_TEMP)/2; temp[DIM*700+100] = MIN_TEMP; temp[DIM*300+300] = MIN_TEMP; temp[DIM*200+700] = MIN_TEMP; for (int y=800; y<900; y++) { for (int x=400; x<500; x++) { temp[x+y*DIM] = MIN_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_constSrc, temp, bitmap.image_size(), cudaMemcpyHostToDevice ) ); for (int y=800; y<DIM; y++) { for (int x=0; x<200; x++) { temp[x+y*DIM] = MAX_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_inSrc, temp, bitmap.image_size(), cudaMemcpyHostToDevice ) ); free( temp ); bitmap.anim_and_exit( ( void (*)(void *,int))anim_gpu, ( void (*)(void *))anim_exit ); } Figure 7.4 shows an example",
    "data.dev_constSrc, temp, bitmap.image_size(), cudaMemcpyHostToDevice ) ); for (int y=800; y<DIM; y++) { for (int x=0; x<200; x++) { temp[x+y*DIM] = MAX_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_inSrc, temp, bitmap.image_size(), cudaMemcpyHostToDevice ) ); free( temp ); bitmap.anim_and_exit( ( void (*)(void *,int))anim_gpu, ( void (*)(void *))anim_exit ); } Figure 7.4 shows an example of what the output might look like. You will notice in the image some of the \u201cheaters\u201d that appear to be pixel-sized islands that disrupt the continuity of the temperature distribution. 7.3.4 USING TEXTURE MEMOR Y There is a considerable amount of spatial locality in the memory access pattern required to perform the temperature update in each step. As we explained previously, this is exactly the type of access pattern that GPU texture memory is Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/two.lf/six.lfGHVLJQHG\u0003WR\u0003DFFHOHUDWH\u0011\u0003*LYHQ\u0003WKDW\u0003ZH\u0003ZDQW\u0003WR\u0003XVH\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003ZH\u0003QHHG\u0003WR\u0003 OHDUQ\u0003WKH\u0003PHFKDQLFV\u0003RI\u0003GRLQJ\u0003VR\u0011\u0003 )LUVW\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003WR\u0003GHFODUH\u0003RXU\u0003LQSXWV\u0003DV\u0003WH[WXUH\u0003UHIHUHQFHV\u0011\u0003:H\u0003ZLOO\u0003XVH\u0003UHIHU - HQFHV\u0003WR\u0003\u020dRDWLQJ\u0010SRLQW\u0003WH[WXUHV\u000f\u0003VLQFH\u0003RXU\u0003WHPSHUDWXUH\u0003GDWD\u0003LV\u0003\u020dRDWLQJ\u0010SRLQW\u0011 // these exist on the GPU side texture< float> texConstSrc; texture< float> texIn; texture< float> texOut; 7KH\u0003QH[W\u0003PDMRU\u0003GLIIHUHQFH\u0003LV\u0003WKDW\u0003DIWHU\u0003DOORFDWLQJ\u0003*38\u0003PHPRU\\\u0003IRU\u0003WKHVH\u0003 WKUHH\u0003EXIIHUV\u000f\u0003ZH\u0003QHHG\u0003WR\u0003 bind \u0003WKH\u0003UHIHUHQFHV\u0003WR\u0003WKH\u0003PHPRU\\\u0003EXIIHU\u0003XVLQJ\u0003 cudaBindTexture() \u0011\u00037KLV\u0003EDVLFDOO\\\u0003WHOOV\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003WZR\u0003WKLQJV :H\u0003LQWHQG\u0003WR\u0003XVH\u0003WKH\u0003VSHFL\u020cHG\u0003EXIIHU\u0003DV\u0003D\u0003WH[WXUH\u0011\u01e9\u0003 :H\u0003LQWHQG\u0003WR\u0003XVH\u0003WKH\u0003VSHFL\u020cHG\u0003WH[WXUH\u0003UHIHUHQFH\u0003DV\u0003WKH\u0003WH[WXUH\u01e2V\u0003\u01e4QDPH\u0011\u01e5\u01e9\u0003 Figure 7.4 $\u0003VFUHHQVKRW\u0003IURP\u0003WKH\u0003DQLPDWHG\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/two.lf/seven.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) ((($IWHU\u0003WKH\u0003WKUHH\u0003DOORFDWLRQV\u0003LQ\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003ZH\u0003ELQG\u0003WKH\u0003WKUHH\u0003 DOORFDWLRQV\u0003WR\u0003WKH\u0003WH[WXUH\u0003UHIHUHQFHV\u0003GHFODUHG\u0003HDUOLHU\u0003 texConstSrc , texIn\u000f\u0003DQG\u0003 texOut \u0011 HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_inSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_outSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_constSrc, imageSize ) ); HANDLE_ERROR( cudaBindTexture( NULL, texConstSrc, data.dev_constSrc, imageSize ) ); HANDLE_ERROR( cudaBindTexture( NULL, texIn, data.dev_inSrc, imageSize ) ); HANDLE_ERROR( cudaBindTexture( NULL, texOut, data.dev_outSrc, imageSize ) ); $W\u0003WKLV\u0003SRLQW\u000f\u0003RXU\u0003WH[WXUHV\u0003DUH\u0003FRPSOHWHO\\\u0003VHW\u0003XS\u000f\u0003DQG\u0003ZH\u01e2UH\u0003UHDG\\\u0003WR\u0003ODXQFK\u0003RXU\u0003 NHUQHO\u0011\u0003+RZHYHU\u000f\u0003ZKHQ\u0003ZH\u01e2UH\u0003UHDGLQJ\u0003IURP\u0003WH[WXUHV\u0003LQ\u0003WKH\u0003NHUQHO\u000f\u0003ZH\u0003QHHG\u0003WR\u0003XVH\u0003 VSHFLDO\u0003IXQFWLRQV\u0003WR\u0003LQVWUXFW\u0003WKH\u0003*38\u0003WR\u0003URXWH\u0003RXU\u0003UHTXHVWV\u0003WKURXJK\u0003WKH\u0003WH[WXUH\u0003XQLW\u0003 DQG\u0003QRW\u0003WKURXJK\u0003VWDQGDUG\u0003JOREDO\u0003PHPRU\\\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003ZH\u0003FDQ\u0003QR\u0003ORQJHU\u0003VLPSO\\\u0003XVH\u0003 VTXDUH\u0003EUDFNHWV\u0003WR\u0003UHDG\u0003IURP\u0003EXIIHUV \u0003ZH\u0003QHHG\u0003WR\u0003PRGLI\\\u0003 \u0003blend_kernel() \u0003WR\u0003XVH\u0003 tex1Dfetch() \u0003ZKHQ\u0003UHDGLQJ\u0003IURP\u0003PHPRU\\\u0011\u0003 $GGLWLRQDOO\\\u000f\u0003WKHUH\u0003LV\u0003DQRWKHU\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003XVLQJ\u0003JOREDO\u0003DQG\u0003WH[WXUH\u0003 PHPRU\\\u0003WKDW\u0003UHTXLUHV\u0003XV\u0003WR\u0003PDNH\u0003DQRWKHU\u0003FKDQJH\u0011\u0003$OWKRXJK\u0003LW\u0003ORRNV\u0003OLNH\u0003D\u0003IXQF - WLRQ\u000f\u0003tex1Dfetch() \u0003LV\u0003D\u0003FRPSLOHU\u0003LQWULQVLF\u0011\u0003$QG\u0003VLQFH\u0003WH[WXUH\u0003UHIHUHQFHV\u0003PXVW\u0003 EH\u0003GHFODUHG\u0003JOREDOO\\\u0003DW\u0003\u020cOH\u0003VFRSH\u000f\u0003ZH\u0003FDQ\u0003QR\u0003ORQJHU\u0003SDVV\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003 EXIIHUV\u0003DV\u0003SDUDPHWHUV\u0003WR\u0003 blend_kernel() \u0003EHFDXVH\u0003WKH\u0003FRPSLOHU\u0003QHHGV\u0003WR\u0003NQRZ\u0003 DW\u0003FRPSLOH\u0003WLPH\u0003ZKLFK\u0003WH[WXUHV\u0003 tex1Dfetch() \u0003VKRXOG\u0003EH\u0003VDPSOLQJ\u0011\u00035DWKHU\u0003 WKDQ\u0003SDVVLQJ\u0003SRLQWHUV\u0003WR\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0003DV\u0003ZH\u0003SUHYLRXVO\\\u0003GLG\u000f\u0003ZH\u0003ZLOO\u0003 SDVV\u0003WR\u0003blend_kernel() \u0003D\u0003ERROHDQ\u0003\u020dDJ\u0003 dstOut\u0003WKDW\u0003LQGLFDWHV\u0003ZKLFK\u0003EXIIHU\u0003WR\u0003 Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/two.lf/eight.lfXVH\u0003DV\u0003LQSXW\u0003DQG\u0003ZKLFK\u0003WR\u0003XVH\u0003DV\u0003RXWSXW\u0011\u00037KH\u0003FKDQJHV\u0003WR\u0003 blend_kernel() are KLJKOLJKWHG\u0003KHUH __global__ void blend_kernel( float *dst, bool dstOut ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; int left = offset - 1; int right = offset + 1; if (x == 0) left++; if (x == DIM-1) right--; int top = offset - DIM; int bottom = offset + DIM; if (y == 0) top += DIM; if (y == DIM-1) bottom -= DIM; float t, l, c, r, b; if (dstOut) { t = tex1Dfetch(texIn,top); l = tex1Dfetch(texIn,left); c = tex1Dfetch(texIn,offset); r = tex1Dfetch(texIn,right); b = tex1Dfetch(texIn,bottom); } else { t = tex1Dfetch(texOut,top); l = tex1Dfetch(texOut,left); c = tex1Dfetch(texOut,offset); r = tex1Dfetch(texOut,right); b = tex1Dfetch(texOut,bottom); } dst[offset] = c + SPEED * (t + b + r + l - 4 * c); } Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/two.lf/nine.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) ((( 6LQFH\u0003WKH\u0003 copy_const_kernel() \u0003NHUQHO\u0003UHDGV\u0003IURP\u0003RXU\u0003EXIIHU\u0003WKDW\u0003KROGV\u0003WKH\u0003 KHDWHU\u0003SRVLWLRQV\u0003DQG\u0003WHPSHUDWXUHV\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003WR\u0003PDNH\u0003D\u0003VLPLODU\u0003PRGL\u020cFDWLRQ\u0003 WKHUH\u0003LQ\u0003RUGHU\u0003WR\u0003UHDG\u0003WKURXJK\u0003WH[WXUH\u0003PHPRU\\\u0003LQVWHDG\u0003RI\u0003JOREDO\u0003PHPRU\\ __global__ void copy_const_kernel( float *iptr ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; float c = tex1Dfetch(texConstSrc,offset); if (c != 0) iptr[offset] = c; } 6LQFH\u0003WKH\u0003VLJQDWXUH\u0003RI\u0003 blend_kernel() \u0003FKDQJHG\u0003WR\u0003DFFHSW\u0003D\u0003\u020dDJ\u0003WKDW\u0003VZLWFKHV\u0003 WKH\u0003EXIIHUV\u0003EHWZHHQ\u0003LQSXW\u0003DQG\u0003RXWSXW\u000f\u0003ZH\u0003QHHG\u0003D\u0003FRUUHVSRQGLQJ\u0003FKDQJH\u0003WR\u0003",
    "{ // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; float c = tex1Dfetch(texConstSrc,offset); if (c != 0) iptr[offset] = c; } 6LQFH\u0003WKH\u0003VLJQDWXUH\u0003RI\u0003 blend_kernel() \u0003FKDQJHG\u0003WR\u0003DFFHSW\u0003D\u0003\u020dDJ\u0003WKDW\u0003VZLWFKHV\u0003 WKH\u0003EXIIHUV\u0003EHWZHHQ\u0003LQSXW\u0003DQG\u0003RXWSXW\u000f\u0003ZH\u0003QHHG\u0003D\u0003FRUUHVSRQGLQJ\u0003FKDQJH\u0003WR\u0003 WKH\u0003anim_gpu() \u0003URXWLQH\u0011\u00035DWKHU\u0003WKDQ\u0003VZDSSLQJ\u0003EXIIHUV\u000f\u0003ZH\u0003VHW\u0003 dstOut = !dstOut\u0003WR\u0003WRJJOH\u0003WKH\u0003\u020dDJ\u0003DIWHU\u0003HDFK\u0003VHULHV\u0003RI\u0003FDOOV void anim_gpu( DataBlock *d, int ticks ) { HANDLE_ERROR( cudaEventRecord( d->start, 0 ) ); dim3 blocks(DIM/16,DIM/16); dim3 threads(16,16); CPUAnimBitmap *bitmap = d->bitmap; // since tex is global and bound, we have to use a flag to // select which is in/out per iteration volatile bool dstOut = true; for (int i=0; i<90; i++) { float *in, *out; if (dstOut) { in = d->dev_inSrc; out = d->dev_outSrc; Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/three.lf/zero.lf } else { out = d->dev_inSrc; in = d->dev_outSrc; } copy_const_kernel<<<blocks,threads>>>( in ); blend_kernel<<<blocks,threads>>>( out, dstOut ); dstOut = !dstOut; } float_to_color<<<blocks,threads>>>( d->output_bitmap, d->dev_inSrc ); HANDLE_ERROR( cudaMemcpy( bitmap->get_ptr(), d->output_bitmap, bitmap->image_size(), cudaMemcpyDeviceToHost ) ); HANDLE_ERROR( cudaEventRecord( d->stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( d->stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, d->start, d->stop ) ); d->totalTime += elapsedTime; ++d->frames; printf( \"Average Time per frame: %3.1f ms\\n\" , d->totalTime/d->frames ); } 7KH\u0003\u020cQDO\u0003FKDQJH\u0003WR\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003URXWLQH\u0003LQYROYHV\u0003FOHDQLQJ\u0003XS\u0003DW\u0003WKH\u0003HQG\u0003RI\u0003 WKH\u0003DSSOLFDWLRQ\u01e2V\u0003UXQ\u0011\u00035DWKHU\u0003WKDQ\u0003MXVW\u0003IUHHLQJ\u0003WKH\u0003JOREDO\u0003EXIIHUV\u000f\u0003ZH\u0003DOVR\u0003QHHG\u0003WR\u0003 XQELQG\u0003WH[WXUHV Download from www.wowebook.comptgLLL EEE TTTRRR AAA NNN SSS /one.lf/three.lf/one.lf7.3 S S SI I IM M MU U U A A AT T TI I IN N NG G G H H H A A AT T T FFF EEE RRR// clean up memory allocated on the GPU void anim_exit( DataBlock *d ) { cudaUnbindTexture( texIn ); cudaUnbindTexture( texOut ); cudaUnbindTexture( texConstSrc ); cudaFree( d->dev_inSrc ); cudaFree( d->dev_outSrc ); cudaFree( d->dev_constSrc ); HANDLE_ERROR( cudaEventDestroy( d->start ) ); HANDLE_ERROR( cudaEventDestroy( d->stop ) ); } 7.3.5 USING TWO/hyphen.caseDIMEN SIONAL TEXTURE MEMORY Toward the beginning of this book, we mentioned how some problems have two- dimensional domains, and therefore it can be convenient to use two-dimensional blocks and grids at times. The same is true for texture memory. There are many cases when having a two-dimensional memory region can be useful, a claim that should come as no surprise to anyone familiar with multidimensional arrays in standard C. Let\u2019s look at how we can modify our heat transfer application to use two-dimensional textures. First, our texture reference declarations change. If unspeci\ufb01ed, texture refer - ences are one-dimensional by default, so we add a dimensionality argument of 2 in order to declare two-dimensional textures. texture< float,2> texConstSrc; texture< float,2> texIn; texture< float,2> texOut; The simpli\ufb01cation promised by converting to two-dimensional textures comes in the blend_kernel() method. Although we need to change our tex1Dfetch() Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/three.lf/two.lfFDOOV\u0003WR\u0003tex2D()\u0003FDOOV\u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003QHHG\u0003WR\u0003XVH\u0003WKH\u0003OLQHDUL]HG\u0003 offset\u0003YDULDEOH\u0003 WR\u0003FRPSXWH\u0003WKH\u0003VHW\u0003RI\u0003RIIVHWV\u0003 top, left, right\u000f\u0003DQG\u0003bottom\u0011\u0003:KHQ\u0003ZH\u0003VZLWFK\u0003WR\u0003 D\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUH\u000f\u0003ZH\u0003FDQ\u0003XVH\u0003 x\u0003DQG\u0003y\u0003GLUHFWO\\\u0003WR\u0003DGGUHVV\u0003WKH\u0003WH[WXUH\u0011 )XUWKHUPRUH\u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003KDYH\u0003WR\u0003ZRUU\\\u0003DERXW\u0003ERXQGV\u0003RYHU\u020dRZ\u0003ZKHQ\u0003ZH\u0003VZLWFK\u0003 WR\u0003XVLQJ\u0003tex2D()\u0011\u0003,I\u0003RQH\u0003RI\u0003 x\u0003RU\u0003y\u0003LV\u0003OHVV\u0003WKDQ\u0003]HUR\u000f\u0003 tex2D()\u0003ZLOO\u0003UHWXUQ\u0003WKH\u0003 YDOXH\u0003DW\u0003]HUR\u0011\u0003/LNHZLVH\u000f\u0003LI\u0003RQH\u0003RI\u0003WKHVH\u0003YDOXHV\u0003LV\u0003JUHDWHU\u0003WKDQ\u0003WKH\u0003ZLGWK\u000f\u0003 tex2D() ZLOO\u0003UHWXUQ\u0003WKH\u0003YDOXH\u0003DW\u0003ZLGWK\u0003\u0014\u0011\u00031RWH\u0003WKDW\u0003LQ\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003WKLV\u0003EHKDYLRU\u0003LV\u0003LGHDO\u000f\u0003 EXW\u0003LW\u01e2V\u0003SRVVLEOH\u0003WKDW\u0003RWKHU\u0003DSSOLFDWLRQV\u0003ZRXOG\u0003GHVLUH\u0003RWKHU\u0003EHKDYLRU\u0011\u0003 $V\u0003D\u0003UHVXOW\u0003RI\u0003WKHVH\u0003VLPSOL\u020cFDWLRQV\u000f\u0003RXU\u0003NHUQHO\u0003FOHDQV\u0003XS\u0003QLFHO\\\u0011 __global__ void blend_kernel( float *dst, bool dstOut ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; float t, l, c, r, b; if (dstOut) { t = tex2D(texIn,x,y-1); l =",
    "dstOut ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; float t, l, c, r, b; if (dstOut) { t = tex2D(texIn,x,y-1); l = tex2D(texIn,x-1,y); c = tex2D(texIn,x,y); r = tex2D(texIn,x+1,y); b = tex2D(texIn,x,y+1); } else { t = tex2D(texOut,x,y-1); l = tex2D(texOut,x-1,y); c = tex2D(texOut,x,y); r = tex2D(texOut,x+1,y); b = tex2D(texOut,x,y+1); } dst[offset] = c + SPEED * (t + b + r + l - 4 * c); } Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/three.lf/three.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) ((( 6LQFH\u0003DOO\u0003RI\u0003RXU\u0003SUHYLRXV\u0003FDOOV\u0003WR\u0003 tex1Dfetch() \u0003QHHG\u0003WR\u0003EH\u0003FKDQJHG\u0003WR\u0003 tex2D() FDOOV\u000f\u0003ZH\u0003PDNH\u0003WKH\u0003FRUUHVSRQGLQJ\u0003FKDQJH\u0003LQ\u0003 copy_const_kernel() \u0011\u00036LPLODUO\\\u0003 WR\u0003WKH\u0003NHUQHO\u0003 blend_kernel() \u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003QHHG\u0003WR\u0003XVH\u0003 offset\u0003WR\u0003DGGUHVV\u0003 WKH\u0003WH[WXUH \u0003ZH\u0003VLPSO\\\u0003XVH\u0003 x\u0003DQG\u0003y\u0003WR\u0003DGGUHVV\u0003WKH\u0003FRQVWDQW\u0003VRXUFH __global__ void copy_const_kernel( float *iptr ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; float c = tex2D(texConstSrc,x,y); if (c != 0) iptr[offset] = c; } 7KH\u0003\u020cQDO\u0003FKDQJH\u0003WR\u0003WKH\u0003RQH\u0010GLPHQVLRQDO\u0003WH[WXUH\u0003YHUVLRQ\u0003RI\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003 VLPXODWLRQ\u0003LV\u0003DORQJ\u0003WKH\u0003VDPH\u0003OLQHV\u0003DV\u0003RXU\u0003SUHYLRXV\u0003FKDQJHV\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003LQ\u0003 main()\u000f\u0003ZH\u0003QHHG\u0003WR\u0003FKDQJH\u0003RXU\u0003WH[WXUH\u0003ELQGLQJ\u0003FDOOV\u0003WR\u0003LQVWUXFW\u0003WKH\u0003UXQWLPH\u0003WKDW\u0003 WKH\u0003EXIIHU\u0003ZH\u0003SODQ\u0003WR\u0003XVH\u0003ZLOO\u0003EH\u0003WUHDWHG\u0003DV\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUH\u000f\u0003QRW\u0003D\u0003RQH\u0010 GLPHQVLRQDO\u0003RQH HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_inSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_outSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_constSrc, imageSize ) ); cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>(); HANDLE_ERROR( cudaBindTexture2D( NULL, texConstSrc, data.dev_constSrc, desc, DIM, DIM, sizeof(float) * DIM ) ); Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/three.lf/four.lf HANDLE_ERROR( cudaBindTexture2D( NULL, texIn, data.dev_inSrc, desc, DIM, DIM, sizeof(float) * DIM ) ); HANDLE_ERROR( cudaBindTexture2D( NULL, texOut, data.dev_outSrc, desc, DIM, DIM, sizeof(float) * DIM ) ); $V\u0003ZLWK\u0003WKH\u0003QRQWH[WXUH\u0003DQG\u0003RQH\u0010GLPHQVLRQDO\u0003WH[WXUH\u0003YHUVLRQV\u000f\u0003ZH\u0003EHJLQ\u0003 E\\\u0003DOORFDWLQJ\u0003VWRUDJH\u0003IRU\u0003RXU\u0003LQSXW\u0003DUUD\\V\u0011\u0003:H\u0003GHYLDWH\u0003IURP\u0003WKH\u0003RQH\u0010 \u0003 GLPHQVLRQDO\u0003H[DPSOH\u0003EHFDXVH\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003UHTXLUHV\u0003WKDW\u0003ZH\u0003SURYLGH\u0003D\u0003 cudaChannelFormatDesc \u0003ZKHQ\u0003ZH\u0003ELQG\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0011\u00037KH\u0003 SUHYLRXV\u0003OLVWLQJ\u0003LQFOXGHV\u0003D\u0003GHFODUDWLRQ\u0003RI\u0003D\u0003FKDQQHO\u0003IRUPDW\u0003GHVFULSWRU\u0011\u0003,Q\u0003RXU\u0003 FDVH\u000f\u0003ZH\u0003FDQ\u0003DFFHSW\u0003WKH\u0003GHIDXOW\u0003SDUDPHWHUV\u0003DQG\u0003VLPSO\\\u0003QHHG\u0003WR\u0003VSHFLI\\\u0003WKDW\u0003 ZH\u0003UHTXLUH\u0003D\u0003\u020dRDWLQJ\u0010SRLQW\u0003GHVFULSWRU\u0011\u0003:H\u0003WKHQ\u0003ELQG\u0003WKH\u0003WKUHH\u0003LQSXW\u0003EXIIHUV\u0003DV\u0003 WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0003XVLQJ\u0003 cudaBindTexture2D() \u000f\u0003WKH\u0003GLPHQVLRQV\u0003RI\u0003 WKH\u0003WH[WXUH\u0003 DIM\u0003[\u0003DIM \u000f\u0003DQG\u0003WKH\u0003FKDQQHO\u0003IRUPDW\u0003GHVFULSWRU\u0003 desc \u0011\u00037KH\u0003UHVW\u0003RI\u0003 main()\u0003UHPDLQV\u0003WKH\u0003VDPH\u0011 int main( void ) { DataBlock data; CPUAnimBitmap bitmap( DIM, DIM, &data ); data.bitmap = &bitmap; data.totalTime = 0; data.frames = 0; HANDLE_ERROR( cudaEventCreate( &data.start ) ); HANDLE_ERROR( cudaEventCreate( &data.stop ) ); int imageSize = bitmap.image_size(); HANDLE_ERROR( cudaMalloc( ( void**)&data.output_bitmap, imageSize ) ); Download from www.wowebook.comptg666/// +++777555 $$$555\u0003\u0003\u0003 /one.lf/three.lf/five.lf\u001a\u0011\u0016\u0003, ,,0 0 08 8 8$$$ 777 , , , 111 ***\u0003\u0003\u0003((( $$$\u0003\u0003\u00037 77111 666 ))) ((( // assume float == 4 chars in size (i.e., rgba) HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_inSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_outSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_constSrc, imageSize ) ); cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>(); HANDLE_ERROR( cudaBindTexture2D( NULL, texConstSrc, data.dev_constSrc, desc, DIM, DIM, sizeof(float) * DIM ) ); HANDLE_ERROR( cudaBindTexture2D( NULL, texIn, data.dev_inSrc, desc, DIM, DIM, sizeof(float) * DIM ) ); HANDLE_ERROR( cudaBindTexture2D( NULL, texOut, data.dev_outSrc, desc, DIM, DIM, sizeof(float) * DIM ) ); // initialize the constant data float *temp = ( float*)malloc( imageSize ); for (int i=0; i<DIM*DIM; i++) { temp[i] = 0; int x = i % DIM; int y = i / DIM; if ((x>300) && (x<600) && (y>310) && (y<601)) temp[i] = MAX_TEMP; } Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/three.lf/six.lf temp[DIM*100+100] = (MAX_TEMP + MIN_TEMP)/2; temp[DIM*700+100] = MIN_TEMP; temp[DIM*300+300] = MIN_TEMP; temp[DIM*200+700] = MIN_TEMP; for (int y=800; y<900; y++) { for (int x=400; x<500; x++) { temp[x+y*DIM] = MIN_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_constSrc, temp, imageSize,",
    "&& (x<600) && (y>310) && (y<601)) temp[i] = MAX_TEMP; } Download from www.wowebook.comptg7(;785(\u00030(025< /one.lf/three.lf/six.lf temp[DIM*100+100] = (MAX_TEMP + MIN_TEMP)/2; temp[DIM*700+100] = MIN_TEMP; temp[DIM*300+300] = MIN_TEMP; temp[DIM*200+700] = MIN_TEMP; for (int y=800; y<900; y++) { for (int x=400; x<500; x++) { temp[x+y*DIM] = MIN_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_constSrc, temp, imageSize, cudaMemcpyHostToDevice ) ); // initialize the input data for (int y=800; y<DIM; y++) { for (int x=0; x<200; x++) { temp[x+y*DIM] = MAX_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_inSrc, temp, imageSize, cudaMemcpyHostToDevice ) ); free( temp ); bitmap.anim_and_exit( ( void (*)(void*,int))anim_gpu, ( void (*)(void*))anim_exit ); } $OWKRXJK\u0003ZH\u0003QHHGHG\u0003GLIIHUHQW\u0003IXQFWLRQV\u0003WR\u0003LQVWUXFW\u0003WKH\u0003UXQWLPH\u0003WR\u0003ELQG\u0003RQH\u0010 GLPHQVLRQDO\u0003RU\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u000f\u0003ZH\u0003XVH\u0003WKH\u0003VDPH\u0003URXWLQH\u0003WR\u0003XQELQG\u0003 WKH\u0003WH[WXUH\u000f\u0003 cudaUnbindTexture() \u0011\u0003%HFDXVH\u0003RI\u0003WKLV\u000f\u0003RXU\u0003FOHDQXS\u0003URXWLQH\u0003FDQ\u0003 UHPDLQ\u0003XQFKDQJHG\u0011 // clean up memory allocated on the GPU void anim_exit( DataBlock *d ) { cudaUnbindTexture( texIn ); cudaUnbindTexture( texOut ); Download from www.wowebook.comptg&&&+++333555555(((((( : :: /one.lf/three.lf/seven.lf\u001a\u0011\u0017\u0003$$$777 (((\u0003\u0003\u0003999 , , , cudaUnbindTexture( texConstSrc ); cudaFree( d->dev_inSrc ); cudaFree( d->dev_outSrc ); cudaFree( d->dev_constSrc ); HANDLE_ERROR( cudaEventDestroy( d->start ) ); HANDLE_ERROR( cudaEventDestroy( d->stop ) ); } 7KH\u0003YHUVLRQ\u0003RI\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003WKDW\u0003XVHV\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0003 KDV\u0003HVVHQWLDOO\\\u0003LGHQWLFDO\u0003SHUIRUPDQFH\u0003FKDUDFWHULVWLFV\u0003DV\u0003WKH\u0003YHUVLRQ\u0003WKDW\u0003XVHV\u0003 RQH\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0011\u00036R\u0003IURP\u0003D\u0003SHUIRUPDQFH\u0003VWDQGSRLQW\u000f\u0003WKH\u0003GHFLVLRQ\u0003 EHWZHHQ\u0003RQH\u0010\u0003DQG\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0003LV\u0003OLNHO\\\u0003WR\u0003EH\u0003LQFRQVHTXHQWLDO\u0011\u0003)RU\u0003 RXU\u0003SDUWLFXODU\u0003DSSOLFDWLRQ\u000f\u0003WKH\u0003FRGH\u0003LV\u0003D\u0003OLWWOH\u0003VLPSOHU\u0003ZKHQ\u0003XVLQJ\u0003WZR\u0010 \u0003GLPHQVLRQDO\u0003 WH[WXUHV\u0003EHFDXVH\u0003ZH\u0003KDSSHQ\u0003WR\u0003EH\u0003VLPXODWLQJ\u0003D\u0003WZR\u0010GLPHQVLRQDO\u0003GRPDLQ\u0011\u0003%XW\u0003 LQ\u0003JHQHUDO\u000f\u0003VLQFH\u0003WKLV\u0003LV\u0003QRW\u0003DOZD\\V\u0003WKH\u0003FDVH\u000f\u0003ZH\u0003VXJJHVW\u0003\\RX\u0003PDNH\u0003WKH\u0003GHFLVLRQ\u0003 EHWZHHQ\u0003RQH\u0010\u0003DQG\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0003RQ\u0003D\u0003FDVH\u0010E\\\u0010FDVH\u0003EDVLV\u0011 &KDSWHU\u00035HYLHZ\u001a\u0011\u0017\u0003 $V\u0003ZH\u0003VDZ\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003VRPH\u0003RI\u0003WKH\u0003EHQH\u020cW\u0003RI\u0003 WH[WXUH\u0003PHPRU\\\u0003FRPHV\u0003DV\u0003WKH\u0003UHVXOW\u0003RI\u0003RQ\u0010FKLS\u0003FDFKLQJ\u0011\u00037KLV\u0003LV\u0003HVSHFLDOO\\\u0003QRWLFH - DEOH\u0003LQ\u0003DSSOLFDWLRQV\u0003VXFK\u0003DV\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ \u0003DSSOLFDWLRQV\u0003WKDW\u0003KDYH\u0003 VRPH\u0003VSDWLDO\u0003FRKHUHQFH\u0003WR\u0003WKHLU\u0003GDWD\u0003DFFHVV\u0003SDWWHUQV\u0011\u0003:H\u0003VDZ\u0003KRZ\u0003HLWKHU\u0003RQH\u0010\u0003RU\u0003 WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0003FDQ\u0003EH\u0003XVHG\u000f\u0003ERWK\u0003KDYLQJ\u0003VLPLODU\u0003SHUIRUPDQFH\u0003FKDU - DFWHULVWLFV\u0011\u0003$V\u0003ZLWK\u0003D\u0003EORFN\u0003RU\u0003JULG\u0003VKDSH\u000f\u0003WKH\u0003FKRLFH\u0003RI\u0003RQH\u0010\u0003RU\u0003WZR\u0010GLPHQVLRQDO\u0003 WH[WXUH\u0003LV\u0003ODUJHO\\\u0003RQH\u0003RI\u0003FRQYHQLHQFH\u0011\u00036LQFH\u0003WKH\u0003FRGH\u0003EHFDPH\u0003VRPHZKDW\u0003FOHDQHU\u0003 ZKHQ\u0003ZH\u0003VZLWFKHG\u0003WR\u0003WZR\u0010GLPHQVLRQDO\u0003WH[WXUHV\u0003DQG\u0003WKH\u0003ERUGHUV\u0003DUH\u0003KDQGOHG\u0003DXWR - PDWLFDOO\\\u000f\u0003ZH\u0003ZRXOG\u0003SUREDEO\\\u0003DGYRFDWH\u0003WKH\u0003XVH\u0003RI\u0003D\u0003\u0015'\u0003WH[WXUH\u0003LQ\u0003RXU\u0003KHDW\u0003WUDQVIHU\u0003 DSSOLFDWLRQ\u0011\u0003%XW\u0003DV\u0003\\RX\u0003VDZ\u000f\u0003LW\u0003ZLOO\u0003ZRUN\u0003\u020cQH\u0003HLWKHU\u0003ZD\\\u0011 7H[WXUH\u0003PHPRU\\\u0003FDQ\u0003SURYLGH\u0003DGGLWLRQDO\u0003VSHHGXSV\u0003LI\u0003ZH\u0003XWLOL]H\u0003VRPH\u0003RI\u0003WKH\u0003FRQYHU - VLRQV\u0003WKDW\u0003WH[WXUH\u0003VDPSOHUV\u0003FDQ\u0003SHUIRUP\u0003DXWRPDWLFDOO\\\u000f\u0003VXFK\u0003DV\u0003XQSDFNLQJ\u0003SDFNHG\u0003 GDWD\u0003LQWR\u0003VHSDUDWH\u0003YDULDEOHV\u0003RU\u0003FRQYHUWLQJ\u0003\u001b\u0010\u0003DQG\u0003\u0014\u0019\u0010ELW\u0003LQWHJHUV\u0003WR\u0003QRUPDOL]HG\u0003 \u020dRDWLQJ\u0010SRLQW\u0003QXPEHUV\u0011\u0003:H\u0003GLGQ\u01e2W\u0003H[SORUH\u0003HLWKHU\u0003RI\u0003WKHVH\u0003FDSDELOLWLHV\u0003LQ\u0003WKH\u0003KHDW\u0003 WUDQVIHU\u0003DSSOLFDWLRQ\u000f\u0003EXW\u0003WKH\\\u0003PLJKW\u0003EH\u0003XVHIXO\u0003WR\u0003\\RX\u0004 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /one.lf/three.lf/nine.lfChapter 8 Graphics Interoperability 6LQFH\u0003WKLV\u0003ERRN\u0003KDV\u0003IRFXVHG\u0003RQ\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQ\u000f\u0003IRU\u0003WKH\u0003PRVW\u0003SDUW\u0003 ZH\u01e2YH\u0003LJQRUHG\u0003WKDW\u0003*38V\u0003FRQWDLQ\u0003VRPH\u0003VSHFLDO\u0010SXUSRVH\u0003FRPSRQHQWV\u0003DV\u0003ZHOO\u0011\u00037KH\u0003 *38\u0003RZHV\u0003LWV\u0003VXFFHVV\u0003WR\u0003LWV\u0003DELOLW\\\u0003WR\u0003SHUIRUP\u0003FRPSOH[\u0003UHQGHULQJ\u0003WDVNV\u0003LQ\u0003UHDO\u0003 WLPH\u000f\u0003IUHHLQJ\u0003WKH\u0003UHVW\u0003RI\u0003WKH\u0003V\\VWHP\u0003WR\u0003FRQFHQWUDWH\u0003RQ\u0003RWKHU\u0003ZRUN\u0011\u00037KLV\u0003OHDGV\u0003XV\u0003 WR\u0003WKH\u0003REYLRXV\u0003TXHVWLRQ \u0003&DQ\u0003ZH\u0003XVH\u0003WKH\u0003*38\u0003IRU\u0003ERWK\u0003UHQGHULQJ\u0003 and\u0003JHQHUDO\u0010 SXUSRVH\u0003FRPSXWDWLRQ\u0003LQ\u0003WKH\u0003VDPH\u0003DSSOLFDWLRQ\"\u0003:KDW\u0003LI\u0003WKH\u0003LPDJHV\u0003ZH\u0003ZDQW\u0003WR\u0003 UHQGHU\u0003UHO\\\u0003RQ\u0003WKH\u0003UHVXOWV\u0003RI\u0003RXU\u0003FRPSXWDWLRQV\"\u00032U\u0003ZKDW\u0003LI\u0003ZH\u0003ZDQW\u0003WR\u0003WDNH\u0003WKH\u0003 IUDPH\u0003ZH\u01e2YH\u0003UHQGHUHG\u0003DQG\u0003SHUIRUP\u0003VRPH\u0003LPDJH\u0010SURFHVVLQJ\u0003RU\u0003VWDWLVWLFV\u0003FRPSX - WDWLRQV\u0003RQ\u0003LW\"\u0003 )RUWXQDWHO\\\u000f\u0003QRW\u0003RQO\\\u0003LV\u0003WKLV\u0003LQWHUDFWLRQ\u0003EHWZHHQ\u0003JHQHUDO\u0010SXUSRVH\u0003FRPSXWDWLRQ\u0003 DQG\u0003UHQGHULQJ\u0003PRGHV\u0003SRVVLEOH\u000f\u0003EXW\u0003LW\u01e2V\u0003IDLUO\\\u0003HDV\\\u0003WR\u0003DFFRPSOLVK\u0003JLYHQ\u0003ZKDW\u0003\\RX\u0003 DOUHDG\\\u0003NQRZ\u0011\u0003&8'$\u0003&\u0003DSSOLFDWLRQV\u0003FDQ\u0003VHDPOHVVO\\\u0003LQWHURSHUDWH\u0003ZLWK\u0003HLWKHU\u0003RI\u0003WKH\u0003 WZR\u0003PRVW\u0003SRSXODU\u0003UHDO\u0010WLPH\u0003UHQGHULQJ\u0003$3,V\u000f\u00032SHQ*/\u0003DQG\u0003'LUHFW;\u0011\u00037KLV\u0003FKDSWHU\u0003 ZLOO\u0003ORRN\u0003DW\u0003WKH\u0003PHFKDQLFV\u0003E\\\u0003ZKLFK\u0003\\RX\u0003FDQ\u0003HQDEOH\u0003WKLV\u0003IXQFWLRQDOLW\\\u0011 7KH\u0003H[DPSOHV\u0003LQ\u0003WKLV\u0003FKDSWHU\u0003GHYLDWH\u0003VRPH\u0003IURP\u0003WKH\u0003SUHFHGHQWV\u0003ZH\u01e2YH\u0003VHW\u0003LQ\u0003 SUHYLRXV\u0003FKDSWHUV\u0011\u0003,Q\u0003SDUWLFXODU\u000f\u0003WKLV\u0003FKDSWHU\u0003DVVXPHV\u0003D\u0003VLJQL\u020cFDQW\u0003DPRXQW\u0003DERXW\u0003 \\RXU\u0003EDFNJURXQG\u0003ZLWK\u0003RWKHU\u0003WHFKQRORJLHV\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003ZH\u0003KDYH\u0003LQFOXGHG\u0003D\u0003FRQVLG - HUDEOH\u0003DPRXQW\u0003RI\u00032SHQ*/\u0003DQG\u0003*/87\u0003FRGH\u0003LQ\u0003WKHVH\u0003H[DPSOHV\u000f\u0003DOPRVW\u0003QRQH\u0003RI\u0003 ZKLFK\u0003ZLOO\u0003ZH\u0003H[SODLQ\u0003LQ\u0003JUHDW\u0003GHSWK\u0011\u00037KHUH\u0003DUH\u0003PDQ\\\u0003VXSHUE\u0003UHVRXUFHV\u0003WR\u0003OHDUQ\u0003 JUDSKLFV\u0003$3,V\u000f\u0003ERWK\u0003RQOLQH\u0003DQG\u0003LQ\u0003ERRNVWRUHV\u000f\u0003EXW\u0003WKHVH\u0003WRSLFV\u0003DUH\u0003ZHOO\u0003EH\\RQG\u0003WKH\u0003 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/four.lf/zero.lfLQWHQGHG\u0003VFRSH\u0003RI\u0003WKLV\u0003ERRN\u0011\u00035DWKHU\u000f\u0003WKLV\u0003FKDSWHU\u0003LQWHQGV\u0003WR\u0003IRFXV\u0003RQ\u0003&8'$\u0003&\u0003DQG\u0003 WKH\u0003IDFLOLWLHV\u0003LW\u0003RIIHUV\u0003WR\u0003LQFRUSRUDWH\u0003LW\u0003LQWR\u0003\\RXU\u0003JUDSKLFV\u0003DSSOLFDWLRQV\u0011\u0003,I\u0003\\RX\u0003DUH\u0003 XQIDPLOLDU\u0003ZLWK\u00032SHQ*/\u0003RU\u0003'LUHFW;\u000f\u0003\\RX\u0003DUH\u0003XQOLNHO\\\u0003WR\u0003GHULYH\u0003PXFK\u0003EHQH\u020cW\u0003IURP\u0003 WKLV\u0003FKDSWHU\u0003DQG\u0003PD\\\u0003ZDQW\u0003WR\u0003VNLS\u0003WR\u0003WKH\u0003QH[W\u0011 &KDSWHU\u00032EMHFWLYHV\u001b\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003ZKDW\u0003\u01e9\u0003 graphics interoperability LV\u0003DQG\u0003ZK\\\u0003\\RX\u0003PLJKW\u0003XVH\u0003LW\u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003VHW\u0003XS\u0003D\u0003&8'$\u0003GHYLFH\u0003IRU\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003VKDUH\u0003GDWD\u0003EHWZHHQ\u0003\\RXU\u0003&8'$\u0003&\u0003NHUQHOV\u0003DQG\u00032SHQ*/\u0003\u01e9\u0003 UHQGHULQJ\u0011 *UDSKLFV\u0003,QWHURSHUDWLRQ\u001b\u0011\u0015\u0003 7R\u0003GHPRQVWUDWH\u0003WKH\u0003PHFKDQLFV\u0003RI\u0003LQWHURSHUDWLRQ\u0003EHWZHHQ\u0003JUDSKLFV\u0003DQG\u0003&8'$\u0003&\u000f\u0003 ZH\u01e2OO\u0003ZULWH\u0003DQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003ZRUNV\u0003LQ\u0003WZR\u0003VWHSV\u0011\u00037KH\u0003\u020cUVW\u0003VWHS\u0003XVHV\u0003D\u0003&8'$\u0003&\u0003 NHUQHO\u0003WR\u0003JHQHUDWH\u0003LPDJH\u0003GDWD\u0011\u0003,Q\u0003WKH\u0003VHFRQG\u0003VWHS\u000f\u0003WKH\u0003DSSOLFDWLRQ\u0003SDVVHV\u0003WKLV\u0003GDWD\u0003 WR\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003WR\u0003UHQGHU\u0011\u00037R\u0003DFFRPSOLVK\u0003WKLV\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003PXFK\u0003RI\u0003WKH\u0003&8'$\u0003 &\u0003ZH\u0003KDYH\u0003VHHQ\u0003LQ\u0003SUHYLRXV\u0003FKDSWHUV\u0003DORQJ\u0003ZLWK\u0003VRPH\u00032SHQ*/\u0003DQG\u0003*/87\u0003FDOOV\u0011 7R\u0003VWDUW\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003LQFOXGH\u0003WKH\u0003UHOHYDQW\u0003*/87\u0003DQG\u0003&8'$\u0003KHDGHUV\u0003LQ\u0003RUGHU\u0003 WR\u0003HQVXUH\u0003WKH\u0003FRUUHFW\u0003IXQFWLRQV\u0003DQG\u0003HQXPHUDWLRQV\u0003DUH\u0003GH\u020cQHG\u0011\u0003:H\u0003DOVR\u0003GH\u020cQH\u0003WKH\u0003 VL]H\u0003RI\u0003WKH\u0003ZLQGRZ\u0003LQWR\u0003ZKLFK\u0003RXU\u0003DSSOLFDWLRQ\u0003SODQV\u0003WR\u0003UHQGHU\u0011\u0003$W\u0003\u0018\u0014\u0015\u0003[\u0003\u0018\u0014\u0015\u0003SL[HOV\u000f\u0003 ZH\u0003ZLOO\u0003GR\u0003UHODWLYHO\\\u0003VPDOO\u0003GUDZLQJV\u0011 #define GL_GLEXT_PROTOTYPES #include \"GL/glut.h\" #include \"cuda.h\" #include \"cuda_gl_interop.h\" #include \"../common/book.h\" #include \"../common/cpu_bitmap.h\" #define DIM 512 Download from www.wowebook.comptg***555 $$$&&& 666555 111 /one.lf/four.lf/one.lf\u001b\u0011\u0015\u0003333 +++ , , ,\u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( $$$ 777 , , , 222 $GGLWLRQDOO\\\u000f\u0003ZH\u0003GHFODUH\u0003WZR\u0003JOREDO\u0003YDULDEOHV\u0003WKDW\u0003ZLOO\u0003VWRUH\u0003KDQGOHV\u0003WR\u0003WKH\u0003GDWD\u0003ZH\u0003 LQWHQG\u0003WR\u0003VKDUH\u0003EHWZHHQ\u00032SHQ*/\u0003DQG\u0003GDWD\u0011\u0003:H\u0003ZLOO\u0003VHH\u0003PRPHQWDULO\\\u0003KRZ\u0003ZH\u0003XVH\u0003 WKHVH\u0003WZR\u0003YDULDEOHV\u000f\u0003EXW\u0003WKH\\\u0003ZLOO\u0003VWRUH\u0003GLIIHUHQW\u0003KDQGOHV\u0003WR\u0003WKH\u0003 same \u0003EXIIHU\u0011\u0003:H\u0003 QHHG\u0003WZR\u0003VHSDUDWH\u0003YDULDEOHV\u0003EHFDXVH\u00032SHQ*/\u0003DQG\u0003&8'$\u0003ZLOO\u0003ERWK\u0003KDYH\u0003GLIIHUHQW\u0003 \u01e4QDPHV\u01e5\u0003IRU\u0003WKH\u0003EXIIHU\u0011\u00037KH\u0003YDULDEOH\u0003 bufferObj \u0003ZLOO\u0003EH\u00032SHQ*/\u01e2V\u0003QDPH\u0003IRU\u0003WKH\u0003 GDWD\u000f\u0003DQG\u0003WKH\u0003YDULDEOH\u0003 resource \u0003ZLOO\u0003EH\u0003WKH\u0003&8'$\u0003&\u0003QDPH\u0003IRU\u0003LW\u0011 GLuint bufferObj; cudaGraphicsResource *resource; 1RZ\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003WKH\u0003DFWXDO\u0003DSSOLFDWLRQ\u0011\u00037KH\u0003\u020cUVW\u0003WKLQJ\u0003ZH\u0003GR\u0003LV\u0003VHOHFW\u0003D\u0003 &8'$\u0003GHYLFH\u0003RQ\u0003ZKLFK\u0003WR\u0003UXQ\u0003RXU\u0003DSSOLFDWLRQ\u0011\u00032Q\u0003PDQ\\\u0003V\\VWHPV\u000f\u0003WKLV\u0003LV\u0003QRW\u0003D\u0003 FRPSOLFDWHG\u0003SURFHVV\u000f\u0003VLQFH\u0003WKH\\\u0003ZLOO\u0003RIWHQ\u0003FRQWDLQ\u0003RQO\\\u0003D\u0003VLQJOH\u0003&8'$\u0010HQDEOHG\u0003 *38\u0011\u0003+RZHYHU\u000f\u0003DQ\u0003LQFUHDVLQJ\u0003QXPEHU\u0003RI\u0003V\\VWHPV\u0003FRQWDLQ\u0003PRUH\u0003WKDQ\u0003RQH\u0003&8'$\u0010 HQDEOHG\u0003*38\u000f\u0003VR\u0003ZH\u0003QHHG\u0003D\u0003PHWKRG\u0003WR\u0003FKRRVH\u0003RQH\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003 SURYLGHV\u0003VXFK\u0003D\u0003IDFLOLW\\\u0003WR\u0003XV\u0011 int main( int argc, char **argv ) { cudaDeviceProp prop; int dev; memset( &prop, 0, sizeof( cudaDeviceProp ) ); prop.major = 1; prop.minor = 0; HANDLE_ERROR( cudaChooseDevice( &dev, &prop ) ); <RX\u0003PD\\\u0003UHFDOO\u0003WKDW\u0003ZH\u0003VDZ\u0003 cudaChooseDevice() \u0003LQ\u0003&KDSWHU\u0003\u0016\u000f\u0003EXW\u0003VLQFH\u0003LW\u0003ZDV\u0003 VRPHWKLQJ\u0003RI\u0003DQ\u0003DQFLOODU\\\u0003SRLQW\u000f\u0003ZH\u01e2OO\u0003UHYLHZ\u0003LW\u0003DJDLQ\u0003QRZ\u0011\u0003(VVHQWLDOO\\\u000f\u0003WKLV\u0003FRGH\u0003WHOOV\u0003 WKH\u0003UXQWLPH\u0003WR\u0003VHOHFW\u0003DQ\\\u0003*38\u0003WKDW\u0003KDV\u0003D\u0003 compute capability \u0003RI\u0003YHUVLRQ\u0003\u0014\u0011\u0013\u0003RU\u0003EHWWHU\u0011\u0003 ,W\u0003DFFRPSOLVKHV\u0003WKLV\u0003E\\\u0003\u020cUVW\u0003FUHDWLQJ\u0003DQG\u0003FOHDULQJ\u0003D\u0003 \u0003cudaDeviceProp \u0003VWUXFWXUH\u0003 DQG\u0003WKHQ\u0003E\\\u0003VHWWLQJ\u0003LWV\u0003 major\u0003YHUVLRQ\u0003WR\u0003\u0014\u0003DQG\u0003 minor\u0003YHUVLRQ\u0003WR\u0003\u0013\u0011\u0003,W\u0003SDVVHV\u0003WKLV\u0003 LQIRUPDWLRQ\u0003WR\u0003 cudaChooseDevice() \u000f\u0003ZKLFK\u0003LQVWUXFWV\u0003WKH\u0003UXQWLPH\u0003WR\u0003VHOHFW\u0003D\u0003 *38\u0003LQ\u0003WKH\u0003V\\VWHP\u0003WKDW\u0003VDWLV\u020cHV\u0003WKH\u0003FRQVWUDLQWV\u0003VSHFL\u020cHG\u0003E\\\u0003WKH\u0003 \u0003cudaDeviceProp VWUXFWXUH\u0011\u0003,Q\u0003WKH\u0003QH[W\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003ORRN\u0003PRUH\u0003DW\u0003ZKDW\u0003LV\u0003PHDQW\u0003E\\\u0003D\u0003*38\u01e2V\u0003 compute capability \u000f\u0003EXW\u0003IRU\u0003QRZ\u0003LW\u0003VXI\u020cFHV\u0003WR\u0003VD\\\u0003WKDW\u0003LW\u0003URXJKO\\\u0003LQGLFDWHV\u0003WKH\u0003IHDWXUHV\u0003 D\u0003*38\u0003VXSSRUWV\u0011\u0003$OO\u0003&8'$\u0010FDSDEOH\u0003*38V\u0003KDYH\u0003DW\u0003OHDVW\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0013\u000f\u0003VR\u0003 WKH\u0003QHW\u0003HIIHFW\u0003RI\u0003WKLV\u0003FDOO\u0003LV\u0003WKDW\u0003WKH\u0003UXQWLPH\u0003ZLOO\u0003VHOHFW\u0003DQ\\\u0003&8'$\u0010FDSDEOH\u0003GHYLFH\u0003 DQG\u0003UHWXUQ\u0003DQ\u0003LGHQWL\u020cHU\u0003IRU\u0003WKLV\u0003GHYLFH\u0003LQ\u0003WKH\u0003YDULDEOH\u0003 dev\u0011\u00037KHUH\u0003LV\u0003QR\u0003JXDUDQWHH\u0003 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/four.lf/two.lfWKDW\u0003WKLV\u0003GHYLFH\u0003LV\u0003WKH\u0003EHVW\u0003RU\u0003IDVWHVW\u0003*38\u000f\u0003QRU\u0003LV\u0003WKHUH\u0003D\u0003JXDUDQWHH\u0003WKDW\u0003WKH\u0003GHYLFH\u0003 ZLOO\u0003EH\u0003WKH\u0003VDPH\u0003*38\u0003IURP\u0003YHUVLRQ\u0003WR\u0003YHUVLRQ\u0003RI\u0003WKH\u0003&8'$\u0003UXQWLPH\u0011 ,I\u0003WKH\u0003UHVXOW\u0003RI\u0003GHYLFH\u0003VHOHFWLRQ\u0003LV\u0003VR\u0003VHHPLQJO\\\u0003XQGHUZKHOPLQJ\u000f\u0003ZK\\\u0003GR\u0003 ZH\u0003ERWKHU\u0003ZLWK\u0003DOO\u0003WKLV\u0003HIIRUW\u0003WR\u0003\u020cOO\u0003D\u0003 cudaDeviceProp \u0003VWUXFWXUH\u0003DQG\u0003FDOO\u0003 cudaChooseDevice() \u0003WR\u0003JHW\u0003D\u0003YDOLG\u0003GHYLFH\u0003,'\"\u0003)XUWKHUPRUH\u000f\u0003ZH\u0003QHYHU\u0003KDVVOHG\u0003 ZLWK\u0003WKLV\u0003WRPIRROHU\\\u0003EHIRUH\u000f\u0003VR\u0003ZK\\\u0003QRZ\"\u00037KHVH\u0003DUH\u0003JRRG\u0003TXHVWLRQV\u0011\u0003,W\u0003WXUQV\u0003RXW\u0003 WKDW\u0003ZH\u0003QHHG\u0003WR\u0003NQRZ\u0003WKH\u0003&8'$\u0003GHYLFH\u0003,'\u0003VR\u0003WKDW\u0003ZH\u0003FDQ\u0003WHOO\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003 WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003XVH\u0003WKH\u0003GHYLFH\u0003IRU\u0003&8'$\u0003 and\u00032SHQ*/\u0011\u0003:H\u0003DFKLHYH\u0003WKLV\u0003ZLWK\u0003D\u0003 FDOO\u0003WR\u0003cudaGLSetGLDevice() \u000f\u0003SDVVLQJ\u0003WKH\u0003GHYLFH\u0003,'\u0003 dev\u0003ZH\u0003REWDLQHG\u0003IURP\u0003 cudaChooseDevice() HANDLE _ ERROR( cudaGLSetGLDevice( dev ) ); $IWHU\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003LQLWLDOL]DWLRQ\u000f\u0003ZH\u0003FDQ\u0003SURFHHG\u0003WR\u0003LQLWLDOL]H\u0003WKH\u00032SHQ*/\u0003 GULYHU\u0003E\\\u0003FDOOLQJ\u0003RXU\u0003*/\u00038WLOLW\\\u00037RRONLW\u0003 */87 \u0003VHWXS\u0003IXQFWLRQV\u0011\u00037KLV\u0003VHTXHQFH\u0003RI\u0003 FDOOV\u0003VKRXOG\u0003ORRN\u0003UHODWLYHO\\\u0003IDPLOLDU\u0003LI\u0003\\RX\u01e2YH\u0003XVHG\u0003*/87\u0003EHIRUH // these GLUT calls need to be made before the other GL calls glutInit( &argc, argv ); glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGBA ); glutInitWindowSize( DIM, DIM ); glutCreateWindow( \"bitmap\" ); $W\u0003WKLV\u0003SRLQW\u0003LQ\u0003 main()\u000f\u0003ZH\u01e2YH\u0003SUHSDUHG\u0003RXU\u0003&8'$\u0003UXQWLPH\u0003WR\u0003SOD\\\u0003QLFHO\\\u0003ZLWK\u0003WKH\u0003 2SHQ*/\u0003GULYHU\u0003E\\\u0003FDOOLQJ\u0003 cudaGLSetGLDevice() \u0011\u00037KHQ\u0003ZH\u0003LQLWLDOL]HG\u0003*/87\u0003DQG\u0003 FUHDWHG\u0003D\u0003ZLQGRZ\u0003QDPHG\u0003\u01e4ELWPDS\u01e5\u0003LQ\u0003ZKLFK\u0003WR\u0003GUDZ\u0003RXU\u0003UHVXOWV\u0011\u00031RZ\u0003ZH\u0003FDQ\u0003JHW\u0003 RQ\u0003WR\u0003WKH\u0003DFWXDO\u00032SHQ*/\u0003LQWHURSHUDWLRQ\u0004 6KDUHG\u0003GDWD\u0003EXIIHUV\u0003DUH\u0003WKH\u0003NH\\\u0003FRPSRQHQW\u0003WR\u0003LQWHURSHUDWLRQ\u0003EHWZHHQ\u0003&8'$\u0003&\u0003 NHUQHOV\u0003DQG\u00032SHQ*/\u0003UHQGHULQJ\u0011\u00037R\u0003SDVV\u0003GDWD\u0003EHWZHHQ\u00032SHQ*/\u0003DQG\u0003&8'$\u000f\u0003ZH\u0003ZLOO\u0003 \u020cUVW\u0003QHHG\u0003WR\u0003FUHDWH\u0003D\u0003EXIIHU\u0003WKDW\u0003FDQ\u0003EH\u0003XVHG\u0003ZLWK\u0003ERWK\u0003$3,V\u0011\u0003:H\u0003VWDUW\u0003WKLV\u0003SURFHVV\u0003 E\\\u0003FUHDWLQJ\u0003D\u0003SL[HO\u0003EXIIHU\u0003REMHFW\u0003LQ\u00032SHQ*/\u0003DQG\u0003VWRULQJ\u0003WKH\u0003KDQGOH\u0003LQ\u0003RXU\u0003JOREDO\u0003 YDULDEOH\u0003GLuint bufferObj glGenBuffers( 1, &bufferObj ); glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, bufferObj ); glBufferData( GL_PIXEL_UNPACK_BUFFER_ARB, DIM * DIM * 4, NULL, GL_DYNAMIC_DRAW_ARB ); Download from www.wowebook.comptg***555 $$$&&& 666555 111 /one.lf/four.lf/three.lf\u001b\u0011\u0015\u0003333 +++ , , ,\u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( $$$ 777 , , , 222 ,I\u0003\\RX\u0003KDYH\u0003QHYHU\u0003XVHG\u0003D\u0003SL[HO\u0003EXIIHU\u0003REMHFW\u0003 3%2 \u0003LQ\u00032SHQ*/\u000f\u0003\\RX\u0003ZLOO\u0003W\\SL - FDOO\\\u0003FUHDWH\u0003RQH\u0003ZLWK\u0003WKHVH\u0003WKUHH\u0003VWHSV \u0003)LUVW\u000f\u0003ZH\u0003JHQHUDWH\u0003D\u0003EXIIHU\u0003KDQGOH\u0003 ZLWK\u0003\u0003glGenBuffers() \u0011\u00037KHQ\u000f\u0003ZH\u0003ELQG\u0003WKH\u0003KDQGOH\u0003WR\u0003D\u0003SL[HO\u0003EXIIHU\u0003ZLWK\u0003 glBindBuffer() \u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003UHTXHVW\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003WR\u0003DOORFDWH\u0003D\u0003EXIIHU\u0003IRU\u0003 XV\u0003ZLWK\u0003glBufferData() \u0011\u0003,Q\u0003WKLV\u0003H[DPSOH\u000f\u0003ZH\u0003UHTXHVW\u0003D\u0003EXIIHU\u0003WR\u0003KROG\u0003 DIM\u0003[\u0003DIM \u0016\u0015\u0010ELW\u0003YDOXHV\u0003DQG\u0003XVH\u0003WKH\u0003HQXPHUDQW\u0003 GL_DYNAMIC_DRAW_ARB \u0003WR\u0003LQGLFDWH\u0003WKDW\u0003WKH\u0003 EXIIHU\u0003ZLOO\u0003EH\u0003PRGL\u020cHG\u0003UHSHDWHGO\\\u0003E\\\u0003WKH\u0003DSSOLFDWLRQ\u0011\u00036LQFH\u0003ZH\u0003KDYH\u0003QR\u0003GDWD\u0003WR\u0003SUHORDG\u0003 WKH\u0003EXIIHU\u0003ZLWK\u000f\u0003ZH\u0003SDVV\u0003 NULL\u0003DV\u0003WKH\u0003SHQXOWLPDWH\u0003DUJXPHQW\u0003WR\u0003 glBufferData()",
    "* DIM * 4, NULL, GL_DYNAMIC_DRAW_ARB ); Download from www.wowebook.comptg***555 $$$&&& 666555 111 /one.lf/four.lf/three.lf\u001b\u0011\u0015\u0003333 +++ , , ,\u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( $$$ 777 , , , 222 ,I\u0003\\RX\u0003KDYH\u0003QHYHU\u0003XVHG\u0003D\u0003SL[HO\u0003EXIIHU\u0003REMHFW\u0003 3%2 \u0003LQ\u00032SHQ*/\u000f\u0003\\RX\u0003ZLOO\u0003W\\SL - FDOO\\\u0003FUHDWH\u0003RQH\u0003ZLWK\u0003WKHVH\u0003WKUHH\u0003VWHSV \u0003)LUVW\u000f\u0003ZH\u0003JHQHUDWH\u0003D\u0003EXIIHU\u0003KDQGOH\u0003 ZLWK\u0003\u0003glGenBuffers() \u0011\u00037KHQ\u000f\u0003ZH\u0003ELQG\u0003WKH\u0003KDQGOH\u0003WR\u0003D\u0003SL[HO\u0003EXIIHU\u0003ZLWK\u0003 glBindBuffer() \u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003UHTXHVW\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003WR\u0003DOORFDWH\u0003D\u0003EXIIHU\u0003IRU\u0003 XV\u0003ZLWK\u0003glBufferData() \u0011\u0003,Q\u0003WKLV\u0003H[DPSOH\u000f\u0003ZH\u0003UHTXHVW\u0003D\u0003EXIIHU\u0003WR\u0003KROG\u0003 DIM\u0003[\u0003DIM \u0016\u0015\u0010ELW\u0003YDOXHV\u0003DQG\u0003XVH\u0003WKH\u0003HQXPHUDQW\u0003 GL_DYNAMIC_DRAW_ARB \u0003WR\u0003LQGLFDWH\u0003WKDW\u0003WKH\u0003 EXIIHU\u0003ZLOO\u0003EH\u0003PRGL\u020cHG\u0003UHSHDWHGO\\\u0003E\\\u0003WKH\u0003DSSOLFDWLRQ\u0011\u00036LQFH\u0003ZH\u0003KDYH\u0003QR\u0003GDWD\u0003WR\u0003SUHORDG\u0003 WKH\u0003EXIIHU\u0003ZLWK\u000f\u0003ZH\u0003SDVV\u0003 NULL\u0003DV\u0003WKH\u0003SHQXOWLPDWH\u0003DUJXPHQW\u0003WR\u0003 glBufferData() \u0011 $OO\u0003WKDW\u0003UHPDLQV\u0003LQ\u0003RXU\u0003TXHVW\u0003WR\u0003VHW\u0003XS\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003LV\u0003QRWLI\\LQJ\u0003WKH\u0003 &8'$\u0003UXQWLPH\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003VKDUH\u0003WKH\u00032SHQ*/\u0003EXIIHU\u0003QDPHG\u0003 bufferObj ZLWK\u0003&8'$\u0011\u0003:H\u0003GR\u0003WKLV\u0003E\\\u0003UHJLVWHULQJ\u0003 bufferObj \u0003ZLWK\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003DV\u0003D\u0003 JUDSKLFV\u0003UHVRXUFH\u0011 HANDLE_ERROR( cudaGraphicsGLRegisterBuffer( &resource, bufferObj, cudaGraphicsMapFlagsNone ) ); :H\u0003VSHFLI\\\u0003WR\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003XVH\u0003WKH\u0003 2SHQ*/\u00033%2\u0003 \u0003bufferObj \u0003ZLWK\u0003ERWK\u00032SHQ*/\u0003DQG\u0003&8'$\u0003E\\\u0003FDOOLQJ\u0003 cudaGraphicsGLRegisterBuffer() \u0011\u00037KH\u0003&8'$\u0003UXQWLPH\u0003UHWXUQV\u0003D\u0003&8'$\u0010 IULHQGO\\\u0003KDQGOH\u0003WR\u0003WKH\u0003EXIIHU\u0003LQ\u0003WKH\u0003YDULDEOH\u0003 resource \u0011\u00037KLV\u0003KDQGOH\u0003ZLOO\u0003EH\u0003XVHG\u0003WR\u0003 UHIHU\u0003WR\u0003bufferObj \u0003LQ\u0003VXEVHTXHQW\u0003FDOOV\u0003WR\u0003WKH\u0003&8'$\u0003UXQWLPH\u0011\u0003 7KH\u0003\u020dDJ\u0003cudaGraphicsMapFlagsNone \u0003VSHFL\u020cHV\u0003WKDW\u0003WKHUH\u0003LV\u0003QR\u0003SDUWLFXODU\u0003 EHKDYLRU\u0003RI\u0003WKLV\u0003EXIIHU\u0003WKDW\u0003ZH\u0003ZDQW\u0003WR\u0003VSHFLI\\\u000f\u0003DOWKRXJK\u0003ZH\u0003KDYH\u0003WKH\u0003RSWLRQ\u0003WR\u0003 VSHFLI\\\u0003ZLWK\u0003 cudaGraphicsMapFlagsReadOnly \u0003WKDW\u0003WKH\u0003EXIIHU\u0003ZLOO\u0003EH\u0003UHDG\u0010 RQO\\\u0011\u0003:H\u0003FRXOG\u0003DOVR\u0003XVH\u0003 cudaGraphicsMapFlagsWriteDiscard \u0003WR\u0003VSHFLI\\\u0003 WKDW\u0003WKH\u0003SUHYLRXV\u0003FRQWHQWV\u0003ZLOO\u0003EH\u0003GLVFDUGHG\u000f\u0003PDNLQJ\u0003WKH\u0003EXIIHU\u0003HVVHQWLDOO\\\u0003 ZULWH\u0010RQO\\\u0011\u00037KHVH\u0003\u020dDJV\u0003DOORZ\u0003WKH\u0003&8'$\u0003DQG\u00032SHQ*/\u0003GULYHUV\u0003WR\u0003RSWLPL]H\u0003WKH\u0003KDUG - ZDUH\u0003VHWWLQJV\u0003IRU\u0003EXIIHUV\u0003ZLWK\u0003UHVWULFWHG\u0003DFFHVV\u0003SDWWHUQV\u000f\u0003DOWKRXJK\u0003WKH\\\u0003DUH\u0003QRW\u0003 UHTXLUHG\u0003WR\u0003EH\u0003VHW\u0011 (IIHFWLYHO\\\u000f\u0003WKH\u0003FDOO\u0003WR\u0003 glBufferData() \u0003UHTXHVWV\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003WR\u0003DOORFDWH\u0003D\u0003 EXIIHU\u0003ODUJH\u0003HQRXJK\u0003WR\u0003KROG\u0003 DIM\u0003[\u0003DIM\u0003\u0016\u0015\u0010ELW\u0003YDOXHV\u0011\u0003,Q\u0003VXEVHTXHQW\u00032SHQ*/\u0003FDOOV\u000f\u0003 ZH\u01e2OO\u0003UHIHU\u0003WR\u0003WKLV\u0003EXIIHU\u0003ZLWK\u0003WKH\u0003KDQGOH\u0003 bufferObj \u000f\u0003ZKLOH\u0003LQ\u0003&8'$\u0003UXQWLPH\u0003FDOOV\u000f\u0003 ZH\u01e2OO\u0003UHIHU\u0003WR\u0003WKLV\u0003EXIIHU\u0003ZLWK\u0003WKH\u0003SRLQWHU\u0003 resource \u0011\u00036LQFH\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003UHDG\u0003 IURP\u0003DQG\u0003ZULWH\u0003WR\u0003WKLV\u0003EXIIHU\u0003IURP\u0003RXU\u0003&8'$\u0003&\u0003NHUQHOV\u000f\u0003ZH\u0003ZLOO\u0003QHHG\u0003PRUH\u0003WKDQ\u0003MXVW\u0003 D\u0003KDQGOH\u0003WR\u0003WKH\u0003REMHFW\u0011\u0003:H\u0003ZLOO\u0003QHHG\u0003DQ\u0003DFWXDO\u0003DGGUHVV\u0003LQ\u0003GHYLFH\u0003PHPRU\\\u0003WKDW\u0003FDQ\u0003EH\u0003 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/four.lf/four.lfSDVVHG\u0003WR\u0003RXU\u0003NHUQHO\u0011\u0003:H\u0003DFKLHYH\u0003WKLV\u0003E\\\u0003LQVWUXFWLQJ\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003WR\u0003PDS\u0003WKH\u0003 VKDUHG\u0003UHVRXUFH\u0003DQG\u0003WKHQ\u0003E\\\u0003UHTXHVWLQJ\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003PDSSHG\u0003UHVRXUFH\u0011 uchar4* devPtr; size_t size; HANDLE_ERROR( cudaGraphicsMapResources( 1, &resource, NULL ) ); HANDLE_ERROR( cudaGraphicsResourceGetMappedPointer( ( void**)&devPtr, &size, resource ) ); :H\u0003FDQ\u0003WKHQ\u0003XVH\u0003 devPtr\u0003DV\u0003ZH\u0003ZRXOG\u0003XVH\u0003DQ\\\u0003GHYLFH\u0003SRLQWHU\u000f\u0003H[FHSW\u0003WKDW\u0003WKH\u0003GDWD\u0003 FDQ\u0003DOVR\u0003EH\u0003XVHG\u0003E\\\u00032SHQ*/\u0003DV\u0003D\u0003SL[HO\u0003VRXUFH\u0011\u0003$IWHU\u0003DOO\u0003WKHVH\u0003VHWXS\u0003VKHQDQLJDQV\u000f\u0003 WKH\u0003UHVW\u0003RI\u0003 main()\u0003SURFHHGV\u0003DV\u0003IROORZV \u0003)LUVW\u000f\u0003ZH\u0003ODXQFK\u0003RXU\u0003NHUQHO\u000f\u0003SDVVLQJ\u0003LW\u0003 WKH\u0003SRLQWHU\u0003WR\u0003RXU\u0003VKDUHG\u0003EXIIHU\u0011\u00037KLV\u0003NHUQHO\u000f\u0003WKH\u0003FRGH\u0003RI\u0003ZKLFK\u0003ZH\u0003KDYH\u0003QRW\u0003VHHQ\u0003 \\HW\u000f\u0003JHQHUDWHV\u0003LPDJH\u0003GDWD\u0003WR\u0003EH\u0003UHQGHUHG\u0011\u00031H[W\u000f\u0003ZH\u0003XQPDS\u0003RXU\u0003VKDUHG\u0003UHVRXUFH\u0011\u0003 7KLV\u0003FDOO\u0003LV\u0003LPSRUWDQW\u0003WR\u0003PDNH\u0003SULRU\u0003WR\u0003SHUIRUPLQJ\u0003UHQGHULQJ\u0003WDVNV\u0003EHFDXVH\u0003LW\u0003 SURYLGHV\u0003V\\QFKURQL]DWLRQ\u0003EHWZHHQ\u0003WKH\u0003&8'$\u0003DQG\u0003JUDSKLFV\u0003SRUWLRQV\u0003RI\u0003WKH\u0003DSSOLFD - WLRQ\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003LW\u0003LPSOLHV\u0003WKDW\u0003DOO\u0003&8'$\u0003RSHUDWLRQV\u0003SHUIRUPHG\u0003SULRU\u0003WR\u0003WKH\u0003FDOO\u0003 WR\u0003\u0003cudaGraphicsUnmapResources() \u0003ZLOO\u0003FRPSOHWH\u0003EHIRUH\u0003HQVXLQJ\u0003JUDSKLFV\u0003 FDOOV\u0003EHJLQ\u0011\u0003 /DVWO\\\u000f\u0003ZH\u0003UHJLVWHU\u0003RXU\u0003NH\\ERDUG\u0003DQG\u0003GLVSOD\\\u0003FDOOEDFN\u0003IXQFWLRQV\u0003ZLWK\u0003*/87\u0003 \u0003 (key_func \u0003DQG\u0003draw_func \u000f\u0003DQG\u0003ZH\u0003UHOLQTXLVK\u0003FRQWURO\u0003WR\u0003WKH\u0003*/87\u0003UHQGHULQJ\u0003 ORRS\u0003ZLWK\u0003 glutMainLoop() \u0011 dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( devPtr ); HANDLE_ERROR( cudaGraphicsUnmapResources( 1, &resource, NULL ) ); // set up GLUT and kick off main loop glutKeyboardFunc( key_func ); glutDisplayFunc( draw_func ); glutMainLoop(); } Download from www.wowebook.comptg***555 $$$&&& 666555 111 /one.lf/four.lf/five.lf\u001b\u0011\u0015\u0003333 +++ , , ,\u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( $$$ 777 , , , 222 7KH\u0003UHPDLQGHU\u0003RI\u0003WKH\u0003DSSOLFDWLRQ\u0003FRQVLVWV\u0003RI\u0003WKH\u0003WKUHH\u0003IXQFWLRQV\u0003ZH\u0003MXVW\u0003KLJK - OLJKWHG\u000f\u0003kernel() , key_func() \u000f\u0003DQG\u0003draw_func() \u0011\u00036R\u000f\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003 WKRVH\u0011 7KH\u0003NHUQHO\u0003IXQFWLRQ\u0003WDNHV\u0003D\u0003GHYLFH\u0003SRLQWHU\u0003DQG\u0003JHQHUDWHV\u0003LPDJH\u0003GDWD\u0011\u0003,Q\u0003WKH\u0003 IROORZLQJ\u0003H[DPSOH\u000f\u0003ZH\u01e2UH\u0003XVLQJ\u0003D\u0003NHUQHO\u0003LQVSLUHG\u0003E\\\u0003WKH\u0003ULSSOH\u0003H[DPSOH\u0003LQ\u0003 &KDSWHU\u0003\u0018 // based on ripple code, but uses uchar4, which is the // type of data graphic interop uses __global__ void kernel( uchar4 *ptr ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; // now calculate the value at that position float fx = x/(float)DIM - 0.5f; float fy = y/(float)DIM - 0.5f; unsigned char green = 128 + 127 * sin( abs(fx*100) - abs(fy*100) ); // accessing uchar4 vs. unsigned char* ptr[offset].x = 0; ptr[offset].y = green; ptr[offset].z = 0; ptr[offset].w = 255; } 0DQ\\\u0003IDPLOLDU\u0003FRQFHSWV\u0003DUH\u0003DW\u0003ZRUN\u0003KHUH\u0011\u00037KH\u0003PHWKRG\u0003IRU\u0003WXUQLQJ\u0003WKUHDG\u0003DQG\u0003EORFN\u0003 LQGLFHV\u0003LQWR\u0003 x\u0010\u0003DQG\u0003y\u0010FRRUGLQDWHV\u0003DQG\u0003D\u0003OLQHDU\u0003RIIVHW\u0003KDV\u0003EHHQ\u0003H[DPLQHG\u0003VHYHUDO\u0003 WLPHV\u0011\u0003:H\u0003WKHQ\u0003SHUIRUP\u0003VRPH\u0003UHDVRQDEO\\\u0003DUELWUDU\\\u0003FRPSXWDWLRQV\u0003WR\u0003GHWHUPLQH\u0003WKH\u0003 FRORU\u0003IRU\u0003WKH\u0003SL[HO\u0003DW\u0003WKDW\u0003 (x,y)\u0003ORFDWLRQ\u000f\u0003DQG\u0003ZH\u0003VWRUH\u0003WKRVH\u0003YDOXHV\u0003WR\u0003PHPRU\\\u0011\u0003 :H\u01e2UH\u0003DJDLQ\u0003XVLQJ\u0003&8'$\u0003&\u0003WR\u0003SURFHGXUDOO\\\u0003JHQHUDWH\u0003DQ\u0003LPDJH\u0003RQ\u0003WKH\u0003*38\u0011\u00037KH\u0003 LPSRUWDQW\u0003WKLQJ\u0003WR\u0003UHDOL]H\u0003LV\u0003WKDW\u0003WKLV\u0003LPDJH\u0003ZLOO\u0003WKHQ\u0003EH\u0003KDQGHG\u0003 directly \u0003WR\u00032SHQ*/\u0003 IRU\u0003UHQGHULQJ\u0003ZLWKRXW\u0003WKH\u0003&38\u0003HYHU\u0003JHWWLQJ\u0003LQYROYHG\u0011\u00032Q\u0003WKH\u0003RWKHU\u0003KDQG\u000f\u0003LQ\u0003WKH\u0003 ULSSOH\u0003H[DPSOH\u0003RI\u0003&KDSWHU\u0003\u0018\u000f\u0003ZH\u0003JHQHUDWHG\u0003LPDJH\u0003GDWD\u0003RQ\u0003WKH\u0003*38\u0003YHU\\\u0003PXFK\u0003OLNH\u0003 WKLV\u000f\u0003EXW\u0003RXU\u0003DSSOLFDWLRQ\u0003WKHQ\u0003FRSLHG\u0003WKH\u0003EXIIHU\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0003IRU\u0003GLVSOD\\\u0011 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/four.lf/six.lf6R\u000f\u0003KRZ\u0003GR\u0003ZH\u0003GUDZ\u0003WKH\u0003&8'$\u0010JHQHUDWHG\u0003EXIIHU\u0003XVLQJ\u00032SHQ*/\"\u0003:HOO\u000f\u0003LI\u0003\\RX\u0003UHFDOO\u0003 WKH\u0003VHWXS\u0003ZH\u0003SHUIRUPHG\u0003LQ\u0003 main()\u000f\u0003\\RX\u01e2OO\u0003UHPHPEHU\u0003WKH\u0003IROORZLQJ glBindBuffer( GL _ PIXEL _ UNPACK _ BUFFER _ ARB, bufferObj ); 7KLV\u0003FDOO\u0003ERXQG\u0003WKH\u0003VKDUHG\u0003EXIIHU\u0003DV\u0003D\u0003SL[HO\u0003VRXUFH\u0003IRU\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003WR\u0003 XVH\u0003LQ\u0003DOO\u0003VXEVHTXHQW\u0003FDOOV\u0003WR\u0003 glDrawPixels() \u0011\u0003(VVHQWLDOO\\\u000f\u0003WKLV\u0003PHDQV\u0003WKDW\u0003 D\u0003FDOO\u0003WR\u0003glDrawPixels() \u0003LV\u0003DOO\u0003WKDW\u0003ZH\u0003QHHG\u0003LQ\u0003RUGHU\u0003WR\u0003UHQGHU\u0003WKH\u0003LPDJH\u0003 GDWD\u0003RXU\u0003&8'$\u0003&\u0003NHUQHO\u0003JHQHUDWHG\u0011\u0003&RQVHTXHQWO\\\u000f\u0003WKH\u0003IROORZLQJ\u0003LV\u0003DOO\u0003WKDW\u0003RXU\u0003 draw_func() \u0003QHHGV\u0003WR\u0003GR static void draw_func( void ) { glDrawPixels( DIM, DIM, GL_RGBA, GL_UNSIGNED_BYTE, 0 ); glutSwapBuffers(); } ,W\u01e2V\u0003SRVVLEOH\u0003\\RX\u01e2YH\u0003VHHQ\u0003 glDrawPixels() \u0003ZLWK\u0003D\u0003EXIIHU\u0003SRLQWHU\u0003DV\u0003WKH\u0003ODVW\u0003DUJX - PHQW\u0011\u00037KH\u00032SHQ*/\u0003GULYHU\u0003ZLOO\u0003FRS\\\u0003IURP\u0003WKLV\u0003EXIIHU\u0003LI\u0003QR\u0003EXIIHU\u0003LV\u0003ERXQG\u0003DV\u0003D\u0003 GL_ PIXEL_UNPACK_BUFFER_ARB \u0003VRXUFH\u0011\u0003+RZHYHU\u000f\u0003VLQFH\u0003RXU\u0003GDWD\u0003LV\u0003DOUHDG\\\u0003RQ\u0003WKH\u0003 *38\u0003DQG\u0003ZH\u0003 have \u0003ERXQG\u0003RXU\u0003VKDUHG\u0003EXIIHU\u0003DV\u0003WKH\u0003 GL_PIXEL_UNPACK_BUFFER_ ARB\u0003VRXUFH\u000f\u0003WKLV\u0003ODVW\u0003SDUDPHWHU\u0003LQVWHDG\u0003EHFRPHV\u0003DQ\u0003RIIVHW\u0003LQWR\u0003WKH\u0003ERXQG\u0003EXIIHU\u0011\u0003 %HFDXVH\u0003ZH\u0003ZDQW\u0003WR\u0003UHQGHU\u0003WKH\u0003HQWLUH\u0003EXIIHU\u000f\u0003WKLV\u0003RIIVHW\u0003LV\u0003]HUR\u0003IRU\u0003RXU\u0003DSSOLFDWLRQ\u0011\u0003 7KH\u0003ODVW\u0003FRPSRQHQW\u0003WR\u0003WKLV\u0003H[DPSOH\u0003VHHPV\u0003VRPHZKDW\u0003DQWLFOLPDFWLF\u000f\u0003EXW\u0003ZH\u01e2YH\u0003 GHFLGHG\u0003WR\u0003JLYH\u0003RXU\u0003XVHUV\u0003D\u0003PHWKRG\u0003WR\u0003H[LW\u0003WKH\u0003DSSOLFDWLRQ\u0011\u0003,Q\u0003WKLV\u0003YHLQ\u000f\u0003RXU\u0003 key_func() \u0003FDOOEDFN\u0003UHVSRQGV\u0003RQO\\\u0003WR\u0003WKH\u0003(VF\u0003NH\\\u0003DQG\u0003XVHV\u0003WKLV\u0003DV\u0003D\u0003VLJQDO\u0003WR\u0003 FOHDQ\u0003XS\u0003DQG\u0003H[LW static void key_func( unsigned char key, int x, int y ) { switch (key) { case 27: // clean up OpenGL and CUDA HANDLE_ERROR( cudaGraphicsUnregisterResource( resource ) ); glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, 0 ); glDeleteBuffers( 1, &bufferObj ); exit(0); } } Download from www.wowebook.comptg* * *3 3 38 8 8\u0003 \u0003\u00035 5 5,,, 3 3 3 3 3 3 / //\u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( 555 $$$ %%% , , , /// , , , <<< /one.lf/four.lf/seven.lf\u001b\u0011\u0016\u0003((( *** 777 Figure 8.1 $\u0003VFUHHQVKRW\u0003RI\u0003WKH\u0003K\\SQRWLF\u0003JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003H[DPSOH :KHQ\u0003UXQ\u000f\u0003WKLV\u0003H[DPSOH\u0003GUDZV\u0003D\u0003PHVPHUL]LQJ\u0003SLFWXUH\u0003LQ\u0003\u01e419,',$\u0003*UHHQ\u01e5\u0003DQG\u0003 EODFN\u000f\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003\u001b\u0011\u0014\u0011\u00037U\\\u0003XVLQJ\u0003LW\u0003WR\u0003K\\SQRWL]H\u0003\\RXU\u0003IULHQGV\u0003 RU\u0003HQHPLHV",
    "3 3 3 3 3 3 / //\u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( 555 $$$ %%% , , , /// , , , <<< /one.lf/four.lf/seven.lf\u001b\u0011\u0016\u0003((( *** 777 Figure 8.1 $\u0003VFUHHQVKRW\u0003RI\u0003WKH\u0003K\\SQRWLF\u0003JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003H[DPSOH :KHQ\u0003UXQ\u000f\u0003WKLV\u0003H[DPSOH\u0003GUDZV\u0003D\u0003PHVPHUL]LQJ\u0003SLFWXUH\u0003LQ\u0003\u01e419,',$\u0003*UHHQ\u01e5\u0003DQG\u0003 EODFN\u000f\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003\u001b\u0011\u0014\u0011\u00037U\\\u0003XVLQJ\u0003LW\u0003WR\u0003K\\SQRWL]H\u0003\\RXU\u0003IULHQGV\u0003 RU\u0003HQHPLHV \u0011 *38\u00035LSSOH\u0003ZLWK\u0003*UDSKLFV\u0003\u001b\u0011\u0016\u0003 ,QWHURSHUDELOLW\\ ,Q\u0003\u01e46HFWLRQ\u0003\u001b\u0011\u0014 \u0003*UDSKLFV\u0003,QWHURSHUDWLRQ\u000f\u01e5\u0003ZH\u0003UHIHUUHG\u0003WR\u0003&KDSWHU\u0003\u0018\u01e2V\u0003*38\u0003ULSSOH\u0003 H[DPSOH\u0003D\u0003IHZ\u0003WLPHV\u0011\u0003,I\u0003\\RX\u0003UHFDOO\u000f\u0003WKDW\u0003DSSOLFDWLRQ\u0003FUHDWHG\u0003D\u0003 CPUAnimBitmap DQG\u0003SDVVHG\u0003LW\u0003D\u0003IXQFWLRQ\u0003WR\u0003EH\u0003FDOOHG\u0003ZKHQHYHU\u0003D\u0003IUDPH\u0003QHHGHG\u0003WR\u0003EH\u0003JHQHUDWHG\u0011 int main( void ) { DataBlock data; CPUAnimBitmap bitmap( DIM, DIM, &data ); data.bitmap = &bitmap; HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_bitmap, bitmap.image_size() ) ); Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/four.lf/eight.lf bitmap.anim_and_exit( ( void (*)(void*,int))generate_frame, ( void (*)(void*))cleanup ); } :LWK\u0003WKH\u0003WHFKQLTXHV\u0003ZH\u01e2YH\u0003OHDUQHG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003ZH\u0003LQWHQG\u0003WR\u0003FUHDWH\u0003D\u0003 GPUAnimBitmap \u0003VWUXFWXUH\u0011\u00037KLV\u0003VWUXFWXUH\u0003ZLOO\u0003VHUYH\u0003WKH\u0003VDPH\u0003SXUSRVH\u0003DV\u0003WKH\u0003 CPUAnimBitmap \u000f\u0003EXW\u0003LQ\u0003WKLV\u0003LPSURYHG\u0003YHUVLRQ\u000f\u0003WKH\u0003&8'$\u0003DQG\u00032SHQ*/\u0003FRPSR - QHQWV\u0003ZLOO\u0003FRRSHUDWH\u0003ZLWKRXW\u0003&38\u0003LQWHUYHQWLRQ\u0011\u0003:KHQ\u0003ZH\u01e2UH\u0003GRQH\u000f\u0003WKH\u0003DSSOLFDWLRQ\u0003 ZLOO\u0003XVH\u0003D\u0003 GPUAnimBitmap \u0003VR\u0003WKDW\u0003main()\u0003ZLOO\u0003EHFRPH\u0003VLPSO\\\u0003DV\u0003IROORZV int main( void ) { GPUAnimBitmap bitmap( DIM, DIM, NULL ); bitmap.anim_and_exit( ( void (*)(uchar4*, void*,int))generate_frame, NULL ); } 7KH\u0003GPUAnimBitmap \u0003VWUXFWXUH\u0003XVHV\u0003WKH\u0003VDPH\u0003FDOOV\u0003ZH\u0003MXVW\u0003H[DPLQHG\u0003LQ\u0003 6HFWLRQ\u0003\u001b\u0011\u0014 \u0003*UDSKLFV\u0003,QWHURSHUDWLRQ\u0011\u0003+RZHYHU\u000f\u0003QRZ\u0003WKHVH\u0003FDOOV\u0003ZLOO\u0003EH\u0003DEVWUDFWHG\u0003 DZD\\\u0003LQ\u0003D\u0003 GPUAnimBitmap \u0003VWUXFWXUH\u0003VR\u0003WKDW\u0003IXWXUH\u0003H[DPSOHV\u0003 DQG\u0003SRWHQWLDOO\\\u0003 \\RXU\u0003RZQ\u0003DSSOLFDWLRQV \u0003ZLOO\u0003EH\u0003FOHDQHU\u0011 7+(\u0003*38$1,0%,70$3\u00036758&785( \u001b\u0011\u0016\u0011\u0014\u0003 6HYHUDO\u0003RI\u0003WKH\u0003GDWD\u0003PHPEHUV\u0003IRU\u0003RXU\u0003 GPUAnimBitmap \u0003ZLOO\u0003ORRN\u0003IDPLOLDU\u0003WR\u0003\\RX\u0003 IURP\u00036HFWLRQ\u0003\u001b\u0011\u0014 \u0003*UDSKLFV\u0003,QWHURSHUDWLRQ\u0011\u0003 struct GPUAnimBitmap { GLuint bufferObj; cudaGraphicsResource *resource; int width, height; void *dataBlock; void (*fAnim)(uchar4*, void*,int); void (*animExit)( void*); void (*clickDrag)( void*,int,int,int,int); int dragStartX, dragStartY; Download from www.wowebook.comptg* * *3 3 38 8 8\u0003 \u0003\u00035 5 5,,, 3 3 3 3 3 3 / //\u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( 555 $$$ %%% , , , /// , , , <<< /one.lf/four.lf/nine.lf\u001b\u0011\u0016\u0003((( *** 777 :H\u0003NQRZ\u0003WKDW\u00032SHQ*/\u0003DQG\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003ZLOO\u0003KDYH\u0003GLIIHUHQW\u0003QDPHV\u0003IRU\u0003RXU\u0003 *38\u0003EXIIHU\u000f\u0003DQG\u0003ZH\u0003NQRZ\u0003WKDW\u0003ZH\u0003ZLOO\u0003QHHG\u0003WR\u0003UHIHU\u0003WR\u0003ERWK\u0003RI\u0003WKHVH\u0003QDPHV\u000f\u0003 GHSHQGLQJ\u0003RQ\u0003ZKHWKHU\u0003ZH\u0003DUH\u0003PDNLQJ\u00032SHQ*/\u0003RU\u0003&8'$\u0003&\u0003FDOOV\u0011\u00037KHUHIRUH\u000f\u0003RXU\u0003 VWUXFWXUH\u0003ZLOO\u0003VWRUH\u0003ERWK\u00032SHQ*/\u01e2V\u0003 bufferObj \u0003QDPH\u0003DQG\u0003WKH\u0003&8'$\u0003UXQWLPH\u01e2V\u0003 UHVRXUFH\u0003QDPH\u0011\u00036LQFH\u0003ZH\u0003DUH\u0003GHDOLQJ\u0003ZLWK\u0003D\u0003ELWPDS\u0003LPDJH\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003 GLVSOD\\\u000f\u0003ZH\u0003NQRZ\u0003WKDW\u0003WKH\u0003LPDJH\u0003ZLOO\u0003KDYH\u0003D\u0003ZLGWK\u0003DQG\u0003KHLJKW\u0003WR\u0003LW\u0011\u0003 7R\u0003DOORZ\u0003XVHUV\u0003RI\u0003RXU\u0003 GPUAnimBitmap \u0003WR\u0003UHJLVWHU\u0003IRU\u0003FHUWDLQ\u0003FDOOEDFN\u0003HYHQWV\u000f\u0003 ZH\u0003ZLOO\u0003DOVR\u0003VWRUH\u0003D\u0003 void*\u0003SRLQWHU\u0003WR\u0003DUELWUDU\\\u0003XVHU\u0003GDWD\u0003LQ\u0003 dataBlock \u0011\u00032XU\u0003 FODVV\u0003ZLOO\u0003QHYHU\u0003ORRN\u0003DW\u0003WKLV\u0003GDWD\u0003EXW\u0003ZLOO\u0003VLPSO\\\u0003SDVV\u0003LW\u0003EDFN\u0003WR\u0003DQ\\\u0003UHJLVWHUHG\u0003 FDOOEDFN\u0003IXQFWLRQV\u0011\u00037KH\u0003FDOOEDFNV\u0003WKDW\u0003D\u0003XVHU\u0003PD\\\u0003UHJLVWHU\u0003DUH\u0003VWRUHG\u0003LQ\u0003 fAnim, animExit \u000f\u0003DQG\u0003clickDrag \u0011\u00037KH\u0003IXQFWLRQ\u0003 fAnim()\u0003JHWV\u0003FDOOHG\u0003LQ\u0003HYHU\\\u0003FDOO\u0003WR\u0003 glutIdleFunc() \u000f\u0003DQG\u0003WKLV\u0003IXQFWLRQ\u0003LV\u0003UHVSRQVLEOH\u0003IRU\u0003SURGXFLQJ\u0003WKH\u0003LPDJH\u0003GDWD\u0003 WKDW\u0003ZLOO\u0003EH\u0003UHQGHUHG\u0003LQ\u0003WKH\u0003DQLPDWLRQ\u0011\u00037KH\u0003IXQFWLRQ\u0003 animExit() \u0003ZLOO\u0003EH\u0003FDOOHG\u0003 RQFH\u000f\u0003ZKHQ\u0003WKH\u0003DQLPDWLRQ\u0003H[LWV\u0011\u00037KLV\u0003LV\u0003ZKHUH\u0003WKH\u0003XVHU\u0003VKRXOG\u0003LPSOHPHQW\u0003FOHDQXS\u0003 FRGH\u0003WKDW\u0003QHHGV\u0003WR\u0003EH\u0003H[HFXWHG\u0003ZKHQ\u0003WKH\u0003DQLPDWLRQ\u0003HQGV\u0011\u0003)LQDOO\\\u000f\u0003 clickDrag() , DQ\u0003RSWLRQDO\u0003IXQFWLRQ\u000f\u0003LPSOHPHQWV\u0003WKH\u0003XVHU\u01e2V\u0003UHVSRQVH\u0003WR\u0003PRXVH\u0003FOLFN\u0012GUDJ\u0003HYHQWV\u0011\u0003 ,I\u0003WKH\u0003XVHU\u0003UHJLVWHUV\u0003WKLV\u0003IXQFWLRQ\u000f\u0003LW\u0003JHWV\u0003FDOOHG\u0003DIWHU\u0003HYHU\\\u0003VHTXHQFH\u0003RI\u0003PRXVH\u0003 EXWWRQ\u0003SUHVV\u000f\u0003GUDJ\u000f\u0003DQG\u0003UHOHDVH\u0003HYHQWV\u0011\u00037KH\u0003ORFDWLRQ\u0003RI\u0003WKH\u0003LQLWLDO\u0003PRXVH\u0003FOLFN\u0003LQ\u0003 WKLV\u0003VHTXHQFH\u0003LV\u0003VWRUHG\u0003LQ\u0003 (dragStartX , dragStartY) \u0003VR\u0003WKDW\u0003WKH\u0003VWDUW\u0003DQG\u0003 HQGSRLQWV\u0003RI\u0003WKH\u0003FOLFN\u0012GUDJ\u0003HYHQW\u0003FDQ\u0003EH\u0003SDVVHG\u0003WR\u0003WKH\u0003XVHU\u0003ZKHQ\u0003WKH\u0003PRXVH\u0003 EXWWRQ\u0003LV\u0003UHOHDVHG\u0011\u00037KLV\u0003FDQ\u0003EH\u0003XVHG\u0003WR\u0003LPSOHPHQW\u0003LQWHUDFWLYH\u0003DQLPDWLRQV\u0003WKDW\u0003ZLOO\u0003 LPSUHVV\u0003\\RXU\u0003IULHQGV\u0011 ,QLWLDOL]LQJ\u0003D\u0003 GPUAnimBitmap \u0003IROORZV\u0003WKH\u0003VDPH\u0003VHTXHQFH\u0003RI\u0003FRGH\u0003WKDW\u0003ZH\u0003VDZ\u0003 LQ\u0003RXU\u0003SUHYLRXV\u0003H[DPSOH\u0011\u0003$IWHU\u0003VWDVKLQJ\u0003DZD\\\u0003DUJXPHQWV\u0003LQ\u0003WKH\u0003DSSURSULDWH\u0003 VWUXFWXUH\u0003PHPEHUV\u000f\u0003ZH\u0003VWDUW\u0003E\\\u0003TXHU\\LQJ\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003IRU\u0003D\u0003VXLWDEOH\u0003&8'$\u0003 GHYLFH GPUAnimBitmap( int w, int h, void *d ) { width = w; height = h; dataBlock = d; clickDrag = NULL; Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/five.lf/zero.lf // first, find a CUDA device and set it to graphic interop cudaDeviceProp prop; int dev; memset( &prop, 0, sizeof( cudaDeviceProp ) ); prop.major = 1; prop.minor = 0; HANDLE_ERROR( cudaChooseDevice( &dev, &prop ) ); $IWHU\u0003\u020cQGLQJ\u0003D\u0003FRPSDWLEOH\u0003&8'$\u0003GHYLFH\u000f\u0003ZH\u0003PDNH\u0003WKH\u0003LPSRUWDQW\u0003 cudaGLSetGLDevice() \u0003FDOO\u0003WR\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003LQ\u0003RUGHU\u0003WR\u0003QRWLI\\\u0003LW\u0003WKDW\u0003ZH\u0003 LQWHQG\u0003WR\u0003XVH\u0003 dev\u0003DV\u0003D\u0003GHYLFH\u0003IRU\u0003LQWHURSHUDWLRQ\u0003ZLWK\u00032SHQ*/ cudaGLSetGLDevice( dev ); 6LQFH\u0003RXU\u0003IUDPHZRUN\u0003XVHV\u0003*/87\u0003WR\u0003FUHDWH\u0003D\u0003ZLQGRZHG\u0003UHQGHULQJ\u0003HQYLURQPHQW\u000f\u0003ZH\u0003 QHHG\u0003WR\u0003LQLWLDOL]H\u0003*/87\u0011\u00037KLV\u0003LV\u0003XQIRUWXQDWHO\\\u0003D\u0003ELW\u0003DZNZDUG\u000f\u0003VLQFH\u0003 glutInit() ZDQWV\u0003FRPPDQG\u0010OLQH\u0003DUJXPHQWV\u0003WR\u0003SDVV\u0003WR\u0003WKH\u0003ZLQGRZLQJ\u0003V\\VWHP\u0011\u00036LQFH\u0003ZH\u0003KDYH\u0003 QRQH\u0003ZH\u0003ZDQW\u0003WR\u0003SDVV\u000f\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003VLPSO\\\u0003VSHFLI\\\u0003]HUR\u0003FRPPDQG\u0010OLQH\u0003DUJX - PHQWV\u0011\u00038QIRUWXQDWHO\\\u000f\u0003VRPH\u0003YHUVLRQV\u0003RI\u0003*/87\u0003KDYH\u0003D\u0003EXJ\u0003WKDW\u0003FDXVH\u0003DSSOLFDWLRQV\u0003 WR\u0003FUDVK\u0003ZKHQ\u0003]HUR\u0003DUJXPHQWV\u0003DUH\u0003JLYHQ\u0011\u00036R\u000f\u0003ZH\u0003WULFN\u0003*/87\u0003LQWR\u0003WKLQNLQJ\u0003WKDW\u0003 ZH\u01e2UH\u0003SDVVLQJ\u0003DQ\u0003DUJXPHQW\u000f\u0003DQG\u0003DV\u0003D\u0003UHVXOW\u000f\u0003OLIH\u0003LV\u0003JRRG\u0011 int c=1; char *foo = \"name\"; glutInit( &c, &foo ); :H\u0003FRQWLQXH\u0003LQLWLDOL]LQJ\u0003*/87\u0003H[DFWO\\\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u0011\u0003:H\u0003 FUHDWH\u0003D\u0003ZLQGRZ\u0003LQ\u0003ZKLFK\u0003WR\u0003UHQGHU\u000f\u0003VSHFLI\\LQJ\u0003D\u0003WLWOH\u0003ZLWK\u0003WKH\u0003VWULQJ\u0003\u01e4ELWPDS\u0011\u01e5\u0003,I\u0003 \\RX\u01e2G\u0003OLNH\u0003WR\u0003QDPH\u0003\\RXU\u0003ZLQGRZ\u0003VRPHWKLQJ\u0003PRUH\u0003LQWHUHVWLQJ\u000f\u0003EH\u0003RXU\u0003JXHVW\u0011 glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGBA ); glutInitWindowSize( width, height ); glutCreateWindow( \"bitmap\" ); Download from www.wowebook.comptg* * *3 3 38 8 8\u0003 \u0003\u00035 5 5,,, 3 3 3 3 3 3 / //\u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( 555 $$$ %%% , , , /// , , , <<< /one.lf/five.lf/one.lf\u001b\u0011\u0016\u0003((( *** 777 1H[W\u000f\u0003ZH\u0003UHTXHVW\u0003IRU\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003WR\u0003DOORFDWH\u0003D\u0003EXIIHU\u0003KDQGOH\u0003WKDW\u0003ZH\u0003LPPH - GLDWHO\\\u0003ELQG\u0003WR\u0003WKH\u0003 GL_PIXEL_UNPACK_BUFFER_ARB \u0003WDUJHW\u0003WR\u0003HQVXUH\u0003WKDW\u0003IXWXUH\u0003 FDOOV\u0003WR\u0003glDrawPixels() \u0003ZLOO\u0003GUDZ\u0003WR\u0003RXU\u0003LQWHURS\u0003EXIIHU glGenBuffers( 1, &bufferObj ); glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, bufferObj ); /DVW\u000f\u0003EXW\u0003PRVW\u0003FHUWDLQO\\\u0003QRW\u0003OHDVW\u000f\u0003ZH\u0003UHTXHVW\u0003WKDW\u0003WKH\u00032SHQ*/\u0003GULYHU\u0003DOORFDWH\u0003D\u0003 UHJLRQ\u0003RI\u0003*38\u0003PHPRU\\\u0003IRU\u0003XV\u0011\u00032QFH\u0003WKLV\u0003LV\u0003GRQH\u000f\u0003ZH\u0003LQIRUP\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003RI\u0003 WKLV\u0003EXIIHU\u0003DQG\u0003UHTXHVW\u0003D\u0003&8'$\u0003&\u0003QDPH\u0003IRU\u0003WKLV\u0003EXIIHU\u0003E\\\u0003UHJLVWHULQJ\u0003 bufferObj ZLWK\u0003cudaGraphicsGLRegisterBuffer() \u0011 glBufferData( GL_PIXEL_UNPACK_BUFFER_ARB, width * height * 4, NULL, GL_DYNAMIC_DRAW_ARB ); HANDLE_ERROR( cudaGraphicsGLRegisterBuffer( &resource, bufferObj, cudaGraphicsMapFlagsNone ) ); } :LWK\u0003WKH\u0003 GPUAnimBitmap \u0003VHW\u0003XS\u000f\u0003WKH\u0003RQO\\\u0003UHPDLQLQJ\u0003FRQFHUQ\u0003LV\u0003H[DFWO\\\u0003KRZ\u0003 ZH\u0003SHUIRUP\u0003WKH\u0003UHQGHULQJ\u0011\u00037KH\u0003PHDW\u0003RI\u0003WKH\u0003UHQGHULQJ\u0003ZLOO\u0003EH\u0003GRQH\u0003LQ\u0003RXU\u0003 glutIdleFunction() \u0011\u00037KLV\u0003IXQFWLRQ\u0003ZLOO\u0003HVVHQWLDOO\\\u0003GR\u0003WKUHH\u0003WKLQJV\u0011\u0003)LUVW\u000f\u0003LW\u0003 PDSV\u0003RXU\u0003VKDUHG\u0003EXIIHU\u0003DQG\u0003UHWULHYHV\u0003D\u0003*38\u0003SRLQWHU\u0003IRU\u0003WKLV\u0003EXIIHU\u0011 // static method used for GLUT callbacks static void idle_func( void ) { static int ticks = 1; GPUAnimBitmap* bitmap = *(get_bitmap_ptr()); uchar4* devPtr; size_t size; Download from",
    "* height * 4, NULL, GL_DYNAMIC_DRAW_ARB ); HANDLE_ERROR( cudaGraphicsGLRegisterBuffer( &resource, bufferObj, cudaGraphicsMapFlagsNone ) ); } :LWK\u0003WKH\u0003 GPUAnimBitmap \u0003VHW\u0003XS\u000f\u0003WKH\u0003RQO\\\u0003UHPDLQLQJ\u0003FRQFHUQ\u0003LV\u0003H[DFWO\\\u0003KRZ\u0003 ZH\u0003SHUIRUP\u0003WKH\u0003UHQGHULQJ\u0011\u00037KH\u0003PHDW\u0003RI\u0003WKH\u0003UHQGHULQJ\u0003ZLOO\u0003EH\u0003GRQH\u0003LQ\u0003RXU\u0003 glutIdleFunction() \u0011\u00037KLV\u0003IXQFWLRQ\u0003ZLOO\u0003HVVHQWLDOO\\\u0003GR\u0003WKUHH\u0003WKLQJV\u0011\u0003)LUVW\u000f\u0003LW\u0003 PDSV\u0003RXU\u0003VKDUHG\u0003EXIIHU\u0003DQG\u0003UHWULHYHV\u0003D\u0003*38\u0003SRLQWHU\u0003IRU\u0003WKLV\u0003EXIIHU\u0011 // static method used for GLUT callbacks static void idle_func( void ) { static int ticks = 1; GPUAnimBitmap* bitmap = *(get_bitmap_ptr()); uchar4* devPtr; size_t size; Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/five.lf/two.lf HANDLE_ERROR( cudaGraphicsMapResources( 1, &(bitmap->resource), NULL ) ); HANDLE_ERROR( cudaGraphicsResourceGetMappedPointer( ( void**)&devPtr, &size, bitmap->resource ) ); 6HFRQG\u000f\u0003LW\u0003FDOOV\u0003WKH\u0003XVHU\u0010VSHFL\u020cHG\u0003IXQFWLRQ\u0003 fAnim()\u0003WKDW\u0003SUHVXPDEO\\\u0003ZLOO\u0003ODXQFK\u0003 D\u0003&8'$\u0003&\u0003NHUQHO\u0003WR\u0003\u020cOO\u0003WKH\u0003EXIIHU\u0003DW\u0003 devPtr\u0003ZLWK\u0003LPDJH\u0003GDWD\u0011 bitmap->fAnim( devPtr, bitmap->dataBlock, ticks++ ); $QG\u0003ODVWO\\\u000f\u0003LW\u0003XQPDSV\u0003WKH\u0003*38\u0003SRLQWHU\u0003WKDW\u0003ZLOO\u0003UHOHDVH\u0003WKH\u0003EXIIHU\u0003IRU\u0003XVH\u0003E\\\u0003 WKH\u00032SHQ*/\u0003GULYHU\u0003LQ\u0003UHQGHULQJ\u0011\u00037KLV\u0003UHQGHULQJ\u0003ZLOO\u0003EH\u0003WULJJHUHG\u0003E\\\u0003D\u0003FDOO\u0003WR\u0003 glutPostRedisplay() \u0011 HANDLE_ERROR( cudaGraphicsUnmapResources( 1, &(bitmap->resource), NULL ) ); glutPostRedisplay(); } 7KH\u0003UHPDLQGHU\u0003RI\u0003WKH\u0003 GPUAnimBitmap \u0003VWUXFWXUH\u0003FRQVLVWV\u0003RI\u0003LPSRUWDQW\u0003EXW\u0003VRPH - ZKDW\u0003WDQJHQWLDO\u0003LQIUDVWUXFWXUH\u0003FRGH\u0011\u0003,I\u0003\\RX\u0003KDYH\u0003DQ\u0003LQWHUHVW\u0003LQ\u0003LW\u000f\u0003\\RX\u0003VKRXOG\u0003E\\\u0003DOO\u0003 PHDQV\u0003H[DPLQH\u0003LW\u0011\u0003%XW\u0003ZH\u0003IHHO\u0003WKDW\u0003\\RX\u01e2OO\u0003EH\u0003DEOH\u0003WR\u0003SURFHHG\u0003VXFFHVVIXOO\\\u000f\u0003HYHQ\u0003LI\u0003 \\RX\u0003ODFN\u0003WKH\u0003WLPH\u0003RU\u0003LQWHUHVW\u0003WR\u0003GLJHVW\u0003WKH\u0003UHVW\u0003RI\u0003WKH\u0003FRGH\u0003LQ\u0003 GPUAnimBitmap \u0011 *38\u00035,33/(\u00035('8; \u001b\u0011\u0016\u0011\u0015\u0003 1RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003D\u0003*38\u0003YHUVLRQ\u0003RI\u0003 CPUAnimBitmap \u000f\u0003ZH\u0003FDQ\u0003SURFHHG\u0003WR\u0003 UHWUR\u020cW\u0003RXU\u0003*38\u0003ULSSOH\u0003DSSOLFDWLRQ\u0003WR\u0003SHUIRUP\u0003LWV\u0003DQLPDWLRQ\u0003HQWLUHO\\\u0003RQ\u0003WKH\u0003*38\u0011\u0003 7R\u0003EHJLQ\u000f\u0003ZH\u0003ZLOO\u0003LQFOXGH\u0003 gpu_anim.h \u000f\u0003WKH\u0003KRPH\u0003RI\u0003RXU\u0003LPSOHPHQWDWLRQ\u0003RI\u0003 Download from www.wowebook.comptg* * *3 3 38 8 8\u0003 \u0003\u00035 5 5,,, 3 3 3 3 3 3 / //\u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 ((( 555 $$$ %%% , , , /// , , , <<< /one.lf/five.lf/three.lf\u001b\u0011\u0016\u0003((( *** 777 GPUAnimBitmap \u0011\u0003:H\u0003DOVR\u0003LQFOXGH\u0003QHDUO\\\u0003WKH\u0003VDPH\u0003NHUQHO\u0003DV\u0003ZH\u0003H[DPLQHG\u0003LQ\u0003 &KDSWHU\u0003\u0018\u0011 #include \"../common/book.h\" #include \"../common/gpu_anim.h\" #define DIM 1024 __global__ void kernel( uchar4 *ptr , int ticks ) { // map from threadIdx/BlockIdx to pixel position int x = threadIdx.x + blockIdx.x * blockDim.x; int y = threadIdx.y + blockIdx.y * blockDim.y; int offset = x + y * blockDim.x * gridDim.x; // now calculate the value at that position float fx = x - DIM/2; float fy = y - DIM/2; float d = sqrtf( fx * fx + fy * fy ); unsigned char grey = ( unsigned char )(128.0f + 127.0f * cos(d/10.0f - ticks/7.0f) / (d/10.0f + 1.0f)); ptr[offset].x = grey; ptr[offset].y = grey; ptr[offset].z = grey; ptr[offset].w = 255; } 7KH\u0003RQH\u0003DQG\u0003RQO\\\u0003FKDQJH\u0003ZH\u01e2YH\u0003PDGH\u0003LV\u0003KLJKOLJKWHG\u0011\u00037KH\u0003UHDVRQ\u0003IRU\u0003WKLV\u0003FKDQJH\u0003 LV\u0003EHFDXVH\u00032SHQ*/\u0003LQWHURSHUDWLRQ\u0003UHTXLUHV\u0003WKDW\u0003RXU\u0003VKDUHG\u0003VXUIDFHV\u0003EH\u0003\u01e4JUDSKLFV\u0003 IULHQGO\\\u0011\u01e5\u0003%HFDXVH\u0003UHDO\u0010WLPH\u0003UHQGHULQJ\u0003W\\SLFDOO\\\u0003XVHV\u0003DUUD\\V\u0003RI\u0003IRXU\u0010FRPSRQHQW\u0003 UHG\u0012JUHHQ\u0012EOXH\u0012DOSKD \u0003GDWD\u0003HOHPHQWV\u000f\u0003RXU\u0003WDUJHW\u0003EXIIHU\u0003LV\u0003QR\u0003ORQJHU\u0003VLPSO\\\u0003DQ\u0003 DUUD\\\u0003RI\u0003unsigned char \u0003DV\u0003LW\u0003SUHYLRXVO\\\u0003ZDV\u0011\u0003,W\u01e2V\u0003QRZ\u0003UHTXLUHG\u0003WR\u0003EH\u0003DQ\u0003DUUD\\\u0003RI\u0003 W\\SH\u0003uchar4\u0011\u0003,Q\u0003UHDOLW\\\u000f\u0003ZH\u0003WUHDWHG\u0003RXU\u0003EXIIHU\u0003LQ\u0003&KDSWHU\u0003\u0018\u0003DV\u0003D\u0003IRXU\u0010FRPSRQHQW\u0003 EXIIHU\u000f\u0003VR\u0003ZH\u0003DOZD\\V\u0003LQGH[HG\u0003LW\u0003ZLWK\u0003 ptr[offset*4+k] \u000f\u0003ZKHUH\u0003k\u0003LQGLFDWHV\u0003WKH\u0003 FRPSRQHQW\u0003IURP\u0003\u0013\u0003WR\u0003\u0016\u0011\u0003%XW\u0003QRZ\u000f\u0003WKH\u0003IRXU\u0010FRPSRQHQW\u0003QDWXUH\u0003RI\u0003WKH\u0003GDWD\u0003LV\u0003PDGH\u0003 H[SOLFLW\u0003ZLWK\u0003WKH\u0003VZLWFK\u0003WR\u0003D\u0003 uchar4\u0003W\\SH\u0011 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/five.lf/four.lf6LQFH\u0003kernel() \u0003LV\u0003D\u0003&8'$\u0003&\u0003IXQFWLRQ\u0003WKDW\u0003JHQHUDWHV\u0003LPDJH\u0003GDWD\u000f\u0003DOO\u0003WKDW\u0003 UHPDLQV\u0003LV\u0003ZULWLQJ\u0003D\u0003KRVW\u0003IXQFWLRQ\u0003WKDW\u0003ZLOO\u0003EH\u0003XVHG\u0003DV\u0003D\u0003FDOOEDFN\u0003LQ\u0003WKH\u0003 idle_func() \u0003PHPEHU\u0003RI\u0003 GPUAnimBitmap \u0011\u0003)RU\u0003RXU\u0003FXUUHQW\u0003DSSOLFDWLRQ\u000f\u0003 DOO\u0003WKLV\u0003IXQFWLRQ\u0003GRHV\u0003LV\u0003ODXQFK\u0003WKH\u0003&8'$\u0003&\u0003NHUQHO void generate_frame( uchar4 *pixels, void*, int ticks ) { dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( pixels, ticks ); } 7KDW\u01e2V\u0003EDVLFDOO\\\u0003HYHU\\WKLQJ\u0003ZH\u0003QHHG\u000f\u0003VLQFH\u0003DOO\u0003RI\u0003WKH\u0003KHDY\\\u0003OLIWLQJ\u0003ZDV\u0003 GRQH\u0003LQ\u0003WKH\u0003 GPUAnimBitmap \u0003VWUXFWXUH\u0011\u00037R\u0003JHW\u0003WKLV\u0003SDUW\\\u0003VWDUWHG\u000f\u0003ZH\u0003MXVW\u0003 FUHDWH\u0003D\u0003GPUAnimBitmap \u0003DQG\u0003UHJLVWHU\u0003RXU\u0003DQLPDWLRQ\u0003FDOOEDFN\u0003IXQFWLRQ\u000f\u0003 generate_frame() \u0011 int main( void ) { GPUAnimBitmap bitmap( DIM, DIM, NULL ); bitmap.anim_and_exit( ( void (*)(uchar4*, void*,int))generate_frame, NULL ); } +HDW\u00037UDQVIHU\u0003ZLWK\u0003*UDSKLFV\u0003,QWHURS\u001b\u0011\u0017\u0003 6R\u000f\u0003ZKDW\u0003KDV\u0003EHHQ\u0003WKH\u0003SRLQW\u0003RI\u0003GRLQJ\u0003DOO\u0003RI\u0003WKLV\"\u0003,I\u0003\\RX\u0003ORRN\u0003DW\u0003WKH\u0003LQWHUQDOV\u0003RI\u0003WKH\u0003 CPUAnimBitmap \u000f\u0003WKH\u0003VWUXFWXUH\u0003ZH\u0003XVHG\u0003IRU\u0003SUHYLRXV\u0003DQLPDWLRQ\u0003H[DPSOHV\u000f\u0003ZH\u0003 ZRXOG\u0003VHH\u0003WKDW\u0003LW\u0003ZRUNV\u0003DOPRVW\u0003H[DFWO\\\u0003OLNH\u0003WKH\u0003UHQGHULQJ\u0003FRGH\u0003LQ\u00036HFWLRQ\u0003\u001b\u0011\u0014 \u0003 *UDSKLFV\u0003,QWHURSHUDWLRQ\u0011\u0003 Almost. 7KH\u0003NH\\\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003WKH\u0003 CPUAnimBitmap \u0003DQG\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u0003LV\u0003 EXULHG\u0003LQ\u0003WKH\u0003FDOO\u0003WR\u0003 glDrawPixels() \u0011 Download from www.wowebook.comptg+++((( $$$ 777\u0003\u0003\u00037 77555 $$$ 111 666 ))) ((( 555 \u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003* * *555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 /one.lf/five.lf/five.lf\u001b\u0011\u0017\u0003 glDrawPixels( bitmap->x, bitmap->y, GL_RGBA, GL_UNSIGNED_BYTE, bitmap->pixels ); :H\u0003UHPDUNHG\u0003LQ\u0003WKH\u0003\u020cUVW\u0003H[DPSOH\u0003RI\u0003WKLV\u0003FKDSWHU\u0003WKDW\u0003\\RX\u0003PD\\\u0003KDYH\u0003SUHYLRXVO\\\u0003 VHHQ\u0003FDOOV\u0003WR\u0003 glDrawPixels() \u0003ZLWK\u0003D\u0003EXIIHU\u0003SRLQWHU\u0003DV\u0003WKH\u0003ODVW\u0003DUJXPHQW\u0011\u0003 :HOO\u000f\u0003LI\u0003\\RX\u0003KDGQ\u01e2W\u0003EHIRUH\u000f\u0003\\RX\u0003KDYH\u0003QRZ\u0011\u00037KLV\u0003FDOO\u0003LQ\u0003WKH\u0003 Draw()\u0003URXWLQH\u0003RI\u0003 CPUAnimBitmap \u0003WULJJHUV\u0003D\u0003FRS\\\u0003RI\u0003WKH\u0003&38\u0003EXIIHU\u0003LQ\u0003 bitmap->pixels \u0003WR\u0003WKH\u0003 *38\u0003IRU\u0003UHQGHULQJ\u0011\u00037R\u0003GR\u0003WKLV\u000f\u0003WKH\u0003&38\u0003QHHGV\u0003WR\u0003VWRS\u0003ZKDW\u0003LW\u01e2V\u0003GRLQJ\u0003DQG\u0003LQLWLDWH\u0003 D\u0003FRS\\\u0003RQWR\u0003WKH\u0003*38\u0003IRU\u0003HYHU\\\u0003IUDPH\u0011\u00037KLV\u0003UHTXLUHV\u0003V\\QFKURQL]DWLRQ\u0003EHWZHHQ\u0003WKH\u0003 &38\u0003DQG\u0003*38\u0003DQG\u0003DGGLWLRQDO\u0003ODWHQF\\\u0003WR\u0003LQLWLDWH\u0003DQG\u0003FRPSOHWH\u0003D\u0003WUDQVIHU\u0003RYHU\u0003WKH\u0003 3&,\u0003([SUHVV\u0003EXV\u0011\u00036LQFH\u0003WKH\u0003FDOO\u0003WR\u0003 glDrawPixels() \u0003H[SHFWV\u0003D\u0003KRVW\u0003SRLQWHU\u0003LQ\u0003 WKH\u0003ODVW\u0003DUJXPHQW\u000f\u0003WKLV\u0003DOVR\u0003PHDQV\u0003WKDW\u0003DIWHU\u0003JHQHUDWLQJ\u0003D\u0003IUDPH\u0003RI\u0003LPDJH\u0003GDWD\u0003 ZLWK\u0003D\u0003&8'$\u0003&\u0003NHUQHO\u000f\u0003RXU\u0003&KDSWHU\u0003\u0018\u0003ULSSOH\u0003DSSOLFDWLRQ\u0003QHHGHG\u0003WR\u0003FRS\\\u0003WKH\u0003IUDPH\u0003 IURP\u0003WKH\u0003*38\u0003WR\u0003WKH\u0003&38\u0003ZLWK\u0003D\u0003 cudaMemcpy() \u0011 void generate_frame( DataBlock *d, int ticks ) { dim3 grids(DIM/16,DIM/16); dim3 threads(16,16); kernel<<<grids,threads>>>( d->dev_bitmap, ticks ); HANDLE_ERROR( cudaMemcpy( d->bitmap->get_ptr(), d->dev_bitmap, d->bitmap->image_size(), cudaMemcpyDeviceToHost ) ); } 7DNHQ\u0003WRJHWKHU\u000f\u0003WKHVH\u0003IDFWV\u0003PHDQ\u0003WKDW\u0003RXU\u0003RULJLQDO\u0003*38\u0003ULSSOH\u0003DSSOLFDWLRQ\u0003 ZDV\u0003PRUH\u0003WKDQ\u0003D\u0003OLWWOH\u0003VLOO\\\u0011\u0003:H\u0003XVHG\u0003&8'$\u0003&\u0003WR\u0003FRPSXWH\u0003LPDJH\u0003YDOXHV\u0003IRU\u0003RXU\u0003 UHQGHULQJ\u0003LQ\u0003HDFK\u0003IUDPH\u000f\u0003EXW\u0003DIWHU\u0003WKH\u0003FRPSXWDWLRQV\u0003ZHUH\u0003GRQH\u000f\u0003ZH\u0003FRSLHG\u0003WKH\u0003 EXIIHU\u0003WR\u0003WKH\u0003&38\u000f\u0003ZKLFK\u0003WKHQ\u0003FRSLHG\u0003WKH\u0003EXIIHU\u0003 back \u0003WR\u0003WKH\u0003*38\u0003IRU\u0003GLVSOD\\\u0011\u00037KLV\u0003 PHDQV\u0003WKDW\u0003ZH\u0003LQWURGXFHG\u0003XQQHFHVVDU\\\u0003GDWD\u0003WUDQVIHUV\u0003EHWZHHQ\u0003WKH\u0003KRVW\u0003DQG\u0003 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/five.lf/six.lfWKH\u0003GHYLFH\u0003WKDW\u0003VWRRG\u0003EHWZHHQ\u0003XV\u0003DQG\u0003PD[LPXP\u0003SHUIRUPDQFH\u0011\u0003/HW\u01e2V\u0003UHYLVLW\u0003D\u0003 FRPSXWH\u0010LQWHQVLYH\u0003DQLPDWLRQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003PLJKW\u0003VHH\u0003LWV\u0003SHUIRUPDQFH\u0003LPSURYH\u0003 E\\\u0003PLJUDWLQJ\u0003LW\u0003WR\u0003XVH\u0003JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003IRU\u0003LWV\u0003UHQGHULQJ\u0011 ,I\u0003\\RX\u0003UHFDOO\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u01e2V\u0003KHDW\u0003VLPXODWLRQ\u0003DSSOLFDWLRQ\u000f\u0003\\RX\u0003ZLOO\u0003 UHPHPEHU\u0003WKDW\u0003LW\u0003DOVR\u0003XVHG\u0003 CPUAnimBitmap \u0003LQ\u0003RUGHU\u0003WR\u0003GLVSOD\\\u0003WKH\u0003RXWSXW\u0003RI\u0003LWV\u0003 VLPXODWLRQ\u0003FRPSXWDWLRQV\u0011\u0003:H\u0003ZLOO\u0003PRGLI\\\u0003WKLV\u0003DSSOLFDWLRQ\u0003WR\u0003XVH\u0003RXU\u0003QHZO\\\u0003LPSOH - PHQWHG\u0003GPUAnimBitmap \u0003VWUXFWXUH\u0003DQG\u0003ORRN\u0003DW\u0003KRZ\u0003WKH\u0003UHVXOWLQJ\u0003SHUIRUPDQFH\u0003 FKDQJHV\u0011\u0003$V\u0003ZLWK\u0003WKH\u0003ULSSOH\u0003H[DPSOH\u000f\u0003RXU\u0003 GPUAnimBitmap \u0003LV\u0003DOPRVW\u0003D\u0003SHUIHFW\u0003 GURS\u0010LQ\u0003UHSODFHPHQW\u0003IRU\u0003 CPUAnimBitmap \u000f\u0003ZLWK\u0003WKH\u0003H[FHSWLRQ\u0003RI\u0003WKH\u0003 unsigned char\u0003WR\u0003uchar4\u0003FKDQJH\u0011\u00036R\u000f\u0003WKH\u0003VLJQDWXUH\u0003RI\u0003RXU\u0003DQLPDWLRQ\u0003URXWLQH\u0003FKDQJHV\u0003LQ\u0003 RUGHU\u0003WR\u0003DFFRPPRGDWH\u0003WKLV\u0003VKLIW\u0003LQ\u0003GDWD\u0003W\\SHV\u0011 void anim_gpu( uchar4* outputBitmap, DataBlock *d, int ticks ) { HANDLE_ERROR( cudaEventRecord( d->start, 0 ) );",
    "cudaMemcpyDeviceToHost ) ); } 7DNHQ\u0003WRJHWKHU\u000f\u0003WKHVH\u0003IDFWV\u0003PHDQ\u0003WKDW\u0003RXU\u0003RULJLQDO\u0003*38\u0003ULSSOH\u0003DSSOLFDWLRQ\u0003 ZDV\u0003PRUH\u0003WKDQ\u0003D\u0003OLWWOH\u0003VLOO\\\u0011\u0003:H\u0003XVHG\u0003&8'$\u0003&\u0003WR\u0003FRPSXWH\u0003LPDJH\u0003YDOXHV\u0003IRU\u0003RXU\u0003 UHQGHULQJ\u0003LQ\u0003HDFK\u0003IUDPH\u000f\u0003EXW\u0003DIWHU\u0003WKH\u0003FRPSXWDWLRQV\u0003ZHUH\u0003GRQH\u000f\u0003ZH\u0003FRSLHG\u0003WKH\u0003 EXIIHU\u0003WR\u0003WKH\u0003&38\u000f\u0003ZKLFK\u0003WKHQ\u0003FRSLHG\u0003WKH\u0003EXIIHU\u0003 back \u0003WR\u0003WKH\u0003*38\u0003IRU\u0003GLVSOD\\\u0011\u00037KLV\u0003 PHDQV\u0003WKDW\u0003ZH\u0003LQWURGXFHG\u0003XQQHFHVVDU\\\u0003GDWD\u0003WUDQVIHUV\u0003EHWZHHQ\u0003WKH\u0003KRVW\u0003DQG\u0003 Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/five.lf/six.lfWKH\u0003GHYLFH\u0003WKDW\u0003VWRRG\u0003EHWZHHQ\u0003XV\u0003DQG\u0003PD[LPXP\u0003SHUIRUPDQFH\u0011\u0003/HW\u01e2V\u0003UHYLVLW\u0003D\u0003 FRPSXWH\u0010LQWHQVLYH\u0003DQLPDWLRQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003PLJKW\u0003VHH\u0003LWV\u0003SHUIRUPDQFH\u0003LPSURYH\u0003 E\\\u0003PLJUDWLQJ\u0003LW\u0003WR\u0003XVH\u0003JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003IRU\u0003LWV\u0003UHQGHULQJ\u0011 ,I\u0003\\RX\u0003UHFDOO\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u01e2V\u0003KHDW\u0003VLPXODWLRQ\u0003DSSOLFDWLRQ\u000f\u0003\\RX\u0003ZLOO\u0003 UHPHPEHU\u0003WKDW\u0003LW\u0003DOVR\u0003XVHG\u0003 CPUAnimBitmap \u0003LQ\u0003RUGHU\u0003WR\u0003GLVSOD\\\u0003WKH\u0003RXWSXW\u0003RI\u0003LWV\u0003 VLPXODWLRQ\u0003FRPSXWDWLRQV\u0011\u0003:H\u0003ZLOO\u0003PRGLI\\\u0003WKLV\u0003DSSOLFDWLRQ\u0003WR\u0003XVH\u0003RXU\u0003QHZO\\\u0003LPSOH - PHQWHG\u0003GPUAnimBitmap \u0003VWUXFWXUH\u0003DQG\u0003ORRN\u0003DW\u0003KRZ\u0003WKH\u0003UHVXOWLQJ\u0003SHUIRUPDQFH\u0003 FKDQJHV\u0011\u0003$V\u0003ZLWK\u0003WKH\u0003ULSSOH\u0003H[DPSOH\u000f\u0003RXU\u0003 GPUAnimBitmap \u0003LV\u0003DOPRVW\u0003D\u0003SHUIHFW\u0003 GURS\u0010LQ\u0003UHSODFHPHQW\u0003IRU\u0003 CPUAnimBitmap \u000f\u0003ZLWK\u0003WKH\u0003H[FHSWLRQ\u0003RI\u0003WKH\u0003 unsigned char\u0003WR\u0003uchar4\u0003FKDQJH\u0011\u00036R\u000f\u0003WKH\u0003VLJQDWXUH\u0003RI\u0003RXU\u0003DQLPDWLRQ\u0003URXWLQH\u0003FKDQJHV\u0003LQ\u0003 RUGHU\u0003WR\u0003DFFRPPRGDWH\u0003WKLV\u0003VKLIW\u0003LQ\u0003GDWD\u0003W\\SHV\u0011 void anim_gpu( uchar4* outputBitmap, DataBlock *d, int ticks ) { HANDLE_ERROR( cudaEventRecord( d->start, 0 ) ); dim3 blocks(DIM/16,DIM/16); dim3 threads(16,16); // since tex is global and bound, we have to use a flag to // select which is in/out per iteration volatile bool dstOut = true; for (int i=0; i<90; i++) { float *in, *out; if (dstOut) { in = d->dev_inSrc; out = d->dev_outSrc; } else { out = d->dev_inSrc; in = d->dev_outSrc; } copy_const_kernel<<<blocks,threads>>>( in ); blend_kernel<<<blocks,threads>>>( out, dstOut ); dstOut = !dstOut; } float_to_color<<<blocks,threads>>>( outputBitmap, d->dev_inSrc ); Download from www.wowebook.comptg+++((( $$$ 777\u0003\u0003\u00037 77555 $$$ 111 666 ))) ((( 555 \u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003* * *555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 /one.lf/five.lf/seven.lf\u001b\u0011\u0017\u0003 HANDLE_ERROR( cudaEventRecord( d->stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( d->stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, d->start, d->stop ) ); d->totalTime += elapsedTime; ++d->frames; printf( \" Average Time per frame: %3.1f ms\\n\" , d->totalTime/d->frames ); } 6LQFH\u0003WKH\u0003 float_to_color() \u0003NHUQHO\u0003LV\u0003WKH\u0003RQO\\\u0003IXQFWLRQ\u0003WKDW\u0003DFWXDOO\\\u0003XVHV\u0003WKH\u0003 outputBitmap \u000f\u0003LW\u01e2V\u0003WKH\u0003RQO\\\u0003RWKHU\u0003IXQFWLRQ\u0003WKDW\u0003QHHGV\u0003PRGL\u020cFDWLRQ\u0003DV\u0003D\u0003UHVXOW\u0003 RI\u0003RXU\u0003VKLIW\u0003WR\u0003 uchar4\u0011\u00037KLV\u0003IXQFWLRQ\u0003ZDV\u0003VLPSO\\\u0003FRQVLGHUHG\u0003XWLOLW\\\u0003FRGH\u0003LQ\u0003WKH\u0003 SUHYLRXV\u0003FKDSWHU\u000f\u0003DQG\u0003ZH\u0003ZLOO\u0003FRQWLQXH\u0003WR\u0003FRQVLGHU\u0003LW\u0003XWLOLW\\\u0003FRGH\u0011\u0003+RZHYHU\u000f\u0003ZH\u0003 KDYH\u0003RYHUORDGHG\u0003WKLV\u0003IXQFWLRQ\u0003DQG\u0003LQFOXGHG\u0003ERWK\u0003 unsigned char \u0003DQG\u0003uchar4 YHUVLRQV\u0003LQ\u0003 book.h\u0011\u0003<RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003WKH\u0003GLIIHUHQFHV\u0003EHWZHHQ\u0003WKHVH\u0003IXQF - WLRQV\u0003DUH\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003GLIIHUHQFHV\u0003EHWZHHQ\u0003 kernel() \u0003LQ\u0003WKH\u0003&38\u0010DQLPDWHG\u0003 DQG\u0003*38\u0010DQLPDWHG\u0003YHUVLRQV\u0003RI\u0003*38\u0003ULSSOH\u0011\u00030RVW\u0003RI\u0003WKH\u0003FRGH\u0003IRU\u0003WKH\u0003 float_to_ color()\u0003NHUQHOV\u0003KDV\u0003EHHQ\u0003RPLWWHG\u0003IRU\u0003FODULW\\\u000f\u0003EXW\u0003ZH\u0003HQFRXUDJH\u0003\\RX\u0003WR\u0003FRQVXOW\u0003 book.h\u0003LI\u0003\\RX\u01e2UH\u0003G\\LQJ\u0003WR\u0003VHH\u0003WKH\u0003GHWDLOV\u0011 __global__ void float_to_color( unsigned char *optr, const float *outSrc ) { // convert floating-point value to 4-component color optr[offset*4 + 0] = value( m1, m2, h+120 ); optr[offset*4 + 1] = value( m1, m2, h ); optr[offset*4 + 2] = value( m1, m2, h -120 ); optr[offset*4 + 3] = 255; } Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/five.lf/eight.lf__global__ void float_to_color( uchar4 *optr, const float *outSrc ) { // convert floating-point value to 4-component color optr[offset].x = value( m1, m2, h+120 ); optr[offset].y = value( m1, m2, h ); optr[offset].z = value( m1, m2, h -120 ); optr[offset].w = 255; } 2XWVLGH\u0003RI\u0003WKHVH\u0003FKDQJHV\u000f\u0003WKH\u0003RQO\\\u0003PDMRU\u0003GLIIHUHQFH\u0003LV\u0003LQ\u0003WKH\u0003FKDQJH\u0003IURP\u0003 CPUAnimBitmap \u0003WR\u0003GPUAnimBitmap \u0003WR\u0003SHUIRUP\u0003DQLPDWLRQ\u0011 int main( void ) { DataBlock data; GPUAnimBitmap bitmap( DIM, DIM, &data ); data.totalTime = 0; data.frames = 0; HANDLE_ERROR( cudaEventCreate( &data.start ) ); HANDLE_ERROR( cudaEventCreate( &data.stop ) ); int imageSize = bitmap.image_size(); // assume float == 4 chars in size (i.e., rgba) HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_inSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_outSrc, imageSize ) ); HANDLE_ERROR( cudaMalloc( ( void**)&data.dev_constSrc, imageSize ) ); HANDLE_ERROR( cudaBindTexture( NULL, texConstSrc, data.dev_constSrc, imageSize ) ); Download from www.wowebook.comptg+++((( $$$ 777\u0003\u0003\u00037 77555 $$$ 111 666 ))) ((( 555 \u0003\u0003\u0003::: , , , 7 7 7 +++\u0003\u0003\u0003* * *555 $$$ 333 +++ , , , &&& 666 \u0003\u0003\u0003,,,111 777 ((( 555 222 333 /one.lf/five.lf/nine.lf\u001b\u0011\u0017\u0003 HANDLE_ERROR( cudaBindTexture( NULL, texIn, data.dev_inSrc, imageSize ) ); HANDLE_ERROR( cudaBindTexture( NULL, texOut, data.dev_outSrc, imageSize ) ); // initialize the constant data float *temp = ( float*)malloc( imageSize ); for (int i=0; i<DIM*DIM; i++) { temp[i] = 0; int x = i % DIM; int y = i / DIM; if ((x>300) && (x<600) && (y>310) && (y<601)) temp[i] = MAX_TEMP; } temp[DIM*100+100] = (MAX_TEMP + MIN_TEMP)/2; temp[DIM*700+100] = MIN_TEMP; temp[DIM*300+300] =",
    "float *temp = ( float*)malloc( imageSize ); for (int i=0; i<DIM*DIM; i++) { temp[i] = 0; int x = i % DIM; int y = i / DIM; if ((x>300) && (x<600) && (y>310) && (y<601)) temp[i] = MAX_TEMP; } temp[DIM*100+100] = (MAX_TEMP + MIN_TEMP)/2; temp[DIM*700+100] = MIN_TEMP; temp[DIM*300+300] = MIN_TEMP; temp[DIM*200+700] = MIN_TEMP; for (int y=800; y<900; y++) { for (int x=400; x<500; x++) { temp[x+y*DIM] = MIN_TEMP; } } HANDLE_ERROR( cudaMemcpy( data.dev_constSrc, temp, imageSize, cudaMemcpyHostToDevice ) ); // initialize the input data for (int y=800; y<DIM; y++) { for (int x=0; x<200; x++) { temp[x+y*DIM] = MAX_TEMP; } } Download from www.wowebook.comptg*5$3+,&6\u0003\u0003,17(523(5$%,/,7< /one.lf/six.lf/zero.lf HANDLE_ERROR( cudaMemcpy( data.dev_inSrc, temp, imageSize, cudaMemcpyHostToDevice ) ); free( temp ); bitmap.anim_and_exit( ( void (*)(uchar4*, void*,int))anim_gpu, ( void (*)(void*))anim_exit ); } $OWKRXJK\u0003LW\u0003PLJKW\u0003EH\u0003LQVWUXFWLYH\u0003WR\u0003WDNH\u0003D\u0003JODQFH\u0003DW\u0003WKH\u0003UHVW\u0003RI\u0003WKLV\u0003HQKDQFHG\u0003KHDW\u0003 VLPXODWLRQ\u0003DSSOLFDWLRQ\u000f\u0003LW\u0003LV\u0003QRW\u0003VXI\u020cFLHQWO\\\u0003GLIIHUHQW\u0003IURP\u0003WKH\u0003SUHYLRXV\u0003FKDSWHU\u01e2V\u0003 YHUVLRQ\u0003WR\u0003ZDUUDQW\u0003PRUH\u0003GHVFULSWLRQ\u0011\u00037KH\u0003LPSRUWDQW\u0003FRPSRQHQW\u0003LV\u0003DQVZHULQJ\u0003WKH\u0003 TXHVWLRQ\u000f\u0003KRZ\u0003GRHV\u0003SHUIRUPDQFH\u0003FKDQJH\u0003QRZ\u0003WKDW\u0003ZH\u01e2YH\u0003FRPSOHWHO\\\u0003PLJUDWHG\u0003WKH\u0003 DSSOLFDWLRQ\u0003WR\u0003WKH\u0003*38\"\u0003:LWKRXW\u0003KDYLQJ\u0003WR\u0003FRS\\\u0003HYHU\\\u0003IUDPH\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0003IRU\u0003 GLVSOD\\\u000f\u0003WKH\u0003VLWXDWLRQ\u0003VKRXOG\u0003EH\u0003PXFK\u0003KDSSLHU\u0003WKDQ\u0003LW\u0003ZDV\u0003SUHYLRXVO\\\u0011 6R\u000f\u0003H[DFWO\\\u0003KRZ\u0003PXFK\u0003EHWWHU\u0003LV\u0003LW\u0003WR\u0003XVH\u0003WKH\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003WR\u0003SHUIRUP\u0003 WKH\u0003UHQGHULQJ\"\u00033UHYLRXVO\\\u000f\u0003WKH\u0003KHDW\u0003WUDQVIHU\u0003H[DPSOH\u0003FRQVXPHG\u0003DERXW\u0003\u0015\u0018\u0011\u0016PV\u0003SHU\u0003 IUDPH\u0003RQ\u0003RXU\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u01deEDVHG\u0003WHVW\u0003PDFKLQH\u0011\u0003$IWHU\u0003FRQYHUWLQJ\u0003WKH\u0003DSSOL - FDWLRQ\u0003WR\u0003XVH\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003WKLV\u0003GURSV\u0003E\\\u0003\u0014\u0018\u0003SHUFHQW\u0003WR\u0003\u0015\u0014\u0011\u0019PV\u0003SHU\u0003 IUDPH\u0011\u00037KH\u0003QHW\u0003UHVXOW\u0003LV\u0003WKDW\u0003RXU\u0003UHQGHULQJ\u0003ORRS\u0003LV\u0003\u0014\u0018\u0003SHUFHQW\u0003IDVWHU\u0003DQG\u0003QR\u0003ORQJHU\u0003 UHTXLUHV\u0003LQWHUYHQWLRQ\u0003IURP\u0003WKH\u0003KRVW\u0003HYHU\\\u0003WLPH\u0003ZH\u0003ZDQW\u0003WR\u0003GLVSOD\\\u0003D\u0003IUDPH\u0011\u00037KDW\u01e2V\u0003 QRW\u0003EDG\u0003IRU\u0003D\u0003GD\\\u01e2V\u0003ZRUN\u0004 'LUHFW;\u0003,QWHURSHUDELOLW\\\u001b\u0011\u0018\u0003 $OWKRXJK\u0003ZH\u01e2YH\u0003ORRNHG\u0003RQO\\\u0003DW\u0003H[DPSOHV\u0003WKDW\u0003XVH\u0003LQWHURSHUDWLRQ\u0003ZLWK\u0003WKH\u00032SHQ*/\u0003 UHQGHULQJ\u0003V\\VWHP\u000f\u0003'LUHFW;\u0003LQWHURSHUDWLRQ\u0003LV\u0003QHDUO\\\u0003LGHQWLFDO\u0011\u0003<RX\u0003ZLOO\u0003VWLOO\u0003XVH\u0003D\u0003 cudaGraphicsResource \u0003WR\u0003UHIHU\u0003WR\u0003EXIIHUV\u0003WKDW\u0003\\RX\u0003VKDUH\u0003EHWZHHQ\u0003'LUHFW;\u0003 DQG\u0003&8'$\u000f\u0003DQG\u0003\\RX\u0003ZLOO\u0003VWLOO\u0003XVH\u0003FDOOV\u0003WR\u0003 cudaGraphicsMapResources() \u0003DQG\u0003 cudaGraphicsResourceGetMappedPointer() \u0003WR\u0003UHWULHYH\u0003&8'$\u0010IULHQGO\\\u0003 SRLQWHUV\u0003WR\u0003WKHVH\u0003VKDUHG\u0003UHVRXUFHV\u0011 )RU\u0003WKH\u0003PRVW\u0003SDUW\u000f\u0003WKH\u0003FDOOV\u0003WKDW\u0003GLIIHU\u0003EHWZHHQ\u00032SHQ*/\u0003DQG\u0003'LUHFW;\u0003LQWHURSHUDELOLW\\\u0003 KDYH\u0003HPEDUUDVVLQJO\\\u0003VLPSOH\u0003WUDQVODWLRQV\u0003WR\u0003'LUHFW;\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003UDWKHU\u0003WKDQ\u0003 FDOOLQJ\u0003cudaGLSetGLDevice() \u000f\u0003ZH\u0003FDOO\u0003cudaD3D9SetDirect3DDevice() WR\u0003VSHFLI\\\u0003WKDW\u0003D\u0003&8'$\u0003GHYLFH\u0003VKRXOG\u0003EH\u0003HQDEOHG\u0003IRU\u0003'LUHFW\u0016'\u0003 \u0011\u0013\u0003LQWHURSHUDELOLW\\\u0011\u0003 Download from www.wowebook.comptg&&&+++ $$$ 333555555((( 999((( : :: /one.lf/six.lf/one.lf\u001b\u0011\u0019\u0003777 (((\u0003\u0003\u0003,,, /LNHZLVH\u000f\u0003 cudaD3D10SetDirect3DDevice() \u0003HQDEOHV\u0003D\u0003GHYLFH\u0003IRU\u0003'LUHFW\u0016'\u0003\u0014\u0013\u0003 LQWHURSHUDWLRQ\u0003DQG\u0003 cudaD3D11SetDirect3DDevice() \u0003IRU\u0003'LUHFW\u0016'\u0003\u0014\u0014\u0011\u0003 7KH\u0003GHWDLOV\u0003RI\u0003'LUHFW;\u0003LQWHURSHUDELOLW\\\u0003SUREDEO\\\u0003ZLOO\u0003QRW\u0003VXUSULVH\u0003\\RX\u0003LI\u0003\\RX\u01e2YH\u0003 ZRUNHG\u0003WKURXJK\u0003WKLV\u0003FKDSWHU\u01e2V\u00032SHQ*/\u0003H[DPSOHV\u0011\u0003%XW\u0003LI\u0003\\RX\u0003ZDQW\u0003WR\u0003XVH\u0003'LUHFW;\u0003 LQWHURSHUDWLRQ\u0003DQG\u0003ZDQW\u0003D\u0003VPDOO\u0003SURMHFW\u0003WR\u0003JHW\u0003VWDUWHG\u000f\u0003ZH\u0003VXJJHVW\u0003WKDW\u0003\\RX\u0003 PLJUDWH\u0003WKLV\u0003FKDSWHU\u01e2V\u0003H[DPSOHV\u0003WR\u0003XVH\u0003'LUHFW;\u0011\u00037R\u0003JHW\u0003VWDUWHG\u000f\u0003ZH\u0003UHFRP - PHQG\u0003FRQVXOWLQJ\u0003WKH\u0003 NVIDIA CUDA Programming Guide \u0003IRU\u0003D\u0003UHIHUHQFH\u0003RQ\u0003WKH\u0003 $3,\u0003DQG\u0003WDNLQJ\u0003D\u0003ORRN\u0003DW\u0003WKH\u0003*38\u0003&RPSXWLQJ\u00036'.\u0003FRGH\u0003VDPSOHV\u0003RQ\u0003'LUHFW;\u0003 LQWHURSHUDELOLW\\\u0011 &KDSWHU\u00035HYLHZ\u001b\u0011\u0019\u0003 $OWKRXJK\u0003PXFK\u0003RI\u0003WKLV\u0003ERRN\u0003KDV\u0003EHHQ\u0003GHYRWHG\u0003WR\u0003XVLQJ\u0003WKH\u0003*38\u0003IRU\u0003SDUDOOHO\u000f\u0003 JHQHUDO\u0010SXUSRVH\u0003FRPSXWLQJ\u000f\u0003ZH\u0003FDQ\u01e2W\u0003IRUJHW\u0003WKH\u0003*38\u01e2V\u0003VXFFHVVIXO\u0003GD\\\u0003MRE\u0003DV\u0003D\u0003 UHQGHULQJ\u0003HQJLQH\u0011\u00030DQ\\\u0003DSSOLFDWLRQV\u0003UHTXLUH\u0003RU\u0003ZRXOG\u0003EHQH\u020cW\u0003IURP\u0003WKH\u0003XVH\u0003RI\u0003 VWDQGDUG\u0003FRPSXWHU\u0003JUDSKLFV\u0003UHQGHULQJ\u0011\u00036LQFH\u0003WKH\u0003*38\u0003LV\u0003PDVWHU\u0003RI\u0003WKH\u0003UHQGHULQJ\u0003 GRPDLQ\u000f\u0003DOO\u0003WKDW\u0003VWRRG\u0003EHWZHHQ\u0003XV\u0003DQG\u0003WKH\u0003H[SORLWDWLRQ\u0003RI\u0003WKHVH\u0003UHVRXUFHV\u0003ZDV\u0003 D\u0003ODFN\u0003RI\u0003XQGHUVWDQGLQJ\u0003RI\u0003WKH\u0003PHFKDQLFV\u0003LQ\u0003FRQYLQFLQJ\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003DQG\u0003 JUDSKLFV\u0003GULYHUV\u0003WR\u0003FRRSHUDWH\u0011\u00031RZ\u0003WKDW\u0003ZH\u0003KDYH\u0003VHHQ\u0003KRZ\u0003WKLV\u0003LV\u0003GRQH\u000f\u0003ZH\u0003 QR\u0003ORQJHU\u0003QHHG\u0003WKH\u0003KRVW\u0003WR\u0003LQWHUYHQH\u0003LQ\u0003GLVSOD\\LQJ\u0003WKH\u0003JUDSKLFDO\u0003UHVXOWV\u0003RI\u0003RXU\u0003 FRPSXWDWLRQV\u0011\u00037KLV\u0003VLPXOWDQHRXVO\\\u0003DFFHOHUDWHV\u0003WKH\u0003DSSOLFDWLRQ\u01e2V\u0003UHQGHULQJ\u0003ORRS\u0003 DQG\u0003IUHHV\u0003WKH\u0003KRVW\u0003WR\u0003SHUIRUP\u0003RWKHU\u0003FRPSXWDWLRQV\u0003LQ\u0003WKH\u0003PHDQWLPH\u0011\u00032WKHUZLVH\u000f\u0003 LI\u0003WKHUH\u0003DUH\u0003QR\u0003RWKHU\u0003FRPSXWDWLRQV\u0003WR\u0003EH\u0003SHUIRUPHG\u000f\u0003LW\u0003OHDYHV\u0003RXU\u0003V\\VWHP\u0003PRUH\u0003 UHVSRQVLYH\u0003WR\u0003RWKHU\u0003HYHQWV\u0003RU\u0003DSSOLFDWLRQV\u0011 7KHUH\u0003DUH\u0003PDQ\\\u0003RWKHU\u0003ZD\\V\u0003WR\u0003XVH\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003WKDW\u0003ZH\u0003OHIW\u0003XQH[ - SORUHG\u0011\u0003:H\u0003ORRNHG\u0003SULPDULO\\\u0003DW\u0003XVLQJ\u0003D\u0003&8'$\u0003&\u0003NHUQHO\u0003WR\u0003ZULWH\u0003LQWR\u0003D\u0003SL[HO\u0003EXIIHU\u0003 REMHFW\u0003IRU\u0003GLVSOD\\\u0003LQ\u0003D\u0003ZLQGRZ\u0011\u00037KLV\u0003LPDJH\u0003GDWD\u0003FDQ\u0003DOVR\u0003EH\u0003XVHG\u0003DV\u0003D\u0003WH[WXUH\u0003WKDW\u0003 FDQ\u0003EH\u0003DSSOLHG\u0003WR\u0003DQ\\\u0003VXUIDFH\u0003LQ\u0003WKH\u0003VFHQH\u0011\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003PRGLI\\LQJ\u0003SL[HO\u0003EXIIHU\u0003 REMHFWV\u000f\u0003\\RX\u0003FDQ\u0003DOVR\u0003VKDUH\u0003YHUWH[\u0003EXIIHU\u0003REMHFWV\u0003EHWZHHQ\u0003&8'$\u0003DQG\u0003WKH\u0003JUDSKLFV\u0003 HQJLQH\u0011\u0003$PRQJ\u0003RWKHU\u0003WKLQJV\u000f\u0003WKLV\u0003DOORZV\u0003\\RX\u0003WR\u0003ZULWH\u0003&8'$\u0003&\u0003NHUQHOV\u0003WKDW\u0003SHUIRUP\u0003 FROOLVLRQ\u0003GHWHFWLRQ\u0003EHWZHHQ\u0003REMHFWV\u0003RU\u0003FRPSXWH\u0003YHUWH[\u0003GLVSODFHPHQW\u0003PDSV\u0003WR\u0003EH\u0003 XVHG\u0003WR\u0003UHQGHU\u0003REMHFWV\u0003RU\u0003VXUIDFHV\u0003WKDW\u0003LQWHUDFW\u0003ZLWK\u0003WKH\u0003XVHU\u0003RU\u0003WKHLU\u0003VXUURXQG - LQJV\u0011\u0003,I\u0003\\RX\u01e2UH\u0003LQWHUHVWHG\u0003LQ\u0003FRPSXWHU\u0003JUDSKLFV\u000f\u0003&8'$\u0003&\u01e2V\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003 $3,\u0003HQDEOHV\u0003D\u0003VOHZ\u0003RI\u0003QHZ\u0003SRVVLELOLWLHV\u0003IRU\u0003\\RXU\u0003DSSOLFDWLRQV\u0004\u0003 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /one.lf/six.lf/three.lfChapter 9 Atomics ,Q\u0003WKH\u0003\u020cUVW\u0003KDOI\u0003RI\u0003WKH\u0003ERRN\u000f\u0003ZH\u0003VDZ\u0003PDQ\\\u0003RFFDVLRQV\u0003ZKHUH\u0003VRPHWKLQJ\u0003FRPSOL - FDWHG\u0003WR\u0003DFFRPSOLVK\u0003ZLWK\u0003D\u0003VLQJOH\u0010WKUHDGHG\u0003DSSOLFDWLRQ\u0003EHFRPHV\u0003TXLWH\u0003HDV\\\u0003ZKHQ\u0003 LPSOHPHQWHG\u0003XVLQJ\u0003&8'$\u0003&\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003WKDQNV\u0003WR\u0003WKH\u0003EHKLQG\u0010WKH\u0010VFHQHV\u0003ZRUN\u0003 RI\u0003WKH\u0003&8'$\u0003UXQWLPH\u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003QHHGHG\u0003 for()\u0003ORRSV\u0003LQ\u0003RUGHU\u0003WR\u0003GR\u0003SHU\u0010SL[HO\u0003 XSGDWHV\u0003LQ\u0003RXU\u0003DQLPDWLRQV\u0003RU\u0003KHDW\u0003VLPXODWLRQV\u0011\u0003/LNHZLVH\u000f\u0003WKRXVDQGV\u0003RI\u0003SDUDOOHO\u0003 EORFNV\u0003DQG\u0003WKUHDGV\u0003JHW\u0003FUHDWHG\u0003DQG\u0003DXWRPDWLFDOO\\\u0003HQXPHUDWHG\u0003ZLWK\u0003WKUHDG\u0003DQG\u0003 EORFN\u0003LQGLFHV\u0003VLPSO\\\u0003E\\\u0003FDOOLQJ\u0003D\u0003 __global__ \u0003IXQFWLRQ\u0003IURP\u0003KRVW\u0003FRGH\u0011 2Q\u0003WKH\u0003RWKHU\u0003KDQG\u000f\u0003WKHUH\u0003DUH\u0003VRPH\u0003VLWXDWLRQV\u0003ZKHUH\u0003VRPHWKLQJ\u0003LQFUHGLEO\\\u0003VLPSOH\u0003 LQ\u0003VLQJOH\u0010WKUHDGHG\u0003DSSOLFDWLRQV\u0003DFWXDOO\\\u0003SUHVHQWV\u0003D\u0003VHULRXV\u0003SUREOHP\u0003ZKHQ\u0003ZH\u0003WU\\\u0003 WR\u0003LPSOHPHQW\u0003WKH\u0003VDPH\u0003DOJRULWKP\u0003RQ\u0003D\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003DUFKLWHFWXUH\u0011\u0003,Q\u0003WKLV\u0003 FKDSWHU\u000f\u0003ZH\u01e2OO\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003VRPH\u0003RI\u0003WKH\u0003VLWXDWLRQV\u0003ZKHUH\u0003ZH\u0003QHHG\u0003WR\u0003XVH\u0003VSHFLDO\u0003 SULPLWLYHV\u0003LQ\u0003RUGHU\u0003WR\u0003VDIHO\\\u0003DFFRPSOLVK\u0003WKLQJV\u0003WKDW\u0003FDQ\u0003EH\u0003TXLWH\u0003WULYLDO\u0003WR\u0003GR\u0003LQ\u0003D\u0003 WUDGLWLRQDO\u000f\u0003VLQJOH\u0010WKUHDGHG\u0003DSSOLFDWLRQ\u0011 Download from www.wowebook.comptgATOM ICS /one.lf/six.lf/four.lf&KDSWHU\u00032EMHFWLYHV \u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003WKH\u0003\u01e9\u0003 compute capability \u0003RI\u0003YDULRXV\u000319,',$\u0003*38V\u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003ZKDW\u0003DWRPLF\u0003RSHUDWLRQV\u0003DUH\u0003DQG\u0003ZK\\\u0003\\RX\u0003PLJKW\u0003QHHG\u0003WKHP\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003SHUIRUP\u0003DULWKPHWLF\u0003ZLWK\u0003DWRPLF\u0003RSHUDWLRQV\u0003LQ\u0003\\RXU\u0003&8'$\u0003\u01e9\u0003 &\u0003NHUQHOV\u0011 &RPSXWH\u0003&DSDELOLW\\ \u0011\u0015\u0003 $OO\u0003RI\u0003WKH\u0003WRSLFV\u0003ZH\u0003KDYH\u0003FRYHUHG\u0003WR\u0003WKLV\u0003SRLQW\u0003LQYROYH\u0003FDSDELOLWLHV\u0003WKDW\u0003HYHU\\\u0003 &8'$\u0010HQDEOHG\u0003*38\u0003SRVVHVVHV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003HYHU\\\u0003*38\u0003EXLOW\u0003RQ\u0003WKH\u0003&8'$\u0003 $UFKLWHFWXUH\u0003FDQ\u0003ODXQFK\u0003NHUQHOV\u000f\u0003DFFHVV\u0003JOREDO\u0003PHPRU\\\u000f\u0003DQG\u0003UHDG\u0003IURP\u0003FRQVWDQW\u0003 DQG\u0003WH[WXUH\u0003PHPRULHV\u0011\u0003%XW\u0003MXVW\u0003OLNH\u0003GLIIHUHQW\u0003PRGHOV\u0003RI\u0003&38V\u0003KDYH\u0003YDU\\LQJ\u0003FDSD - ELOLWLHV\u0003DQG\u0003LQVWUXFWLRQ\u0003VHWV\u0003 IRU\u0003H[DPSOH\u000f\u000300;\u000f\u000366(\u000f\u0003RU\u000366(\u0015 \u000f\u0003VR\u0003WRR\u0003GR\u0003&8'$\u0010 HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRUV\u0011\u000319,',$\u0003UHIHUV\u0003WR\u0003WKH\u0003VXSSRUWHG\u0003IHDWXUHV\u0003RI\u0003D\u0003*38\u0003DV\u0003 LWV\u0003compute capability \u0011 7+(\u0003&20387(\u0003&$3$%,/,7<\u00032)\u000319,',$\u0003*38 6 \u0011\u0015\u0011\u0014\u0003 $V\u0003RI\u0003SUHVV\u0003WLPH\u000f\u000319,',$\u0003*38V\u0003FRXOG\u0003SRWHQWLDOO\\\u0003VXSSRUW\u0003FRPSXWH\u0003FDSDELOLWLHV\u0003\u0014\u0011\u0013\u000f\u0003 \u0014\u0011\u0014\u000f\u0003\u0014\u0011\u0015\u000f\u0003\u0014\u0011\u0016\u000f\u0003RU\u0003\u0015\u0011\u0013\u0011\u0003+LJKHU\u0010FDSDELOLW\\\u0003YHUVLRQV\u0003UHSUHVHQW\u0003VXSHUVHWV\u0003RI\u0003WKH\u0003YHUVLRQV\u0003 EHORZ\u0003WKHP\u000f\u0003LPSOHPHQWLQJ\u0003D\u0003\u01e4OD\\HUHG\u0003RQLRQ\u01e5\u0003RU\u0003\u01e45XVVLDQ\u0003QHVWLQJ\u0003GROO\u01e5\u0003KLHUDUFK\\\u0003 GHSHQGLQJ\u0003RQ\u0003\\RXU\u0003PHWDSKRULFDO\u0003SUHIHUHQFH \u0011\u0003)RU\u0003H[DPSOH\u000f\u0003D\u0003*38\u0003ZLWK\u0003FRPSXWH\u0003 FDSDELOLW\\\u0003\u0014\u0011\u0015\u0003VXSSRUWV\u0003DOO\u0003WKH\u0003IHDWXUHV\u0003RI\u0003FRPSXWH\u0003FDSDELOLWLHV\u0003\u0014\u0011\u0013\u0003DQG\u0003\u0014\u0011\u0014\u0011\u00037KH\u0003 NVIDIA CUDA Programming Guide \u0003FRQWDLQV\u0003DQ\u0003XS\u0010WR\u0010GDWH\u0003OLVW\u0003RI\u0003DOO\u0003&8'$\u0010FDSDEOH\u0003 *38V\u0003DQG\u0003WKHLU\u0003FRUUHVSRQGLQJ\u0003FRPSXWH\u0003FDSDELOLW\\\u0011\u00037DEOH\u0003 \u0011\u0014\u0003OLVWV\u0003WKH\u000319,',$\u0003*38V\u0003 DYDLODEOH\u0003DW\u0003SUHVV\u0003WLPH\u0011\u00037KH\u0003FRPSXWH\u0003FDSDELOLW\\\u0003VXSSRUWHG\u0003E\\\u0003HDFK\u0003*38\u0003LV\u0003OLVWHG\u0003 QH[W\u0003WR\u0003WKH\u0003GHYLFH\u01e2V\u0003QDPH\u0011\u0003 Download from www.wowebook.comptg&&&888 &&&$$$$$$777 <<< /one.lf/six.lf/five.lf \u0011\u0015\u0003222 000 333777 (((\u0003\u0003\u0003333%%% , , , /// , , , Table 9.1 6HOHFWHG\u0003&8'$\u0010(QDEOHG\u0003*38V\u0003DQG\u00037KHLU\u0003&RUUHVSRQGLQJ\u0003&RPSXWH\u0003 &DSDELOLWLHVGPUCOM PUTE CAPABILITY *H)RUFH\u0003*7;\u0003\u0017\u001b\u0013\u000f\u0003*7;\u0003\u0017\u001a\u0013 \u0015\u0011\u0013 *H)RUFH\u0003*7;\u0003\u0015 \u0018\u0003 \u0014\u0011\u0016 *H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u000f\u0003*7;\u0003\u0015\u001b\u0013\u0003 \u0014\u0011\u0016 *H)RUFH\u0003*7;\u0003\u0015\u0019\u0013\u0003 \u0014\u0011\u0016 *H)RUFH\u0003 \u001b\u0013\u0013\u0003*;\u0015\u0003 \u0014\u0011\u0014 *H)RUFH\u0003*76\u0003\u0015\u0018\u0013\u000f\u0003*76\u0003\u0014\u0018\u0013\u000f\u0003 \u001b\u0013\u0013\u0003*7;\u000f\u0003 \u001b\u0013\u0013\u0003*7;\u000e\u000f\u0003\u001b\u001b\u0013\u0013\u0003*76\u0003\u0018\u0014\u0015\u0003 \u0014\u0011\u0014 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u00038OWUD\u000f\u0003\u001b\u001b\u0013\u0013\u0003*7;\u0003 \u0014\u0011\u0013 *H)RUFH\u0003 \u001b\u0013\u0013\u0003*7\u000f\u0003\u001b\u001b\u0013\u0013\u0003*7\u000f\u0003*7;\u0003\u0015\u001b\u00130\u000f\u0003 \u001b\u0013\u00130\u0003*7;\u0003 \u0014\u0011\u0014 *H)RUFH\u0003*7\u0003\u0014\u0016\u0013\u000f\u0003 \u0019\u0013\u0013\u0003*62\u000f\u0003\u001b\u001b\u0013\u0013\u0003*6\u000f\u0003\u001b\u001b\u0013\u00130\u0003*7;\u000f\u0003*7;\u0003\u0015\u0019\u00130\u000f\u0003 \u001b\u0013\u00130\u0003*7\u0003 \u0014\u0011\u0014 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*76\u0003 \u0014\u0011\u0013 *H)RUFH\u0003 \u0019\u0013\u0013\u0003*7\u000f\u0003\u001b\u001b\u0013\u00130\u0003*76\u000f\u0003 \u001b\u0013\u00130\u0003*76\u0003 \u0014\u0011\u0014 *H)RUFH\u0003 \u001a\u0013\u00130\u0003*7\u0003 \u0014\u0011\u0014 *H)RUFH\u0003*7\u0003\u0014\u0015\u0013\u000f\u0003 \u0018\u0013\u0013\u0003*7\u000f\u0003\u001b\u0019\u0013\u0013\u0003*76\u000f\u0003\u001b\u0019\u0013\u0013\u0003*7\u000f\u0003 \u001a\u0013\u00130\u0003*7\u000f\u0003 \u0019\u0018\u00130\u0003*6\u000f\u0003 \u0019\u0013\u00130\u0003 *7\u000f\u0003 \u0019\u0013\u00130\u0003*6\u000f\u0003 \u0018\u0013\u00130\u0003*6\u000f\u0003\u001b\u001a\u0013\u00130\u0003*7\u000f\u0003\u001b\u0019\u0013\u00130\u0003*7\u000f\u0003\u001b\u0019\u0013\u00130\u0003*6\u0003\u0014\u0011\u0014 *H)RUFH\u0003*\u0014\u0013\u0013\u000f\u0003\u001b\u0018\u0013\u0013\u0003*7\u000f\u0003\u001b\u0017\u0013\u0013\u0003*6\u000f\u0003\u001b\u0017\u0013\u00130\u0003*7\u000f\u0003 \u0018\u0013\u00130\u0003*\u000f\u0003 \u0016\u0013\u00130\u0003*\u000f\u0003\u001b\u0017\u0013\u00130\u0003*6\u000f\u0003 \u0017\u0013\u0013\u0003P*38\u000f\u0003 \u0016\u0013\u0013\u0003P*38\u000f\u0003\u001b\u0016\u0013\u0013\u0003P*38\u000f\u0003\u001b\u0015\u0013\u0013\u0003P*38\u000f\u0003\u001b\u0014\u0013\u0013\u0003P*38\u0014\u0011\u0014 *H)RUFH\u0003 \u0016\u0013\u00130\u0003*6\u000f\u0003 \u0015\u0013\u00130\u0003*6\u000f\u0003 \u0014\u0013\u00130\u0003*\u000f\u0003\u001b\u0017\u0013\u00130\u0003*\u0003 \u0014\u0011\u0014 7HVOD\u00036\u0015\u0013\u001a\u0013\u000f\u00036\u0015\u0013\u0018\u0013\u000f\u0003&\u0015\u0013\u001a\u0013\u000f\u0003&\u0015\u0013\u0018\u0013 \u0015\u0011\u0013 7HVOD\u00036\u0014\u0013\u001a\u0013\u000f\u0003&\u0014\u0013\u0019\u0013 \u0014\u0011\u0016 Continued Download from www.wowebook.comptgATOM ICS /one.lf/six.lf/six.lfGPUCOM PUTE CAPABILITY 7HVOD\u00036\u001b\u001a\u0013\u0003\u000f\u0003'\u001b\u001a\u0013\u000f\u0003&\u001b\u001a\u0013 \u0014\u0011\u0013 4XDGUR\u00033OH[\u0003\u0015\u0015\u0013\u0013\u0003'\u0015\u0003 \u0014\u0011\u0016 4XDGUR\u00033OH[\u0003\u0015\u0014\u0013\u0013\u0003'\u0017\u0003 \u0014\u0011\u0014 4XDGUR\u00033OH[\u0003\u0015\u0014\u0013\u0013\u00030RGHO\u00036\u0017\u0003 \u0014\u0011\u0013 4XDGUR\u00033OH[\u0003\u0014\u0013\u0013\u0013\u00030RGHO\u0003,9\u0003 \u0014\u0011\u0013 4XDGUR\u0003);\u0003\u0018\u001b\u0013\u0013\u0003 \u0014\u0011\u0016 4XDGUR\u0003);\u0003\u0017\u001b\u0013\u0013\u0003 \u0014\u0011\u0016 4XDGUR\u0003);\u0003\u0017\u001a\u0013\u0013\u0003;\u0015\u0003 \u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u00130\u0003 \u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0018\u0019\u0013\u0013\u0003 \u0014\u0011\u0013 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u0013\u0003 \u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0016\u0019\u0013\u00130\u0003 \u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0017\u0019\u0013\u0013\u0003 \u0014\u0011\u0013 4XDGUR\u0003);\u0003\u0015\u001a\u0013\u00130\u0003 \u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0014\u001a\u0013\u0013\u000f\u0003);\u0003\u0018\u001a\u0013\u000f\u0003196\u0003\u0016\u0015\u00130\u000f\u0003);\u0003\u0014\u001a\u0013\u00130\u000f\u0003);\u0003\u0014\u0019\u0013\u00130\u000f\u0003);\u0003\u001a\u001a\u00130\u000f\u0003);\u0003 \u0018\u001a\u00130\u0003\u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0016\u001a\u0013\u000f\u0003196\u0003\u0015 \u0013\u000f\u0003196\u0003\u0014\u0017\u00130\u000f\u0003196\u0003\u0014\u0016\u00180\u000f\u0003);\u0003\u0016\u0019\u00130\u0003 \u0014\u0011\u0014 4XDGUR\u0003);\u0003\u0016\u001a\u00130\u000f\u0003196\u0003\u0014\u0016\u00130 \u0014\u0011\u0014Table 9.1 6HOHFWHG\u0003&8'$\u0010(QDEOHG\u0003*38V\u0003DQG\u00037KHLU\u0003&RUUHVSRQGLQJ\u0003&RPSXWH\u0003 &DSDELOLWLHV\u0003 &RQWLQXHG Download from www.wowebook.comptg&&&888 &&&$$$$$$777 <<< /one.lf/six.lf/seven.lf \u0011\u0015\u0003222 000 333777 (((\u0003\u0003\u0003333%%% , , , /// , , ,2I\u0003FRXUVH\u000f\u0003VLQFH\u000319,',$\u0003UHOHDVHV\u0003QHZ\u0003JUDSKLFV\u0003SURFHVVRUV\u0003DOO\u0003WKH\u0003WLPH\u000f\u0003WKLV\u0003WDEOH\u0003 ZLOO\u0003XQGRXEWHGO\\\u0003EH\u0003RXW\u0010RI\u0010GDWH\u0003WKH\u0003PRPHQW\u0003WKLV\u0003ERRN\u0003LV\u0003SXEOLVKHG\u0011\u0003)RUWXQDWHO\\\u000f\u0003 19,',$\u0003KDV\u0003D\u0003ZHEVLWH\u000f\u0003DQG\u0003RQ\u0003WKLV\u0003ZHEVLWH\u0003\\RX\u0003ZLOO\u0003\u020cQG\u0003WKH\u0003&8'$\u0003=RQH\u0011\u0003$PRQJ\u0003 RWKHU\u0003WKLQJV\u000f\u0003WKH\u0003&8'$\u0003=RQH\u0003LV\u0003KRPH\u0003WR\u0003WKH\u0003PRVW\u0003XS\u0010WR\u0010GDWH\u0003OLVW\u0003RI\u0003VXSSRUWHG\u0003 &8'$\u0003GHYLFHV\u0011\u0003:H\u0003UHFRPPHQG\u0003WKDW\u0003\\RX\u0003FRQVXOW\u0003WKLV\u0003OLVW\u0003EHIRUH\u0003GRLQJ\u0003DQ\\WKLQJ\u0003 GUDVWLF\u0003DV\u0003D\u0003UHVXOW\u0003RI\u0003EHLQJ\u0003XQDEOH\u0003WR\u0003\u020cQG\u0003\\RXU\u0003QHZ\u0003*38\u0003LQ\u00037DEOH\u0003 \u0011\u0014\u0011\u00032U\u0003\\RX\u0003FDQ\u0003 VLPSO\\\u0003UXQ\u0003WKH\u0003H[DPSOH\u0003IURP\u0003&KDSWHU\u0003\u0016\u0003WKDW\u0003SULQWV\u0003WKH\u0003FRPSXWH\u0003FDSDELOLW\\\u0003RI\u0003HDFK\u0003 &8'$\u0003GHYLFH\u0003LQ\u0003WKH\u0003V\\VWHP\u0011 %HFDXVH\u0003WKLV\u0003LV\u0003WKH\u0003FKDSWHU\u0003RQ\u0003DWRPLFV\u000f\u0003RI\u0003SDUWLFXODU\u0003UHOHYDQFH\u0003LV\u0003WKH\u0003KDUGZDUH\u0003 FDSDELOLW\\\u0003WR\u0003SHUIRUP\u0003DWRPLF\u0003RSHUDWLRQV\u0003RQ\u0003PHPRU\\\u0011\u0003%HIRUH\u0003ZH\u0003ORRN\u0003DW\u0003ZKDW\u0003 DWRPLF\u0003RSHUDWLRQV\u0003DUH\u0003DQG\u0003ZK\\\u0003\\RX\u0003FDUH\u000f\u0003\\RX\u0003VKRXOG\u0003NQRZ\u0003WKDW\u0003DWRPLF\u0003RSHUD - WLRQV\u0003RQ\u0003JOREDO\u0003PHPRU\\\u0003DUH\u0003VXSSRUWHG\u0003RQO\\\u0003RQ\u0003*38V\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0014\u0003 RU\u0003KLJKHU\u0011\u0003)XUWKHUPRUH\u000f\u0003DWRPLF\u0003RSHUDWLRQV\u0003RQ\u0003 shared \u0003PHPRU\\\u0003UHTXLUH\u0003D\u0003*38\u0003RI\u0003 FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0015\u0003RU\u0003KLJKHU\u0011\u0003%HFDXVH\u0003RI\u0003WKH\u0003VXSHUVHW\u0003QDWXUH\u0003RI\u0003FRPSXWH\u0003 FDSDELOLW\\\u0003YHUVLRQV\u000f\u0003*38V\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0015\u0003WKHUHIRUH\u0003VXSSRUW\u0003ERWK\u0003VKDUHG\u0003 PHPRU\\\u0003DWRPLFV\u0003DQG\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u0011\u00036LPLODUO\\\u000f\u0003*38V\u0003RI\u0003FRPSXWH\u0003FDSD - ELOLW\\\u0003\u0014\u0011\u0016\u0003VXSSRUW\u0003ERWK\u0003RI\u0003WKHVH\u0003DV\u0003ZHOO\u0011 ,I\u0003LW\u0003WXUQV\u0003RXW\u0003WKDW\u0003\\RXU\u0003*38\u0003LV\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0013\u0003DQG\u0003LW\u0003GRHVQ\u01e2W\u0003VXSSRUW\u0003 DWRPLF\u0003RSHUDWLRQV\u0003RQ\u0003JOREDO\u0003PHPRU\\\u000f\u0003ZHOO\u0003PD\\EH\u0003ZH\u01e2YH\u0003MXVW\u0003JLYHQ\u0003\\RX\u0003WKH\u0003SHUIHFW\u0003 H[FXVH\u0003WR\u0003XSJUDGH\u0004\u0003,I\u0003\\RX\u0003GHFLGH\u0003\\RX\u01e2UH\u0003QRW\u0003UHDG\\\u0003WR\u0003VSOXUJH\u0003RQ\u0003D\u0003QHZ\u0003DWRPLFV\u0010 HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRU\u000f\u0003\\RX\u0003FDQ\u0003FRQWLQXH\u0003WR\u0003UHDG\u0003DERXW\u0003DWRPLF\u0003RSHUDWLRQV\u0003 DQG\u0003WKH\u0003VLWXDWLRQV\u0003LQ\u0003ZKLFK\u0003\\RX\u0003PLJKW\u0003ZDQW\u0003WR\u0003XVH\u0003WKHP\u0011\u0003%XW\u0003LI\u0003\\RX\u0003\u020cQG\u0003LW\u0003WRR\u0003 KHDUWEUHDNLQJ\u0003WKDW\u0003\\RX\u0003ZRQ\u01e2W\u0003EH\u0003DEOH\u0003WR\u0003UXQ\u0003WKH\u0003H[DPSOHV\u000f\u0003IHHO\u0003IUHH\u0003WR\u0003VNLS\u0003WR\u0003WKH\u0003 QH[W\u0003FKDSWHU\u0011 &203,/,1*\u0003)25\u0003$\u00030,1,080\u0003&20387(\u0003&$3$%,/,7< \u0011\u0015\u0011\u0015\u0003 6XSSRVH\u0003WKDW\u0003ZH\u0003KDYH\u0003ZULWWHQ\u0003FRGH\u0003WKDW\u0003UHTXLUHV\u0003D\u0003FHUWDLQ\u0003PLQLPXP\u0003FRPSXWH\u0003 FDSDELOLW\\\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LPDJLQH\u0003WKDW\u0003\\RX\u01e2YH\u0003\u020cQLVKHG\u0003WKLV\u0003FKDSWHU\u0003DQG\u0003JR\u0003RII\u0003WR\u0003 ZULWH\u0003DQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003UHOLHV\u0003KHDYLO\\\u0003RQ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u0011\u0003+DYLQJ\u0003VWXGLHG\u0003 WKLV\u0003WH[W\u0003H[WHQVLYHO\\\u000f\u0003\\RX\u0003NQRZ\u0003WKDW\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u0003UHTXLUH\u0003D\u0003FRPSXWH\u0003 FDSDELOLW\\\u0003RI\u0003\u0014\u0011\u0014\u0011\u00037R\u0003FRPSLOH\u0003\\RXU\u0003FRGH\u000f\u0003\\RX\u0003QHHG\u0003WR\u0003LQIRUP\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003WKH\u0003 NHUQHO\u0003FDQQRW\u0003UXQ\u0003RQ\u0003KDUGZDUH\u0003ZLWK\u0003D\u0003FDSDELOLW\\\u0003OHVV\u0003WKDQ\u0003\u0014\u0011\u0014\u0011\u00030RUHRYHU\u000f\u0003LQ\u0003WHOOLQJ\u0003 WKH\u0003FRPSLOHU\u0003WKLV\u000f\u0003\\RX\u01e2UH\u0003DOVR\u0003JLYLQJ\u0003LW\u0003WKH\u0003IUHHGRP\u0003WR\u0003PDNH\u0003RWKHU\u0003RSWLPL]DWLRQV\u0003 WKDW\u0003PD\\\u0003EH\u0003DYDLODEOH\u0003RQO\\\u0003RQ\u0003*38V\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0014\u0003RU\u0003JUHDWHU\u0011\u0003,QIRUPLQJ\u0003 Download from www.wowebook.comptgATOM ICS /one.lf/six.lf/eight.lfWKH\u0003FRPSLOHU\u0003RI\u0003WKLV\u0003LV\u0003DV\u0003VLPSOH\u0003DV\u0003DGGLQJ\u0003D\u0003FRPPDQG\u0010OLQH\u0003RSWLRQ\u0003WR\u0003\\RXU\u0003LQYRFD - WLRQ\u0003RI\u0003nvcc nvcc -arch=sm _ 11 6LPLODUO\\\u000f\u0003WR\u0003EXLOG\u0003D\u0003NHUQHO\u0003WKDW\u0003UHOLHV\u0003RQ\u0003VKDUHG\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003\\RX\u0003QHHG\u0003WR\u0003 LQIRUP\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003WKH\u0003FRGH\u0003UHTXLUHV\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0015\u0003RU\u0003JUHDWHU nvcc -arch=sm _ 12 $WRPLF\u00032SHUDWLRQV\u00032YHUYLHZ \u0011\u0016\u0003 3URJUDPPHUV\u0003W\\SLFDOO\\\u0003QHYHU\u0003QHHG\u0003WR\u0003XVH\u0003DWRPLF\u0003RSHUDWLRQV\u0003ZKHQ\u0003ZULWLQJ\u0003WUDGL - WLRQDO\u0003VLQJOH\u0010WKUHDGHG\u0003DSSOLFDWLRQV\u0011\u0003,I\u0003WKLV\u0003LV\u0003WKH\u0003VLWXDWLRQ\u0003ZLWK\u0003\\RX\u000f\u0003GRQ\u01e2W\u0003ZRUU\\ \u0003 ZH\u0003SODQ\u0003WR\u0003H[SODLQ\u0003ZKDW\u0003WKH\\\u0003DUH\u0003DQG\u0003ZK\\\u0003ZH\u0003PLJKW\u0003QHHG\u0003WKHP\u0003LQ\u0003D\u0003PXOWLWKUHDGHG\u0003 DSSOLFDWLRQ\u0011\u00037R\u0003FODULI\\\u0003DWRPLF\u0003RSHUDWLRQV\u000f\u0003ZH\u01e2OO\u0003ORRN\u0003DW\u0003RQH\u0003RI\u0003WKH\u0003\u020cUVW\u0003WKLQJV\u0003\\RX\u0003 OHDUQHG\u0003ZKHQ\u0003OHDUQLQJ\u0003&\u0003RU\u0003&\u000e\u000e\u000f\u0003WKH\u0003LQFUHPHQW\u0003RSHUDWRU x++; 7KLV\u0003LV\u0003D\u0003VLQJOH\u0003H[SUHVVLRQ\u0003LQ\u0003VWDQGDUG\u0003&\u000f\u0003DQG\u0003DIWHU\u0003H[HFXWLQJ\u0003WKLV\u0003H[SUHVVLRQ\u000f\u0003WKH\u0003 YDOXH\u0003LQ\u0003x\u0003VKRXOG\u0003EH\u0003RQH\u0003JUHDWHU\u0003WKDQ\u0003LW\u0003ZDV\u0003SULRU\u0003WR\u0003H[HFXWLQJ\u0003WKH\u0003LQFUHPHQW\u0011\u0003%XW\u0003 ZKDW\u0003VHTXHQFH\u0003RI\u0003RSHUDWLRQV\u0003GRHV\u0003WKLV\u0003LPSO\\\"\u00037R\u0003DGG\u0003RQH\u0003WR\u0003WKH\u0003YDOXH\u0003RI\u0003 x,",
    "- ELOLW\\\u0003\u0014\u0011\u0016\u0003VXSSRUW\u0003ERWK\u0003RI\u0003WKHVH\u0003DV\u0003ZHOO\u0011 ,I\u0003LW\u0003WXUQV\u0003RXW\u0003WKDW\u0003\\RXU\u0003*38\u0003LV\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0013\u0003DQG\u0003LW\u0003GRHVQ\u01e2W\u0003VXSSRUW\u0003 DWRPLF\u0003RSHUDWLRQV\u0003RQ\u0003JOREDO\u0003PHPRU\\\u000f\u0003ZHOO\u0003PD\\EH\u0003ZH\u01e2YH\u0003MXVW\u0003JLYHQ\u0003\\RX\u0003WKH\u0003SHUIHFW\u0003 H[FXVH\u0003WR\u0003XSJUDGH\u0004\u0003,I\u0003\\RX\u0003GHFLGH\u0003\\RX\u01e2UH\u0003QRW\u0003UHDG\\\u0003WR\u0003VSOXUJH\u0003RQ\u0003D\u0003QHZ\u0003DWRPLFV\u0010 HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRU\u000f\u0003\\RX\u0003FDQ\u0003FRQWLQXH\u0003WR\u0003UHDG\u0003DERXW\u0003DWRPLF\u0003RSHUDWLRQV\u0003 DQG\u0003WKH\u0003VLWXDWLRQV\u0003LQ\u0003ZKLFK\u0003\\RX\u0003PLJKW\u0003ZDQW\u0003WR\u0003XVH\u0003WKHP\u0011\u0003%XW\u0003LI\u0003\\RX\u0003\u020cQG\u0003LW\u0003WRR\u0003 KHDUWEUHDNLQJ\u0003WKDW\u0003\\RX\u0003ZRQ\u01e2W\u0003EH\u0003DEOH\u0003WR\u0003UXQ\u0003WKH\u0003H[DPSOHV\u000f\u0003IHHO\u0003IUHH\u0003WR\u0003VNLS\u0003WR\u0003WKH\u0003 QH[W\u0003FKDSWHU\u0011 &203,/,1*\u0003)25\u0003$\u00030,1,080\u0003&20387(\u0003&$3$%,/,7< \u0011\u0015\u0011\u0015\u0003 6XSSRVH\u0003WKDW\u0003ZH\u0003KDYH\u0003ZULWWHQ\u0003FRGH\u0003WKDW\u0003UHTXLUHV\u0003D\u0003FHUWDLQ\u0003PLQLPXP\u0003FRPSXWH\u0003 FDSDELOLW\\\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LPDJLQH\u0003WKDW\u0003\\RX\u01e2YH\u0003\u020cQLVKHG\u0003WKLV\u0003FKDSWHU\u0003DQG\u0003JR\u0003RII\u0003WR\u0003 ZULWH\u0003DQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003UHOLHV\u0003KHDYLO\\\u0003RQ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u0011\u0003+DYLQJ\u0003VWXGLHG\u0003 WKLV\u0003WH[W\u0003H[WHQVLYHO\\\u000f\u0003\\RX\u0003NQRZ\u0003WKDW\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u0003UHTXLUH\u0003D\u0003FRPSXWH\u0003 FDSDELOLW\\\u0003RI\u0003\u0014\u0011\u0014\u0011\u00037R\u0003FRPSLOH\u0003\\RXU\u0003FRGH\u000f\u0003\\RX\u0003QHHG\u0003WR\u0003LQIRUP\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003WKH\u0003 NHUQHO\u0003FDQQRW\u0003UXQ\u0003RQ\u0003KDUGZDUH\u0003ZLWK\u0003D\u0003FDSDELOLW\\\u0003OHVV\u0003WKDQ\u0003\u0014\u0011\u0014\u0011\u00030RUHRYHU\u000f\u0003LQ\u0003WHOOLQJ\u0003 WKH\u0003FRPSLOHU\u0003WKLV\u000f\u0003\\RX\u01e2UH\u0003DOVR\u0003JLYLQJ\u0003LW\u0003WKH\u0003IUHHGRP\u0003WR\u0003PDNH\u0003RWKHU\u0003RSWLPL]DWLRQV\u0003 WKDW\u0003PD\\\u0003EH\u0003DYDLODEOH\u0003RQO\\\u0003RQ\u0003*38V\u0003RI\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0014\u0003RU\u0003JUHDWHU\u0011\u0003,QIRUPLQJ\u0003 Download from www.wowebook.comptgATOM ICS /one.lf/six.lf/eight.lfWKH\u0003FRPSLOHU\u0003RI\u0003WKLV\u0003LV\u0003DV\u0003VLPSOH\u0003DV\u0003DGGLQJ\u0003D\u0003FRPPDQG\u0010OLQH\u0003RSWLRQ\u0003WR\u0003\\RXU\u0003LQYRFD - WLRQ\u0003RI\u0003nvcc nvcc -arch=sm _ 11 6LPLODUO\\\u000f\u0003WR\u0003EXLOG\u0003D\u0003NHUQHO\u0003WKDW\u0003UHOLHV\u0003RQ\u0003VKDUHG\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003\\RX\u0003QHHG\u0003WR\u0003 LQIRUP\u0003WKH\u0003FRPSLOHU\u0003WKDW\u0003WKH\u0003FRGH\u0003UHTXLUHV\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0014\u0011\u0015\u0003RU\u0003JUHDWHU nvcc -arch=sm _ 12 $WRPLF\u00032SHUDWLRQV\u00032YHUYLHZ \u0011\u0016\u0003 3URJUDPPHUV\u0003W\\SLFDOO\\\u0003QHYHU\u0003QHHG\u0003WR\u0003XVH\u0003DWRPLF\u0003RSHUDWLRQV\u0003ZKHQ\u0003ZULWLQJ\u0003WUDGL - WLRQDO\u0003VLQJOH\u0010WKUHDGHG\u0003DSSOLFDWLRQV\u0011\u0003,I\u0003WKLV\u0003LV\u0003WKH\u0003VLWXDWLRQ\u0003ZLWK\u0003\\RX\u000f\u0003GRQ\u01e2W\u0003ZRUU\\ \u0003 ZH\u0003SODQ\u0003WR\u0003H[SODLQ\u0003ZKDW\u0003WKH\\\u0003DUH\u0003DQG\u0003ZK\\\u0003ZH\u0003PLJKW\u0003QHHG\u0003WKHP\u0003LQ\u0003D\u0003PXOWLWKUHDGHG\u0003 DSSOLFDWLRQ\u0011\u00037R\u0003FODULI\\\u0003DWRPLF\u0003RSHUDWLRQV\u000f\u0003ZH\u01e2OO\u0003ORRN\u0003DW\u0003RQH\u0003RI\u0003WKH\u0003\u020cUVW\u0003WKLQJV\u0003\\RX\u0003 OHDUQHG\u0003ZKHQ\u0003OHDUQLQJ\u0003&\u0003RU\u0003&\u000e\u000e\u000f\u0003WKH\u0003LQFUHPHQW\u0003RSHUDWRU x++; 7KLV\u0003LV\u0003D\u0003VLQJOH\u0003H[SUHVVLRQ\u0003LQ\u0003VWDQGDUG\u0003&\u000f\u0003DQG\u0003DIWHU\u0003H[HFXWLQJ\u0003WKLV\u0003H[SUHVVLRQ\u000f\u0003WKH\u0003 YDOXH\u0003LQ\u0003x\u0003VKRXOG\u0003EH\u0003RQH\u0003JUHDWHU\u0003WKDQ\u0003LW\u0003ZDV\u0003SULRU\u0003WR\u0003H[HFXWLQJ\u0003WKH\u0003LQFUHPHQW\u0011\u0003%XW\u0003 ZKDW\u0003VHTXHQFH\u0003RI\u0003RSHUDWLRQV\u0003GRHV\u0003WKLV\u0003LPSO\\\"\u00037R\u0003DGG\u0003RQH\u0003WR\u0003WKH\u0003YDOXH\u0003RI\u0003 x, we \u020cUVW\u0003QHHG\u0003WR\u0003NQRZ\u0003ZKDW\u0003YDOXH\u0003LV\u0003FXUUHQWO\\\u0003LQ\u0003 x\u0011\u0003$IWHU\u0003UHDGLQJ\u0003WKH\u0003YDOXH\u0003RI\u0003 x, we FDQ\u0003PRGLI\\\u0003LW\u0011\u0003$QG\u0003\u020cQDOO\\\u000f\u0003ZH\u0003QHHG\u0003WR\u0003ZULWH\u0003WKLV\u0003YDOXH\u0003EDFN\u0003WR\u0003 x\u0011\u0003 6R\u0003WKH\u0003WKUHH\u0003VWHSV\u0003LQ\u0003WKLV\u0003RSHUDWLRQ\u0003DUH\u0003DV\u0003IROORZV 5HDG\u0003WKH\u0003YDOXH\u0003LQ\u0003\u0014\u0011\u0003 x\u0011 $GG\u0003\u0014\u0003WR\u0003WKH\u0003YDOXH\u0003UHDG\u0003LQ\u0003VWHS\u0003\u0014\u0011\u0015\u0011\u0003 :ULWH\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003\u0016\u0011\u0003 x\u0011 6RPHWLPHV\u000f\u0003WKLV\u0003SURFHVV\u0003LV\u0003JHQHUDOO\\\u0003FDOOHG\u0003D\u0003 read-modify-write \u0003RSHUDWLRQ\u000f\u0003VLQFH\u0003 VWHS\u0003\u0015\u0003FDQ\u0003FRQVLVW\u0003RI\u0003DQ\\\u0003RSHUDWLRQ\u0003WKDW\u0003FKDQJHV\u0003WKH\u0003YDOXH\u0003WKDW\u0003ZDV\u0003UHDG\u0003IURP\u0003 x\u0011 1RZ\u0003FRQVLGHU\u0003D\u0003VLWXDWLRQ\u0003ZKHUH\u0003WZR\u0003WKUHDGV\u0003QHHG\u0003WR\u0003SHUIRUP\u0003WKLV\u0003LQFUHPHQW\u0003RQ\u0003 WKH\u0003YDOXH\u0003LQ\u0003 x\u0011\u0003/HW\u01e2V\u0003FDOO\u0003WKHVH\u0003WKUHDGV\u0003 A\u0003DQG\u0003B\u0011\u0003)RU\u0003A\u0003DQG\u0003B\u0003WR\u0003ERWK\u0003LQFUHPHQW\u0003WKH\u0003 YDOXH\u0003LQ\u0003x\u000f\u0003ERWK\u0003WKUHDGV\u0003QHHG\u0003WR\u0003SHUIRUP\u0003WKH\u0003WKUHH\u0003RSHUDWLRQV\u0003ZH\u01e2YH\u0003GHVFULEHG\u0011\u0003 /HW\u01e2V\u0003VXSSRVH\u0003 x\u0003VWDUWV\u0003ZLWK\u0003WKH\u0003YDOXH\u0003\u001a\u0011\u0003,GHDOO\\\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WKUHDG\u0003 A\u0003DQG\u0003WKUHDG\u0003 B\u0003WR\u0003GR\u0003WKH\u0003VWHSV\u0003VKRZQ\u0003LQ\u00037DEOH\u0003 \u0011\u0015\u0011 Download from www.wowebook.comptgATOM IC OPERATIONS OVERV IEW /one.lf/six.lf/nine.lf \u0011\u0016\u0003$720,&\u000323(5$7,216\u000329(59,(:Table 9.2 7ZR\u0003WKUHDGV\u0003LQFUHPHQWLQJ\u0003WKH\u0003YDOXH\u0003LQ\u0003 x STEP EXAMPLE \u0014\u0011\u00037KUHDG\u0003$\u0003UHDGV\u0003WKH\u0003YDOXH\u0003LQ\u0003 x\u0011 A UHDGV\u0003\u001a\u0003IURP\u0003 x\u0011 \u0015\u0011\u00037KUHDG\u0003$\u0003DGGV\u0003\u0014\u0003WR\u0003WKH\u0003YDOXH\u0003LW\u0003UHDG\u0011 A FRPSXWHV\u0003\u001b\u0011 \u0016\u0011\u00037KUHDG\u0003$\u0003ZULWHV\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003 x\u0011 x <- 8\u0011 \u0017\u0011\u00037KUHDG\u0003%\u0003UHDGV\u0003WKH\u0003YDOXH\u0003LQ\u0003 x\u0011 B\u0003UHDGV\u0003\u001b\u0003IURP\u0003 x\u0011 \u0018\u0011\u00037KUHDG\u0003%\u0003DGGV\u0003\u0014\u0003WR\u0003WKH\u0003YDOXH\u0003LW\u0003UHDG\u0011 B\u0003FRPSXWHV\u0003 \u0011 \u0019\u0011\u00037KUHDG\u0003%\u0003ZULWHV\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003 x\u0011 x <- 9\u00116LQFH\u0003x\u0003VWDUWV\u0003ZLWK\u0003WKH\u0003YDOXH\u0003\u001a\u0003DQG\u0003JHWV\u0003LQFUHPHQWHG\u0003E\\\u0003WZR\u0003WKUHDGV\u000f\u0003ZH\u0003ZRXOG\u0003 H[SHFW\u0003LW\u0003WR\u0003KROG\u0003WKH\u0003YDOXH\u0003 \u0003DIWHU\u0003WKH\\\u01e2YH\u0003FRPSOHWHG\u0011\u0003,Q\u0003WKH\u0003SUHYLRXV\u0003VHTXHQFH\u0003 RI\u0003RSHUDWLRQV\u000f\u0003WKLV\u0003LV\u0003LQGHHG\u0003WKH\u0003UHVXOW\u0003ZH\u0003REWDLQ\u0011\u00038QIRUWXQDWHO\\\u000f\u0003WKHUH\u0003DUH\u0003PDQ\\\u0003 RWKHU\u0003RUGHULQJV\u0003RI\u0003WKHVH\u0003VWHSV\u0003WKDW\u0003SURGXFH\u0003WKH\u0003ZURQJ\u0003YDOXH\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003 FRQVLGHU\u0003WKH\u0003RUGHULQJ\u0003VKRZQ\u0003LQ\u00037DEOH\u0003 \u0011\u0016\u0003ZKHUH\u0003WKUHDG\u0003$\u0003DQG\u0003WKUHDG\u0003%\u01e2V\u0003RSHUD - WLRQV\u0003EHFRPH\u0003LQWHUOHDYHG\u0003ZLWK\u0003HDFK\u0003RWKHU\u0011 Table 9.3 7ZR\u0003WKUHDGV\u0003LQFUHPHQWLQJ\u0003WKH\u0003YDOXH\u0003LQ\u0003 x\u0003ZLWK\u0003LQWHUOHDYHG\u0003RSHUDWLRQV\u0003 STEP EXAMPLE 7KUHDG\u0003$\u0003UHDGV\u0003WKH\u0003YDOXH\u0003LQ\u0003 x\u0011 A\u0003UHDGV\u0003\u001a\u0003IURP\u0003 x\u0011 7KUHDG\u0003%\u0003UHDGV\u0003WKH\u0003YDOXH\u0003LQ\u0003 x\u0011\u0003 B\u0003UHDGV\u0003\u001a\u0003IURP\u0003 x\u0011 7KUHDG\u0003$\u0003DGGV\u0003\u0014\u0003WR\u0003WKH\u0003YDOXH\u0003LW\u0003UHDG\u0011\u0003 A\u0003FRPSXWHV\u0003\u001b\u0011 7KUHDG\u0003%\u0003DGGV\u0003\u0014\u0003WR\u0003WKH\u0003YDOXH\u0003LW\u0003UHDG\u0011\u0003 B\u0003FRPSXWHV\u0003\u001b\u0011 7KUHDG\u0003$\u0003ZULWHV\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003 x\u0011\u0003 x <- 8\u0011 7KUHDG\u0003%\u0003ZULWHV\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003 x\u0011 x <- 8\u0011 Download from www.wowebook.comptgATOM ICS /one.lf/seven.lf/zero.lf7KHUHIRUH\u000f\u0003LI\u0003RXU\u0003WKUHDGV\u0003JHW\u0003VFKHGXOHG\u0003XQIDYRUDEO\\\u000f\u0003ZH\u0003HQG\u0003XS\u0003FRPSXWLQJ\u0003WKH\u0003 ZURQJ\u0003UHVXOW\u0011\u00037KHUH\u0003DUH\u0003PDQ\\\u0003RWKHU\u0003RUGHULQJV\u0003IRU\u0003WKHVH\u0003VL[\u0003RSHUDWLRQV\u000f\u0003VRPH\u0003 RI\u0003ZKLFK\u0003SURGXFH\u0003FRUUHFW\u0003UHVXOWV\u0003DQG\u0003VRPH\u0003RI\u0003ZKLFK\u0003GR\u0003QRW\u0011\u0003:KHQ\u0003PRYLQJ\u0003IURP\u0003 D\u0003VLQJOH\u0010WKUHDGHG\u0003WR\u0003D\u0003PXOWLWKUHDGHG\u0003YHUVLRQ\u0003RI\u0003WKLV\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003VXGGHQO\\\u0003 KDYH\u0003SRWHQWLDO\u0003IRU\u0003XQSUHGLFWDEOH\u0003UHVXOWV\u0003LI\u0003PXOWLSOH\u0003WKUHDGV\u0003QHHG\u0003WR\u0003UHDG\u0003RU\u0003ZULWH\u0003 VKDUHG\u0003YDOXHV\u0011\u0003 ,Q\u0003WKH\u0003SUHYLRXV\u0003H[DPSOH\u000f\u0003ZH\u0003QHHG\u0003D\u0003ZD\\\u0003WR\u0003SHUIRUP\u0003WKH\u0003 read-modify-write \u0003ZLWKRXW\u0003 EHLQJ\u0003LQWHUUXSWHG\u0003E\\\u0003DQRWKHU\u0003WKUHDG\u0011\u00032U\u0003PRUH\u0003VSHFL\u020cFDOO\\\u000f\u0003QR\u0003RWKHU\u0003WKUHDG\u0003FDQ\u0003 UHDG\u0003RU\u0003ZULWH\u0003WKH\u0003YDOXH\u0003RI\u0003 x\u0003XQWLO\u0003ZH\u0003KDYH\u0003FRPSOHWHG\u0003RXU\u0003RSHUDWLRQ\u0011\u0003%HFDXVH\u0003 WKH\u0003H[HFXWLRQ\u0003RI\u0003WKHVH\u0003RSHUDWLRQV\u0003FDQQRW\u0003EH\u0003EURNHQ\u0003LQWR\u0003VPDOOHU\u0003SDUWV\u0003E\\\u0003RWKHU\u0003 WKUHDGV\u000f\u0003ZH\u0003FDOO\u0003RSHUDWLRQV\u0003WKDW\u0003VDWLVI\\\u0003WKLV\u0003FRQVWUDLQW\u0003DV\u0003 atomic \u0011\u0003&8'$\u0003&\u0003 VXSSRUWV\u0003VHYHUDO\u0003DWRPLF\u0003RSHUDWLRQV\u0003WKDW\u0003DOORZ\u0003\\RX\u0003WR\u0003RSHUDWH\u0003VDIHO\\\u0003RQ\u0003PHPRU\\\u000f\u0003 HYHQ\u0003ZKHQ\u0003WKRXVDQGV\u0003RI\u0003WKUHDGV\u0003DUH\u0003SRWHQWLDOO\\\u0003FRPSHWLQJ\u0003IRU\u0003DFFHVV\u0011 1RZ\u0003ZH\u01e2OO\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003DQ\u0003H[DPSOH\u0003WKDW\u0003UHTXLUHV\u0003WKH\u0003XVH\u0003RI\u0003DWRPLF\u0003RSHUDWLRQV\u0003WR\u0003 FRPSXWH\u0003FRUUHFW\u0003UHVXOWV\u0011 &RPSXWLQJ\u0003+LVWRJUDPV \u0011\u0017\u0003 2IWHQWLPHV\u000f\u0003DOJRULWKPV\u0003UHTXLUH\u0003WKH\u0003FRPSXWDWLRQ\u0003RI\u0003D\u0003 histogram \u0003RI\u0003VRPH\u0003VHW\u0003RI\u0003 GDWD\u0011\u0003,I\u0003\\RX\u0003KDYHQ\u01e2W\u0003KDG\u0003DQ\\\u0003H[SHULHQFH\u0003ZLWK\u0003KLVWRJUDPV\u0003LQ\u0003WKH\u0003SDVW\u000f\u0003WKDW\u01e2V\u0003QRW\u0003 D\u0003ELJ\u0003GHDO\u0011\u0003(VVHQWLDOO\\\u000f\u0003JLYHQ\u0003D\u0003GDWD\u0003VHW\u0003WKDW\u0003FRQVLVWV\u0003RI\u0003VRPH\u0003VHW\u0003RI\u0003HOHPHQWV\u000f\u0003D\u0003 KLVWRJUDP\u0003UHSUHVHQWV\u0003D\u0003FRXQW\u0003RI\u0003WKH\u0003IUHTXHQF\\\u0003RI\u0003HDFK\u0003HOHPHQW\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LI\u0003 ZH\u0003FUHDWHG\u0003D\u0003KLVWRJUDP\u0003RI\u0003WKH\u0003OHWWHUV\u0003LQ\u0003WKH\u0003SKUDVH\u0003 Programming with CUDA C , we ZRXOG\u0003HQG\u0003XS\u0003ZLWK\u0003WKH\u0003UHVXOW\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003 \u0011\u0014\u0011 $OWKRXJK\u0003VLPSOH\u0003WR\u0003GHVFULEH\u0003DQG\u0003XQGHUVWDQG\u000f\u0003FRPSXWLQJ\u0003KLVWRJUDPV\u0003RI\u0003GDWD\u0003 DULVHV\u0003VXUSULVLQJO\\\u0003RIWHQ\u0003LQ\u0003FRPSXWHU\u0003VFLHQFH\u0011\u0003,W\u01e2V\u0003XVHG\u0003LQ\u0003DOJRULWKPV\u0003IRU\u0003LPDJH\u0003 SURFHVVLQJ\u000f\u0003GDWD\u0003FRPSUHVVLRQ\u000f\u0003FRPSXWHU\u0003YLVLRQ\u000f\u0003PDFKLQH\u0003OHDUQLQJ\u000f\u0003DXGLR\u0003 HQFRGLQJ\u000f\u0003DQG\u0003PDQ\\\u0003RWKHUV\u0011\u0003:H\u0003ZLOO\u0003XVH\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003DV\u0003WKH\u0003DOJRULWKP\u0003 IRU\u0003WKH\u0003IROORZLQJ\u0003FRGH\u0003H[DPSOHV\u0011\u0002\u0002\u0001\u0002\u0001\u0002\u0002\u0001\u0001\u0001\u0002\u0001\u0001\u0001\u0003\u0004\u0005\u0006\u0007\b \u000e\u000f\u0010Figure 9.1 /HWWHU\u0003IUHTXHQF\\\u0003KLVWRJUDP\u0003EXLOW\u0003IURP\u0003WKH\u0003VWULQJ\u0003 Programming with CUDA C Download from www.wowebook.comptg&&&222 000 333777 , , , 111 ***\u0003\u0003\u0003, ,,6 6 67 7 72 2 2* * *5 5 5$ $ $0 0 06 6 6 /one.lf/seven.lf/one.lf \u0011\u0017\u0003888 +++&38\u0003+,672*5$0\u0003&20387$7,21 \u0011\u0017\u0011\u0014\u0003 %HFDXVH\u0003WKH\u0003FRPSXWDWLRQ\u0003RI\u0003D\u0003KLVWRJUDP\u0003PD\\\u0003QRW\u0003EH\u0003IDPLOLDU\u0003WR\u0003DOO\u0003UHDGHUV\u000f\u0003ZH\u01e2OO\u0003 VWDUW\u0003ZLWK\u0003DQ\u0003H[DPSOH\u0003RI\u0003KRZ\u0003WR\u0003FRPSXWH\u0003D\u0003KLVWRJUDP\u0003RQ\u0003WKH\u0003&38\u0011\u00037KLV\u0003H[DPSOH\u0003 ZLOO\u0003DOVR\u0003VHUYH\u0003WR\u0003LOOXVWUDWH\u0003KRZ\u0003FRPSXWLQJ\u0003D\u0003KLVWRJUDP\u0003LV\u0003UHODWLYHO\\\u0003VLPSOH\u0003LQ\u0003D\u0003 VLQJOH\u0010WKUHDGHG\u0003&38\u0003DSSOLFDWLRQ\u0011\u00037KH\u0003DSSOLFDWLRQ\u0003ZLOO\u0003EH\u0003JLYHQ\u0003VRPH\u0003ODUJH\u0003VWUHDP\u0003 RI\u0003GDWD\u0011\u0003,Q\u0003DQ\u0003DFWXDO\u0003DSSOLFDWLRQ\u000f\u0003WKH\u0003GDWD\u0003PLJKW\u0003VLJQLI\\\u0003DQ\\WKLQJ\u0003IURP\u0003SL[HO\u0003FRORUV\u0003 WR\u0003DXGLR\u0003VDPSOHV\u000f\u0003EXW\u0003LQ\u0003RXU\u0003VDPSOH\u0003DSSOLFDWLRQ\u000f\u0003LW\u0003ZLOO\u0003EH\u0003D\u0003VWUHDP\u0003RI\u0003UDQGRPO\\\u0003 JHQHUDWHG\u0003E\\WHV\u0011\u0003:H\u0003FDQ\u0003FUHDWH\u0003WKLV\u0003UDQGRP\u0003VWUHDP\u0003RI\u0003E\\WHV\u0003XVLQJ\u0003D\u0003XWLOLW\\\u0003IXQF - WLRQ\u0003ZH\u0003KDYH\u0003SURYLGHG\u0003FDOOHG\u0003 big_random_block() \u0011\u0003,Q\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003 FUHDWH\u0003\u0014\u0013\u00130%\u0003RI\u0003UDQGRP\u0003GDWD\u0011 #include \"../common/book.h\" #define SIZE (100*1024*1024) int main( void ) { unsigned char *buffer = ( unsigned char *)big_random_block( SIZE ); 6LQFH\u0003HDFK\u0003UDQGRP\u0003\u001b\u0010ELW\u0003E\\WH\u0003FDQ\u0003EH\u0003DQ\\\u0003RI\u0003\u0015\u0018\u0019\u0003GLIIHUHQW\u0003YDOXHV\u0003 IURP\u0003 0x00\u0003WR\u0003 0xFF \u000f\u0003RXU\u0003KLVWRJUDP\u0003QHHGV\u0003WR\u0003FRQWDLQ\u0003\u0015\u0018\u0019\u0003 bins\u0003LQ\u0003RUGHU\u0003WR\u0003NHHS\u0003WUDFN\u0003RI\u0003WKH\u0003 QXPEHU\u0003RI\u0003WLPHV\u0003HDFK\u0003YDOXH\u0003KDV\u0003EHHQ\u0003VHHQ\u0003LQ\u0003WKH\u0003GDWD\u0011\u0003:H\u0003FUHDWH\u0003D\u0003\u0015\u0018\u0019\u0010ELQ\u0003DUUD\\\u0003 DQG\u0003LQLWLDOL]H\u0003DOO\u0003WKH\u0003ELQ\u0003FRXQWV\u0003WR\u0003]HUR\u0011 unsigned int histo[256]; for (int i=0; i<256; i++) histo[i] = 0; 2QFH\u0003RXU\u0003KLVWRJUDP\u0003KDV\u0003EHHQ\u0003FUHDWHG\u0003DQG\u0003DOO\u0003WKH\u0003ELQV\u0003DUH\u0003LQLWLDOL]HG\u0003WR\u0003]HUR\u000f\u0003 ZH\u0003QHHG\u0003WR\u0003WDEXODWH\u0003WKH\u0003IUHTXHQF\\\u0003ZLWK\u0003ZKLFK\u0003HDFK\u0003YDOXH\u0003DSSHDUV\u0003LQ\u0003WKH\u0003GDWD\u0003 FRQWDLQHG\u0003LQ\u0003 buffer[] \u0011\u00037KH\u0003LGHD\u0003KHUH\u0003LV\u0003WKDW\u0003ZKHQHYHU\u0003ZH\u0003VHH\u0003VRPH\u0003YDOXH\u0003 z\u0003LQ\u0003 WKH\u0003DUUD\\\u0003 buffer[] \u000f\u0003ZH\u0003ZDQW\u0003WR\u0003LQFUHPHQW\u0003WKH\u0003YDOXH\u0003LQ\u0003ELQ\u0003 z\u0003RI\u0003RXU\u0003KLVWRJUDP\u0011\u0003 7KLV\u0003ZD\\\u000f\u0003ZH\u01e2UH\u0003FRXQWLQJ\u0003WKH\u0003QXPEHU\u0003RI\u0003WLPHV\u0003ZH\u0003KDYH\u0003VHHQ\u0003DQ\u0003RFFXUUHQFH\u0003RI\u0003WKH\u0003 YDOXH\u0003z\u0011 Download from www.wowebook.comptgATOM ICS /one.lf/seven.lf/two.lf,I\u0003buffer[i] \u0003LV\u0003WKH\u0003FXUUHQW\u0003YDOXH\u0003ZH\u0003DUH\u0003ORRNLQJ\u0003DW\u000f\u0003ZH\u0003ZDQW\u0003WR\u0003LQFUHPHQW\u0003WKH\u0003 FRXQW\u0003ZH\u0003KDYH\u0003LQ\u0003WKH\u0003ELQ\u0003QXPEHUHG\u0003 buffer[i] \u0011\u00036LQFH\u0003ELQ\u0003 buffer[i] \u0003LV\u0003ORFDWHG\u0003 DW\u0003histo[buffer[i]] \u000f\u0003ZH\u0003FDQ\u0003LQFUHPHQW\u0003WKH\u0003DSSURSULDWH\u0003FRXQWHU\u0003LQ\u0003D\u0003VLQJOH\u0003 OLQH\u0003RI\u0003FRGH\u0011 histo[buffer[i]]++; :H\u0003GR\u0003WKLV\u0003IRU\u0003HDFK\u0003HOHPHQW\u0003LQ\u0003 buffer[] \u0003ZLWK\u0003D\u0003VLPSOH\u0003 for()\u0003ORRS \u0003 for (int i=0; i<SIZE; i++) histo[buffer[i]]++; $W\u0003WKLV\u0003SRLQW\u000f\u0003ZH\u01e2YH\u0003FRPSOHWHG\u0003RXU\u0003KLVWRJUDP\u0003RI\u0003WKH\u0003LQSXW\u0003GDWD\u0011\u0003,Q\u0003D\u0003IXOO\u0003DSSOLFD - WLRQ\u000f\u0003WKLV\u0003KLVWRJUDP\u0003PLJKW\u0003EH\u0003WKH\u0003LQSXW\u0003WR\u0003WKH\u0003QH[W\u0003VWHS\u0003RI\u0003FRPSXWDWLRQ\u0011\u0003,Q\u0003RXU\u0003 VLPSOH\u0003H[DPSOH\u000f\u0003KRZHYHU\u000f\u0003WKLV\u0003LV\u0003DOO\u0003ZH\u0003FDUH\u0003WR\u0003FRPSXWH\u000f\u0003VR\u0003ZH\u0003HQG\u0003WKH\u0003DSSOLFD - WLRQ\u0003E\\\u0003YHULI\\LQJ\u0003WKDW\u0003DOO\u0003WKH\u0003ELQV\u0003RI\u0003RXU\u0003KLVWRJUDP\u0003VXP\u0003WR\u0003WKH\u0003H[SHFWHG\u0003YDOXH\u0011 long histoCount = 0; for (int i=0; i<256; i++) { histoCount += histo[i]; } printf( \"Histogram Sum: %ld\\n\" , histoCount ); ,I\u0003\\RX\u01e2YH\u0003IROORZHG\u0003FORVHO\\\u000f\u0003\\RX\u0003ZLOO\u0003UHDOL]H\u0003WKDW\u0003WKLV\u0003VXP\u0003ZLOO\u0003DOZD\\V\u0003EH\u0003WKH\u0003VDPH\u000f\u0003 UHJDUGOHVV\u0003RI\u0003WKH\u0003UDQGRP\u0003LQSXW\u0003DUUD\\\u0011\u0003(DFK\u0003ELQ\u0003FRXQWV\u0003WKH\u0003QXPEHU\u0003RI\u0003WLPHV\u0003ZH\u0003 KDYH\u0003VHHQ\u0003WKH\u0003FRUUHVSRQGLQJ\u0003GDWD\u0003HOHPHQW\u000f\u0003VR\u0003WKH\u0003VXP\u0003RI\u0003DOO\u0003RI\u0003WKHVH\u0003ELQV\u0003VKRXOG\u0003 EH\u0003WKH\u0003WRWDO\u0003QXPEHU\u0003RI\u0003GDWD\u0003HOHPHQWV\u0003ZH\u01e2YH\u0003H[DPLQHG\u0011\u0003,Q\u0003RXU\u0003FDVH\u000f\u0003WKLV\u0003ZLOO\u0003EH\u0003WKH\u0003 YDOXH\u0003SIZE\u0011 $QG\u0003QHHGOHVV\u0003WR\u0003VD\\\u0003 EXW\u0003ZH\u0003ZLOO\u0003DQ\\ZD\\ \u000f\u0003ZH\u0003FOHDQ\u0003XS\u0003DIWHU\u0003RXUVHOYHV\u0003DQG\u0003UHWXUQ\u0011 free( buffer ); return 0; } Download from www.wowebook.comptg&&&222 000 333777 , , , 111 ***\u0003\u0003\u0003, ,,6 6 67 7 72 2 2* * *5 5 5$ $ $0 0 06 6 6 /one.lf/seven.lf/three.lf \u0011\u0017\u0003888 +++2Q\u0003RXU\u0003EHQFKPDUN\u0003PDFKLQH\u000f\u0003D\u0003&RUH\u0003\u0015\u0003'XR\u000f\u0003WKH\u0003KLVWRJUDP\u0003RI\u0003WKLV\u0003\u0014\u0013\u00130%\u0003DUUD\\\u0003RI\u0003 GDWD\u0003FDQ\u0003EH\u0003FRQVWUXFWHG\u0003LQ\u0003\u0013\u0003\u0011\u0017\u0014\u0019\u0003VHFRQGV\u0011\u00037KLV\u0003ZLOO\u0003SURYLGH\u0003D\u0003EDVHOLQH\u0003SHUIRU - PDQFH\u0003IRU\u0003WKH\u0003*38\u0003YHUVLRQ\u0003ZH\u0003LQWHQG\u0003WR\u0003ZULWH\u0011\u0003 *38\u0003+,672*5$0\u0003&20387$7,21 \u0011\u0017\u0011\u0015\u0003 :H\u0003ZRXOG\u0003OLNH\u0003WR\u0003DGDSW\u0003WKH\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003H[DPSOH\u0003WR\u0003UXQ\u0003RQ\u0003WKH\u0003*38\u0011\u0003 ,I\u0003RXU\u0003LQSXW\u0003DUUD\\\u0003LV\u0003ODUJH\u0003HQRXJK\u000f\u0003LW\u0003PLJKW\u0003VDYH\u0003D\u0003FRQVLGHUDEOH\u0003DPRXQW\u0003RI\u0003WLPH\u0003 WR\u0003KDYH\u0003GLIIHUHQW\u0003WKUHDGV\u0003H[DPLQLQJ\u0003GLIIHUHQW\u0003SDUWV\u0003RI\u0003WKH\u0003EXIIHU\u0011\u0003+DYLQJ\u0003GLIIHUHQW\u0003 WKUHDGV\u0003UHDG\u0003GLIIHUHQW\u0003SDUWV\u0003RI\u0003WKH\u0003LQSXW\u0003VKRXOG\u0003EH\u0003HDV\\\u0003HQRXJK\u0011\u0003$IWHU\u0003DOO\u000f\u0003LW\u01e2V\u0003YHU\\\u0003 VLPLODU\u0003WR\u0003WKLQJV\u0003ZH\u0003KDYH\u0003VHHQ\u0003VR\u0003IDU\u0011\u00037KH\u0003SUREOHP\u0003ZLWK\u0003FRPSXWLQJ\u0003D\u0003KLVWRJUDP\u0003 IURP\u0003WKH\u0003LQSXW\u0003GDWD\u0003DULVHV\u0003IURP\u0003WKH\u0003IDFW\u0003WKDW\u0003PXOWLSOH\u0003WKUHDGV\u0003PD\\\u0003ZDQW\u0003WR\u0003LQFUH - PHQW\u0003WKH\u0003VDPH\u0003ELQ\u0003RI\u0003WKH\u0003RXWSXW\u0003KLVWRJUDP\u0003DW\u0003WKH\u0003VDPH\u0003WLPH\u0011\u0003,Q\u0003WKLV\u0003VLWXDWLRQ\u000f\u0003ZH\u0003 ZLOO\u0003QHHG\u0003WR\u0003XVH\u0003DWRPLF\u0003LQFUHPHQWV\u0003WR\u0003DYRLG\u0003D\u0003VLWXDWLRQ\u0003OLNH\u0003WKH\u0003RQH\u0003GHVFULEHG\u0003LQ\u0003 6HFWLRQ\u0003 \u0011\u0015 \u0003$WRPLF\u00032SHUDWLRQV\u00032YHUYLHZ\u0011 2XU\u0003main()\u0003URXWLQH\u0003ORRNV\u0003YHU\\\u0003VLPLODU\u0003WR\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003DOWKRXJK\u0003ZH\u0003ZLOO\u0003QHHG\u0003 WR\u0003DGG\u0003VRPH\u0003RI\u0003WKH\u0003&8'$\u0003&\u0003SOXPELQJ\u0003LQ\u0003RUGHU\u0003WR\u0003JHW\u0003LQSXW\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003UHVXOWV\u0003 IURP\u0003WKH\u0003*38\u0011\u0003+RZHYHU\u000f\u0003ZH\u0003VWDUW\u0003H[DFWO\\\u0003DV\u0003ZH\u0003GLG\u0003RQ\u0003WKH\u0003&38 int main( void ) { unsigned char *buffer = ( unsigned char *)big_random_block( SIZE ); :H\u0003ZLOO\u0003EH\u0003LQWHUHVWHG\u0003LQ\u0003PHDVXULQJ\u0003KRZ\u0003RXU\u0003FRGH\u0003SHUIRUPV\u000f\u0003VR\u0003ZH\u0003LQLWLDOL]H\u0003HYHQWV\u0003 IRU\u0003WLPLQJ\u0003H[DFWO\\\u0003OLNH\u0003ZH\u0003DOZD\\V\u0003KDYH\u0011 cudaEvent_t start, stop; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); $IWHU\u0003VHWWLQJ\u0003XS\u0003RXU\u0003LQSXW\u0003GDWD\u0003DQG\u0003HYHQWV\u000f\u0003ZH\u0003ORRN\u0003WR\u0003*38\u0003PHPRU\\\u0011\u0003:H\u0003 ZLOO\u0003QHHG\u0003WR\u0003DOORFDWH\u0003VSDFH\u0003IRU\u0003RXU\u0003UDQGRP\u0003LQSXW\u0003GDWD\u0003DQG\u0003RXU\u0003RXWSXW\u0003KLVWR - JUDP\u0011\u0003$IWHU\u0003DOORFDWLQJ\u0003WKH\u0003LQSXW\u0003EXIIHU\u000f\u0003ZH\u0003FRS\\\u0003WKH\u0003DUUD\\\u0003ZH\u0003JHQHUDWHG\u0003ZLWK\u0003 Download from www.wowebook.comptgATOM ICS /one.lf/seven.lf/four.lfbig_random_block() \u0003WR\u0003WKH\u0003*38\u0011\u0003/LNHZLVH\u000f\u0003DIWHU\u0003DOORFDWLQJ\u0003WKH\u0003KLVWRJUDP\u000f\u0003ZH\u0003 LQLWLDOL]H\u0003LW\u0003WR\u0003]HUR\u0003MXVW\u0003OLNH\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003&38\u0003YHUVLRQ\u0011 // allocate memory on the GPU for the file's data unsigned char *dev_buffer; unsigned int *dev_histo; HANDLE_ERROR( cudaMalloc( ( void**)&dev_buffer, SIZE ) ); HANDLE_ERROR( cudaMemcpy( dev_buffer, buffer, SIZE, cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_histo, 256",
    "0 ) ); $IWHU\u0003VHWWLQJ\u0003XS\u0003RXU\u0003LQSXW\u0003GDWD\u0003DQG\u0003HYHQWV\u000f\u0003ZH\u0003ORRN\u0003WR\u0003*38\u0003PHPRU\\\u0011\u0003:H\u0003 ZLOO\u0003QHHG\u0003WR\u0003DOORFDWH\u0003VSDFH\u0003IRU\u0003RXU\u0003UDQGRP\u0003LQSXW\u0003GDWD\u0003DQG\u0003RXU\u0003RXWSXW\u0003KLVWR - JUDP\u0011\u0003$IWHU\u0003DOORFDWLQJ\u0003WKH\u0003LQSXW\u0003EXIIHU\u000f\u0003ZH\u0003FRS\\\u0003WKH\u0003DUUD\\\u0003ZH\u0003JHQHUDWHG\u0003ZLWK\u0003 Download from www.wowebook.comptgATOM ICS /one.lf/seven.lf/four.lfbig_random_block() \u0003WR\u0003WKH\u0003*38\u0011\u0003/LNHZLVH\u000f\u0003DIWHU\u0003DOORFDWLQJ\u0003WKH\u0003KLVWRJUDP\u000f\u0003ZH\u0003 LQLWLDOL]H\u0003LW\u0003WR\u0003]HUR\u0003MXVW\u0003OLNH\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003&38\u0003YHUVLRQ\u0011 // allocate memory on the GPU for the file's data unsigned char *dev_buffer; unsigned int *dev_histo; HANDLE_ERROR( cudaMalloc( ( void**)&dev_buffer, SIZE ) ); HANDLE_ERROR( cudaMemcpy( dev_buffer, buffer, SIZE, cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_histo, 256 * sizeof( long ) ) ); HANDLE_ERROR( cudaMemset( dev_histo, 0, 256 * sizeof( int ) ) ); <RX\u0003PD\\\u0003QRWLFH\u0003WKDW\u0003ZH\u0003VOLSSHG\u0003LQ\u0003D\u0003QHZ\u0003&8'$\u0003UXQWLPH\u0003IXQFWLRQ\u000f\u0003 cudaMemset() \u0011\u0003 7KLV\u0003IXQFWLRQ\u0003KDV\u0003D\u0003VLPLODU\u0003VLJQDWXUH\u0003WR\u0003WKH\u0003VWDQGDUG\u0003&\u0003IXQFWLRQ\u0003 memset() \u000f\u0003DQG\u0003 WKH\u0003WZR\u0003IXQFWLRQV\u0003EHKDYH\u0003QHDUO\\\u0003LGHQWLFDOO\\\u0011\u00037KH\u0003GLIIHUHQFH\u0003LQ\u0003VLJQDWXUH\u0003LV\u0003EHWZHHQ\u0003 WKHVH\u0003IXQFWLRQV\u0003LV\u0003WKDW\u0003 cudaMemset() \u0003UHWXUQV\u0003DQ\u0003HUURU\u0003FRGH\u0003ZKLOH\u0003WKH\u0003&\u0003OLEUDU\\\u0003 IXQFWLRQ\u0003 memset() \u0003GRHV\u0003QRW\u0011\u00037KLV\u0003HUURU\u0003FRGH\u0003ZLOO\u0003LQIRUP\u0003WKH\u0003FDOOHU\u0003ZKHWKHU\u0003 DQ\\WKLQJ\u0003EDG\u0003KDSSHQHG\u0003ZKLOH\u0003DWWHPSWLQJ\u0003WR\u0003VHW\u0003*38\u0003PHPRU\\\u0011\u0003$VLGH\u0003IURP\u0003WKH\u0003 HUURU\u0003FRGH\u0003UHWXUQ\u000f\u0003WKH\u0003RQO\\\u0003GLIIHUHQFH\u0003LV\u0003WKDW\u0003 cudaMemset() \u0003RSHUDWHV\u0003RQ\u0003*38\u0003 PHPRU\\\u0003ZKLOH\u0003 memset() \u0003RSHUDWHV\u0003RQ\u0003KRVW\u0003PHPRU\\\u0011\u0003 $IWHU\u0003LQLWLDOL]LQJ\u0003WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u000f\u0003ZH\u0003DUH\u0003UHDG\\\u0003WR\u0003FRPSXWH\u0003RXU\u0003KLVWR - JUDP\u0011\u0003<RX\u0003ZLOO\u0003VHH\u0003KRZ\u0003ZH\u0003SUHSDUH\u0003DQG\u0003ODXQFK\u0003WKH\u0003KLVWRJUDP\u0003NHUQHO\u0003PRPHQWDULO\\\u0011\u0003 )RU\u0003WKH\u0003WLPH\u0003EHLQJ\u000f\u0003DVVXPH\u0003WKDW\u0003ZH\u0003KDYH\u0003FRPSXWHG\u0003WKH\u0003KLVWRJUDP\u0003RQ\u0003WKH\u0003*38\u0011\u0003 $IWHU\u0003\u020cQLVKLQJ\u000f\u0003ZH\u0003QHHG\u0003WR\u0003FRS\\\u0003WKH\u0003KLVWRJUDP\u0003EDFN\u0003WR\u0003WKH\u0003&38\u000f\u0003VR\u0003ZH\u0003DOORFDWH\u0003D\u0003 \u0015\u0018\u0019\u0010HQWU\\\u0003DUUD\\\u0003DQG\u0003SHUIRUP\u0003D\u0003FRS\\\u0003IURP\u0003GHYLFH\u0003WR\u0003KRVW\u0011 unsigned int histo[256]; HANDLE_ERROR( cudaMemcpy( histo, dev_histo, 256 * sizeof( int ), cudaMemcpyDeviceToHost ) ); Download from www.wowebook.comptg&&&222 000 333777 , , , 111 ***\u0003\u0003\u0003, ,,6 6 67 7 72 2 2* * *5 5 5$ $ $0 0 06 6 6 /one.lf/seven.lf/five.lf \u0011\u0017\u0003888 +++ $W\u0003WKLV\u0003SRLQW\u000f\u0003ZH\u0003DUH\u0003GRQH\u0003ZLWK\u0003WKH\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003VR\u0003ZH\u0003FDQ\u0003VWRS\u0003RXU\u0003 WLPHUV\u0003DQG\u0003GLVSOD\\\u0003WKH\u0003HODSVHG\u0003WLPH\u0011\u0003-XVW\u0003OLNH\u0003WKH\u0003SUHYLRXV\u0003HYHQW\u0003FRGH\u000f\u0003WKLV\u0003LV\u0003 LGHQWLFDO\u0003WR\u0003WKH\u0003WLPLQJ\u0003FRGH\u0003ZH\u01e2YH\u0003XVHG\u0003IRU\u0003VHYHUDO\u0003FKDSWHUV\u0011 // get stop time, and display the timing results HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time to generate: %3.1f ms\\n\" , elapsedTime ); $W\u0003WKLV\u0003SRLQW\u000f\u0003ZH\u0003FRXOG\u0003SDVV\u0003WKH\u0003KLVWRJUDP\u0003DV\u0003LQSXW\u0003WR\u0003DQRWKHU\u0003VWDJH\u0003LQ\u0003WKH\u0003DOJR - ULWKP\u000f\u0003EXW\u0003VLQFH\u0003ZH\u0003DUH\u0003QRW\u0003XVLQJ\u0003WKH\u0003KLVWRJUDP\u0003IRU\u0003DQ\\WKLQJ\u0003HOVH\u000f\u0003ZH\u0003ZLOO\u0003VLPSO\\\u0003 YHULI\\\u0003WKDW\u0003WKH\u0003FRPSXWHG\u0003*38\u0003KLVWRJUDP\u0003PDWFKHV\u0003ZKDW\u0003ZH\u0003JHW\u0003RQ\u0003WKH\u0003&38\u0011\u0003)LUVW\u000f\u0003 ZH\u0003YHULI\\\u0003WKDW\u0003WKH\u0003KLVWRJUDP\u0003VXP\u0003PDWFKHV\u0003ZKDW\u0003ZH\u0003H[SHFW\u0011\u00037KLV\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003 &38\u0003FRGH\u0003VKRZQ\u0003KHUH long histoCount = 0; for (int i=0; i<256; i++) { histoCount += histo[i]; } printf( \"Histogram Sum: %ld\\n\" , histoCount ); 7R\u0003IXOO\\\u0003YHULI\\\u0003WKH\u0003*38\u0003KLVWRJUDP\u000f\u0003WKRXJK\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003WKH\u0003&38\u0003WR\u0003FRPSXWH\u0003WKH\u0003 VDPH\u0003KLVWRJUDP\u0011\u00037KH\u0003REYLRXV\u0003ZD\\\u0003WR\u0003GR\u0003WKLV\u0003ZRXOG\u0003EH\u0003WR\u0003DOORFDWH\u0003D\u0003QHZ\u0003KLVWRJUDP\u0003 DUUD\\\u000f\u0003FRPSXWH\u0003D\u0003KLVWRJUDP\u0003IURP\u0003WKH\u0003LQSXW\u0003XVLQJ\u0003WKH\u0003FRGH\u0003IURP\u00036HFWLRQ\u0003 \u0011\u0016\u0011\u0014 \u0003 &38\u0003+LVWRJUDP\u0003&RPSXWDWLRQ\u000f\u0003DQG\u000f\u0003\u020cQDOO\\\u000f\u0003HQVXUH\u0003WKDW\u0003HDFK\u0003ELQ\u0003LQ\u0003WKH\u0003*38\u0003DQG\u0003 &38\u0003YHUVLRQ\u0003PDWFK\u0011\u0003%XW\u0003UDWKHU\u0003WKDQ\u0003DOORFDWH\u0003D\u0003QHZ\u0003KLVWRJUDP\u0003DUUD\\\u000f\u0003ZH\u01e2OO\u0003RSW\u0003WR\u0003 VWDUW\u0003ZLWK\u0003WKH\u0003*38\u0003KLVWRJUDP\u0003DQG\u0003FRPSXWH\u0003WKH\u0003&38\u0003KLVWRJUDP\u0003\u01e4LQ\u0003UHYHUVH\u0011\u01e5\u0003 %\\\u0003FRPSXWLQJ\u0003WKH\u0003KLVWRJUDP\u0003\u01e4LQ\u0003UHYHUVH\u000f\u01e5\u0003ZH\u0003PHDQ\u0003WKDW\u0003UDWKHU\u0003WKDQ\u0003VWDUWLQJ\u0003 DW\u0003]HUR\u0003DQG\u0003LQFUHPHQWLQJ\u0003ELQ\u0003YDOXHV\u0003ZKHQ\u0003ZH\u0003VHH\u0003GDWD\u0003HOHPHQWV\u000f\u0003ZH\u0003ZLOO\u0003VWDUW\u0003 ZLWK\u0003WKH\u0003*38\u0003KLVWRJUDP\u0003DQG\u0003 decrement \u0003WKH\u0003ELQ\u01e2V\u0003YDOXH\u0003ZKHQ\u0003WKH\u0003&38\u0003VHHV\u0003GDWD\u0003 HOHPHQWV\u0011\u00037KHUHIRUH\u000f\u0003WKH\u0003&38\u0003KDV\u0003FRPSXWHG\u0003WKH\u0003VDPH\u0003KLVWRJUDP\u0003DV\u0003WKH\u0003*38\u0003LI\u0003 DQG\u0003RQO\\\u0003LI\u0003HYHU\\\u0003ELQ\u0003KDV\u0003WKH\u0003YDOXH\u0003]HUR\u0003ZKHQ\u0003ZH\u0003DUH\u0003\u020cQLVKHG\u0011\u0003,Q\u0003VRPH\u0003VHQVH\u000f\u0003ZH\u0003 DUH\u0003FRPSXWLQJ\u0003WKH\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003WKHVH\u0003WZR\u0003KLVWRJUDPV\u0011\u00037KH\u0003FRGH\u0003ZLOO\u0003ORRN\u0003 Download from www.wowebook.comptgATOM ICS /one.lf/seven.lf/six.lfUHPDUNDEO\\\u0003OLNH\u0003WKH\u0003&38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003EXW\u0003ZLWK\u0003D\u0003GHFUHPHQW\u0003RSHUDWRU\u0003 LQVWHDG\u0003RI\u0003DQ\u0003LQFUHPHQW\u0003RSHUDWRU\u0011 // verify that we have the same counts via CPU for (int i=0; i<SIZE; i++) histo[buffer[i]]--; for (int i=0; i<256; i++) { if (histo[i] != 0) printf( \"Failure at %d!\\n\" , i ); } $V\u0003XVXDO\u000f\u0003WKH\u0003\u020cQDOH\u0003LQYROYHV\u0003FOHDQLQJ\u0003XS\u0003RXU\u0003DOORFDWHG\u0003&8'$\u0003HYHQWV\u000f\u0003*38\u0003 PHPRU\\\u000f\u0003DQG\u0003KRVW\u0003PHPRU\\\u0011 HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); cudaFree( dev_histo ); cudaFree( dev_buffer ); free( buffer ); return 0; } %HIRUH\u000f\u0003ZH\u0003DVVXPHG\u0003WKDW\u0003ZH\u0003KDG\u0003ODXQFKHG\u0003D\u0003NHUQHO\u0003WKDW\u0003FRPSXWHG\u0003RXU\u0003KLVWRJUDP\u0003 DQG\u0003WKHQ\u0003SUHVVHG\u0003RQ\u0003WR\u0003GLVFXVV\u0003WKH\u0003DIWHUPDWK\u0011\u00032XU\u0003NHUQHO\u0003ODXQFK\u0003LV\u0003VOLJKWO\\\u0003PRUH\u0003 FRPSOLFDWHG\u0003WKDQ\u0003XVXDO\u0003EHFDXVH\u0003RI\u0003SHUIRUPDQFH\u0003FRQFHUQV\u0011\u0003%HFDXVH\u0003WKH\u0003KLVWR - JUDP\u0003FRQWDLQV\u0003\u0015\u0018\u0019\u0003ELQV\u000f\u0003XVLQJ\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003SHU\u0003EORFN\u0003SURYHV\u0003FRQYHQLHQW\u0003DV\u0003ZHOO\u0003DV\u0003 UHVXOWV\u0003LQ\u0003KLJK\u0003SHUIRUPDQFH\u0011\u0003%XW\u0003ZH\u0003KDYH\u0003D\u0003ORW\u0003RI\u0003\u020dH[LELOLW\\\u0003LQ\u0003WHUPV\u0003RI\u0003WKH\u0003QXPEHU\u0003 RI\u0003EORFNV\u0003ZH\u0003ODXQFK\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003ZLWK\u0003\u0014\u0013\u00130%\u0003RI\u0003GDWD\u000f\u0003ZH\u0003KDYH\u0003\u0014\u0013\u0017\u000f\u001b\u0018\u001a\u000f\u0019\u0013\u0013\u0003E\\WHV\u0003 RI\u0003GDWD\u0011\u0003:H\u0003FRXOG\u0003ODXQFK\u0003D\u0003VLQJOH\u0003EORFN\u0003DQG\u0003KDYH\u0003HDFK\u0003WKUHDG\u0003H[DPLQH\u0003\u0017\u0013 \u000f\u0019\u0013\u0013\u0003 GDWD\u0003HOHPHQWV\u0011\u0003/LNHZLVH\u000f\u0003ZH\u0003FRXOG\u0003ODXQFK\u0003\u0017\u0013 \u000f\u0019\u0013\u0013\u0003EORFNV\u0003DQG\u0003KDYH\u0003HDFK\u0003WKUHDG\u0003 H[DPLQH\u0003D\u0003VLQJOH\u0003GDWD\u0003HOHPHQW\u0011\u0003 $V\u0003\\RX\u0003PLJKW\u0003KDYH\u0003JXHVVHG\u000f\u0003WKH\u0003RSWLPDO\u0003VROXWLRQ\u0003LV\u0003DW\u0003D\u0003SRLQW\u0003EHWZHHQ\u0003WKHVH\u0003WZR\u0003 H[WUHPHV\u0011\u0003%\\\u0003UXQQLQJ\u0003VRPH\u0003SHUIRUPDQFH\u0003H[SHULPHQWV\u000f\u0003RSWLPDO\u0003SHUIRUPDQFH\u0003LV\u0003 DFKLHYHG\u0003ZKHQ\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003ZH\u0003ODXQFK\u0003LV\u0003H[DFWO\\\u0003WZLFH\u0003WKH\u0003QXPEHU\u0003RI\u0003 PXOWLSURFHVVRUV\u0003RXU\u0003*38\u0003FRQWDLQV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0013\u0003KDV\u0003\u0016\u0013\u0003PXOWL - SURFHVVRUV\u000f\u0003VR\u0003RXU\u0003KLVWRJUDP\u0003NHUQHO\u0003KDSSHQV\u0003WR\u0003UXQ\u0003IDVWHVW\u0003RQ\u0003D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0013\u0003 ZKHQ\u0003ODXQFKHG\u0003ZLWK\u0003\u0019\u0013\u0003SDUDOOHO\u0003EORFNV\u0011\u0003 Download from www.wowebook.comptg&&&222 000 333777 , , , 111 ***\u0003\u0003\u0003, ,,6 6 67 7 72 2 2* * *5 5 5$ $ $0 0 06 6 6 /one.lf/seven.lf/seven.lf \u0011\u0017\u0003888 +++ ,Q\u0003&KDSWHU\u0003\u0016\u000f\u0003ZH\u0003GLVFXVVHG\u0003D\u0003PHWKRG\u0003IRU\u0003TXHU\\LQJ\u0003YDULRXV\u0003SURSHUWLHV\u0003RI\u0003WKH\u0003 KDUGZDUH\u0003RQ\u0003ZKLFK\u0003RXU\u0003SURJUDP\u0003LV\u0003UXQQLQJ\u0011\u0003:H\u0003ZLOO\u0003QHHG\u0003WR\u0003XVH\u0003RQH\u0003RI\u0003WKHVH\u0003 GHYLFH\u0003SURSHUWLHV\u0003LI\u0003ZH\u0003LQWHQG\u0003WR\u0003G\\QDPLFDOO\\\u0003VL]H\u0003RXU\u0003ODXQFK\u0003EDVHG\u0003RQ\u0003RXU\u0003FXUUHQW\u0003 KDUGZDUH\u0003SODWIRUP\u0011\u00037R\u0003DFFRPSOLVK\u0003WKLV\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003WKH\u0003IROORZLQJ\u0003FRGH\u0003VHJPHQW\u0011\u0003 $OWKRXJK\u0003\\RX\u0003KDYHQ\u01e2W\u0003\\HW\u0003VHHQ\u0003WKH\u0003NHUQHO\u0003LPSOHPHQWDWLRQ\u000f\u0003\\RX\u0003VKRXOG\u0003VWLOO\u0003EH\u0003DEOH\u0003 WR\u0003IROORZ\u0003ZKDW\u0003LV\u0003JRLQJ\u0003RQ\u0011 cudaDeviceProp prop; HANDLE_ERROR( cudaGetDeviceProperties( &prop, 0 ) ); int blocks = prop.multiProcessorCount; histo_kernel<<<blocks*2,256>>>( dev_buffer, SIZE, dev_histo ); 6LQFH\u0003RXU\u0003ZDON\u0010WKURXJK\u0003RI\u0003 main()\u0003KDV\u0003EHHQ\u0003VRPHZKDW\u0003IUDJPHQWHG\u000f\u0003KHUH\u0003LV\u0003WKH\u0003 HQWLUH\u0003URXWLQH\u0003IURP\u0003VWDUW\u0003WR\u0003\u020cQLVK int main( void ) { unsigned char *buffer = (unsigned char *)big_random_block( SIZE ); cudaEvent_t start, stop; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); // allocate memory on the GPU for the file's data unsigned char *dev_buffer; unsigned int *dev_histo; HANDLE_ERROR( cudaMalloc( ( void**)&dev_buffer, SIZE ) ); HANDLE_ERROR( cudaMemcpy( dev_buffer, buffer, SIZE, cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_histo, 256 * sizeof( long ) ) ); HANDLE_ERROR( cudaMemset( dev_histo, 0, 256 * sizeof( int ) ) ); Download from www.wowebook.comptgATOM ICS /one.lf/seven.lf/eight.lf cudaDeviceProp prop; HANDLE_ERROR( cudaGetDeviceProperties( &prop, 0 ) ); int blocks = prop.multiProcessorCount; histo_kernel<<<blocks*2,256>>>( dev_buffer, SIZE, dev_histo ); unsigned int histo[256]; HANDLE_ERROR( cudaMemcpy( histo, dev_histo, 256 * sizeof( int ), cudaMemcpyDeviceToHost ) ); // get stop time, and display the timing results HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR(",
    "ICS /one.lf/seven.lf/eight.lf cudaDeviceProp prop; HANDLE_ERROR( cudaGetDeviceProperties( &prop, 0 ) ); int blocks = prop.multiProcessorCount; histo_kernel<<<blocks*2,256>>>( dev_buffer, SIZE, dev_histo ); unsigned int histo[256]; HANDLE_ERROR( cudaMemcpy( histo, dev_histo, 256 * sizeof( int ), cudaMemcpyDeviceToHost ) ); // get stop time, and display the timing results HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time to generate: %3.1f ms\\n\" , elapsedTime ); long histoCount = 0; for (int i=0; i<256; i++) { histoCount += histo[i]; } printf( \"Histogram Sum: %ld\\n\" , histoCount ); // verify that we have the same counts via CPU for (int i=0; i<SIZE; i++) histo[buffer[i]]--; for (int i=0; i<256; i++) { if (histo[i] != 0) printf( \"Failure at %d!\\n\" , i ); } HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); Download from www.wowebook.comptg&&&222 000 333777 , , , 111 ***\u0003\u0003\u0003, ,,6 6 67 7 72 2 2* * *5 5 5$ $ $0 0 06 6 6 /one.lf/seven.lf/nine.lf \u0011\u0017\u0003888 +++ cudaFree( dev_histo ); cudaFree( dev_buffer ); free( buffer ); return 0; } +,672*5$0\u0003.(51(/\u000386,1*\u0003*/2%$/\u00030(025<\u0003$720,&6 $QG\u0003QRZ\u0003IRU\u0003WKH\u0003IXQ\u0003SDUW \u0003WKH\u0003*38\u0003FRGH\u0003WKDW\u0003FRPSXWHV\u0003WKH\u0003KLVWRJUDP\u0004\u00037KH\u0003NHUQHO\u0003 WKDW\u0003FRPSXWHV\u0003WKH\u0003KLVWRJUDP\u0003LWVHOI\u0003QHHGV\u0003WR\u0003EH\u0003JLYHQ\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003LQSXW\u0003 GDWD\u0003DUUD\\\u000f\u0003WKH\u0003OHQJWK\u0003RI\u0003WKH\u0003LQSXW\u0003DUUD\\\u000f\u0003DQG\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003RXWSXW\u0003KLVWRJUDP\u0011\u0003 7KH\u0003\u020cUVW\u0003WKLQJ\u0003RXU\u0003NHUQHO\u0003QHHGV\u0003WR\u0003FRPSXWH\u0003LV\u0003D\u0003OLQHDUL]HG\u0003RIIVHW\u0003LQWR\u0003WKH\u0003LQSXW\u0003 GDWD\u0003DUUD\\\u0011\u0003(DFK\u0003WKUHDG\u0003ZLOO\u0003VWDUW\u0003ZLWK\u0003DQ\u0003RIIVHW\u0003EHWZHHQ\u0003\u0013\u0003DQG\u0003WKH\u0003QXPEHU\u0003RI\u0003 WKUHDGV\u0003PLQXV\u0003\u0014\u0011\u0003,W\u0003ZLOO\u0003WKHQ\u0003VWULGH\u0003E\\\u0003WKH\u0003WRWDO\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003WKDW\u0003KDYH\u0003EHHQ\u0003 ODXQFKHG\u0011\u0003:H\u0003KRSH\u0003\\RX\u0003UHPHPEHU\u0003WKLV\u0003WHFKQLTXH \u0003ZH\u0003XVHG\u0003WKH\u0003VDPH\u0003ORJLF\u0003WR\u0003DGG\u0003 YHFWRUV\u0003RI\u0003DUELWUDU\\\u0003OHQJWK\u0003ZKHQ\u0003\\RX\u0003\u020cUVW\u0003OHDUQHG\u0003DERXW\u0003WKUHDGV\u0011 #include \"../common/book.h\" #define SIZE (100*1024*1024) __global__ void histo_kernel( unsigned char *buffer, long size, unsigned int *histo ) { int i = threadIdx.x + blockIdx.x * blockDim.x; int stride = blockDim.x * gridDim.x; 2QFH\u0003HDFK\u0003WKUHDG\u0003NQRZV\u0003LWV\u0003VWDUWLQJ\u0003RIIVHW\u0003 i\u0003DQG\u0003WKH\u0003VWULGH\u0003LW\u0003VKRXOG\u0003XVH\u000f\u0003WKH\u0003FRGH\u0003 ZDONV\u0003WKURXJK\u0003WKH\u0003LQSXW\u0003DUUD\\\u0003LQFUHPHQWLQJ\u0003WKH\u0003FRUUHVSRQGLQJ\u0003KLVWRJUDP\u0003ELQ\u0011 while (i < size) { atomicAdd( &(histo[buffer[i]]), 1 ); i += stride; } } Download from www.wowebook.comptgATOM ICS /one.lf/eight.lf/zero.lf7KH\u0003KLJKOLJKWHG\u0003OLQH\u0003UHSUHVHQWV\u0003WKH\u0003ZD\\\u0003ZH\u0003XVH\u0003DWRPLF\u0003RSHUDWLRQV\u0003LQ\u0003&8'$\u0003&\u0011\u0003 7KH\u0003FDOO\u0003atomicAdd( addr, y ); \u0003JHQHUDWHV\u0003DQ\u0003DWRPLF\u0003VHTXHQFH\u0003RI\u0003RSHUD - WLRQV\u0003WKDW\u0003UHDG\u0003WKH\u0003YDOXH\u0003DW\u0003DGGUHVV\u0003 addr\u000f\u0003DGGV\u0003y\u0003WR\u0003WKDW\u0003YDOXH\u000f\u0003DQG\u0003VWRUHV\u0003WKH\u0003 UHVXOW\u0003EDFN\u0003WR\u0003WKH\u0003PHPRU\\\u0003DGGUHVV\u0003 addr\u0011\u00037KH\u0003KDUGZDUH\u0003JXDUDQWHHV\u0003XV\u0003WKDW\u0003QR\u0003 RWKHU\u0003WKUHDG\u0003FDQ\u0003UHDG\u0003RU\u0003ZULWH\u0003WKH\u0003YDOXH\u0003DW\u0003DGGUHVV\u0003 addr\u0003ZKLOH\u0003ZH\u0003SHUIRUP\u0003WKHVH\u0003 RSHUDWLRQV\u000f\u0003WKXV\u0003HQVXULQJ\u0003SUHGLFWDEOH\u0003UHVXOWV\u0011\u0003,Q\u0003RXU\u0003H[DPSOH\u000f\u0003WKH\u0003DGGUHVV\u0003LQ\u0003 TXHVWLRQ\u0003LV\u0003WKH\u0003ORFDWLRQ\u0003RI\u0003WKH\u0003KLVWRJUDP\u0003ELQ\u0003WKDW\u0003FRUUHVSRQGV\u0003WR\u0003WKH\u0003FXUUHQW\u0003E\\WH\u0011\u0003 ,I\u0003WKH\u0003FXUUHQW\u0003E\\WH\u0003LV\u0003 buffer[i] \u000f\u0003MXVW\u0003OLNH\u0003ZH\u0003VDZ\u0003LQ\u0003WKH\u0003&38\u0003YHUVLRQ\u000f\u0003WKH\u0003FRUUH - VSRQGLQJ\u0003KLVWRJUDP\u0003ELQ\u0003LV\u0003 histo[buffer[i]] \u0011\u00037KH\u0003DWRPLF\u0003RSHUDWLRQ\u0003QHHGV\u0003WKH\u0003 DGGUHVV\u0003RI\u0003WKLV\u0003ELQ\u000f\u0003VR\u0003WKH\u0003\u020cUVW\u0003DUJXPHQW\u0003LV\u0003WKHUHIRUH\u0003 &(histo[buffer[i]]) \u0011\u0003 6LQFH\u0003ZH\u0003VLPSO\\\u0003ZDQW\u0003WR\u0003LQFUHPHQW\u0003WKH\u0003YDOXH\u0003LQ\u0003WKDW\u0003ELQ\u0003E\\\u0003RQH\u000f\u0003WKH\u0003VHFRQG\u0003DUJX - PHQW\u0003LV\u0003\u0014\u0011 6R\u0003DIWHU\u0003DOO\u0003WKDW\u0003KXOODEDORR\u000f\u0003RXU\u0003*38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003LV\u0003IDLUO\\\u0003VLPLODU\u0003WR\u0003 WKH\u0003FRUUHVSRQGLQJ\u0003&38\u0003YHUVLRQ\u0011 #include \"../common/book.h\" #define SIZE (100*1024*1024) __global__ void histo_kernel( unsigned char *buffer, long size, unsigned int *histo ) { int i = threadIdx.x + blockIdx.x * blockDim.x; int stride = blockDim.x * gridDim.x; while (i < size) { atomicAdd( &(histo[buffer[i]]), 1 ); i += stride; } } +RZHYHU\u000f\u0003ZH\u0003QHHG\u0003WR\u0003VDYH\u0003WKH\u0003FHOHEUDWLRQV\u0003IRU\u0003ODWHU\u0011\u0003$IWHU\u0003UXQQLQJ\u0003WKLV\u0003H[DPSOH\u000f\u0003 ZH\u0003GLVFRYHU\u0003WKDW\u0003D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u0003FDQ\u0003FRQVWUXFW\u0003D\u0003KLVWRJUDP\u0003IURP\u0003\u0014\u0013\u00130%\u0003RI\u0003 LQSXW\u0003GDWD\u0003LQ\u0003\u0014\u0011\u001a\u0018\u0015\u0003VHFRQGV\u0011\u0003,I\u0003\\RX\u0003UHDG\u0003WKH\u0003VHFWLRQ\u0003RQ\u0003&38\u0010EDVHG\u0003KLVWRJUDPV\u000f\u0003 \\RX\u0003ZLOO\u0003UHDOL]H\u0003WKDW\u0003WKLV\u0003SHUIRUPDQFH\u0003LV\u0003WHUULEOH\u0011\u0003,Q\u0003IDFW\u000f\u0003WKLV\u0003LV\u0003PRUH\u0003WKDQ\u0003IRXU\u0003 WLPHV\u0003VORZHU\u0003WKDQ\u0003WKH\u0003&38\u0003YHUVLRQ\u0004\u0003%XW\u0003WKLV\u0003LV\u0003ZK\\\u0003ZH\u0003DOZD\\V\u0003PHDVXUH\u0003RXU\u0003 EDVHOLQH\u0003SHUIRUPDQFH\u0011\u0003,W\u0003ZRXOG\u0003EH\u0003D\u0003VKDPH\u0003WR\u0003VHWWOH\u0003IRU\u0003VXFK\u0003D\u0003ORZ\u0010SHUIRUPDQFH\u0003 LPSOHPHQWDWLRQ\u0003VLPSO\\\u0003EHFDXVH\u0003LW\u0003UXQV\u0003RQ\u0003WKH\u0003*38\u0011 Download from www.wowebook.comptg&&&222 000 333777 , , , 111 ***\u0003\u0003\u0003, ,,6 6 67 7 72 2 2* * *5 5 5$ $ $0 0 06 6 6 /one.lf/eight.lf/one.lf \u0011\u0017\u0003888 +++ 6LQFH\u0003ZH\u0003GR\u0003YHU\\\u0003OLWWOH\u0003ZRUN\u0003LQ\u0003WKH\u0003NHUQHO\u000f\u0003LW\u0003LV\u0003TXLWH\u0003OLNHO\\\u0003WKDW\u0003WKH\u0003DWRPLF\u0003RSHUD - WLRQ\u0003RQ\u0003JOREDO\u0003PHPRU\\\u0003LV\u0003FDXVLQJ\u0003WKH\u0003SUREOHP\u0011\u0003(VVHQWLDOO\\\u000f\u0003ZKHQ\u0003WKRXVDQGV\u0003 RI\u0003WKUHDGV\u0003DUH\u0003WU\\LQJ\u0003WR\u0003DFFHVV\u0003D\u0003KDQGIXO\u0003RI\u0003PHPRU\\\u0003ORFDWLRQV\u000f\u0003D\u0003JUHDW\u0003GHDO\u0003RI\u0003 FRQWHQWLRQ\u0003IRU\u0003RXU\u0003\u0015\u0018\u0019\u0003KLVWRJUDP\u0003ELQV\u0003FDQ\u0003RFFXU\u0011\u00037R\u0003HQVXUH\u0003DWRPLFLW\\\u0003RI\u0003WKH\u0003LQFUH - PHQW\u0003RSHUDWLRQV\u000f\u0003WKH\u0003KDUGZDUH\u0003QHHGV\u0003WR\u0003VHULDOL]H\u0003RSHUDWLRQV\u0003WR\u0003WKH\u0003VDPH\u0003PHPRU\\\u0003 ORFDWLRQ\u0011\u00037KLV\u0003FDQ\u0003UHVXOW\u0003LQ\u0003D\u0003ORQJ\u0003TXHXH\u0003RI\u0003SHQGLQJ\u0003RSHUDWLRQV\u000f\u0003DQG\u0003DQ\\\u0003SHUIRU - PDQFH\u0003JDLQ\u0003ZH\u0003PLJKW\u0003KDYH\u0003KDG\u0003ZLOO\u0003YDQLVK\u0011\u0003:H\u0003ZLOO\u0003QHHG\u0003WR\u0003LPSURYH\u0003WKH\u0003DOJRULWKP\u0003 LWVHOI\u0003LQ\u0003RUGHU\u0003WR\u0003UHFRYHU\u0003WKLV\u0003SHUIRUPDQFH\u0011 +,672*5$0\u0003.(51(/\u000386,1*\u00036+$5('\u0003$1'\u0003*/2%$/\u00030(025<\u0003$720,&6 ,URQLFDOO\\\u000f\u0003GHVSLWH\u0003WKDW\u0003WKH\u0003DWRPLF\u0003RSHUDWLRQV\u0003FDXVH\u0003WKLV\u0003SHUIRUPDQFH\u0003GHJUDGD - WLRQ\u000f\u0003DOOHYLDWLQJ\u0003WKH\u0003VORZGRZQ\u0003DFWXDOO\\\u0003LQYROYHV\u0003XVLQJ\u0003 more \u0003DWRPLFV\u000f\u0003QRW\u0003IHZHU\u0011\u0003 7KH\u0003FRUH\u0003SUREOHP\u0003ZDV\u0003QRW\u0003WKH\u0003XVH\u0003RI\u0003DWRPLFV\u0003VR\u0003PXFK\u0003DV\u0003WKH\u0003IDFW\u0003WKDW\u0003WKRXVDQGV\u0003 RI\u0003WKUHDGV\u0003ZHUH\u0003FRPSHWLQJ\u0003IRU\u0003DFFHVV\u0003WR\u0003D\u0003UHODWLYHO\\\u0003VPDOO\u0003QXPEHU\u0003RI\u0003PHPRU\\\u0003 DGGUHVVHV\u0011\u00037R\u0003DGGUHVV\u0003WKLV\u0003LVVXH\u000f\u0003ZH\u0003ZLOO\u0003VSOLW\u0003RXU\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003LQWR\u0003WZR\u0003 SKDVHV\u0011 ,Q\u0003SKDVH\u0003RQH\u000f\u0003HDFK\u0003SDUDOOHO\u0003EORFN\u0003ZLOO\u0003FRPSXWH\u0003D\u0003VHSDUDWH\u0003KLVWRJUDP\u0003RI\u0003WKH\u0003GDWD\u0003 WKDW\u0003LWV\u0003FRQVWLWXHQW\u0003WKUHDGV\u0003H[DPLQH\u0011\u00036LQFH\u0003HDFK\u0003EORFN\u0003GRHV\u0003WKLV\u0003LQGHSHQGHQWO\\\u000f\u0003 ZH\u0003FDQ\u0003FRPSXWH\u0003WKHVH\u0003KLVWRJUDPV\u0003LQ\u0003VKDUHG\u0003PHPRU\\\u000f\u0003VDYLQJ\u0003XV\u0003WKH\u0003WLPH\u0003RI\u0003 VHQGLQJ\u0003HDFK\u0003ZULWH\u0010RII\u0003FKLS\u0003WR\u0003'5$0\u0011\u0003'RLQJ\u0003WKLV\u0003GRHV\u0003QRW\u0003IUHH\u0003XV\u0003IURP\u0003QHHGLQJ\u0003 DWRPLF\u0003RSHUDWLRQV\u000f\u0003WKRXJK\u000f\u0003VLQFH\u0003PXOWLSOH\u0003WKUHDGV\u0003ZLWKLQ\u0003WKH\u0003EORFN\u0003FDQ\u0003VWLOO\u0003 H[DPLQH\u0003GDWD\u0003HOHPHQWV\u0003ZLWK\u0003WKH\u0003VDPH\u0003YDOXH\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003IDFW\u0003WKDW\u0003RQO\\\u0003\u0015\u0018\u0019\u0003 WKUHDGV\u0003ZLOO\u0003QRZ\u0003EH\u0003FRPSHWLQJ\u0003IRU\u0003\u0015\u0018\u0019\u0003DGGUHVVHV\u0003ZLOO\u0003UHGXFH\u0003FRQWHQWLRQ\u0003IURP\u0003WKH\u0003 JOREDO\u0003YHUVLRQ\u0003ZKHUH\u0003WKRXVDQGV\u0003RI\u0003WKUHDGV\u0003ZHUH\u0003FRPSHWLQJ\u0011\u0003 7KH\u0003\u020cUVW\u0003SKDVH\u0003WKHQ\u0003LQYROYHV\u0003DOORFDWLQJ\u0003DQG\u0003]HURLQJ\u0003D\u0003VKDUHG\u0003PHPRU\\\u0003EXIIHU\u0003 WR\u0003KROG\u0003HDFK\u0003EORFN\u01e2V\u0003LQWHUPHGLDWH\u0003KLVWRJUDP\u0011\u00035HFDOO\u0003IURP\u0003&KDSWHU\u0003\u0018\u0003WKDW\u0003VLQFH\u0003 WKH\u0003VXEVHTXHQW\u0003VWHS\u0003ZLOO\u0003LQYROYH\u0003UHDGLQJ\u0003DQG\u0003PRGLI\\LQJ\u0003WKLV\u0003EXIIHU\u000f\u0003ZH\u0003QHHG\u0003D\u0003 __syncthreads() \u0003FDOO\u0003WR\u0003HQVXUH\u0003WKDW\u0003HYHU\\\u0003WKUHDG\u01e2V\u0003ZULWH\u0003KDV\u0003FRPSOHWHG\u0003 EHIRUH\u0003SURJUHVVLQJ\u0011 __global__ void histo_kernel( unsigned char *buffer, long size, unsigned int *histo ) { __shared__ unsigned int temp[256]; temp[threadIdx.x] = 0; __syncthreads(); Download from www.wowebook.comptgATOM ICS /one.lf/eight.lf/two.lf$IWHU\u0003]HURLQJ\u0003WKH\u0003KLVWRJUDP\u000f\u0003WKH\u0003QH[W\u0003VWHS\u0003LV\u0003UHPDUNDEO\\\u0003VLPLODU\u0003WR\u0003RXU\u0003RULJLQDO\u0003 *38\u0003KLVWRJUDP\u0011\u00037KH\u0003VROH\u0003GLIIHUHQFHV\u0003KHUH\u0003DUH\u0003WKDW\u0003ZH\u0003XVH\u0003WKH\u0003VKDUHG\u0003PHPRU\\\u0003 EXIIHU\u0003temp[]\u0003LQVWHDG\u0003RI\u0003WKH\u0003JOREDO\u0003PHPRU\\\u0003EXIIHU\u0003 histo[]\u0003DQG\u0003WKDW\u0003ZH\u0003QHHG\u0003D\u0003 VXEVHTXHQW\u0003FDOO\u0003WR\u0003 __syncthreads() \u0003WR\u0003HQVXUH\u0003WKH\u0003ODVW\u0003RI\u0003RXU\u0003ZULWHV\u0003KDYH\u0003EHHQ\u0003 FRPPLWWHG\u0011 int i = threadIdx.x + blockIdx.x * blockDim.x; int offset = blockDim.x * gridDim.x; while (i < size) { atomicAdd( &temp[buffer[i]], 1); i += offset; } __syncthreads(); 7KH\u0003ODVW\u0003VWHS\u0003LQ\u0003RXU\u0003PRGL\u020cHG\u0003KLVWRJUDP\u0003H[DPSOH\u0003UHTXLUHV\u0003WKDW\u0003ZH\u0003PHUJH\u0003HDFK\u0003 EORFN\u01e2V\u0003WHPSRUDU\\\u0003KLVWRJUDP\u0003LQWR\u0003WKH\u0003JOREDO\u0003EXIIHU\u0003 histo[]\u0011\u00036XSSRVH\u0003ZH\u0003VSOLW\u0003 WKH\u0003LQSXW\u0003LQ\u0003KDOI\u0003DQG\u0003WZR\u0003WKUHDGV\u0003ORRN\u0003DW\u0003GLIIHUHQW\u0003KDOYHV\u0003DQG\u0003FRPSXWH\u0003VHSDUDWH\u0003 KLVWRJUDPV\u0011\u0003,I\u0003WKUHDG\u0003$\u0003VHHV\u0003E\\WH\u0003 0xFC\u0003\u0015\u0013\u0003WLPHV\u0003LQ\u0003WKH\u0003LQSXW\u0003DQG\u0003WKUHDG\u0003%\u0003VHHV\u0003 E\\WH\u00030xFC\u0003\u0018\u0003WLPHV\u000f\u0003WKH\u0003E\\WH\u0003 0xFC\u0003PXVW\u0003KDYH\u0003DSSHDUHG\u0003\u0015\u0018\u0003WLPHV\u0003LQ\u0003WKH\u0003LQSXW\u0011\u0003 /LNHZLVH\u000f\u0003HDFK\u0003ELQ\u0003RI\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u0003LV\u0003MXVW\u0003WKH\u0003VXP\u0003RI\u0003WKH\u0003FRUUHVSRQGLQJ\u0003 ELQ\u0003LQ\u0003WKUHDG\u0003$\u01e2V\u0003KLVWRJUDP\u0003DQG\u0003WKUHDG\u0003%\u01e2V\u0003KLVWRJUDP\u0011\u00037KLV\u0003ORJLF\u0003H[WHQGV\u0003WR\u0003DQ\\\u0003 QXPEHU\u0003RI\u0003WKUHDGV\u000f\u0003VR\u0003PHUJLQJ\u0003HYHU\\\u0003EORFN\u01e2V\u0003KLVWRJUDP\u0003LQWR\u0003D\u0003VLQJOH\u0003\u020cQDO\u0003KLVWR - JUDP\u0003LQYROYHV\u0003DGGLQJ\u0003HDFK\u0003HQWU\\\u0003LQ\u0003WKH\u0003EORFN\u01e2V\u0003KLVWRJUDP\u0003WR\u0003WKH\u0003FRUUHVSRQGLQJ\u0003 HQWU\\\u0003LQ\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u0011\u0003)RU\u0003DOO\u0003WKH\u0003UHDVRQV\u0003ZH\u01e2YH\u0003VHHQ\u0003DOUHDG\\\u000f\u0003WKLV\u0003QHHGV\u0003WR\u0003 EH\u0003GRQH\u0003DWRPLFDOO\\ atomicAdd( &(histo[threadIdx.x]), temp[threadIdx.x] ); } 6LQFH\u0003ZH\u0003KDYH\u0003GHFLGHG\u0003WR\u0003XVH\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003DQG\u0003KDYH\u0003\u0015\u0018\u0019\u0003KLVWRJUDP\u0003ELQV\u000f\u0003HDFK\u0003 WKUHDG\u0003DWRPLFDOO\\\u0003DGGV\u0003D\u0003VLQJOH\u0003ELQ\u0003WR\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u01e2V\u0003WRWDO\u0011\u0003,I\u0003WKHVH\u0003QXPEHUV\u0003 GLGQ\u01e2W\u0003PDWFK\u000f\u0003WKLV\u0003SKDVH\u0003ZRXOG\u0003EH\u0003PRUH\u0003FRPSOLFDWHG\u0011\u00031RWH\u0003WKDW\u0003ZH\u0003KDYH\u0003QR\u0003 JXDUDQWHHV\u0003DERXW\u0003ZKDW\u0003RUGHU\u0003WKH\u0003EORFNV\u0003DGG\u0003WKHLU\u0003YDOXHV\u0003WR\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u000f\u0003 EXW\u0003VLQFH\u0003LQWHJHU\u0003DGGLWLRQ\u0003LV\u0003FRPPXWDWLYH\u000f\u0003ZH\u0003ZLOO\u0003DOZD\\V\u0003JHW\u0003WKH\u0003VDPH\u0003DQVZHU\u0003 SURYLGHG\u0003WKDW\u0003WKH\u0003DGGLWLRQV\u0003RFFXU\u0003DWRPLFDOO\\\u0011\u0003 Download from www.wowebook.comptg&&&+++ $$$ 333 777 ((( 555 \u0003\u0003\u00035 5 5((( 999 , , , ((( : :: /one.lf/eight.lf/three.lf \u0011\u0018\u0003$QG\u0003ZLWK\u0003WKLV\u000f\u0003RXU\u0003WZR\u0003SKDVH\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003NHUQHO\u0003LV\u0003FRPSOHWH\u0011\u0003+HUH\u0003LW\u0003LV\u0003 IURP\u0003VWDUW\u0003WR\u0003\u020cQLVK __global__ void",
    "__syncthreads(); 7KH\u0003ODVW\u0003VWHS\u0003LQ\u0003RXU\u0003PRGL\u020cHG\u0003KLVWRJUDP\u0003H[DPSOH\u0003UHTXLUHV\u0003WKDW\u0003ZH\u0003PHUJH\u0003HDFK\u0003 EORFN\u01e2V\u0003WHPSRUDU\\\u0003KLVWRJUDP\u0003LQWR\u0003WKH\u0003JOREDO\u0003EXIIHU\u0003 histo[]\u0011\u00036XSSRVH\u0003ZH\u0003VSOLW\u0003 WKH\u0003LQSXW\u0003LQ\u0003KDOI\u0003DQG\u0003WZR\u0003WKUHDGV\u0003ORRN\u0003DW\u0003GLIIHUHQW\u0003KDOYHV\u0003DQG\u0003FRPSXWH\u0003VHSDUDWH\u0003 KLVWRJUDPV\u0011\u0003,I\u0003WKUHDG\u0003$\u0003VHHV\u0003E\\WH\u0003 0xFC\u0003\u0015\u0013\u0003WLPHV\u0003LQ\u0003WKH\u0003LQSXW\u0003DQG\u0003WKUHDG\u0003%\u0003VHHV\u0003 E\\WH\u00030xFC\u0003\u0018\u0003WLPHV\u000f\u0003WKH\u0003E\\WH\u0003 0xFC\u0003PXVW\u0003KDYH\u0003DSSHDUHG\u0003\u0015\u0018\u0003WLPHV\u0003LQ\u0003WKH\u0003LQSXW\u0011\u0003 /LNHZLVH\u000f\u0003HDFK\u0003ELQ\u0003RI\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u0003LV\u0003MXVW\u0003WKH\u0003VXP\u0003RI\u0003WKH\u0003FRUUHVSRQGLQJ\u0003 ELQ\u0003LQ\u0003WKUHDG\u0003$\u01e2V\u0003KLVWRJUDP\u0003DQG\u0003WKUHDG\u0003%\u01e2V\u0003KLVWRJUDP\u0011\u00037KLV\u0003ORJLF\u0003H[WHQGV\u0003WR\u0003DQ\\\u0003 QXPEHU\u0003RI\u0003WKUHDGV\u000f\u0003VR\u0003PHUJLQJ\u0003HYHU\\\u0003EORFN\u01e2V\u0003KLVWRJUDP\u0003LQWR\u0003D\u0003VLQJOH\u0003\u020cQDO\u0003KLVWR - JUDP\u0003LQYROYHV\u0003DGGLQJ\u0003HDFK\u0003HQWU\\\u0003LQ\u0003WKH\u0003EORFN\u01e2V\u0003KLVWRJUDP\u0003WR\u0003WKH\u0003FRUUHVSRQGLQJ\u0003 HQWU\\\u0003LQ\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u0011\u0003)RU\u0003DOO\u0003WKH\u0003UHDVRQV\u0003ZH\u01e2YH\u0003VHHQ\u0003DOUHDG\\\u000f\u0003WKLV\u0003QHHGV\u0003WR\u0003 EH\u0003GRQH\u0003DWRPLFDOO\\ atomicAdd( &(histo[threadIdx.x]), temp[threadIdx.x] ); } 6LQFH\u0003ZH\u0003KDYH\u0003GHFLGHG\u0003WR\u0003XVH\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003DQG\u0003KDYH\u0003\u0015\u0018\u0019\u0003KLVWRJUDP\u0003ELQV\u000f\u0003HDFK\u0003 WKUHDG\u0003DWRPLFDOO\\\u0003DGGV\u0003D\u0003VLQJOH\u0003ELQ\u0003WR\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u01e2V\u0003WRWDO\u0011\u0003,I\u0003WKHVH\u0003QXPEHUV\u0003 GLGQ\u01e2W\u0003PDWFK\u000f\u0003WKLV\u0003SKDVH\u0003ZRXOG\u0003EH\u0003PRUH\u0003FRPSOLFDWHG\u0011\u00031RWH\u0003WKDW\u0003ZH\u0003KDYH\u0003QR\u0003 JXDUDQWHHV\u0003DERXW\u0003ZKDW\u0003RUGHU\u0003WKH\u0003EORFNV\u0003DGG\u0003WKHLU\u0003YDOXHV\u0003WR\u0003WKH\u0003\u020cQDO\u0003KLVWRJUDP\u000f\u0003 EXW\u0003VLQFH\u0003LQWHJHU\u0003DGGLWLRQ\u0003LV\u0003FRPPXWDWLYH\u000f\u0003ZH\u0003ZLOO\u0003DOZD\\V\u0003JHW\u0003WKH\u0003VDPH\u0003DQVZHU\u0003 SURYLGHG\u0003WKDW\u0003WKH\u0003DGGLWLRQV\u0003RFFXU\u0003DWRPLFDOO\\\u0011\u0003 Download from www.wowebook.comptg&&&+++ $$$ 333 777 ((( 555 \u0003\u0003\u00035 5 5((( 999 , , , ((( : :: /one.lf/eight.lf/three.lf \u0011\u0018\u0003$QG\u0003ZLWK\u0003WKLV\u000f\u0003RXU\u0003WZR\u0003SKDVH\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003NHUQHO\u0003LV\u0003FRPSOHWH\u0011\u0003+HUH\u0003LW\u0003LV\u0003 IURP\u0003VWDUW\u0003WR\u0003\u020cQLVK __global__ void histo_kernel( unsigned char *buffer, long size, unsigned int *histo ) { __shared__ unsigned int temp[256]; temp[threadIdx.x] = 0; __syncthreads(); int i = threadIdx.x + blockIdx.x * blockDim.x; int offset = blockDim.x * gridDim.x; while (i < size) { atomicAdd( &temp[buffer[i]], 1); i += offset; } __syncthreads(); atomicAdd( &(histo[threadIdx.x]), temp[threadIdx.x] ); } 7KLV\u0003YHUVLRQ\u0003RI\u0003RXU\u0003KLVWRJUDP\u0003H[DPSOH\u0003LPSURYHV\u0003GUDPDWLFDOO\\\u0003RYHU\u0003WKH\u0003SUHYLRXV\u0003 *38\u0003YHUVLRQ\u0011\u0003$GGLQJ\u0003WKH\u0003VKDUHG\u0003PHPRU\\\u0003FRPSRQHQW\u0003GURSV\u0003RXU\u0003UXQQLQJ\u0003WLPH\u0003RQ\u0003 D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u0003WR\u0003\u0013\u0011\u0013\u0018\u001a\u0003VHFRQGV\u0011\u00031RW\u0003RQO\\\u0003LV\u0003WKLV\u0003VLJQL\u020cFDQWO\\\u0003EHWWHU\u0003WKDQ\u0003WKH\u0003 YHUVLRQ\u0003WKDW\u0003XVHG\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u0003RQO\\\u000f\u0003EXW\u0003WKLV\u0003EHDWV\u0003RXU\u0003RULJLQDO\u0003&38\u0003 LPSOHPHQWDWLRQ\u0003E\\\u0003DQ\u0003RUGHU\u0003RI\u0003PDJQLWXGH\u0003 IURP\u0003\u0013\u0011\u0017\u0014\u0019\u0003VHFRQGV\u0003WR\u0003\u0013\u0011\u0013\u0018\u001a\u0003VHFRQGV \u0011\u0003 7KLV\u0003LPSURYHPHQW\u0003UHSUHVHQWV\u0003JUHDWHU\u0003WKDQ\u0003D\u0003VHYHQIROG\u0003ERRVW\u0003LQ\u0003VSHHG\u0003RYHU\u0003WKH\u0003 &38\u0003YHUVLRQ\u0011\u00036R\u0003GHVSLWH\u0003WKH\u0003HDUO\\\u0003VHWEDFN\u0003LQ\u0003DGDSWLQJ\u0003WKH\u0003KLVWRJUDP\u0003WR\u0003D\u0003*38\u0003 LPSOHPHQWDWLRQ\u000f\u0003RXU\u0003YHUVLRQ\u0003WKDW\u0003XVHV\u0003ERWK\u0003VKDUHG\u0003DQG\u0003JOREDO\u0003DWRPLFV\u0003VKRXOG\u0003EH\u0003 FRQVLGHUHG\u0003D\u0003VXFFHVV\u0011 &KDSWHU\u00035HYLHZ \u0011\u0018\u0003 $OWKRXJK\u0003ZH\u0003KDYH\u0003IUHTXHQWO\\\u0003VSRNHQ\u0003DW\u0003OHQJWK\u0003DERXW\u0003KRZ\u0003HDV\\\u0003SDUDOOHO\u0003SURJUDP - PLQJ\u0003FDQ\u0003EH\u0003ZLWK\u0003&8'$\u0003&\u000f\u0003ZH\u0003KDYH\u0003ODUJHO\\\u0003LJQRUHG\u0003VRPH\u0003RI\u0003WKH\u0003VLWXDWLRQV\u0003ZKHQ\u0003 Download from www.wowebook.comptgATOM ICS /one.lf/eight.lf/four.lfPDVVLYHO\\\u0003SDUDOOHO\u0003DUFKLWHFWXUHV\u0003VXFK\u0003DV\u0003WKH\u0003*38\u0003FDQ\u0003PDNH\u0003RXU\u0003OLYHV\u0003DV\u0003SURJUDP - PHUV\u0003PRUH\u0003GLI\u020cFXOW\u0011\u00037U\\LQJ\u0003WR\u0003FRSH\u0003ZLWK\u0003SRWHQWLDOO\\\u0003WHQV\u0003RI\u0003WKRXVDQGV\u0003RI\u0003WKUHDGV\u0003 VLPXOWDQHRXVO\\\u0003PRGLI\\LQJ\u0003WKH\u0003VDPH\u0003PHPRU\\\u0003DGGUHVVHV\u0003LV\u0003D\u0003FRPPRQ\u0003VLWXDWLRQ\u0003 ZKHUH\u0003D\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003PDFKLQH\u0003FDQ\u0003VHHP\u0003EXUGHQVRPH\u0011\u0003)RUWXQDWHO\\\u000f\u0003ZH\u0003KDYH\u0003 KDUGZDUH\u0010VXSSRUWHG\u0003DWRPLF\u0003RSHUDWLRQV\u0003DYDLODEOH\u0003WR\u0003KHOS\u0003HDVH\u0003WKLV\u0003SDLQ\u0011\u0003 +RZHYHU\u000f\u0003DV\u0003\\RX\u0003VDZ\u0003ZLWK\u0003WKH\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003VRPHWLPHV\u0003UHOLDQFH\u0003RQ\u0003 DWRPLF\u0003RSHUDWLRQV\u0003LQWURGXFHV\u0003SHUIRUPDQFH\u0003LVVXHV\u0003WKDW\u0003FDQ\u0003EH\u0003UHVROYHG\u0003RQO\\\u0003 E\\\u0003UHWKLQNLQJ\u0003SDUWV\u0003RI\u0003WKH\u0003DOJRULWKP\u0011\u0003,Q\u0003WKH\u0003KLVWRJUDP\u0003H[DPSOH\u000f\u0003ZH\u0003PRYHG\u0003WR\u0003D\u0003 WZR\u0010VWDJH\u0003DOJRULWKP\u0003WKDW\u0003DOOHYLDWHG\u0003FRQWHQWLRQ\u0003IRU\u0003JOREDO\u0003PHPRU\\\u0003DGGUHVVHV\u0011\u0003,Q\u0003 JHQHUDO\u000f\u0003WKLV\u0003VWUDWHJ\\\u0003RI\u0003ORRNLQJ\u0003WR\u0003OHVVHQ\u0003PHPRU\\\u0003FRQWHQWLRQ\u0003WHQGV\u0003WR\u0003ZRUN\u0003ZHOO\u000f\u0003 DQG\u0003\\RX\u0003VKRXOG\u0003NHHS\u0003LW\u0003LQ\u0003PLQG\u0003ZKHQ\u0003XVLQJ\u0003DWRPLFV\u0003LQ\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u0003 Download from www.wowebook.comptg /one.lf/eight.lf/five.lfChapter 10 Streams 7LPH\u0003DQG\u0003WLPH\u0003DJDLQ\u0003LQ\u0003WKLV\u0003ERRN\u0003ZH\u0003KDYH\u0003VHHQ\u0003KRZ\u0003WKH\u0003PDVVLYHO\\\u0003GDWD\u0010SDUDOOHO\u0003 H[HFXWLRQ\u0003HQJLQH\u0003RQ\u0003D\u0003*38\u0003FDQ\u0003SURYLGH\u0003VWXQQLQJ\u0003SHUIRUPDQFH\u0003JDLQV\u0003RYHU\u0003FRPSD - UDEOH\u0003&38\u0003FRGH\u0011\u0003+RZHYHU\u000f\u0003WKHUH\u0003LV\u0003\\HW\u0003DQRWKHU\u0003FODVV\u0003RI\u0003SDUDOOHOLVP\u0003WR\u0003EH\u0003H[SORLWHG\u0003 RQ\u000319,',$\u0003JUDSKLFV\u0003SURFHVVRUV\u0011\u00037KLV\u0003SDUDOOHOLVP\u0003LV\u0003VLPLODU\u0003WR\u0003WKH\u0003 task parallelism WKDW\u0003LV\u0003IRXQG\u0003LQ\u0003PXOWLWKUHDGHG\u0003&38\u0003DSSOLFDWLRQV\u0011\u00035DWKHU\u0003WKDQ\u0003VLPXOWDQHRXVO\\\u0003 FRPSXWLQJ\u0003WKH\u0003VDPH\u0003IXQFWLRQ\u0003RQ\u0003ORWV\u0003RI\u0003GDWD\u0003HOHPHQWV\u0003DV\u0003RQH\u0003GRHV\u0003ZLWK\u0003GDWD\u0003 SDUDOOHOLVP\u000f\u0003WDVN\u0003SDUDOOHOLVP\u0003LQYROYHV\u0003GRLQJ\u0003WZR\u0003RU\u0003PRUH\u0003FRPSOHWHO\\\u0003GLIIHUHQW\u0003 WDVNV\u0003LQ\u0003SDUDOOHO\u0011\u0003 ,Q\u0003WKH\u0003FRQWH[W\u0003RI\u0003SDUDOOHOLVP\u000f\u0003D\u0003 task\u0003FRXOG\u0003EH\u0003DQ\\\u0003QXPEHU\u0003RI\u0003WKLQJV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003 DQ\u0003DSSOLFDWLRQ\u0003FRXOG\u0003EH\u0003H[HFXWLQJ\u0003WZR\u0003WDVNV \u0003UHGUDZLQJ\u0003LWV\u0003*8,\u0003ZLWK\u0003RQH\u0003WKUHDG\u0003 ZKLOH\u0003GRZQORDGLQJ\u0003DQ\u0003XSGDWH\u0003RYHU\u0003WKH\u0003QHWZRUN\u0003ZLWK\u0003DQRWKHU\u0003WKUHDG\u0011\u00037KHVH\u0003WDVNV\u0003 SURFHHG\u0003LQ\u0003SDUDOOHO\u000f\u0003GHVSLWH\u0003KDYLQJ\u0003QRWKLQJ\u0003LQ\u0003FRPPRQ\u0011\u0003$OWKRXJK\u0003WKH\u0003WDVN\u0003SDUDO - OHOLVP\u0003RQ\u0003*38V\u0003LV\u0003QRW\u0003FXUUHQWO\\\u0003DV\u0003\u020dH[LEOH\u0003DV\u0003D\u0003JHQHUDO\u0010SXUSRVH\u0003SURFHVVRU\u01e2V\u000f\u0003LW\u0003 VWLOO\u0003SURYLGHV\u0003RSSRUWXQLWLHV\u0003IRU\u0003XV\u0003DV\u0003SURJUDPPHUV\u0003WR\u0003H[WUDFW\u0003HYHQ\u0003PRUH\u0003VSHHG\u0003 IURP\u0003RXU\u0003*38\u0010EDVHG\u0003LPSOHPHQWDWLRQV\u0011\u0003,Q\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003ZLOO\u0003ORRN\u0003DW\u0003&8'$\u0003 VWUHDPV\u0003DQG\u0003WKH\u0003ZD\\V\u0003LQ\u0003ZKLFK\u0003WKHLU\u0003FDUHIXO\u0003XVH\u0003ZLOO\u0003HQDEOH\u0003XV\u0003WR\u0003H[HFXWH\u0003FHUWDLQ\u0003 RSHUDWLRQV\u0003VLPXOWDQHRXVO\\\u0003RQ\u0003WKH\u0003*38\u0011 Download from www.wowebook.comptgSTRE AMS /one.lf/eight.lf/six.lf&KDSWHU\u00032EMHFWLYHV\u0014\u0013\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003DOORFDWLQJ\u0003SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003ZKDW\u0003&8'$\u0003\u01e9\u0003 streams \u0003DUH\u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003XVH\u0003&8'$\u0003VWUHDPV\u0003WR\u0003DFFHOHUDWH\u0003\\RXU\u0003DSSOLFDWLRQV\u0011\u01e9\u0003 3DJH\u0010/RFNHG\u0003+RVW\u00030HPRU\\\u0014\u0013\u0011\u0015\u0003 ,Q\u0003HYHU\\\u0003H[DPSOH\u0003RYHU\u0003WKH\u0003FRXUVH\u0003RI\u0003QLQH\u0003FKDSWHUV\u000f\u0003\\RX\u0003KDYH\u0003VHHQ\u0003XV\u0003DOORFDWH\u0003 PHPRU\\\u0003RQ\u0003WKH\u0003*38\u0003ZLWK\u0003 cudaMalloc() \u0011\u00032Q\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003KDYH\u0003DOZD\\V\u0003DOORFDWHG\u0003 PHPRU\\\u0003ZLWK\u0003WKH\u0003YDQLOOD\u000f\u0003&\u0003OLEUDU\\\u0003URXWLQH\u0003 malloc() \u0011\u0003+RZHYHU\u000f\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003 RIIHUV\u0003LWV\u0003RZQ\u0003PHFKDQLVP\u0003IRU\u0003DOORFDWLQJ\u0003KRVW\u0003PHPRU\\ \u0003 \u0003cudaHostAlloc() \u0011\u0003:K\\\u0003 ZRXOG\u0003\\RX\u0003ERWKHU\u0003XVLQJ\u0003WKLV\u0003IXQFWLRQ\u0003ZKHQ\u0003 malloc() \u0003KDV\u0003VHUYHG\u0003\\RX\u0003TXLWH\u0003ZHOO\u0003 VLQFH\u0003GD\\\u0003RQH\u0003RI\u0003\\RXU\u0003OLIH\u0003DV\u0003D\u0003&\u0003SURJUDPPHU\"\u0003 ,Q\u0003IDFW\u000f\u0003WKHUH\u0003LV\u0003D\u0003VLJQL\u020cFDQW\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003WKH\u0003PHPRU\\\u0003WKDW\u0003 malloc() ZLOO\u0003DOORFDWH\u0003DQG\u0003WKH\u0003PHPRU\\\u0003WKDW\u0003 cudaHostAlloc() \u0003DOORFDWHV\u0011\u00037KH\u0003&\u0003 OLEUDU\\\u0003IXQFWLRQ\u0003 malloc() \u0003DOORFDWHV\u0003VWDQGDUG\u000f\u0003SDJHDEOH\u0003KRVW\u0003PHPRU\\\u000f\u0003ZKLOH\u0003 cudaHostAlloc() \u0003DOORFDWHV\u0003D\u0003EXIIHU\u0003RI\u0003 page-locked \u0003KRVW\u0003PHPRU\\\u0011\u00036RPHWLPHV\u0003 FDOOHG\u0003pinned \u0003PHPRU\\\u000f\u0003SDJH\u0010ORFNHG\u0003EXIIHUV\u0003KDYH\u0003DQ\u0003LPSRUWDQW\u0003SURSHUW\\ \u00037KH\u0003 RSHUDWLQJ\u0003V\\VWHP\u0003JXDUDQWHHV\u0003XV\u0003WKDW\u0003LW\u0003ZLOO\u0003QHYHU\u0003SDJH\u0003WKLV\u0003PHPRU\\\u0003RXW\u0003WR\u0003GLVN\u000f\u0003 ZKLFK\u0003HQVXUHV\u0003LWV\u0003UHVLGHQF\\\u0003LQ\u0003SK\\VLFDO\u0003PHPRU\\\u0011\u00037KH\u0003FRUROODU\\\u0003WR\u0003WKLV\u0003LV\u0003WKDW\u0003LW\u0003 EHFRPHV\u0003VDIH\u0003IRU\u0003WKH\u000326\u0003WR\u0003DOORZ\u0003DQ\u0003DSSOLFDWLRQ\u0003DFFHVV\u0003WR\u0003WKH\u0003SK\\VLFDO\u0003DGGUHVV\u0003RI\u0003 WKH\u0003PHPRU\\\u000f\u0003VLQFH\u0003WKH\u0003EXIIHU\u0003ZLOO\u0003QRW\u0003EH\u0003HYLFWHG\u0003RU\u0003UHORFDWHG\u0011 .QRZLQJ\u0003WKH\u0003SK\\VLFDO\u0003DGGUHVV\u0003RI\u0003D\u0003EXIIHU\u000f\u0003WKH\u0003*38\u0003FDQ\u0003WKHQ\u0003XVH\u0003GLUHFW\u0003PHPRU\\\u0003 DFFHVV\u0003 '0$ \u0003WR\u0003FRS\\\u0003GDWD\u0003WR\u0003RU\u0003IURP\u0003WKH\u0003KRVW\u0011\u00036LQFH\u0003'0$\u0003FRSLHV\u0003SURFHHG\u0003ZLWKRXW\u0003 LQWHUYHQWLRQ\u0003IURP\u0003WKH\u0003&38\u000f\u0003LW\u0003DOVR\u0003PHDQV\u0003WKDW\u0003WKH\u0003&38\u0003FRXOG\u0003EH\u0003VLPXOWDQHRXVO\\\u0003 SDJLQJ\u0003WKHVH\u0003EXIIHUV\u0003RXW\u0003WR\u0003GLVN\u0003RU\u0003UHORFDWLQJ\u0003WKHLU\u0003SK\\VLFDO\u0003DGGUHVV\u0003E\\\u0003XSGDWLQJ\u0003 WKH\u0003RSHUDWLQJ\u0003V\\VWHP\u01e2V\u0003SDJHWDEOHV\u0011\u00037KH\u0003SRVVLELOLW\\\u0003RI\u0003WKH\u0003&38\u0003PRYLQJ\u0003SDJHDEOH\u0003 GDWD\u0003PHDQV\u0003WKDW\u0003XVLQJ\u0003SLQQHG\u0003PHPRU\\\u0003IRU\u0003D\u0003'0$\u0003FRS\\\u0003LV\u0003HVVHQWLDO\u0011\u0003,Q\u0003IDFW\u000f\u0003HYHQ\u0003 ZKHQ\u0003\\RX\u0003DWWHPSW\u0003WR\u0003SHUIRUP\u0003D\u0003PHPRU\\\u0003FRS\\\u0003ZLWK\u0003SDJHDEOH\u0003PHPRU\\\u000f\u0003WKH\u0003&8'$\u0003 GULYHU\u0003VWLOO\u0003XVHV\u0003'0$\u0003WR\u0003WUDQVIHU\u0003WKH\u0003EXIIHU\u0003WR\u0003WKH\u0003*38\u0011\u00037KHUHIRUH\u000f\u0003\\RXU\u0003FRS\\\u0003 Download from www.wowebook.comptg(((///...'''+++666 777000<<< /one.lf/eight.lf/seven.lf\u0014\u0013\u0011\u0015\u0003333$$$ ***\u0210\u0210\u0210222 &&&(((\u0003\u0003\u0003222\u0003\u0003\u0003((( 000 222 555 KDSSHQV\u0003WZLFH\u000f\u0003\u020cUVW\u0003IURP\u0003D\u0003SDJHDEOH\u0003V\\VWHP\u0003EXIIHU\u0003WR\u0003D\u0003SDJH\u0010ORFNHG\u0003\u01e4VWDJLQJ\u01e5\u0003 EXIIHU\u0003DQG\u0003WKHQ\u0003IURP\u0003WKH\u0003SDJH\u0010ORFNHG\u0003V\\VWHP\u0003EXIIHU\u0003WR\u0003WKH\u0003*38\u0011\u0003 $V\u0003D\u0003UHVXOW\u000f\u0003ZKHQHYHU\u0003\\RX\u0003SHUIRUP\u0003PHPRU\\\u0003FRSLHV\u0003IURP\u0003SDJHDEOH\u0003PHPRU\\\u000f\u0003\\RX\u0003 JXDUDQWHH\u0003WKDW\u0003WKH\u0003FRS\\\u0003VSHHG\u0003ZLOO\u0003EH\u0003ERXQGHG\u0003E\\\u0003WKH\u0003 lower \u0003RI\u0003WKH\u00033&,(\u0003WUDQVIHU\u0003 VSHHG\u0003DQG\u0003WKH\u0003V\\VWHP\u0003IURQW\u0010VLGH\u0003EXV\u0003VSHHGV\u0011\u0003$\u0003ODUJH\u0003GLVSDULW\\\u0003LQ\u0003EDQGZLGWK\u0003 EHWZHHQ\u0003WKHVH\u0003EXVHV\u0003LQ\u0003VRPH\u0003V\\VWHPV\u0003HQVXUHV\u0003WKDW\u0003SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003 HQMR\\V\u0003URXJKO\\\u0003D\u0003WZRIROG\u0003SHUIRUPDQFH\u0003DGYDQWDJH\u0003RYHU\u0003VWDQGDUG\u0003SDJHDEOH\u0003PHPRU\\\u0003 ZKHQ\u0003XVHG\u0003IRU\u0003FRS\\LQJ\u0003GDWD\u0003EHWZHHQ\u0003WKH\u0003*38\u0003DQG\u0003WKH\u0003KRVW\u0011\u0003%XW\u0003HYHQ\u0003LQ\u0003D\u0003ZRUOG\u0003 ZKHUH\u00033&,\u0003([SUHVV\u0003DQG\u0003IURQW\u0010VLGH\u0003EXV\u0003VSHHGV\u0003ZHUH\u0003LGHQWLFDO\u000f\u0003SDJHDEOH\u0003EXIIHUV\u0003 ZRXOG\u0003VWLOO\u0003LQFXU\u0003WKH\u0003RYHUKHDG\u0003RI\u0003DQ\u0003DGGLWLRQDO\u0003&38\u0010PDQDJHG\u0003FRS\\\u0011 +RZHYHU\u000f\u0003\\RX\u0003VKRXOG\u0003UHVLVW\u0003WKH\u0003WHPSWDWLRQ\u0003WR\u0003VLPSO\\\u0003GR\u0003D\u0003VHDUFK\u0010DQG\u0010UHSODFH\u0003 RQ\u0003malloc \u0003WR\u0003FRQYHUW\u0003HYHU\\\u0003RQH\u0003RI\u0003\\RXU\u0003FDOOV\u0003WR\u0003XVH\u0003 cudaHostAlloc() \u0011\u00038VLQJ\u0003 SLQQHG\u0003PHPRU\\\u0003LV\u0003D\u0003GRXEOH\u0010HGJHG\u0003VZRUG\u0011\u0003%\\\u0003GRLQJ\u0003VR\u000f\u0003\\RX\u0003KDYH\u0003HIIHFWLYHO\\\u0003RSWHG\u0003 RXW\u0003RI\u0003DOO\u0003WKH\u0003QLFH\u0003IHDWXUHV\u0003RI\u0003YLUWXDO\u0003PHPRU\\\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003WKH\u0003FRPSXWHU\u0003UXQQLQJ\u0003 WKH\u0003DSSOLFDWLRQ\u0003QHHGV\u0003WR\u0003KDYH\u0003DYDLODEOH\u0003SK\\VLFDO\u0003PHPRU\\\u0003IRU\u0003HYHU\\\u0003SDJH\u0010ORFNHG\u0003 EXIIHU\u000f\u0003VLQFH\u0003WKHVH\u0003EXIIHUV\u0003FDQ\u0003QHYHU\u0003EH\u0003VZDSSHG\u0003RXW\u0003WR\u0003GLVN\u0011\u00037KLV\u0003PHDQV\u0003WKDW\u0003 \\RXU\u0003V\\VWHP\u0003ZLOO\u0003UXQ\u0003RXW\u0003RI\u0003PHPRU\\\u0003PXFK\u0003IDVWHU\u0003WKDQ\u0003LW\u0003ZRXOG\u0003LI\u0003\\RX\u0003VWXFN\u0003WR\u0003 VWDQGDUG\u0003 malloc() \u0003FDOOV\u0011\u00031RW\u0003RQO\\\u0003GRHV\u0003WKLV\u0003PHDQ\u0003WKDW\u0003\\RXU\u0003DSSOLFDWLRQ\u0003PLJKW\u0003 VWDUW\u0003WR\u0003IDLO\u0003RQ\u0003PDFKLQHV\u0003ZLWK\u0003VPDOOHU\u0003DPRXQWV\u0003RI\u0003SK\\VLFDO\u0003PHPRU\\\u000f\u0003EXW\u0003LW\u0003PHDQV\u0003 WKDW\u0003\\RXU\u0003DSSOLFDWLRQ\u0003FDQ\u0003DIIHFW\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003RWKHU\u0003DSSOLFDWLRQV\u0003UXQQLQJ\u0003RQ\u0003 WKH\u0003V\\VWHP\u0011\u0003 7KHVH\u0003ZDUQLQJV\u0003DUH\u0003QRW\u0003PHDQW\u0003WR\u0003VFDUH\u0003\\RX\u0003RXW\u0003RI\u0003XVLQJ\u0003 cudaHostAlloc() \u000f\u0003EXW\u0003 \\RX\u0003VKRXOG\u0003UHPDLQ\u0003DZDUH\u0003RI\u0003WKH\u0003LPSOLFDWLRQV\u0003RI\u0003SDJH\u0010ORFNLQJ\u0003EXIIHUV\u0011\u0003:H\u0003VXJJHVW\u0003 WU\\LQJ\u0003WR\u0003UHVWULFW\u0003WKHLU\u0003XVH\u0003WR\u0003PHPRU\\\u0003WKDW\u0003ZLOO\u0003EH\u0003XVHG\u0003DV\u0003D\u0003VRXUFH\u0003RU\u0003GHVWLQDWLRQ\u0003 LQ\u0003FDOOV\u0003WR\u0003 cudaMemcpy() \u0003DQG\u0003IUHHLQJ\u0003WKHP\u0003ZKHQ\u0003WKH\\\u0003DUH\u0003QR\u0003ORQJHU\u0003QHHGHG\u0003 UDWKHU\u0003WKDQ\u0003ZDLWLQJ\u0003XQWLO\u0003DSSOLFDWLRQ\u0003VKXWGRZQ\u0003WR\u0003UHOHDVH\u0003WKH\u0003PHPRU\\\u0011\u00037KH\u0003XVH\u0003RI\u0003 cudaHostAlloc() \u0003VKRXOG\u0003EH\u0003QR\u0003PRUH\u0003GLI\u020cFXOW\u0003WKDQ\u0003DQ\\WKLQJ\u0003HOVH\u0003\\RX\u01e2YH\u0003VWXGLHG\u0003 VR\u0003IDU\u000f\u0003EXW\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003DQ\u0003H[DPSOH\u0003WKDW\u0003ZLOO\u0003ERWK\u0003LOOXVWUDWH\u0003KRZ\u0003SLQQHG\u0003 PHPRU\\\u0003LV\u0003DOORFDWHG\u0003DQG\u0003GHPRQVWUDWH\u0003LWV\u0003SHUIRUPDQFH\u0003DGYDQWDJH\u0003RYHU\u0003VWDQGDUG\u0003 SDJHDEOH\u0003PHPRU\\\u0011 2XU\u0003DSSOLFDWLRQ\u0003ZLOO\u0003EH\u0003YHU\\\u0003VLPSOH\u0003DQG\u0003VHUYHV\u0003SULPDULO\\\u0003WR\u0003EHQFKPDUN\u0003 cudaMemcpy() \u0003SHUIRUPDQFH\u0003ZLWK\u0003ERWK\u0003SDJHDEOH\u0003DQG\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u0011\u0003 $OO\u0003ZH\u0003HQGHDYRU\u0003WR\u0003GR\u0003LV\u0003DOORFDWH\u0003D\u0003*38\u0003EXIIHU\u0003DQG\u0003D\u0003KRVW\u0003EXIIHU\u0003RI\u0003PDWFKLQJ\u0003 VL]HV\u0003DQG\u0003WKHQ\u0003H[HFXWH\u0003VRPH\u0003QXPEHU\u0003RI\u0003FRSLHV\u0003EHWZHHQ\u0003WKHVH\u0003WZR\u0003EXIIHUV\u0011\u0003:H\u01e2OO\u0003 DOORZ\u0003WKH\u0003XVHU\u0003RI\u0003WKLV\u0003EHQFKPDUN\u0003WR\u0003VSHFLI\\\u0003WKH\u0003GLUHFWLRQ\u0003RI\u0003WKH\u0003FRS\\\u000f\u0003HLWKHU\u0003\u01e4XS\u01e5\u0003 IURP\u0003KRVW\u0003WR\u0003GHYLFH \u0003RU\u0003\u01e4GRZQ\u01e5\u0003 IURP\u0003GHYLFH\u0003WR\u0003KRVW \u0011\u0003<RX\u0003ZLOO\u0003DOVR\u0003QRWLFH\u0003WKDW\u000f\u0003LQ\u0003 RUGHU\u0003WR\u0003REWDLQ\u0003DFFXUDWH\u0003WLPLQJV\u000f\u0003ZH\u0003VHW\u0003XS\u0003&8'$\u0003HYHQWV\u0003IRU\u0003WKH\u0003VWDUW\u0003DQG\u0003VWRS\u0003 Download from www.wowebook.comptgSTRE AMS /one.lf/eight.lf/eight.lfRI\u0003WKH\u0003VHTXHQFH\u0003RI\u0003FRSLHV\u0011\u0003<RX\u0003SUREDEO\\\u0003UHPHPEHU\u0003KRZ\u0003WR\u0003GR\u0003WKLV\u0003IURP\u0003SUHYLRXV\u0003 SHUIRUPDQFH\u0010WHVWLQJ\u0003H[DPSOHV\u000f\u0003EXW\u0003LQ\u0003FDVH\u0003\\RX\u01e2YH\u0003IRUJRWWHQ\u000f\u0003WKH\u0003IROORZLQJ\u0003ZLOO\u0003MRJ\u0003 \\RXU\u0003PHPRU\\ float cuda_malloc_test( int size, bool up ) { cudaEvent_t start, stop; int *a, *dev_a; float elapsedTime; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); a = ( int*)malloc( size * sizeof( *a ) ); HANDLE_NULL( a ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, size * sizeof( *dev_a ) ) ); ,QGHSHQGHQW\u0003RI\u0003WKH\u0003GLUHFWLRQ\u0003RI\u0003WKH\u0003FRSLHV\u000f\u0003ZH\u0003VWDUW\u0003E\\\u0003DOORFDWLQJ\u0003D\u0003KRVW\u0003DQG\u0003*38\u0003 EXIIHU\u0003RI\u0003 size\u0003LQWHJHUV\u0011\u0003$IWHU\u0003WKLV\u000f\u0003ZH\u0003GR\u0003\u0014\u0013\u0013\u0003FRSLHV\u0003LQ\u0003WKH\u0003GLUHFWLRQ\u0003VSHFL\u020cHG\u0003E\\\u0003 WKH\u0003DUJXPHQW\u0003 up\u000f\u0003VWRSSLQJ\u0003WKH\u0003WLPHU\u0003DIWHU\u0003ZH\u01e2YH\u0003\u020cQLVKHG\u0003FRS\\LQJ\u0011 HANDLE_ERROR( cudaEventRecord( start, 0 ) ); for (int i=0; i<100; i++) { if (up) HANDLE_ERROR( cudaMemcpy( dev_a, a, size * sizeof( *dev_a ), cudaMemcpyHostToDevice ) ); else HANDLE_ERROR( cudaMemcpy( a, dev_a, size * sizeof( *dev_a ), cudaMemcpyDeviceToHost ) ); } HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); Download from www.wowebook.comptg(((///...'''+++666 777000<<< /one.lf/eight.lf/nine.lf\u0014\u0013\u0011\u0015\u0003333$$$ ***\u0210\u0210\u0210222 &&&(((\u0003\u0003\u0003222\u0003\u0003\u0003((( 000 222 555 $IWHU\u0003WKH\u0003\u0014\u0013\u0013\u0003FRSLHV\u000f\u0003FOHDQ\u0003XS\u0003E\\\u0003IUHHLQJ\u0003WKH\u0003KRVW\u0003DQG\u0003*38\u0003EXIIHUV\u0003DV\u0003ZHOO\u0003DV\u0003 GHVWUR\\LQJ\u0003RXU\u0003WLPLQJ\u0003HYHQWV\u0011 free( a ); HANDLE_ERROR( cudaFree( dev_a ) ); HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); return elapsedTime; } ,I\u0003\\RX\u0003GLGQ\u01e2W\u0003QRWLFH\u000f\u0003WKH\u0003IXQFWLRQ\u0003 cuda_malloc_test() \u0003DOORFDWHG\u0003SDJHDEOH\u0003KRVW\u0003 PHPRU\\\u0003ZLWK\u0003WKH\u0003VWDQGDUG\u0003&\u0003 malloc() \u0003URXWLQH\u0011\u00037KH\u0003SLQQHG\u0003PHPRU\\\u0003YHUVLRQ\u0003 XVHV\u0003cudaHostAlloc() \u0003WR\u0003DOORFDWH\u0003D\u0003SDJH\u0010ORFNHG\u0003EXIIHU\u0011 float cuda_host_alloc_test( int size, bool up ) { cudaEvent_t start, stop; int *a, *dev_a; float elapsedTime; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&a, size * sizeof( *a ), cudaHostAllocDefault ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, size * sizeof( *dev_a ) ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); for (int i=0;",
    "cudaEvent_t start, stop; int *a, *dev_a; float elapsedTime; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&a, size * sizeof( *a ), cudaHostAllocDefault ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, size * sizeof( *dev_a ) ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); for (int i=0; i<100; i++) { if (up) HANDLE_ERROR( cudaMemcpy( dev_a, a, size * sizeof( *a ), cudaMemcpyHostToDevice ) ); else Download from www.wowebook.comptgSTRE AMS /one.lf/nine.lf/zero.lf HANDLE_ERROR( cudaMemcpy( a, dev_a, size * sizeof( *a ), cudaMemcpyDeviceToHost ) ); } HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); HANDLE_ERROR( cudaFreeHost( a ) ); HANDLE_ERROR( cudaFree( dev_a ) ); HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); return elapsedTime; } $V\u0003\\RX\u0003FDQ\u0003VHH\u000f\u0003WKH\u0003EXIIHU\u0003DOORFDWHG\u0003E\\\u0003 cudaHostAlloc() \u0003LV\u0003XVHG\u0003LQ\u0003WKH\u0003VDPH\u0003 ZD\\\u0003DV\u0003D\u0003EXIIHU\u0003DOORFDWHG\u0003E\\\u0003 malloc() \u0011\u00037KH\u0003RWKHU\u0003FKDQJH\u0003IURP\u0003XVLQJ\u0003 malloc() OLHV\u0003LQ\u0003WKH\u0003ODVW\u0003DUJXPHQW\u000f\u0003WKH\u0003YDOXH\u0003 cudaHostAllocDefault \u0011\u00037KLV\u0003ODVW\u0003DUJX - PHQW\u0003VWRUHV\u0003D\u0003FROOHFWLRQ\u0003RI\u0003\u020dDJV\u0003WKDW\u0003ZH\u0003FDQ\u0003XVH\u0003WR\u0003PRGLI\\\u0003WKH\u0003EHKDYLRU\u0003RI\u0003 cudaHostAlloc() \u0003LQ\u0003RUGHU\u0003WR\u0003DOORFDWH\u0003RWKHU\u0003YDULHWLHV\u0003RI\u0003SLQQHG\u0003KRVW\u0003PHPRU\\\u0011\u0003 ,Q\u0003WKH\u0003QH[W\u0003FKDSWHU\u000f\u0003ZH\u01e2OO\u0003VHH\u0003KRZ\u0003WR\u0003XVH\u0003WKH\u0003RWKHU\u0003SRVVLEOH\u0003YDOXHV\u0003RI\u0003WKHVH\u0003\u020dDJV\u000f\u0003 EXW\u0003IRU\u0003QRZ\u0003ZH\u01e2UH\u0003FRQWHQW\u0003WR\u0003XVH\u0003WKH\u0003GHIDXOW\u000f\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u0003VR\u0003ZH\u0003SDVV\u0003 cudaHostAllocDefault \u0003LQ\u0003RUGHU\u0003WR\u0003JHW\u0003WKH\u0003GHIDXOW\u0003EHKDYLRU\u0011\u00037R\u0003IUHH\u0003D\u0003EXIIHU\u0003 WKDW\u0003ZDV\u0003DOORFDWHG\u0003ZLWK\u0003 cudaHostAlloc() \u000f\u0003ZH\u0003KDYH\u0003WR\u0003XVH\u0003 cudaFreeHost() \u0011\u0003 7KDW\u0003LV\u000f\u0003HYHU\\\u0003 malloc() \u0003QHHGV\u0003D\u0003 free()\u000f\u0003DQG\u0003HYHU\\\u0003 cudaHostAlloc() \u0003QHHGV\u0003 a cudaFreeHost() \u0011 7KH\u0003ERG\\\u0003RI\u0003 main()\u0003SURFHHGV\u0003QRW\u0003XQOLNH\u0003ZKDW\u0003\\RX\u0003ZRXOG\u0003H[SHFW\u0011 #include \"../common/book.h\" #define SIZE (10*1024*1024) int main( void ) { float elapsedTime; float MB = (float)100*SIZE* sizeof(int)/1024/1024; Download from www.wowebook.comptg(((///...'''+++666 777000<<< /one.lf/nine.lf/one.lf\u0014\u0013\u0011\u0015\u0003333$$$ ***\u0210\u0210\u0210222 &&&(((\u0003\u0003\u0003222\u0003\u0003\u0003((( 000 222 555 elapsedTime = cuda_malloc_test( SIZE, true ); printf( \"Time using cudaMalloc: %3.1f ms\\n\" , elapsedTime ); printf( \"\\ tMB/s during copy up: %3.1f\\n\" , MB/(elapsedTime/1000) ); %HFDXVH\u0003WKH\u0003 up\u0003DUJXPHQW\u0003WR\u0003 cuda_malloc_test() \u0003LV\u0003true\u000f\u0003WKH\u0003SUHYLRXV\u0003FDOO\u0003 WHVWV\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003FRSLHV\u0003IURP\u0003KRVW\u0003WR\u0003GHYLFH\u000f\u0003RU\u0003\u01e4XS\u01e5\u0003WR\u0003WKH\u0003GHYLFH\u0011\u00037R\u0003 EHQFKPDUN\u0003WKH\u0003FDOOV\u0003LQ\u0003WKH\u0003RSSRVLWH\u0003GLUHFWLRQ\u000f\u0003ZH\u0003H[HFXWH\u0003WKH\u0003VDPH\u0003FDOOV\u0003EXW\u0003ZLWK\u0003 false\u0003DV\u0003WKH\u0003VHFRQG\u0003DUJXPHQW\u0011 elapsedTime = cuda_malloc_test( SIZE, false ); printf( \"Time using cudaMalloc: %3.1f ms\\n\" , elapsedTime ); printf( \"\\tMB/s during copy down: %3.1f\\n\" , MB/(elapsedTime/1000) ); :H\u0003SHUIRUP\u0003WKH\u0003VDPH\u0003VHW\u0003RI\u0003VWHSV\u0003WR\u0003WHVW\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003 \u0003cudaHostAlloc() \u0011\u0003 :H\u0003FDOO\u0003cuda_ host_alloc_test() \u0003WZLFH\u000f\u0003RQFH\u0003ZLWK\u0003 up\u0003DV\u0003true\u0003DQG\u0003RQFH\u0003 ZLWK\u0003LW\u0003false\u0011 elapsedTime = cuda_host_alloc_test( SIZE, true ); printf( \"Time using cudaHostAlloc: %3.1f ms\\n\" , elapsedTime ); printf( \"\\ tMB/s during copy up: %3.1f\\n\" , MB/(elapsedTime/1000) ); elapsedTime = cuda_host_alloc_test( SIZE, false ); printf( \"Time using cudaHostAlloc: %3.1f ms\\n\" , elapsedTime ); printf( \"\\tMB/s during copy down: %3.1f\\n\" , MB/(elapsedTime/1000) ); } 2Q\u0003D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u000f\u0003ZH\u0003REVHUYHG\u0003FRSLHV\u0003IURP\u0003KRVW\u0003WR\u0003GHYLFH\u0003LPSURYLQJ\u0003IURP\u0003 \u0015\u0011\u001a\u001a*%\u0012V\u0003WR\u0003\u0018\u0011\u0014\u0014*%\u0012V\u0003ZKHQ\u0003ZH\u0003XVH\u0003SLQQHG\u0003PHPRU\\\u0003LQVWHDG\u0003RI\u0003SDJHDEOH\u0003PHPRU\\\u0011\u0003 Download from www.wowebook.comptgSTRE AMS /one.lf/nine.lf/two.lf&RSLHV\u0003IURP\u0003WKH\u0003GHYLFH\u0003GRZQ\u0003WR\u0003WKH\u0003KRVW\u0003LPSURYH\u0003VLPLODUO\\\u000f\u0003IURP\u0003\u0015\u0011\u0017\u0016*%\u0012V\u0003WR\u0003 \u0018\u0011\u0017\u0019*%\u0012V\u0011\u00036R\u000f\u0003IRU\u0003PRVW\u00033&,(\u0003EDQGZLGWK\u0010OLPLWHG\u0003DSSOLFDWLRQV\u000f\u0003\\RX\u0003ZLOO\u0003QRWLFH\u0003D\u0003 PDUNHG\u0003LPSURYHPHQW\u0003ZKHQ\u0003XVLQJ\u0003SLQQHG\u0003PHPRU\\\u0003YHUVXV\u0003VWDQGDUG\u0003SDJHDEOH\u0003 PHPRU\\\u0011\u0003%XW\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u0003LV\u0003QRW\u0003VROHO\\\u0003IRU\u0003SHUIRUPDQFH\u0003HQKDQFHPHQWV\u0011\u0003 $V\u0003ZH\u01e2OO\u0003VHH\u0003LQ\u0003WKH\u0003QH[W\u0003VHFWLRQV\u000f\u0003WKHUH\u0003DUH\u0003VLWXDWLRQV\u0003ZKHUH\u0003ZH\u0003DUH\u0003 required \u0003WR\u0003 XVH\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u0011\u0003 &8'$\u00036WUHDPV\u0014\u0013\u0011\u0016\u0003,Q\u0003&KDSWHU\u0003\u0019\u000f\u0003ZH\u0003LQWURGXFHG\u0003WKH\u0003FRQFHSW\u0003RI\u0003&8'$\u0003HYHQWV\u0011\u0003,Q\u0003GRLQJ\u0003VR\u000f\u0003ZH\u0003SRVW - SRQHG\u0003DQ\u0003LQ\u0010GHSWK\u0003GLVFXVVLRQ\u0003RI\u0003WKH\u0003VHFRQG\u0003DUJXPHQW\u0003WR\u0003 \u0003cudaEventRecord() , LQVWHDG\u0003PHQWLRQLQJ\u0003RQO\\\u0003WKDW\u0003LW\u0003VSHFL\u020cHG\u0003WKH\u0003 stream \u0003LQWR\u0003ZKLFK\u0003ZH\u0003ZHUH\u0003LQVHUWLQJ\u0003 WKH\u0003HYHQW\u0011 cudaEvent_t start; cudaEventCreate(&start); cudaEventRecord( start, 0 ); &8'$\u0003VWUHDPV\u0003FDQ\u0003SOD\\\u0003DQ\u0003LPSRUWDQW\u0003UROH\u0003LQ\u0003DFFHOHUDWLQJ\u0003\\RXU\u0003DSSOLFDWLRQV\u0011\u0003 A CUDA stream UHSUHVHQWV\u0003D\u0003TXHXH\u0003RI\u0003*38\u0003RSHUDWLRQV\u0003WKDW\u0003JHW\u0003H[HFXWHG\u0003LQ\u0003D\u0003 VSHFL\u020cF\u0003RUGHU\u0011\u0003:H\u0003FDQ\u0003DGG\u0003RSHUDWLRQV\u0003VXFK\u0003DV\u0003NHUQHO\u0003ODXQFKHV\u000f\u0003PHPRU\\\u0003FRSLHV\u000f\u0003 DQG\u0003HYHQW\u0003VWDUWV\u0003DQG\u0003VWRSV\u0003LQWR\u0003D\u0003VWUHDP\u0011\u00037KH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003RSHUDWLRQV\u0003DUH\u0003DGGHG\u0003 WR\u0003WKH\u0003VWUHDP\u0003VSHFL\u020cHV\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003WKH\\\u0003ZLOO\u0003EH\u0003H[HFXWHG\u0011\u0003<RX\u0003FDQ\u0003WKLQN\u0003RI\u0003 HDFK\u0003VWUHDP\u0003DV\u0003D\u0003 task\u0003RQ\u0003WKH\u0003*38\u000f\u0003DQG\u0003WKHUH\u0003DUH\u0003RSSRUWXQLWLHV\u0003IRU\u0003WKHVH\u0003WDVNV\u0003WR\u0003 H[HFXWH\u0003LQ\u0003SDUDOOHO\u0011\u0003:H\u01e2OO\u0003\u020cUVW\u0003VHH\u0003KRZ\u0003VWUHDPV\u0003DUH\u0003XVHG\u000f\u0003DQG\u0003WKHQ\u0003ZH\u01e2OO\u0003ORRN\u0003DW\u0003 KRZ\u0003\\RX\u0003FDQ\u0003XVH\u0003VWUHDPV\u0003WR\u0003DFFHOHUDWH\u0003\\RXU\u0003DSSOLFDWLRQV\u0011 8VLQJ\u0003D\u00036LQJOH\u0003&8'$\u00036WUHDP\u0014\u0013\u0011\u0017\u0003 $V\u0003ZH\u01e2OO\u0003VHH\u0003ODWHU\u000f\u0003WKH\u0003UHDO\u0003SRZHU\u0003RI\u0003VWUHDPV\u0003EHFRPHV\u0003DSSDUHQW\u0003RQO\\\u0003ZKHQ\u0003ZH\u0003 XVH\u0003PRUH\u0003WKDQ\u0003RQH\u0003RI\u0003WKHP\u000f\u0003EXW\u0003ZH\u01e2OO\u0003EHJLQ\u0003WR\u0003LOOXVWUDWH\u0003WKH\u0003PHFKDQLFV\u0003RI\u0003WKHLU\u0003 XVH\u0003ZLWKLQ\u0003DQ\u0003DSSOLFDWLRQ\u0003WKDW\u0003HPSOR\\V\u0003MXVW\u0003D\u0003VLQJOH\u0003VWUHDP\u0011\u0003,PDJLQH\u0003WKDW\u0003ZH\u0003 KDYH\u0003D\u0003&8'$\u0003&\u0003NHUQHO\u0003WKDW\u0003ZLOO\u0003WDNH\u0003WZR\u0003LQSXW\u0003EXIIHUV\u0003RI\u0003GDWD\u000f\u0003 a\u0003DQG\u0003b\u0011\u00037KH\u0003NHUQHO\u0003 ZLOO\u0003FRPSXWH\u0003VRPH\u0003UHVXOW\u0003EDVHG\u0003RQ\u0003D\u0003FRPELQDWLRQ\u0003RI\u0003YDOXHV\u0003LQ\u0003WKHVH\u0003EXIIHUV\u0003WR\u0003 SURGXFH\u0003DQ\u0003RXWSXW\u0003EXIIHU\u0003 c\u0011\u00032XU\u0003YHFWRU\u0003DGGLWLRQ\u0003H[DPSOH\u0003GLG\u0003VRPHWKLQJ\u0003DORQJ\u0003 Download from www.wowebook.comptgUSING A SINGLE CUDA STRE AM /one.lf/nine.lf/three.lf\u0014\u0013\u0011\u0017\u000386,1*\u0003$\u00036,1*/(\u0003&8'$\u00036 75($0 WKHVH\u0003OLQHV\u000f\u0003EXW\u0003LQ\u0003WKLV\u0003H[DPSOH\u0003ZH\u01e2OO\u0003FRPSXWH\u0003DQ\u0003DYHUDJH\u0003RI\u0003WKUHH\u0003YDOXHV\u0003LQ\u0003 a\u0003DQG\u0003 WKUHH\u0003YDOXHV\u0003LQ\u0003 b #include \"../common/book.h\" #define N (1024*1024) #define FULL_DATA_SIZE (N*20) __global__ void kernel( int *a, int *b, int *c ) { int idx = threadIdx.x + blockIdx.x * blockDim.x; if (idx < N) { int idx1 = (idx + 1) % 256; int idx2 = (idx + 2) % 256; float as = (a[idx] + a[idx1] + a[idx2]) / 3.0f; float bs = (b[idx] + b[idx1] + b[idx2]) / 3.0f; c[idx] = (as + bs) / 2; } } 7KLV\u0003NHUQHO\u0003LV\u0003QRW\u0003LQFUHGLEO\\\u0003LPSRUWDQW\u000f\u0003VR\u0003GRQ\u01e2W\u0003JHW\u0003WRR\u0003KXQJ\u0003XS\u0003RQ\u0003LW\u0003LI\u0003\\RX\u0003 DUHQ\u01e2W\u0003VXUH\u0003H[DFWO\\\u0003ZKDW\u0003LW\u01e2V\u0003VXSSRVHG\u0003WR\u0003EH\u0003FRPSXWLQJ\u0011\u0003,W\u01e2V\u0003VRPHWKLQJ\u0003RI\u0003D\u0003 SODFHKROGHU\u0003VLQFH\u0003WKH\u0003LPSRUWDQW\u000f\u0003VWUHDP\u0010UHODWHG\u0003FRPSRQHQW\u0003RI\u0003WKLV\u0003H[DPSOH\u0003 UHVLGHV\u0003LQ\u0003 main()\u0011 int main( void ) { cudaDeviceProp prop; int whichDevice; HANDLE_ERROR( cudaGetDevice( &whichDevice ) ); HANDLE_ERROR( cudaGetDeviceProperties( &prop, whichDevice ) ); if (!prop.deviceOverlap) { printf( \"Device will not handle overlaps, so no \" \"speed up from streams\\n\" ); return 0; } Download from www.wowebook.comptgSTRE AMS /one.lf/nine.lf/four.lf7KH\u0003\u020cUVW\u0003WKLQJ\u0003ZH\u0003GR\u0003LV\u0003FKRRVH\u0003D\u0003GHYLFH\u0003DQG\u0003FKHFN\u0003WR\u0003VHH\u0003ZKHWKHU\u0003LW\u0003VXSSRUWV\u0003D\u0003 IHDWXUH\u0003NQRZQ\u0003DV\u0003 device overlap \u0011\u0003$\u0003*38\u0003VXSSRUWLQJ\u0003GHYLFH\u0003RYHUODS\u0003SRVVHVVHV\u0003WKH\u0003 FDSDFLW\\\u0003WR\u0003VLPXOWDQHRXVO\\\u0003H[HFXWH\u0003D\u0003&8'$\u0003&\u0003NHUQHO\u0003ZKLOH\u0003SHUIRUPLQJ\u0003D\u0003FRS\\\u0003 EHWZHHQ\u0003GHYLFH\u0003DQG\u0003KRVW\u0003PHPRU\\\u0011\u0003$V\u0003ZH\u01e2YH\u0003SURPLVHG\u0003EHIRUH\u000f\u0003ZH\u01e2OO\u0003XVH\u0003PXOWLSOH\u0003",
    "main( void ) { cudaDeviceProp prop; int whichDevice; HANDLE_ERROR( cudaGetDevice( &whichDevice ) ); HANDLE_ERROR( cudaGetDeviceProperties( &prop, whichDevice ) ); if (!prop.deviceOverlap) { printf( \"Device will not handle overlaps, so no \" \"speed up from streams\\n\" ); return 0; } Download from www.wowebook.comptgSTRE AMS /one.lf/nine.lf/four.lf7KH\u0003\u020cUVW\u0003WKLQJ\u0003ZH\u0003GR\u0003LV\u0003FKRRVH\u0003D\u0003GHYLFH\u0003DQG\u0003FKHFN\u0003WR\u0003VHH\u0003ZKHWKHU\u0003LW\u0003VXSSRUWV\u0003D\u0003 IHDWXUH\u0003NQRZQ\u0003DV\u0003 device overlap \u0011\u0003$\u0003*38\u0003VXSSRUWLQJ\u0003GHYLFH\u0003RYHUODS\u0003SRVVHVVHV\u0003WKH\u0003 FDSDFLW\\\u0003WR\u0003VLPXOWDQHRXVO\\\u0003H[HFXWH\u0003D\u0003&8'$\u0003&\u0003NHUQHO\u0003ZKLOH\u0003SHUIRUPLQJ\u0003D\u0003FRS\\\u0003 EHWZHHQ\u0003GHYLFH\u0003DQG\u0003KRVW\u0003PHPRU\\\u0011\u0003$V\u0003ZH\u01e2YH\u0003SURPLVHG\u0003EHIRUH\u000f\u0003ZH\u01e2OO\u0003XVH\u0003PXOWLSOH\u0003 VWUHDPV\u0003WR\u0003DFKLHYH\u0003WKLV\u0003RYHUODS\u0003RI\u0003FRPSXWDWLRQ\u0003DQG\u0003GDWD\u0003WUDQVIHU\u000f\u0003EXW\u0003\u020cUVW\u0003ZH\u01e2OO\u0003 VHH\u0003KRZ\u0003WR\u0003FUHDWH\u0003DQG\u0003XVH\u0003D\u0003VLQJOH\u0003VWUHDP\u0011\u0003$V\u0003ZLWK\u0003DOO\u0003RI\u0003RXU\u0003H[DPSOHV\u0003WKDW\u0003DLP\u0003WR\u0003 PHDVXUH\u0003SHUIRUPDQFH\u0003LPSURYHPHQWV\u0003 RU\u0003UHJUHVVLRQV \u000f\u0003ZH\u0003EHJLQ\u0003E\\\u0003FUHDWLQJ\u0003DQG\u0003 VWDUWLQJ\u0003DQ\u0003HYHQW\u0003WLPHU cudaEvent_t start, stop; float elapsedTime; // start the timers HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); $IWHU\u0003VWDUWLQJ\u0003RXU\u0003WLPHU\u000f\u0003ZH\u0003FUHDWH\u0003WKH\u0003VWUHDP\u0003ZH\u0003ZDQW\u0003WR\u0003XVH\u0003IRU\u0003WKLV\u0003DSSOLFDWLRQ // initialize the stream cudaStream_t stream; HANDLE_ERROR( cudaStreamCreate( &stream ) ); <HDK\u000f\u0003WKDW\u01e2V\u0003SUHWW\\\u0003PXFK\u0003DOO\u0003LW\u0003WDNHV\u0003WR\u0003FUHDWH\u0003D\u0003VWUHDP\u0011\u0003,W\u01e2V\u0003QRW\u0003UHDOO\\\u0003ZRUWK\u0003 GZHOOLQJ\u0003RQ\u000f\u0003VR\u0003OHW\u01e2V\u0003SUHVV\u0003RQ\u0003WR\u0003WKH\u0003GDWD\u0003DOORFDWLRQ\u0011 int *host_a, *host_b, *host_c; int *dev_a, *dev_b, *dev_c; // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c, N * sizeof(int) ) ); Download from www.wowebook.comptgUSING A SINGLE CUDA STRE AM /one.lf/nine.lf/five.lf\u0014\u0013\u0011\u0017\u000386,1*\u0003$\u00036,1*/(\u0003&8'$\u00036 75($0 // allocate page-locked memory, used to stream HANDLE_ERROR( cudaHostAlloc( ( void**)&host_a, FULL_DATA_SIZE * sizeof(int), cudaHostAllocDefault ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&host_b, FULL_DATA_SIZE * sizeof(int), cudaHostAllocDefault ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&host_c, FULL_DATA_SIZE * sizeof(int), cudaHostAllocDefault ) ); for (int i=0; i<FULL_DATA_SIZE; i++) { host_a[i] = rand(); host_b[i] = rand(); } :H\u0003KDYH\u0003DOORFDWHG\u0003RXU\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0003RQ\u0003ERWK\u0003WKH\u0003*38\u0003DQG\u0003WKH\u0003 KRVW\u0011\u00031RWLFH\u0003WKDW\u0003ZH\u01e2YH\u0003GHFLGHG\u0003WR\u0003XVH\u0003SLQQHG\u0003PHPRU\\\u0003RQ\u0003WKH\u0003KRVW\u0003E\\\u0003XVLQJ\u0003 cudaHostAlloc() \u0003WR\u0003SHUIRUP\u0003WKH\u0003DOORFDWLRQV\u0011\u00037KHUH\u0003LV\u0003D\u0003YHU\\\u0003JRRG\u0003UHDVRQ\u0003IRU\u0003 XVLQJ\u0003SLQQHG\u0003PHPRU\\\u000f\u0003DQG\u0003LW\u01e2V\u0003QRW\u0003VWULFWO\\\u0003EHFDXVH\u0003LW\u0003PDNHV\u0003FRSLHV\u0003IDVWHU\u0011\u0003:H\u01e2OO\u0003 VHH\u0003LQ\u0003GHWDLO\u0003PRPHQWDULO\\\u000f\u0003EXW\u0003ZH\u0003ZLOO\u0003EH\u0003XVLQJ\u0003D\u0003QHZ\u0003NLQG\u0003RI\u0003 cudaMemcpy() IXQFWLRQ\u000f\u0003DQG\u0003WKLV\u0003QHZ\u0003IXQFWLRQ\u0003 requires \u0003WKDW\u0003WKH\u0003KRVW\u0003PHPRU\\\u0003EH\u0003SDJH\u0010ORFNHG\u0011\u0003 $IWHU\u0003DOORFDWLQJ\u0003WKH\u0003LQSXW\u0003EXIIHUV\u000f\u0003ZH\u0003\u020cOO\u0003WKH\u0003KRVW\u0003DOORFDWLRQV\u0003ZLWK\u0003UDQGRP\u0003LQWHJHUV\u0003 XVLQJ\u0003WKH\u0003&\u0003OLEUDU\\\u0003FDOO\u0003 rand()\u0011\u0003 :LWK\u0003RXU\u0003VWUHDP\u0003DQG\u0003RXU\u0003WLPLQJ\u0003HYHQWV\u0003FUHDWHG\u0003DQG\u0003RXU\u0003GHYLFH\u0003DQG\u0003KRVW\u0003EXIIHUV\u0003 DOORFDWHG\u000f\u0003ZH\u01e2UH\u0003UHDG\\\u0003WR\u0003SHUIRUP\u0003VRPH\u0003FRPSXWDWLRQV\u0004\u00037\\SLFDOO\\\u0003ZH\u0003EODVW\u0003WKURXJK\u0003 WKLV\u0003VWDJH\u0003E\\\u0003FRS\\LQJ\u0003WKH\u0003WZR\u0003LQSXW\u0003EXIIHUV\u0003WR\u0003WKH\u0003*38\u000f\u0003ODXQFKLQJ\u0003RXU\u0003NHUQHO\u000f\u0003DQG\u0003 FRS\\LQJ\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0011\u0003:H\u0003ZLOO\u0003IROORZ\u0003WKLV\u0003SDWWHUQ\u0003DJDLQ\u000f\u0003EXW\u0003 WKLV\u0003WLPH\u0003ZLWK\u0003VRPH\u0003VPDOO\u0003FKDQJHV\u0011\u0003 )LUVW\u000f\u0003ZH\u0003ZLOO\u0003RSW\u0003 not\u0003WR\u0003FRS\\\u0003WKH\u0003LQSXW\u0003EXIIHUV\u0003LQ\u0003WKHLU\u0003HQWLUHW\\\u0003WR\u0003WKH\u0003*38\u0011\u00035DWKHU\u000f\u0003 ZH\u0003ZLOO\u0003VSOLW\u0003RXU\u0003LQSXWV\u0003LQWR\u0003VPDOOHU\u0003FKXQNV\u0003DQG\u0003SHUIRUP\u0003WKH\u0003WKUHH\u0010VWHS\u0003SURFHVV\u0003 RQ\u0003HDFK\u0003FKXQN\u0011\u00037KDW\u0003LV\u000f\u0003ZH\u0003ZLOO\u0003WDNH\u0003VRPH\u0003IUDFWLRQ\u0003RI\u0003WKH\u0003LQSXW\u0003EXIIHUV\u000f\u0003FRS\\\u0003 WKHP\u0003WR\u0003WKH\u0003*38\u000f\u0003H[HFXWH\u0003RXU\u0003NHUQHO\u0003RQ\u0003WKDW\u0003IUDFWLRQ\u0003RI\u0003WKH\u0003EXIIHUV\u000f\u0003DQG\u0003FRS\\\u0003WKH\u0003 UHVXOWLQJ\u0003IUDFWLRQ\u0003RI\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0011\u0003,PDJLQH\u0003WKDW\u0003ZH\u0003QHHG\u0003 Download from www.wowebook.comptgSTRE AMS /one.lf/nine.lf/six.lfWR\u0003GR\u0003WKLV\u0003EHFDXVH\u0003RXU\u0003*38\u0003KDV\u0003PXFK\u0003OHVV\u0003PHPRU\\\u0003WKDQ\u0003RXU\u0003KRVW\u0003GRHV\u000f\u0003VR\u0003WKH\u0003 FRPSXWDWLRQ\u0003QHHGV\u0003WR\u0003EH\u0003VWDJHG\u0003LQ\u0003FKXQNV\u0003EHFDXVH\u0003WKH\u0003HQWLUH\u0003EXIIHU\u0003FDQ\u01e2W\u0003\u020cW\u0003RQ\u0003 WKH\u0003*38\u0003DW\u0003RQFH\u0011\u00037KH\u0003FRGH\u0003WR\u0003SHUIRUP\u0003WKLV\u0003\u01e4FKXQNL\u020cHG\u01e5\u0003VHTXHQFH\u0003RI\u0003FRPSXWDWLRQV\u0003 ZLOO\u0003ORRN\u0003OLNH\u0003WKLV // now loop over full data, in bite-sized chunks for (int i=0; i<FULL_DATA_SIZE; i+= N) { // copy the locked memory to the device, async HANDLE_ERROR( cudaMemcpyAsync( dev_a, host_a+i, N * sizeof(int), cudaMemcpyHostToDevice, stream ) ); HANDLE_ERROR( cudaMemcpyAsync( dev_b, host_b+i, N * sizeof(int), cudaMemcpyHostToDevice, stream ) ); kernel<<<N/256,256,0,stream>>>( dev_a, dev_b, dev_c ); // copy the data from device to locked memory HANDLE_ERROR( cudaMemcpyAsync( host_c+i, dev_c, N * sizeof(int), cudaMemcpyDeviceToHost, stream ) ); } %XW\u0003\\RX\u0003ZLOO\u0003QRWLFH\u0003WZR\u0003RWKHU\u0003XQH[SHFWHG\u0003VKLIWV\u0003IURP\u0003WKH\u0003QRUP\u0003LQ\u0003WKH\u0003SUHFHGLQJ\u0003 H[FHUSW\u0011\u0003)LUVW\u000f\u0003LQVWHDG\u0003RI\u0003XVLQJ\u0003WKH\u0003IDPLOLDU\u0003 cudaMemcpy() \u000f\u0003ZH\u01e2UH\u0003FRS\\LQJ\u0003 WKH\u0003GDWD\u0003WR\u0003DQG\u0003IURP\u0003WKH\u0003*38\u0003ZLWK\u0003D\u0003QHZ\u0003URXWLQH\u000f\u0003 cudaMemcpyAsync() \u0011\u0003 7KH\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003WKHVH\u0003IXQFWLRQV\u0003LV\u0003VXEWOH\u0003\\HW\u0003VLJQL\u020cFDQW\u0011\u00037KH\u0003RULJLQDO\u0003 cudaMemcpy() \u0003EHKDYHV\u0003OLNH\u0003WKH\u0003&\u0003OLEUDU\\\u0003IXQFWLRQ\u0003 memcpy() \u0011\u00036SHFL\u020cFDOO\\\u000f\u0003WKLV\u0003 IXQFWLRQ\u0003H[HFXWHV\u0003 synchronously \u000f\u0003PHDQLQJ\u0003WKDW\u0003ZKHQ\u0003WKH\u0003IXQFWLRQ\u0003UHWXUQV\u000f\u0003WKH\u0003 FRS\\\u0003KDV\u0003FRPSOHWHG\u000f\u0003DQG\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0003QRZ\u0003FRQWDLQV\u0003WKH\u0003FRQWHQWV\u0003WKDW\u0003ZHUH\u0003 VXSSRVHG\u0003WR\u0003EH\u0003FRSLHG\u0003LQWR\u0003LW\u0011\u0003 Download from www.wowebook.comptgUSING A SINGLE CUDA STRE AM /one.lf/nine.lf/seven.lf\u0014\u0013\u0011\u0017\u000386,1*\u0003$\u00036,1*/(\u0003&8'$\u00036 75($0 7KH\u0003RSSRVLWH\u0003RI\u0003D\u0003 synchronous \u0003IXQFWLRQ\u0003LV\u0003DQ\u0003 asynchronous \u0003IXQFWLRQ\u000f\u0003ZKLFK\u0003 LQVSLUHG\u0003WKH\u0003QDPH\u0003 cudaMemcpyAsync() \u0011\u00037KH\u0003FDOO\u0003WR\u0003 cudaMemcpyAsync() VLPSO\\\u0003SODFHV\u0003D\u0003 request \u0003WR\u0003SHUIRUP\u0003D\u0003PHPRU\\\u0003FRS\\\u0003LQWR\u0003WKH\u0003VWUHDP\u0003VSHFL\u020cHG\u0003E\\\u0003 WKH\u0003DUJXPHQW\u0003 stream\u0011\u0003:KHQ\u0003WKH\u0003FDOO\u0003UHWXUQV\u000f\u0003WKHUH\u0003LV\u0003QR\u0003JXDUDQWHH\u0003WKDW\u0003WKH\u0003 FRS\\\u0003KDV\u0003HYHQ\u0003VWDUWHG\u0003\\HW\u000f\u0003PXFK\u0003OHVV\u0003WKDW\u0003LW\u0003KDV\u0003\u020cQLVKHG\u0011\u00037KH\u0003JXDUDQWHH\u0003WKDW\u0003 ZH\u0003KDYH\u0003LV\u0003WKDW\u0003WKH\u0003FRS\\\u0003ZLOO\u0003GH\u020cQLWHO\\\u0003EH\u0003SHUIRUPHG\u0003EHIRUH\u0003WKH\u0003QH[W\u0003RSHUD - WLRQ\u0003SODFHG\u0003LQWR\u0003WKH\u0003VDPH\u0003VWUHDP\u0011\u0003,W\u0003LV\u0003UHTXLUHG\u0003WKDW\u0003DQ\\\u0003KRVW\u0003PHPRU\\\u0003SRLQWHUV\u0003 SDVVHG\u0003WR\u0003 cudaMemcpyAsync() \u0003KDYH\u0003EHHQ\u0003DOORFDWHG\u0003E\\\u0003 cudaHostAlloc() \u0011\u0003 7KDW\u0003LV\u000f\u0003\\RX\u0003DUH\u0003RQO\\\u0003DOORZHG\u0003WR\u0003VFKHGXOH\u0003DV\\QFKURQRXV\u0003FRSLHV\u0003WR\u0003RU\u0003IURP\u0003SDJH\u0010 ORFNHG\u0003PHPRU\\\u0011\u0003 1RWLFH\u0003WKDW\u0003WKH\u0003DQJOH\u0010EUDFNHWHG\u0003NHUQHO\u0003ODXQFK\u0003DOVR\u0003WDNHV\u0003DQ\u0003RSWLRQDO\u0003VWUHDP\u0003 DUJXPHQW\u0011\u00037KLV\u0003NHUQHO\u0003ODXQFK\u0003LV\u0003DV\\QFKURQRXV\u000f\u0003MXVW\u0003OLNH\u0003WKH\u0003SUHFHGLQJ\u0003WZR\u0003 PHPRU\\\u0003FRSLHV\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003WKH\u0003WUDLOLQJ\u0003PHPRU\\\u0003FRS\\\u0003EDFN\u0003IURP\u0003WKH\u0003*38\u0011\u0003 7HFKQLFDOO\\\u000f\u0003ZH\u0003FDQ\u0003HQG\u0003DQ\u0003LWHUDWLRQ\u0003RI\u0003WKLV\u0003ORRS\u0003ZLWKRXW\u0003KDYLQJ\u0003DFWXDOO\\\u0003VWDUWHG\u0003 DQ\\\u0003RI\u0003WKH\u0003PHPRU\\\u0003FRSLHV\u0003RU\u0003NHUQHO\u0003H[HFXWLRQ\u0011\u0003$V\u0003ZH\u0003PHQWLRQHG\u000f\u0003DOO\u0003WKDW\u0003ZH\u0003DUH\u0003 JXDUDQWHHG\u0003LV\u0003WKDW\u0003WKH\u0003\u020cUVW\u0003FRS\\\u0003SODFHG\u0003LQWR\u0003WKH\u0003VWUHDP\u0003ZLOO\u0003H[HFXWH\u0003EHIRUH\u0003WKH\u0003 VHFRQG\u0003FRS\\\u0011\u00030RUHRYHU\u000f\u0003WKH\u0003VHFRQG\u0003FRS\\\u0003ZLOO\u0003FRPSOHWH\u0003EHIRUH\u0003WKH\u0003NHUQHO\u0003VWDUWV\u000f\u0003 DQG\u0003WKH\u0003NHUQHO\u0003ZLOO\u0003FRPSOHWH\u0003EHIRUH\u0003WKH\u0003WKLUG\u0003FRS\\\u0003VWDUWV\u0011\u00036R\u0003DV\u0003ZH\u01e2YH\u0003PHQWLRQHG\u0003 HDUOLHU\u0003LQ\u0003WKLV\u0003FKDSWHU\u000f\u0003D\u0003VWUHDP\u0003DFWV\u0003MXVW\u0003OLNH\u0003DQ\u0003RUGHUHG\u0003TXHXH\u0003RI\u0003ZRUN\u0003IRU\u0003WKH\u0003 *38\u0003WR\u0003SHUIRUP\u0011 :KHQ\u0003WKH\u0003 for()\u0003ORRS\u0003KDV\u0003WHUPLQDWHG\u000f\u0003WKHUH\u0003FRXOG\u0003VWLOO\u0003EH\u0003TXLWH\u0003D\u0003ELW\u0003RI\u0003ZRUN\u0003 TXHXHG\u0003XS\u0003IRU\u0003WKH\u0003*38\u0003WR\u0003\u020cQLVK\u0011\u0003,I\u0003ZH\u0003ZRXOG\u0003OLNH\u0003WR\u0003JXDUDQWHH\u0003WKDW\u0003WKH\u0003*38\u0003 LV\u0003GRQH\u0003ZLWK\u0003LWV\u0003FRPSXWDWLRQV\u0003DQG\u0003PHPRU\\\u0003FRSLHV\u000f\u0003ZH\u0003QHHG\u0003WR\u0003V\\QFKURQL]H\u0003 LW\u0003ZLWK\u0003WKH\u0003KRVW\u0011\u00037KDW\u0003LV\u000f\u0003ZH\u0003EDVLFDOO\\\u0003ZDQW\u0003WR\u0003WHOO\u0003WKH\u0003KRVW\u0003WR\u0003VLW\u0003DURXQG\u0003DQG\u0003 ZDLW\u0003IRU\u0003WKH\u0003*38\u0003WR\u0003\u020cQLVK\u0003EHIRUH\u0003SURFHHGLQJ\u0011\u0003:H\u0003DFFRPSOLVK\u0003WKDW\u0003E\\\u0003FDOOLQJ\u0003 cudaStreamSynchronize() \u0003DQG\u0003VSHFLI\\LQJ\u0003WKH\u0003VWUHDP\u0003WKDW\u0003ZH\u0003ZDQW\u0003WR\u0003ZDLW\u0003IRU // copy result chunk from locked to full buffer HANDLE_ERROR( cudaStreamSynchronize( stream ) ); 6LQFH\u0003WKH\u0003FRPSXWDWLRQV\u0003DQG\u0003FRSLHV\u0003KDYH\u0003FRPSOHWHG\u0003DIWHU\u0003V\\QFKURQL]LQJ\u0003 stream ZLWK\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003FDQ\u0003VWRS\u0003RXU\u0003WLPHU\u000f\u0003FROOHFW\u0003RXU\u0003SHUIRUPDQFH\u0003GDWD\u000f\u0003DQG\u0003IUHH\u0003RXU\u0003 LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0011 Download from www.wowebook.comptgSTRE AMS /one.lf/nine.lf/eight.lf HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time taken: %3.1f ms\\n\" , elapsedTime ); // cleanup the streams and memory HANDLE_ERROR( cudaFreeHost( host_a ) ); HANDLE_ERROR( cudaFreeHost( host_b ) ); HANDLE_ERROR( cudaFreeHost( host_c ) ); HANDLE_ERROR( cudaFree( dev_a ) ); HANDLE_ERROR( cudaFree( dev_b ) ); HANDLE_ERROR( cudaFree( dev_c ) ); )LQDOO\\\u000f\u0003EHIRUH\u0003H[LWLQJ\u0003WKH\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003GHVWUR\\\u0003WKH\u0003VWUHDP\u0003WKDW\u0003ZH\u0003ZHUH\u0003XVLQJ\u0003 WR\u0003TXHXH\u0003WKH\u0003*38\u0003RSHUDWLRQV\u0011 HANDLE_ERROR( cudaStreamDestroy( stream ) ); return 0; } 7R\u0003EH\u0003KRQHVW\u000f\u0003WKLV\u0003H[DPSOH\u0003KDV\u0003GRQH\u0003YHU\\\u0003OLWWOH\u0003WR\u0003GHPRQVWUDWH\u0003WKH\u0003SRZHU\u0003RI\u0003 VWUHDPV\u0011\u00032I\u0003FRXUVH\u000f\u0003HYHQ\u0003XVLQJ\u0003D\u0003VLQJOH\u0003VWUHDP\u0003FDQ\u0003KHOS\u0003VSHHG\u0003XS\u0003DQ\u0003DSSOLFDWLRQ\u0003 LI\u0003ZH\u0003KDYH\u0003ZRUN\u0003ZH\u0003ZDQW\u0003WR\u0003FRPSOHWH\u0003RQ\u0003WKH\u0003KRVW\u0003ZKLOH\u0003WKH\u0003*38\u0003LV\u0003EXV\\\u0003FKXUQLQJ\u0003 WKURXJK\u0003WKH\u0003ZRUN\u0003ZH\u01e2YH\u0003VWXIIHG\u0003LQWR\u0003D\u0003VWUHDP\u0011\u0003%XW\u0003DVVXPLQJ\u0003WKDW\u0003ZH\u0003GRQ\u01e2W\u0003KDYH\u0003 PXFK\u0003WR\u0003GR\u0003RQ\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003FDQ\u0003VWLOO\u0003VSHHG\u0003XS\u0003DSSOLFDWLRQV\u0003E\\\u0003XVLQJ\u0003VWUHDPV\u000f\u0003DQG\u0003 LQ\u0003WKH\u0003QH[W\u0003VHFWLRQ\u0003ZH\u01e2OO\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003KRZ\u0003WKLV\u0003FDQ\u0003EH\u0003DFFRPSOLVKHG\u0011 8VLQJ\u00030XOWLSOH\u0003&8'$\u00036WUHDPV\u0014\u0013\u0011\u0018\u0003 /HW\u01e2V\u0003DGDSW\u0003WKH\u0003VLQJOH\u0010VWUHDP\u0003H[DPSOH\u0003IURP\u00036HFWLRQ\u0003\u0014\u0013\u0011\u0016 \u00038VLQJ\u0003D\u00036LQJOH\u0003&8'$\u0003 6WUHDP\u0003WR\u0003SHUIRUP\u0003LWV\u0003ZRUN\u0003LQ\u0003WZR\u0003GLIIHUHQW\u0003VWUHDPV\u0011\u0003$W\u0003WKH\u0003EHJLQQLQJ\u0003RI\u0003WKH\u0003 SUHYLRXV\u0003H[DPSOH\u000f\u0003ZH\u0003FKHFNHG\u0003WKDW\u0003WKH\u0003GHYLFH\u0003LQGHHG\u0003VXSSRUWHG\u0003 overlap \u0003DQG\u0003 Download from www.wowebook.comptgUSING MULTIPLE CUDA STRE AMS /one.lf/nine.lf/nine.lf\u0014\u0013\u0011\u0018\u000386,1*\u000308/7,3/(\u0003&8'$\u00036 75($06 EURNH\u0003WKH\u0003FRPSXWDWLRQ\u0003LQWR\u0003FKXQNV\u0011\u00037KH\u0003LGHD\u0003XQGHUO\\LQJ\u0003WKH\u0003LPSURYHG\u0003YHUVLRQ\u0003 RI\u0003WKLV\u0003DSSOLFDWLRQ\u0003LV\u0003VLPSOH\u0003DQG\u0003UHOLHV\u0003RQ\u0003WZR\u0003WKLQJV \u0003WKH\u0003\u01e4FKXQNHG\u01e5\u0003FRPSXWD - WLRQ\u0003DQG\u0003WKH\u0003RYHUODS\u0003RI\u0003PHPRU\\\u0003FRSLHV\u0003ZLWK\u0003NHUQHO\u0003H[HFXWLRQ\u0011\u0003:H\u0003HQGHDYRU\u0003WR\u0003 JHW\u0003VWUHDP\u0003\u0014\u0003WR\u0003FRS\\\u0003LWV\u0003LQSXW\u0003EXIIHUV\u0003WR\u0003WKH\u0003*38\u0003ZKLOH\u0003VWUHDP\u0003\u0013\u0003LV\u0003H[HFXWLQJ\u0003LWV\u0003 NHUQHO\u0011\u00037KHQ\u0003VWUHDP\u0003\u0014\u0003ZLOO\u0003H[HFXWH\u0003LWV\u0003NHUQHO\u0003ZKLOH\u0003VWUHDP\u0003\u0013\u0003FRSLHV\u0003LWV\u0003UHVXOWV\u0003 WR\u0003WKH\u0003KRVW\u0011\u00036WUHDP\u0003\u0014\u0003ZLOO\u0003WKHQ\u0003FRS\\\u0003LWV\u0003UHVXOWV\u0003WR\u0003WKH\u0003KRVW\u0003ZKLOH\u0003VWUHDP\u0003\u0013\u0003EHJLQV\u0003 H[HFXWLQJ\u0003LWV\u0003NHUQHO\u0003RQ\u0003WKH\u0003QH[W\u0003FKXQN\u0003RI\u0003GDWD\u0011\u0003$VVXPLQJ\u0003WKDW\u0003RXU\u0003PHPRU\\\u0003FRSLHV\u0003 DQG\u0003NHUQHO\u0003H[HFXWLRQV\u0003WDNH\u0003URXJKO\\\u0003WKH\u0003VDPH\u0003DPRXQW\u0003RI\u0003WLPH\u000f\u0003RXU\u0003DSSOLFDWLRQ\u01e2V\u0003 H[HFXWLRQ\u0003WLPHOLQH\u0003PLJKW\u0003ORRN\u0003VRPHWKLQJ\u0003OLNH\u0003)LJXUH\u0003\u0014\u0013\u0011\u0014\u0011\u00037KH\u0003\u020cJXUH\u0003DVVXPHV\u0003",
    ") ); HANDLE_ERROR( cudaFree( dev_c ) ); )LQDOO\\\u000f\u0003EHIRUH\u0003H[LWLQJ\u0003WKH\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003GHVWUR\\\u0003WKH\u0003VWUHDP\u0003WKDW\u0003ZH\u0003ZHUH\u0003XVLQJ\u0003 WR\u0003TXHXH\u0003WKH\u0003*38\u0003RSHUDWLRQV\u0011 HANDLE_ERROR( cudaStreamDestroy( stream ) ); return 0; } 7R\u0003EH\u0003KRQHVW\u000f\u0003WKLV\u0003H[DPSOH\u0003KDV\u0003GRQH\u0003YHU\\\u0003OLWWOH\u0003WR\u0003GHPRQVWUDWH\u0003WKH\u0003SRZHU\u0003RI\u0003 VWUHDPV\u0011\u00032I\u0003FRXUVH\u000f\u0003HYHQ\u0003XVLQJ\u0003D\u0003VLQJOH\u0003VWUHDP\u0003FDQ\u0003KHOS\u0003VSHHG\u0003XS\u0003DQ\u0003DSSOLFDWLRQ\u0003 LI\u0003ZH\u0003KDYH\u0003ZRUN\u0003ZH\u0003ZDQW\u0003WR\u0003FRPSOHWH\u0003RQ\u0003WKH\u0003KRVW\u0003ZKLOH\u0003WKH\u0003*38\u0003LV\u0003EXV\\\u0003FKXUQLQJ\u0003 WKURXJK\u0003WKH\u0003ZRUN\u0003ZH\u01e2YH\u0003VWXIIHG\u0003LQWR\u0003D\u0003VWUHDP\u0011\u0003%XW\u0003DVVXPLQJ\u0003WKDW\u0003ZH\u0003GRQ\u01e2W\u0003KDYH\u0003 PXFK\u0003WR\u0003GR\u0003RQ\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003FDQ\u0003VWLOO\u0003VSHHG\u0003XS\u0003DSSOLFDWLRQV\u0003E\\\u0003XVLQJ\u0003VWUHDPV\u000f\u0003DQG\u0003 LQ\u0003WKH\u0003QH[W\u0003VHFWLRQ\u0003ZH\u01e2OO\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003KRZ\u0003WKLV\u0003FDQ\u0003EH\u0003DFFRPSOLVKHG\u0011 8VLQJ\u00030XOWLSOH\u0003&8'$\u00036WUHDPV\u0014\u0013\u0011\u0018\u0003 /HW\u01e2V\u0003DGDSW\u0003WKH\u0003VLQJOH\u0010VWUHDP\u0003H[DPSOH\u0003IURP\u00036HFWLRQ\u0003\u0014\u0013\u0011\u0016 \u00038VLQJ\u0003D\u00036LQJOH\u0003&8'$\u0003 6WUHDP\u0003WR\u0003SHUIRUP\u0003LWV\u0003ZRUN\u0003LQ\u0003WZR\u0003GLIIHUHQW\u0003VWUHDPV\u0011\u0003$W\u0003WKH\u0003EHJLQQLQJ\u0003RI\u0003WKH\u0003 SUHYLRXV\u0003H[DPSOH\u000f\u0003ZH\u0003FKHFNHG\u0003WKDW\u0003WKH\u0003GHYLFH\u0003LQGHHG\u0003VXSSRUWHG\u0003 overlap \u0003DQG\u0003 Download from www.wowebook.comptgUSING MULTIPLE CUDA STRE AMS /one.lf/nine.lf/nine.lf\u0014\u0013\u0011\u0018\u000386,1*\u000308/7,3/(\u0003&8'$\u00036 75($06 EURNH\u0003WKH\u0003FRPSXWDWLRQ\u0003LQWR\u0003FKXQNV\u0011\u00037KH\u0003LGHD\u0003XQGHUO\\LQJ\u0003WKH\u0003LPSURYHG\u0003YHUVLRQ\u0003 RI\u0003WKLV\u0003DSSOLFDWLRQ\u0003LV\u0003VLPSOH\u0003DQG\u0003UHOLHV\u0003RQ\u0003WZR\u0003WKLQJV \u0003WKH\u0003\u01e4FKXQNHG\u01e5\u0003FRPSXWD - WLRQ\u0003DQG\u0003WKH\u0003RYHUODS\u0003RI\u0003PHPRU\\\u0003FRSLHV\u0003ZLWK\u0003NHUQHO\u0003H[HFXWLRQ\u0011\u0003:H\u0003HQGHDYRU\u0003WR\u0003 JHW\u0003VWUHDP\u0003\u0014\u0003WR\u0003FRS\\\u0003LWV\u0003LQSXW\u0003EXIIHUV\u0003WR\u0003WKH\u0003*38\u0003ZKLOH\u0003VWUHDP\u0003\u0013\u0003LV\u0003H[HFXWLQJ\u0003LWV\u0003 NHUQHO\u0011\u00037KHQ\u0003VWUHDP\u0003\u0014\u0003ZLOO\u0003H[HFXWH\u0003LWV\u0003NHUQHO\u0003ZKLOH\u0003VWUHDP\u0003\u0013\u0003FRSLHV\u0003LWV\u0003UHVXOWV\u0003 WR\u0003WKH\u0003KRVW\u0011\u00036WUHDP\u0003\u0014\u0003ZLOO\u0003WKHQ\u0003FRS\\\u0003LWV\u0003UHVXOWV\u0003WR\u0003WKH\u0003KRVW\u0003ZKLOH\u0003VWUHDP\u0003\u0013\u0003EHJLQV\u0003 H[HFXWLQJ\u0003LWV\u0003NHUQHO\u0003RQ\u0003WKH\u0003QH[W\u0003FKXQN\u0003RI\u0003GDWD\u0011\u0003$VVXPLQJ\u0003WKDW\u0003RXU\u0003PHPRU\\\u0003FRSLHV\u0003 DQG\u0003NHUQHO\u0003H[HFXWLRQV\u0003WDNH\u0003URXJKO\\\u0003WKH\u0003VDPH\u0003DPRXQW\u0003RI\u0003WLPH\u000f\u0003RXU\u0003DSSOLFDWLRQ\u01e2V\u0003 H[HFXWLRQ\u0003WLPHOLQH\u0003PLJKW\u0003ORRN\u0003VRPHWKLQJ\u0003OLNH\u0003)LJXUH\u0003\u0014\u0013\u0011\u0014\u0011\u00037KH\u0003\u020cJXUH\u0003DVVXPHV\u0003 WKDW\u0003WKH\u0003*38\u0003FDQ\u0003SHUIRUP\u0003D\u0003PHPRU\\\u0003FRS\\\u0003DQG\u0003D\u0003NHUQHO\u0003H[HFXWLRQ\u0003DW\u0003WKH\u0003VDPH\u0003 WLPH\u000f\u0003VR\u0003HPSW\\\u0003ER[HV\u0003UHSUHVHQW\u0003WLPH\u0003ZKHQ\u0003RQH\u0003VWUHDP\u0003LV\u0003ZDLWLQJ\u0003WR\u0003H[HFXWH\u0003DQ\u0003 RSHUDWLRQ\u0003WKDW\u0003LW\u0003FDQQRW\u0003RYHUODS\u0003ZLWK\u0003WKH\u0003RWKHU\u0003VWUHDP\u01e2V\u0003RSHUDWLRQ\u0011\u00031RWH\u0003DOVR\u0003WKDW\u0003 FDOOV\u0003WR\u0003cudaMemcpyAsync() \u0003DUH\u0003DEEUHYLDWHG\u0003LQ\u0003WKH\u0003UHPDLQLQJ\u0003\u020cJXUHV\u0003LQ\u0003WKLV\u0003 FKDSWHU\u000f\u0003UHSUHVHQWHG\u0003VLPSO\\\u0003DV\u0003\u01e4 memcpy\u0011\u01e5 \u0004 \u0007\u0006 \u0001\u0003 \u0011\u000e \u0011\u000e \b\u0010\u0013\u0001\u0002\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0002\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0003\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0003\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0004\u0001 \u0011\u000f \u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0004\u0001 \u0011\u000f \u0001\u0005\u0006\u0007\u0004 \u0007\u0006 \u0001\u0002\u0005\b \u0007 \u0011\u000e \b\u0010\u0013\u0001\u0002\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0003\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0004\u0001 \u0011\u000f \u0001\u0005\u0006\u0007 \u0011\u000e \b\u0010\u0013\u0001\u0002\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0003\u0001\u0012\u000f\u0001\u0005\u0006\u0007 \b\u0010\u0013\u0001\u0004\u0001 \u0011\u000f \u0001\u0005\u0006\u0007Figure 10.1 7LPHOLQH\u0003RI\u0003LQWHQGHG\u0003DSSOLFDWLRQ\u0003H[HFXWLRQ\u0003XVLQJ\u0003WZR\u0003 LQGHSHQGHQW \u0003VWUHDPV Download from www.wowebook.comptgSTRE AMS /two.lf/zero.lf/zero.lf,Q\u0003IDFW\u000f\u0003WKH\u0003H[HFXWLRQ\u0003WLPHOLQH\u0003FDQ\u0003EH\u0003HYHQ\u0003PRUH\u0003IDYRUDEOH\u0003WKDQ\u0003WKLV \u0003VRPH\u0003QHZHU\u0003 19,',$\u0003*38V\u0003VXSSRUW\u0003VLPXOWDQHRXV\u0003NHUQHO\u0003H[HFXWLRQ\u0003DQG\u0003 two\u0003PHPRU\\\u0003FRSLHV\u000f\u0003 RQH\u0003to\u0003WKH\u0003GHYLFH\u0003DQG\u0003RQH\u0003 from \u0003WKH\u0003GHYLFH\u0011\u0003%XW\u0003RQ\u0003DQ\\\u0003GHYLFH\u0003WKDW\u0003VXSSRUWV\u0003WKH\u0003 RYHUODS\u0003RI\u0003PHPRU\\\u0003FRSLHV\u0003DQG\u0003NHUQHO\u0003H[HFXWLRQ\u000f\u0003WKH\u0003RYHUDOO\u0003DSSOLFDWLRQ\u0003VKRXOG\u0003 DFFHOHUDWH\u0003ZKHQ\u0003ZH\u0003XVH\u0003PXOWLSOH\u0003VWUHDPV\u0011 'HVSLWH\u0003WKHVH\u0003JUDQG\u0003SODQV\u0003WR\u0003DFFHOHUDWH\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003WKH\u0003FRPSXWDWLRQ\u0003NHUQHO\u0003 ZLOO\u0003UHPDLQ\u0003XQFKDQJHG\u0011 #include \"../common/book.h\" #define N (1024*1024) #define FULL_DATA_SIZE (N*20) __global__ void kernel( int *a, int *b, int *c ) { int idx = threadIdx.x + blockIdx.x * blockDim.x; if (idx < N) { int idx1 = (idx + 1) % 256; int idx2 = (idx + 2) % 256; float as = (a[idx] + a[idx1] + a[idx2]) / 3.0f; float bs = (b[idx] + b[idx1] + b[idx2]) / 3.0f; c[idx] = (as + bs) / 2 } } $V\u0003ZLWK\u0003WKH\u0003VLQJOH\u0003VWUHDP\u0003YHUVLRQ\u000f\u0003ZH\u0003ZLOO\u0003FKHFN\u0003WKDW\u0003WKH\u0003GHYLFH\u0003VXSSRUWV\u0003RYHU - ODSSLQJ\u0003FRPSXWDWLRQ\u0003ZLWK\u0003PHPRU\\\u0003FRS\\\u0011\u0003,I\u0003WKH\u0003GHYLFH\u0003 does \u0003VXSSRUW\u0003RYHUODS\u000f\u0003ZH\u0003 SURFHHG\u0003DV\u0003ZH\u0003GLG\u0003EHIRUH\u0003E\\\u0003FUHDWLQJ\u0003&8'$\u0003HYHQWV\u0003WR\u0003WLPH\u0003WKH\u0003DSSOLFDWLRQ\u0011 int main( void ) { cudaDeviceProp prop; int whichDevice; HANDLE_ERROR( cudaGetDevice( &whichDevice ) ); HANDLE_ERROR( cudaGetDeviceProperties( &prop, whichDevice ) ); Download from www.wowebook.comptgUSING MULTIPLE CUDA STRE AMS /two.lf/zero.lf/one.lf\u0014\u0013\u0011\u0018\u000386,1*\u000308/7,3/(\u0003&8'$\u00036 75($06 if (!prop.deviceOverlap) { printf( \u201cDevice will not handle overlaps, so no \u201c \u201cspeed up from streams\\n\u201d ); return 0; } cudaEvent_t start, stop; float elapsedTime; // start the timers HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); 1H[W\u000f\u0003ZH\u0003FUHDWH\u0003RXU\u0003WZR\u0003VWUHDPV\u0003H[DFWO\\\u0003DV\u0003ZH\u0003FUHDWHG\u0003WKH\u0003VLQJOH\u0003VWUHDP\u0003LQ\u0003WKH\u0003 SUHYLRXV\u0003VHFWLRQ\u01e2V\u0003YHUVLRQ\u0003RI\u0003WKH\u0003FRGH\u0011 // initialize the streams cudaStream_t stream0, stream1; HANDLE_ERROR( cudaStreamCreate( &stream0 ) ); HANDLE_ERROR( cudaStreamCreate( &stream1 ) ); :H\u0003ZLOO\u0003DVVXPH\u0003WKDW\u0003ZH\u0003VWLOO\u0003KDYH\u0003WZR\u0003LQSXW\u0003EXIIHUV\u0003DQG\u0003D\u0003VLQJOH\u0003RXWSXW\u0003EXIIHU\u0003RQ\u0003 WKH\u0003KRVW\u0011\u00037KH\u0003LQSXW\u0003EXIIHUV\u0003DUH\u0003\u020cOOHG\u0003ZLWK\u0003UDQGRP\u0003GDWD\u0003H[DFWO\\\u0003DV\u0003WKH\\\u0003ZHUH\u0003LQ\u0003WKH\u0003 VLQJOH\u0010VWUHDP\u0003YHUVLRQ\u0003RI\u0003WKLV\u0003DSSOLFDWLRQ\u0011\u0003+RZHYHU\u000f\u0003QRZ\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003XVH\u0003WZR\u0003 VWUHDPV\u0003WR\u0003SURFHVV\u0003WKH\u0003GDWD\u000f\u0003ZH\u0003DOORFDWH\u0003WZR\u0003LGHQWLFDO\u0003VHWV\u0003RI\u0003*38\u0003EXIIHUV\u0003VR\u0003WKDW\u0003 HDFK\u0003VWUHDP\u0003FDQ\u0003LQGHSHQGHQWO\\\u0003ZRUN\u0003RQ\u0003FKXQNV\u0003RI\u0003WKH\u0003LQSXW\u0011 int *host_a, *host_b, *host_c; int *dev_a0, *dev_b0, *dev_c0; //GPU buffers for stream0 int *dev_a1, *dev_b1, *dev_c1; //GPU buffers for stream1 // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a0, N * sizeof(int) ) ); Download from www.wowebook.comptgSTRE AMS /two.lf/zero.lf/two.lf HANDLE_ERROR( cudaMalloc( ( void**)&dev_b0, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c0, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_a1, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b1, N * sizeof(int) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c1, N * sizeof(int) ) ); // allocate page-locked memory, used to stream HANDLE_ERROR( cudaHostAlloc( ( void**)&host_a, FULL_DATA_SIZE * sizeof(int), cudaHostAllocDefault ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&host_b, FULL_DATA_SIZE * sizeof(int), cudaHostAllocDefault ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&host_c, FULL_DATA_SIZE * sizeof(int), cudaHostAllocDefault ) ); for (int i=0; i<FULL_DATA_SIZE; i++) { host_a[i] = rand(); host_b[i] = rand(); } :H\u0003WKHQ\u0003ORRS\u0003RYHU\u0003WKH\u0003FKXQNV\u0003RI\u0003LQSXW\u0003H[DFWO\\\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003\u020cUVW\u0003DWWHPSW\u0003DW\u0003WKLV\u0003 DSSOLFDWLRQ\u0011\u0003%XW\u0003QRZ\u0003WKDW\u0003ZH\u01e2UH\u0003XVLQJ\u0003WZR\u0003VWUHDPV\u000f\u0003ZH\u0003SURFHVV\u0003WZLFH\u0003DV\u0003PXFK\u0003 GDWD\u0003LQ\u0003HDFK\u0003LWHUDWLRQ\u0003RI\u0003WKH\u0003 for()\u0003ORRS\u0011\u0003,Q\u0003stream0\u000f\u0003ZH\u0003TXHXH\u0003DV\\QFKURQRXV\u0003 FRSLHV\u0003RI\u0003 a\u0003DQG\u0003b\u0003WR\u0003WKH\u0003*38\u000f\u0003TXHXH\u0003D\u0003NHUQHO\u0003H[HFXWLRQ\u000f\u0003DQG\u0003WKHQ\u0003TXHXH\u0003D\u0003FRS\\\u0003 EDFN\u0003WR\u0003c Download from www.wowebook.comptgUSING MULTIPLE CUDA STRE AMS /two.lf/zero.lf/three.lf\u0014\u0013\u0011\u0018\u000386,1*\u000308/7,3/(\u0003&8'$\u00036 75($06 // now loop over full data, in bite-sized chunks for (int i=0; i<FULL_DATA_SIZE; i+= N*2) { // copy the locked memory to the device, async HANDLE_ERROR( cudaMemcpyAsync( dev_a0, host_a+i, N * sizeof(int), cudaMemcpyHostToDevice, stream0 ) ); HANDLE_ERROR( cudaMemcpyAsync( dev_b0, host_b+i, N * sizeof(int), cudaMemcpyHostToDevice, stream0 ) ); kernel<<<N/256,256,0,stream0>>>( dev_a0, dev_b0, dev_c0 ); // copy the data from device to locked memory",
    "i=0; i<FULL_DATA_SIZE; i+= N*2) { // copy the locked memory to the device, async HANDLE_ERROR( cudaMemcpyAsync( dev_a0, host_a+i, N * sizeof(int), cudaMemcpyHostToDevice, stream0 ) ); HANDLE_ERROR( cudaMemcpyAsync( dev_b0, host_b+i, N * sizeof(int), cudaMemcpyHostToDevice, stream0 ) ); kernel<<<N/256,256,0,stream0>>>( dev_a0, dev_b0, dev_c0 ); // copy the data from device to locked memory HANDLE_ERROR( cudaMemcpyAsync( host_c+i, dev_c0, N * sizeof(int), cudaMemcpyDeviceToHost, stream0 ) ); $IWHU\u0003TXHXLQJ\u0003WKHVH\u0003RSHUDWLRQV\u0003LQ\u0003 stream0\u000f\u0003ZH\u0003TXHXH\u0003LGHQWLFDO\u0003RSHUDWLRQV\u0003RQ\u0003WKH\u0003 QH[W\u0003FKXQN\u0003RI\u0003GDWD\u000f\u0003EXW\u0003WKLV\u0003WLPH\u0003LQ\u0003 stream1\u0011 // copy the locked memory to the device, async HANDLE_ERROR( cudaMemcpyAsync( dev_a1, host_a+i+N, N * sizeof(int), cudaMemcpyHostToDevice, stream1 ) ); HANDLE_ERROR( cudaMemcpyAsync( dev_b1, host_b+i+N, N * sizeof(int), cudaMemcpyHostToDevice, stream1 ) ); Download from www.wowebook.comptgSTRE AMS /two.lf/zero.lf/four.lf kernel<<<N/256,256,0,stream1>>>( dev_a1, dev_b1, dev_c1 ); // copy the data from device to locked memory HANDLE_ERROR( cudaMemcpyAsync( host_c+i+N, dev_c1, N * sizeof(int), cudaMemcpyDeviceToHost, stream1 ) ); } $QG\u0003VR\u0003RXU\u0003 for()\u0003ORRS\u0003SURFHHGV\u000f\u0003DOWHUQDWLQJ\u0003WKH\u0003VWUHDPV\u0003WR\u0003ZKLFK\u0003LW\u0003TXHXHV\u0003 HDFK\u0003FKXQN\u0003RI\u0003GDWD\u0003XQWLO\u0003LW\u0003KDV\u0003TXHXHG\u0003HYHU\\\u0003SLHFH\u0003RI\u0003LQSXW\u0003GDWD\u0003IRU\u0003SURFHVVLQJ\u0011\u0003 $IWHU\u0003WHUPLQDWLQJ\u0003WKH\u0003 for()\u0003ORRS\u000f\u0003ZH\u0003V\\QFKURQL]H\u0003WKH\u0003*38\u0003ZLWK\u0003WKH\u0003&38\u0003EHIRUH\u0003 ZH\u0003VWRS\u0003RXU\u0003DSSOLFDWLRQ\u0003WLPHUV\u0011\u00036LQFH\u0003ZH\u0003DUH\u0003ZRUNLQJ\u0003LQ\u0003WZR\u0003VWUHDPV\u000f\u0003ZH\u0003QHHG\u0003WR\u0003 V\\QFKURQL]H\u0003ERWK\u0011 HANDLE_ERROR( cudaStreamSynchronize( stream0 ) ); HANDLE_ERROR( cudaStreamSynchronize( stream1 ) ); :H\u0003ZUDS\u0003XS\u0003 main()\u0003WKH\u0003VDPH\u0003ZD\\\u0003ZH\u0003FRQFOXGHG\u0003RXU\u0003VLQJOH\u0010VWUHDP\u0003LPSOHPHQWD - WLRQ\u0011\u0003:H\u0003VWRS\u0003RXU\u0003WLPHUV\u000f\u0003GLVSOD\\\u0003WKH\u0003HODSVHG\u0003WLPH\u000f\u0003DQG\u0003FOHDQ\u0003XS\u0003DIWHU\u0003RXUVHOYHV\u0011\u0003 2I\u0003FRXUVH\u000f\u0003ZH\u0003UHPHPEHU\u0003WKDW\u0003ZH\u0003QRZ\u0003QHHG\u0003WR\u0003GHVWUR\\\u0003WZR\u0003VWUHDPV\u0003DQG\u0003IUHH\u0003WZLFH\u0003 DV\u0003PDQ\\\u0003*38\u0003EXIIHUV\u000f\u0003EXW\u0003DVLGH\u0003IURP\u0003WKDW\u000f\u0003WKLV\u0003FRGH\u0003LV\u0003LGHQWLFDO\u0003WR\u0003ZKDW\u0003ZH\u01e2YH\u0003 VHHQ\u0003DOUHDG\\ HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time taken: %3.1f ms\\n\" , elapsedTime ); // cleanup the streams and memory HANDLE_ERROR( cudaFreeHost( host_a ) ); HANDLE_ERROR( cudaFreeHost( host_b ) ); HANDLE_ERROR( cudaFreeHost( host_c ) ); Download from www.wowebook.comptg::: 666 /two.lf/zero.lf/five.lf\u0014\u0013\u0011\u0019\u0003* * *3 3 38 8 8\u0003 \u0003\u0003222 555 ...\u0003\u0003\u0003& & &+ + +( ( (' ' '8 8 8/ / /, ,,1 1 1* * * HANDLE_ERROR( cudaFree( dev_a0 ) ); HANDLE_ERROR( cudaFree( dev_b0 ) ); HANDLE_ERROR( cudaFree( dev_c0 ) ); HANDLE_ERROR( cudaFree( dev_a1 ) ); HANDLE_ERROR( cudaFree( dev_b1 ) ); HANDLE_ERROR( cudaFree( dev_c1 ) ); HANDLE_ERROR( cudaStreamDestroy( stream0 ) ); HANDLE_ERROR( cudaStreamDestroy( stream1 ) ); return 0; } :H\u0003EHQFKPDUNHG\u0003ERWK\u0003WKH\u0003RULJLQDO\u000f\u0003VLQJOH\u0010VWUHDP\u0003LPSOHPHQWDWLRQ\u0003IURP\u0003 6HFWLRQ\u0003\u0014\u0013\u0011\u0016 \u00038VLQJ\u0003D\u00036LQJOH\u0003&8'$\u00036WUHDP\u0003DQG\u0003WKH\u0003LPSURYHG\u0003GRXEOH\u0010VWUHDP\u0003 YHUVLRQ\u0003RQ\u0003D\u0003*H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u0011\u00037KH\u0003RULJLQDO\u0003YHUVLRQ\u0003WDNHV\u0003\u0019\u0015PV\u0003WR\u0003UXQ\u0003WR\u0003FRPSOH - WLRQ\u0011\u0003$IWHU\u0003PRGLI\\LQJ\u0003LW\u0003WR\u0003XVH\u0003WZR\u0003VWUHDPV\u000f\u0003LW\u0003WDNHV\u0003\u0019\u0014PV\u0011\u0003 8K\u0010RK\u0011 :HOO\u000f\u0003WKH\u0003JRRG\u0003QHZV\u0003LV\u0003WKDW\u0003WKLV\u0003LV\u0003WKH\u0003UHDVRQ\u0003ZH\u0003ERWKHU\u0003WR\u0003WLPH\u0003RXU\u0003DSSOLFDWLRQV\u0011\u0003 6RPHWLPHV\u000f\u0003RXU\u0003PRVW\u0003ZHOO\u0010LQWHQGHG\u0003SHUIRUPDQFH\u0003\u01e4HQKDQFHPHQWV\u01e5\u0003GR\u0003QRWKLQJ\u0003 PRUH\u0003WKDQ\u0003LQWURGXFH\u0003XQQHFHVVDU\\\u0003FRPSOLFDWLRQV\u0003WR\u0003WKH\u0003FRGH\u0011\u0003 %XW\u0003ZK\\\u0003GLGQ\u01e2W\u0003WKLV\u0003DSSOLFDWLRQ\u0003JHW\u0003DQ\\\u0003IDVWHU\"\u0003:H\u0003HYHQ\u0003VDLG\u0003WKDW\u0003LW\u0003ZRXOG\u0003JHW\u0003 IDVWHU\u0004\u0003'RQ\u01e2W\u0003ORVH\u0003KRSH\u0003\\HW\u000f\u0003WKRXJK\u000f\u0003EHFDXVH\u0003ZH\u0003DFWXDOO\\\u0003 can\u0003DFFHOHUDWH\u0003WKH\u0003VLQJOH\u0010 VWUHDP\u0003YHUVLRQ\u0003ZLWK\u0003D\u0003VHFRQG\u0003VWUHDP\u000f\u0003EXW\u0003ZH\u0003QHHG\u0003WR\u0003XQGHUVWDQG\u0003D\u0003ELW\u0003PRUH\u0003DERXW\u0003 KRZ\u0003VWUHDPV\u0003DUH\u0003KDQGOHG\u0003E\\\u0003WKH\u0003&8'$\u0003GULYHU\u0003LQ\u0003RUGHU\u0003WR\u0003UHDS\u0003WKH\u0003UHZDUGV\u0003RI\u0003 GHYLFH\u0003RYHUODS\u0011\u00037R\u0003XQGHUVWDQG\u0003KRZ\u0003VWUHDPV\u0003ZRUN\u0003EHKLQG\u0003WKH\u0003VFHQHV\u000f\u0003ZH\u01e2OO\u0003QHHG\u0003WR\u0003 ORRN\u0003DW\u0003ERWK\u0003WKH\u0003&8'$\u0003GULYHU\u0003DQG\u0003KRZ\u0003WKH\u0003&8'$\u0003KDUGZDUH\u0003DUFKLWHFWXUH\u0003ZRUNV\u0011 *38\u0003:RUN\u00036FKHGXOLQJ\u0014\u0013\u0011\u0019\u0003 $OWKRXJK\u0003VWUHDPV\u0003DUH\u0003ORJLFDOO\\\u0003LQGHSHQGHQW\u0003TXHXHV\u0003RI\u0003RSHUDWLRQV\u0003WR\u0003EH\u0003H[HFXWHG\u0003 RQ\u0003WKH\u0003*38\u000f\u0003LW\u0003WXUQV\u0003RXW\u0003WKDW\u0003WKLV\u0003DEVWUDFWLRQ\u0003GRHV\u0003QRW\u0003H[DFWO\\\u0003PDWFK\u0003WKH\u0003*38\u01e2V\u0003 TXHXLQJ\u0003PHFKDQLVP\u0011\u0003$V\u0003SURJUDPPHUV\u000f\u0003ZH\u0003WKLQN\u0003DERXW\u0003RXU\u0003VWUHDPV\u0003DV\u0003RUGHUHG\u0003 VHTXHQFHV\u0003RI\u0003RSHUDWLRQV\u0003FRPSRVHG\u0003RI\u0003D\u0003PL[WXUH\u0003RI\u0003PHPRU\\\u0003FRSLHV\u0003DQG\u0003NHUQHO\u0003 Download from www.wowebook.comptgSTRE AMS /two.lf/zero.lf/six.lfLQYRFDWLRQV\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003KDUGZDUH\u0003KDV\u0003QR\u0003QRWLRQ\u0003RI\u0003VWUHDPV\u0011\u00035DWKHU\u000f\u0003LW\u0003KDV\u0003RQH\u0003 RU\u0003PRUH\u0003HQJLQHV\u0003WR\u0003SHUIRUP\u0003PHPRU\\\u0003FRSLHV\u0003DQG\u0003DQ\u0003HQJLQH\u0003WR\u0003H[HFXWH\u0003NHUQHOV\u0011\u0003 7KHVH\u0003HQJLQHV\u0003TXHXH\u0003FRPPDQGV\u0003LQGHSHQGHQWO\\\u0003IURP\u0003HDFK\u0003RWKHU\u000f\u0003UHVXOWLQJ\u0003LQ\u0003D\u0003 WDVN\u0010VFKHGXOLQJ\u0003VFHQDULR\u0003OLNH\u0003WKH\u0003RQH\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003\u0014\u0013\u0011\u0015\u0011\u00037KH\u0003DUURZV\u0003LQ\u0003WKH\u0003 \u020cJXUH\u0003LOOXVWUDWH\u0003KRZ\u0003RSHUDWLRQV\u0003WKDW\u0003KDYH\u0003EHHQ\u0003TXHXHG\u0003LQWR\u0003VWUHDPV\u0003JHW\u0003VFKHG - XOHG\u0003RQ\u0003WKH\u0003KDUGZDUH\u0003HQJLQHV\u0003WKDW\u0003DFWXDOO\\\u0003H[HFXWH\u0003WKHP\u0011 6R\u000f\u0003WKH\u0003XVHU\u0003DQG\u0003WKH\u0003KDUGZDUH\u0003KDYH\u0003VRPHZKDW\u0003RUWKRJRQDO\u0003QRWLRQV\u0003RI\u0003KRZ\u0003WR\u0003 TXHXH\u0003*38\u0003ZRUN\u000f\u0003DQG\u0003WKH\u0003EXUGHQ\u0003RI\u0003NHHSLQJ\u0003ERWK\u0003WKH\u0003XVHU\u0003DQG\u0003KDUGZDUH\u0003VLGHV\u0003 RI\u0003WKLV\u0003HTXDWLRQ\u0003KDSS\\\u0003IDOOV\u0003RQ\u0003WKH\u0003&8'$\u0003GULYHU\u0011\u0003)LUVW\u0003DQG\u0003IRUHPRVW\u000f\u0003WKHUH\u0003DUH\u0003 LPSRUWDQW\u0003GHSHQGHQFLHV\u0003VSHFL\u020cHG\u0003E\\\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003RSHUDWLRQV\u0003DUH\u0003DGGHG\u0003 WR\u0003VWUHDPV\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LQ\u0003)LJXUH\u0003\u0014\u0013\u0011\u0015\u000f\u0003VWUHDP\u0003\u0013\u01e2V\u0003PHPRU\\\u0003FRS\\\u0003RI\u0003$\u0003QHHGV\u0003WR\u0003 EH\u0003FRPSOHWHG\u0003EHIRUH\u0003LWV\u0003PHPRU\\\u0003FRS\\\u0003RI\u0003%\u000f\u0003ZKLFK\u0003LQ\u0003WXUQ\u0003QHHGV\u0003WR\u0003EH\u0003FRPSOHWHG\u0003 EHIRUH\u0003NHUQHO\u0003$\u0003LV\u0003ODXQFKHG\u0011\u0003%XW\u0003RQFH\u0003WKHVH\u0003RSHUDWLRQV\u0003DUH\u0003SODFHG\u0003LQWR\u0003WKH\u0003KDUG - ZDUH\u01e2V\u0003FRS\\\u0003HQJLQH\u0003DQG\u0003NHUQHO\u0003HQJLQH\u0003TXHXHV\u000f\u0003WKHVH\u0003GHSHQGHQFLHV\u0003DUH\u0003ORVW\u000f\u0003VR\u0003 WKH\u0003&8'$\u0003GULYHU\u0003QHHGV\u0003WR\u0003NHHS\u0003HYHU\\RQH\u0003KDSS\\\u0003E\\\u0003HQVXULQJ\u0003WKDW\u0003WKH\u0003LQWUDVWUHDP\u0003 GHSHQGHQFLHV\u0003UHPDLQ\u0003VDWLV\u020cHG\u0003E\\\u0003WKH\u0003KDUGZDUH\u01e2V\u0003H[HFXWLRQ\u0003XQLWV\u0011\u0003 \u0007\u0012\u0011 \b \u0001\u0002 \u0006 \u0005 \u0001\u0002 \u0006 \u0005 \u0001\u0003 \u0007\u0006 \u0006\b\u0001\u0002 \u0006 \u0005 \u0001\u0004 \u0006 \u0005 \u0001\u0002 \u0006 \u0005 \u0001\u0003 \u0007\u0006 \u0006\b\u0001\u0002 \u0006 \u0005 \u0001\u0004 \u0006 \u0005 \u0001\u0002 \u0006 \u0005 \u0001\u0003 \u0006 \u0005 \u0001\u0004 \u0006 \u0005 \u0001\u0002 \u0006 \u0005 \u0001\u0003 \u0006 \u0005 \u0001\u0004 \u0007\u0006 \u0006\b\u0001\u0002 \u0007\u0006 \u0006\b\u0001\u0002\u0007\u0012\u0011 \b \u0001\u0003\u0004\u000f\u0010\u0013\u0001\u0005\u000e \u000e \u0006 \u0011\u000e \u0001\u0005\u000e \u000e Figure 10.2 0DSSLQJ\u0003RI\u0003&8'$\u0003VWUHDPV\u0003RQWR\u0003*38\u0003HQJLQHV Download from www.wowebook.comptg::: 666 /two.lf/zero.lf/seven.lf\u0014\u0013\u0011\u0019\u0003* * *3 3 38 8 8\u0003 \u0003\u0003222 555 ...\u0003\u0003\u0003& & &+ + +( ( (' ' '8 8 8/ / /, ,,1 1 1* * *:KDW\u0003GRHV\u0003WKLV\u0003PHDQ\u0003WR\u0003XV\"\u0003:HOO\u000f\u0003OHW\u01e2V\u0003ORRN\u0003DW\u0003ZKDW\u01e2V\u0003DFWXDOO\\\u0003KDSSHQLQJ\u0003ZLWK\u0003 RXU\u0003H[DPSOH\u0003LQ\u00036HFWLRQ\u0003\u0014\u0013\u0011\u0017 \u00038VLQJ\u00030XOWLSOH\u0003&8'$\u00036WUHDPV\u0011\u0003,I\u0003ZH\u0003UHYLHZ\u0003WKH\u0003 FRGH\u000f\u0003ZH\u0003VHH\u0003WKDW\u0003RXU\u0003DSSOLFDWLRQ\u0003EDVLFDOO\\\u0003DPRXQWV\u0003WR\u0003D\u0003 \u0003cudaMemcpyAsync() RI\u0003a, cudaMemcpyAsync() \u0003RI\u0003b\u000f\u0003RXU\u0003NHUQHO\u0003H[HFXWLRQ\u000f\u0003DQG\u0003WKHQ\u0003D\u0003 cudaMemcpyAsync() \u0003RI\u0003c\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0011\u00037KH\u0003DSSOLFDWLRQ\u0003HQTXHXHV\u0003DOO\u0003WKH\u0003 RSHUDWLRQV\u0003IURP\u0003VWUHDP\u0003\u0013\u0003IROORZHG\u0003E\\\u0003DOO\u0003WKH\u0003RSHUDWLRQV\u0003IURP\u0003VWUHDP\u0003\u0014\u0011\u00037KH\u0003&8'$\u0003 GULYHU\u0003VFKHGXOHV\u0003WKHVH\u0003RSHUDWLRQV\u0003RQ\u0003WKH\u0003KDUGZDUH\u0003IRU\u0003XV\u0003LQ\u0003WKH\u0003RUGHU\u0003WKH\\\u0003ZHUH\u0003 VSHFL\u020cHG\u000f\u0003NHHSLQJ\u0003WKH\u0003LQWHUHQJLQH\u0003GHSHQGHQFLHV\u0003VWUDLJKW\u0011\u00037KHVH\u0003GHSHQGHQFLHV\u0003 DUH\u0003LOOXVWUDWHG\u0003LQ\u0003)LJXUH\u0003\u0014\u0013\u0011\u0016\u0003ZKHUH\u0003DQ\u0003DUURZ\u0003IURP\u0003D\u0003FRS\\\u0003WR\u0003D\u0003NHUQHO\u0003LQGLFDWHV\u0003 WKDW\u0003WKH\u0003FRS\\\u0003GHSHQGV\u0003RQ\u0003WKH\u0003NHUQHO\u0003FRPSOHWLQJ\u0003H[HFXWLRQ\u0003EHIRUH\u0003LW\u0003FDQ\u0003EHJLQ\u0011 *LYHQ\u0003RXU\u0003QHZIRXQG\u0003XQGHUVWDQGLQJ\u0003RI\u0003KRZ\u0003WKH\u0003*38\u0003VFKHGXOHV\u0003ZRUN\u000f\u0003ZH\u0003FDQ\u0003ORRN\u0003 DW\u0003D\u0003WLPHOLQH\u0003RI\u0003KRZ\u0003WKHVH\u0003JHW\u0003H[HFXWHG\u0003RQ\u0003WKH\u0003KDUGZDUH\u0003LQ\u0003)LJXUH\u0003\u0014\u0013\u0011\u0017\u0011 %HFDXVH\u0003VWUHDP\u0003\u0013\u01e2V\u0003FRS\\\u0003RI\u0003 c\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0003GHSHQGV\u0003RQ\u0003LWV\u0003NHUQHO\u0003H[HFXWLRQ\u0003 FRPSOHWLQJ\u000f\u0003VWUHDP\u0003\u0014\u01e2V\u0003FRPSOHWHO\\\u0003LQGHSHQGHQW\u0003FRSLHV\u0003RI\u0003 a\u0003DQG\u0003b\u0003WR\u0003WKH\u0003*38\u0003JHW\u0003 EORFNHG\u0003EHFDXVH\u0003WKH\u0003*38\u01e2V\u0003HQJLQHV\u0003H[HFXWH\u0003ZRUN\u0003LQ\u0003WKH\u0003RUGHU\u0003LW\u01e2V\u0003SURYLGHG\u0011\u00037KLV\u0003 LQHI\u020cFLHQF\\\u0003H[SODLQV\u0003ZK\\\u0003WKH\u0003WZR\u0010VWUHDP\u0003YHUVLRQ\u0003RI\u0003RXU\u0003DSSOLFDWLRQ\u0003VKRZHG\u0003DEVR - OXWHO\\\u0003QR\u0003VSHHGXS\u0011\u00037KH\u0003ODFN\u0003RI\u0003LPSURYHPHQW\u0003LV\u0003D\u0003GLUHFW\u0003UHVXOW\u0003RI\u0003RXU\u0003DVVXPSWLRQ\u0003 WKDW\u0003WKH\u0003KDUGZDUH\u0003ZRUNV\u0003LQ\u0003WKH\u0003VDPH\u0003PDQQHU\u0003DV\u0003WKH\u0003&8'$\u0003VWUHDP\u0003SURJUDPPLQJ\u0003 PRGHO\u0003LPSOLHV\u0011 \u0004\u0005 \u0005\b\u0001\u0003 \u0006\u0007 \u0005 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005\u0002 \u0001\u0003 \u0006\u0007 \u0005 Figure 10.3 $UURZV\u0003GHSLFWLQJ\u0003WKH\u0003GHSHQGHQF\\\u0003RI\u0003 cudaMemcpyAsync() \u0003FDOOV\u0003 RQ\u0003NHUQHO\u0003H[HFXWLRQV\u0003LQ\u0003WKH\u0003H[DPSOH\u0003IURP\u00036HFWLRQ\u0003\u0014\u0013\u0011\u0017 \u00038VLQJ\u00030XOWLSOH\u0003&8'$\u0003 6WUHDPV Download from www.wowebook.comptgSTRE AMS /two.lf/zero.lf/eight.lf\u0004\u0006\u000e \u0006 \u0001\u0003 \u0007\b \u0006 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006",
    "\u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005\u0002 \u0001\u0003 \u0006\u0007 \u0005 Figure 10.3 $UURZV\u0003GHSLFWLQJ\u0003WKH\u0003GHSHQGHQF\\\u0003RI\u0003 cudaMemcpyAsync() \u0003FDOOV\u0003 RQ\u0003NHUQHO\u0003H[HFXWLRQV\u0003LQ\u0003WKH\u0003H[DPSOH\u0003IURP\u00036HFWLRQ\u0003\u0014\u0013\u0011\u0017 \u00038VLQJ\u00030XOWLSOH\u0003&8'$\u0003 6WUHDPV Download from www.wowebook.comptgSTRE AMS /two.lf/zero.lf/eight.lf\u0004\u0006\u000e \u0006 \u0001\u0003 \u0007\b \u0006 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004\u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005\u0002 \u000f\u0001\u0003 \u0007\b \u0006\u0005\b \u0006 Figure 10.4 ([HFXWLRQ\u0003WLPHOLQH\u0003RI\u0003WKH\u0003H[DPSOH\u0003IURP\u00036HFWLRQ\u0003\u0014\u0013\u0011\u0017 \u00038VLQJ\u00030XOWLSOH\u0003 &8'$\u00036WUHDPV 7KH\u0003PRUDO\u0003RI\u0003WKLV\u0003VWRU\\\u0003LV\u0003WKDW\u0003ZH\u0003DV\u0003SURJUDPPHUV\u0003QHHG\u0003WR\u0003KHOS\u0003RXW\u0003ZKHQ\u0003LW\u0003 FRPHV\u0003WR\u0003HQVXULQJ\u0003WKDW\u0003LQGHSHQGHQW\u0003VWUHDPV\u0003DFWXDOO\\\u0003JHW\u0003H[HFXWHG\u0003LQ\u0003SDUDOOHO\u0011\u0003 .HHSLQJ\u0003LQ\u0003PLQG\u0003WKDW\u0003WKH\u0003KDUGZDUH\u0003KDV\u0003LQGHSHQGHQW\u0003HQJLQHV\u0003WKDW\u0003KDQGOH\u0003PHPRU\\\u0003 FRSLHV\u0003DQG\u0003NHUQHO\u0003H[HFXWLRQV\u000f\u0003ZH\u0003QHHG\u0003WR\u0003UHPDLQ\u0003DZDUH\u0003WKDW\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003 ZH\u0003HQTXHXH\u0003WKHVH\u0003RSHUDWLRQV\u0003LQ\u0003RXU\u0003VWUHDPV\u0003ZLOO\u0003DIIHFW\u0003WKH\u0003ZD\\\u0003LQ\u0003ZKLFK\u0003WKH\u0003 &8'$\u0003GULYHU\u0003VFKHGXOHV\u0003WKHVH\u0003IRU\u0003H[HFXWLRQ\u0011\u0003,Q\u0003WKH\u0003QH[W\u0003VHFWLRQ\u000f\u0003ZH\u01e2OO\u0003VHH\u0003KRZ\u0003WR\u0003 KHOS\u0003WKH\u0003KDUGZDUH\u0003DFKLHYH\u0003RYHUODS\u0003RI\u0003PHPRU\\\u0003FRSLHV\u0003DQG\u0003NHUQHO\u0003H[HFXWLRQ\u0011 8VLQJ\u00030XOWLSOH\u0003&8'$\u00036WUHDPV\u0003\u0014\u0013\u0011\u001a\u0003 (IIHFWLYHO\\ $V\u0003ZH\u0003VDZ\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003LI\u0003ZH\u0003VFKHGXOH\u0003DOO\u0003RI\u0003D\u0003SDUWLFXODU\u0003VWUHDP\u01e2V\u0003 RSHUDWLRQV\u0003DW\u0003RQFH\u000f\u0003LW\u01e2V\u0003YHU\\\u0003HDV\\\u0003WR\u0003LQDGYHUWHQWO\\\u0003EORFN\u0003WKH\u0003FRSLHV\u0003RU\u0003NHUQHO\u0003 H[HFXWLRQV\u0003RI\u0003DQRWKHU\u0003VWUHDP\u0011\u00037R\u0003DOOHYLDWH\u0003WKLV\u0003SUREOHP\u000f\u0003LW\u0003VXI\u020cFHV\u0003WR\u0003HQTXHXH\u0003RXU\u0003 RSHUDWLRQV\u0003EUHDGWK\u0010\u020cUVW\u0003DFURVV\u0003VWUHDPV\u0003UDWKHU\u0003WKDQ\u0003GHSWK\u0010\u020cUVW\u0011\u00037KDW\u0003LV\u000f\u0003UDWKHU\u0003 WKDQ\u0003DGG\u0003WKH\u0003FRS\\\u0003RI\u0003 a\u000f\u0003FRS\\\u0003RI\u0003 b\u000f\u0003NHUQHO\u0003H[HFXWLRQ\u000f\u0003DQG\u0003FRS\\\u0003RI\u0003 c\u0003WR\u0003VWUHDP\u0003\u0013\u0003 EHIRUH\u0003VWDUWLQJ\u0003WR\u0003VFKHGXOH\u0003RQ\u0003VWUHDP\u0003\u0014\u000f\u0003ZH\u0003ERXQFH\u0003EDFN\u0003DQG\u0003IRUWK\u0003EHWZHHQ\u0003WKH\u0003 Download from www.wowebook.comptg888666 , , , 111 ***\u0003\u0003\u00030 0 0888 /// 777 , , , 333 /// \u0003\u0003\u0003& & & 8 8 8 ' ' ' $ $ $\u0003\u0003\u00036 6 6 777 555$$$ 000 666\u0003\u0003\u0003( ( ())) ))) ((( &&& 777999 ((( /// <<< /two.lf/zero.lf/nine.lf\u0014\u0013\u0011\u001a\u0003 ((( ((( ,,, VWUHDPV\u0003DVVLJQLQJ\u0003ZRUN\u0011\u0003:H\u0003DGG\u0003WKH\u0003FRS\\\u0003RI\u0003 a\u0003WR\u0003VWUHDP\u0003\u0013\u000f\u0003DQG\u0003WKHQ\u0003ZH\u0003DGG\u0003WKH\u0003 FRS\\\u0003RI\u0003a\u0003WR\u0003VWUHDP\u0003\u0014\u0011\u00037KHQ\u0003ZH\u0003DGG\u0003WKH\u0003FRS\\\u0003RI\u0003 b\u0003WR\u0003VWUHDP\u0003\u0013\u000f\u0003DQG\u0003WKHQ\u0003ZH\u0003DGG\u0003WKH\u0003 FRS\\\u0003RI\u0003b\u0003WR\u0003VWUHDP\u0003\u0014\u0011\u0003:H\u0003HQTXHXH\u0003WKH\u0003NHUQHO\u0003LQYRFDWLRQ\u0003LQ\u0003VWUHDP\u0003\u0013\u000f\u0003DQG\u0003WKHQ\u0003ZH\u0003 HQTXHXH\u0003RQH\u0003LQ\u0003VWUHDP\u0003\u0014\u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003HQTXHXH\u0003WKH\u0003FRS\\\u0003RI\u0003 c\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0003LQ\u0003 VWUHDP\u0003\u0013\u0003IROORZHG\u0003E\\\u0003WKH\u0003FRS\\\u0003RI\u0003 c\u0003LQ\u0003VWUHDP\u0003\u0014\u0011\u0003 7R\u0003PDNH\u0003WKLV\u0003PRUH\u0003FRQFUHWH\u000f\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003WKH\u0003FRGH\u0011\u0003$OO\u0003ZH\u01e2YH\u0003FKDQJHG\u0003LV\u0003 WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003RSHUDWLRQV\u0003JHW\u0003DVVLJQHG\u0003WR\u0003HDFK\u0003RI\u0003RXU\u0003WZR\u0003VWUHDPV\u000f\u0003VR\u0003WKLV\u0003 ZLOO\u0003EH\u0003VWULFWO\\\u0003D\u0003FRS\\\u0010DQG\u0010SDVWH\u0003RSWLPL]DWLRQ\u0011\u0003(YHU\\WKLQJ\u0003HOVH\u0003LQ\u0003WKH\u0003DSSOLFDWLRQ\u0003 ZLOO\u0003UHPDLQ\u0003XQFKDQJHG\u000f\u0003ZKLFK\u0003PHDQV\u0003WKDW\u0003RXU\u0003LPSURYHPHQWV\u0003DUH\u0003ORFDOL]HG\u0003WR\u0003WKH\u0003 for()\u0003ORRS\u0011\u00037KH\u0003QHZ\u000f\u0003EUHDGWK\u0010\u020cUVW\u0003DVVLJQPHQW\u0003WR\u0003WKH\u0003WZR\u0003VWUHDPV\u0003ORRNV\u0003OLNH\u0003WKLV for (int i=0; i<FULL_DATA_SIZE; i+= N*2) { // enqueue copies of a in stream0 and stream1 HANDLE_ERROR( cudaMemcpyAsync( dev_a0, host_a+i, N * sizeof(int), cudaMemcpyHostToDevice, stream0 ) ); HANDLE_ERROR( cudaMemcpyAsync( dev_a1, host_a+i+N, N * sizeof(int), cudaMemcpyHostToDevice, stream1 ) ); // enqueue copies of b in stream0 and stream1 HANDLE_ERROR( cudaMemcpyAsync( dev_b0, host_b+i, N * sizeof(int), cudaMemcpyHostToDevice, stream0 ) ); HANDLE_ERROR( cudaMemcpyAsync( dev_b1, host_b+i+N, N * sizeof(int), cudaMemcpyHostToDevice, stream1 ) ); // enqueue kernels in stream0 and stream1 kernel<<<N/256,256,0,stream0>>>( dev_a0, dev_b0, dev_c0 ); kernel<<<N/256,256,0,stream1>>>( dev_a1, dev_b1, dev_c1 ); Download from www.wowebook.comptgSTRE AMS /two.lf/one.lf/zero.lf // enqueue copies of c from device to locked memory HANDLE_ERROR( cudaMemcpyAsync( host_c+i, dev_c0, N * sizeof(int), cudaMemcpyDeviceToHost, stream0 ) ); HANDLE_ERROR( cudaMemcpyAsync( host_c+i+N, dev_c1, N * sizeof(int), cudaMemcpyDeviceToHost, stream1 ) ); } ,I\u0003ZH\u0003DVVXPH\u0003WKDW\u0003RXU\u0003PHPRU\\\u0003FRSLHV\u0003DQG\u0003NHUQHO\u0003H[HFXWLRQV\u0003DUH\u0003URXJKO\\\u0003FRPSD - UDEOH\u0003LQ\u0003H[HFXWLRQ\u0003WLPH\u000f\u0003RXU\u0003QHZ\u0003H[HFXWLRQ\u0003WLPHOLQH\u0003ZLOO\u0003ORRN\u0003OLNH\u0003)LJXUH\u0003\u0014\u0013\u0011\u0018\u0011\u00037KH\u0003 LQWHUHQJLQH\u0003GHSHQGHQFLHV\u0003DUH\u0003KLJKOLJKWHG\u0003ZLWK\u0003DUURZV\u0003VLPSO\\\u0003WR\u0003LOOXVWUDWH\u0003WKDW\u0003 WKH\\\u0003DUH\u0003VWLOO\u0003VDWLV\u020cHG\u0003ZLWK\u0003WKLV\u0003QHZ\u0003VFKHGXOLQJ\u0003RUGHU\u0011 %HFDXVH\u0003ZH\u0003KDYH\u0003TXHXHG\u0003RXU\u0003RSHUDWLRQV\u0003EUHDGWK\u0010\u020cUVW\u0003DFURVV\u0003VWUHDPV\u000f\u0003ZH\u0003QR\u0003 ORQJHU\u0003KDYH\u0003VWUHDP\u0003\u0013\u01e2V\u0003FRS\\\u0003RI\u0003 c\u0003EORFNLQJ\u0003VWUHDP\u0003\u0014\u01e2V\u0003LQLWLDO\u0003PHPRU\\\u0003FRSLHV\u0003RI\u0003 a DQG\u0003b\u0011\u00037KLV\u0003DOORZV\u0003WKH\u0003*38\u0003WR\u0003H[HFXWH\u0003FRSLHV\u0003DQG\u0003NHUQHOV\u0003LQ\u0003SDUDOOHO\u000f\u0003DOORZLQJ\u0003RXU\u0003 DSSOLFDWLRQ\u0003WR\u0003UXQ\u0003VLJQL\u020cFDQWO\\\u0003IDVWHU\u0011\u00037KH\u0003QHZ\u0003FRGH\u0003UXQV\u0003LQ\u0003\u0017\u001bPV\u000f\u0003D\u0003\u0015\u0014\u0003SHUFHQW\u0003 LPSURYHPHQW\u0003RYHU\u0003RXU\u0003RULJLQDO\u000f\u0003QD\u00b1YH\u0003GRXEOH\u0010VWUHDP\u0003LPSOHPHQWDWLRQ\u0011\u0003)RU\u0003DSSOL - FDWLRQV\u0003WKDW\u0003FDQ\u0003RYHUODS\u0003QHDUO\\\u0003DOO\u0003FRPSXWDWLRQ\u0003DQG\u0003PHPRU\\\u0003FRSLHV\u000f\u0003\\RX\u0003FDQ\u0003 DSSURDFK\u0003D\u0003QHDUO\\\u0003WZRIROG\u0003LPSURYHPHQW\u0003LQ\u0003SHUIRUPDQFH\u0003EHFDXVH\u0003WKH\u0003FRS\\\u0003DQG\u0003 NHUQHO\u0003HQJLQHV\u0003ZLOO\u0003EH\u0003FUDQNLQJ\u0003WKH\u0003HQWLUH\u0003WLPH\u0011 \u0004\u0006\u000e \u0006 \u0001\u0003 \u0007\b \u0006\u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001\b\u0007 \u0007 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005\u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0003 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004 \u0004 \b\u0006\u0005\u0007\u0001\u0003\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0005\u0002 \u000f\u0001\u0003 \u0007\b \u0006\u0005\b \u0006\u0004 \b\u0006\u0005\u0007\u0001\u0002\u0002\u0001 \u0007 \u0006 \u000e\u0001\u0004Figure 10.5 ([HFXWLRQ\u0003WLPHOLQH\u0003RI\u0003WKH\u0003LPSURYHG\u0003H[DPSOH\u0003ZLWK\u0003DUURZV\u0003LQGLFDWLQJ\u0003 LQWHUHQJLQH\u0003GHSHQGHQFLHV Download from www.wowebook.comptg+++ $$$777 (((\u0003\u0003\u0003((( 999 , , , ((( /two.lf/one.lf/one.lf\u0014\u0013\u0011\u001b\u0003&&&333555555::: &KDSWHU\u00035HYLHZ\u0014\u0013\u0011\u001b\u0003 ,Q\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003ORRNHG\u0003DW\u0003D\u0003PHWKRG\u0003IRU\u0003DFKLHYLQJ\u0003D\u0003NLQG\u0003RI\u0003WDVN\u0010OHYHO\u0003SDUDO - OHOLVP\u0003LQ\u0003&8'$\u0003&\u0003DSSOLFDWLRQV\u0011\u0003%\\\u0003XVLQJ\u0003WZR\u0003 RU\u0003PRUH \u0003&8'$\u0003VWUHDPV\u000f\u0003ZH\u0003FDQ\u0003 DOORZ\u0003WKH\u0003*38\u0003WR\u0003VLPXOWDQHRXVO\\\u0003H[HFXWH\u0003D\u0003NHUQHO\u0003ZKLOH\u0003SHUIRUPLQJ\u0003D\u0003FRS\\\u0003 EHWZHHQ\u0003WKH\u0003KRVW\u0003DQG\u0003*38\u0011\u0003:H\u0003QHHG\u0003WR\u0003EH\u0003FDUHIXO\u0003DERXW\u0003WZR\u0003WKLQJV\u0003ZKHQ\u0003ZH\u0003 HQGHDYRU\u0003WR\u0003GR\u0003WKLV\u000f\u0003WKRXJK\u0011\u0003)LUVW\u000f\u0003WKH\u0003KRVW\u0003PHPRU\\\u0003LQYROYHG\u0003QHHGV\u0003WR\u0003EH\u0003DOOR - FDWHG\u0003XVLQJ\u0003 cudaHostAlloc() \u0003VLQFH\u0003ZH\u0003ZLOO\u0003TXHXH\u0003RXU\u0003PHPRU\\\u0003FRSLHV\u0003ZLWK\u0003 cudaMemcpyAsync() \u000f\u0003DQG\u0003DV\\QFKURQRXV\u0003FRSLHV\u0003QHHG\u0003WR\u0003EH\u0003SHUIRUPHG\u0003ZLWK\u0003 SLQQHG\u0003EXIIHUV\u0011\u00036HFRQG\u000f\u0003ZH\u0003QHHG\u0003WR\u0003EH\u0003DZDUH\u0003WKDW\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003ZH\u0003DGG\u0003RSHU - DWLRQV\u0003WR\u0003RXU\u0003VWUHDPV\u0003ZLOO\u0003DIIHFW\u0003RXU\u0003FDSDFLW\\\u0003WR\u0003DFKLHYH\u0003RYHUODSSLQJ\u0003RI\u0003FRSLHV\u0003DQG\u0003 NHUQHO\u0003H[HFXWLRQV\u0011\u00037KH\u0003JHQHUDO\u0003JXLGHOLQH\u0003LQYROYHV\u0003D\u0003EUHDGWK\u0010\u020cUVW\u000f\u0003RU\u0003URXQG\u0010URELQ\u000f\u0003 DVVLJQPHQW\u0003RI\u0003ZRUN\u0003WR\u0003WKH\u0003VWUHDPV\u0003\\RX\u0003LQWHQG\u0003WR\u0003XVH\u0011\u00037KLV\u0003FDQ\u0003EH\u0003FRXQWHULQWXLWLYH\u0003 LI\u0003\\RX\u0003GRQ\u01e2W\u0003XQGHUVWDQG\u0003KRZ\u0003WKH\u0003KDUGZDUH\u0003TXHXLQJ\u0003ZRUNV\u000f\u0003VR\u0003LW\u01e2V\u0003D\u0003JRRG\u0003WKLQJ\u0003WR\u0003 UHPHPEHU\u0003ZKHQ\u0003\\RX\u0003JR\u0003DERXW\u0003ZULWLQJ\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /two.lf/one.lf/three.lfChapter 11 CUDA C on Multiple GPUs 7KHUH\u0003LV\u0003DQ\u0003ROG\u0003VD\\LQJ\u0003WKDW\u0003JRHV\u0003VRPHWKLQJ\u0003OLNH\u0003WKLV \u0003\u01e47KH\u0003RQO\\\u0003WKLQJ\u0003EHWWHU\u0003WKDQ\u0003 FRPSXWLQJ\u0003RQ\u0003D\u0003*38\u0003LV\u0003FRPSXWLQJ\u0003RQ\u0003WZR\u0003*38V\u0011\u01e5\u00036\\VWHPV\u0003FRQWDLQLQJ\u0003PXOWLSOH\u0003 JUDSKLFV\u0003SURFHVVRUV\u0003KDYH\u0003EHFRPH\u0003PRUH\u0003DQG\u0003PRUH\u0003FRPPRQ\u0003LQ\u0003UHFHQW\u0003\\HDUV\u0011\u00032I\u0003 FRXUVH\u000f\u0003LQ\u0003VRPH\u0003ZD\\V\u0003PXOWL\u0010*38\u0003V\\VWHPV\u0003DUH\u0003VLPLODU\u0003WR\u0003PXOWL\u0010&38\u0003V\\VWHPV\u0003LQ\u0003 WKDW\u0003WKH\\\u0003DUH\u0003VWLOO\u0003IDU\u0003IURP\u0003WKH\u0003FRPPRQ\u0003V\\VWHP\u0003FRQ\u020cJXUDWLRQ\u000f\u0003EXW\u0003LW\u0003KDV\u0003JRWWHQ\u0003 TXLWH\u0003HDV\\\u0003WR\u0003HQG\u0003XS\u0003ZLWK\u0003PRUH\u0003WKDQ\u0003RQH\u0003*38\u0003LQ\u0003\\RXU\u0003V\\VWHP\u0011\u00033URGXFWV\u0003VXFK\u0003DV\u0003 WKH\u0003*H)RUFH\u0003*7;\u0003\u0015 \u0018\u0003FRQWDLQ\u0003WZR\u0003*38V\u0003RQ\u0003D\u0003VLQJOH\u0003FDUG\u0011\u000319,',$\u01e2V\u00037HVOD\u00036\u0014\u0013\u001a\u0013\u0003 FRQWDLQV\u0003D\u0003ZKRSSLQJ\u0003IRXU\u0003&8'$\u0010FDSDEOH\u0003JUDSKLFV\u0003SURFHVVRUV\u0003LQ\u0003LW\u0011\u00036\\VWHPV\u0003EXLOW\u0003 DURXQG\u0003D\u0003UHFHQW\u000319,',$\u0003FKLSVHW\u0003ZLOO\u0003KDYH\u0003DQ\u0003LQWHJUDWHG\u000f\u0003&8'$\u0010FDSDEOH\u0003*38\u0003RQ\u0003 WKH\u0003PRWKHUERDUG\u0011\u0003$GGLQJ\u0003D\u0003GLVFUHWH\u000319,',$\u0003*38\u0003LQ\u0003RQH\u0003RI\u0003WKH\u00033&,\u0003([SUHVV\u0003VORWV\u0003 ZLOO\u0003PDNH\u0003WKLV\u0003V\\VWHP\u0003PXOWL\u0010*38\u0011\u00031HLWKHU\u0003RI\u0003WKHVH\u0003VFHQDULRV\u0003LV\u0003YHU\\\u0003IDUIHWFKHG\u000f\u0003 VR\u0003ZH\u0003ZRXOG\u0003EH\u0003EHVW\u0003VHUYHG\u0003E\\\u0003OHDUQLQJ\u0003WR\u0003H[SORLW\u0003WKH\u0003UHVRXUFHV\u0003RI\u0003D\u0003V\\VWHP\u0003ZLWK\u0003 PXOWLSOH\u0003*38V\u0003LQ\u0003LW\u0011 Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/one.lf/four.lf&KDSWHU\u00032EMHFWLYHV\u0014\u0014\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003DOORFDWH\u0003DQG\u0003XVH\u0003\u01e9\u0003 zero-copy \u0003PHPRU\\\u0011 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003XVH\u0003PXOWLSOH\u0003*38V\u0003ZLWKLQ\u0003WKH\u0003VDPH\u0003DSSOLFDWLRQ\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003KRZ\u0003WR\u0003DOORFDWH\u0003DQG\u0003XVH\u0003\u01e9\u0003 portable \u0003SLQQHG\u0003PHPRU\\\u0011 =HUR\u0010&RS\\\u0003+RVW\u00030HPRU\\\u0014\u0014\u0011\u0015\u0003 ,Q\u0003&KDSWHU\u0003\u0014\u0013\u000f\u0003ZH\u0003H[DPLQHG\u0003SLQQHG\u0003RU\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u000f\u0003D\u0003QHZ\u0003W\\SH\u0003RI\u0003 KRVW\u0003PHPRU\\\u0003WKDW\u0003FDPH\u0003ZLWK\u0003WKH\u0003JXDUDQWHH\u0003WKDW\u0003WKH\u0003EXIIHU\u0003ZRXOG\u0003QHYHU\u0003EH\u0003 VZDSSHG\u0003RXW\u0003RI\u0003SK\\VLFDO\u0003PHPRU\\\u0011\u0003,I\u0003\\RX\u0003UHFDOO\u000f\u0003ZH\u0003DOORFDWHG\u0003WKLV\u0003PHPRU\\\u0003E\\\u0003 PDNLQJ\u0003D\u0003FDOO\u0003WR\u0003 cudaHostAlloc() \u0003DQG\u0003SDVVLQJ\u0003 cudaHostAllocDefault WR\u0003JHW\u0003GHIDXOW\u000f\u0003SLQQHG\u0003PHPRU\\\u0011\u0003:H\u0003SURPLVHG\u0003WKDW\u0003LQ\u0003WKH\u0003QH[W\u0003FKDSWHU\u000f\u0003\\RX\u0003ZRXOG\u0003 VHH\u0003RWKHU\u0003PRUH\u0003H[FLWLQJ\u0003PHDQV\u0003E\\\u0003ZKLFK\u0003\\RX\u0003FDQ\u0003DOORFDWH\u0003SLQQHG\u0003PHPRU\\\u0011\u0003 $VVXPLQJ\u0003WKDW\u0003WKLV\u0003LV\u0003WKH\u0003RQO\\\u0003UHDVRQ\u0003\\RX\u01e2YH\u0003FRQWLQXHG\u0003UHDGLQJ\u000f\u0003\\RX\u0003ZLOO\u0003EH\u0003 JODG\u0003WR\u0003NQRZ\u0003WKDW\u0003WKH\u0003ZDLW\u0003LV\u0003RYHU\u0011\u00037KH\u0003\u020dDJ\u0003 cudaHostAllocMapped \u0003FDQ\u0003EH\u0003 SDVVHG\u0003LQVWHDG\u0003RI\u0003 \u0003cudaHostAllocDefault \u0011\u00037KH\u0003KRVW\u0003PHPRU\\\u0003DOORFDWHG\u0003XVLQJ\u0003 cudaHostAllocMapped \u0003LV\u0003pinned \u0003LQ\u0003WKH\u0003VDPH\u0003VHQVH\u0003WKDW\u0003PHPRU\\\u0003DOORFDWHG\u0003 ZLWK\u0003\u0003cudaHostAllocDefault \u0003LV\u0003SLQQHG\u000f\u0003VSHFL\u020cFDOO\\\u0003WKDW\u0003LW\u0003FDQQRW\u0003EH\u0003SDJHG\u0003RXW\u0003 RI\u0003RU\u0003UHORFDWHG\u0003ZLWKLQ\u0003SK\\VLFDO\u0003PHPRU\\\u0011\u0003%XW\u0003LQ\u0003DGGLWLRQ\u0003WR\u0003XVLQJ\u0003WKLV\u0003PHPRU\\\u0003IURP\u0003 WKH\u0003KRVW\u0003IRU\u0003PHPRU\\\u0003FRSLHV\u0003WR\u0003DQG\u0003IURP\u0003WKH\u0003*38\u000f\u0003WKLV\u0003QHZ\u0003NLQG\u0003RI\u0003KRVW\u0003PHPRU\\\u0003 DOORZV\u0003XV\u0003WR\u0003YLRODWH\u0003RQH\u0003RI\u0003WKH\u0003\u020cUVW\u0003UXOHV\u0003ZH\u0003SUHVHQWHG\u0003LQ\u0003&KDSWHU \u0003\u0016\u0003FRQFHUQLQJ\u0003 KRVW\u0003PHPRU\\ \u0003:H\u0003FDQ\u0003DFFHVV\u0003WKLV\u0003KRVW\u0003PHPRU\\\u0003GLUHFWO\\\u0003IURP\u0003ZLWKLQ\u0003&8'$\u0003&\u0003 NHUQHOV\u0011\u0003%HFDXVH\u0003WKLV\u0003PHPRU\\\u0003GRHV\u0003QRW\u0003UHTXLUH\u0003FRSLHV\u0003WR\u0003DQG\u0003IURP\u0003WKH\u0003*38\u000f\u0003ZH\u0003 UHIHU\u0003WR\u0003LW\u0003DV\u0003 zero-copy \u0003PHPRU\\\u0011 =(52\u0210&23<\u0003'27\u0003352'8&7 \u0014\u0014\u0011\u0015\u0011\u0014\u0003 7\\SLFDOO\\\u000f\u0003RXU\u0003*38\u0003DFFHVVHV\u0003RQO\\\u0003*38\u0003PHPRU\\\u000f\u0003DQG\u0003RXU\u0003&38\u0003DFFHVVHV\u0003RQO\\\u0003KRVW\u0003 PHPRU\\\u0011\u0003%XW\u0003LQ\u0003VRPH\u0003FLUFXPVWDQFHV\u000f\u0003LW\u01e2V\u0003EHWWHU\u0003WR\u0003EUHDN\u0003WKHVH\u0003UXOHV\u0011\u00037R\u0003VHH\u0003DQ\u0003 LQVWDQFH\u0003ZKHUH\u0003LW\u01e2V\u0003EHWWHU\u0003WR\u0003KDYH\u0003WKH\u0003*38\u0003PDQLSXODWH\u0003KRVW\u0003PHPRU\\\u000f\u0003ZH\u01e2OO\u0003UHYLVLW\u0003 RXU\u0003IDYRULWH\u0003UHGXFWLRQ \u0003WKH\u0003YHFWRU\u0003GRW\u0003SURGXFW\u0011\u0003,I\u0003\\RX\u01e2YH\u0003PDQDJHG\u0003WR\u0003UHDG\u0003WKLV\u0003 HQWLUH\u0003ERRN\u000f\u0003\\RX\u0003PD\\\u0003UHFDOO\u0003RXU\u0003\u020cUVW\u0003DWWHPSW\u0003DW\u0003WKH\u0003GRW\u0003SURGXFW\u0011\u0003:H\u0003FRSLHG\u0003WKH\u0003WZR\u0003 LQSXW\u0003YHFWRUV\u0003WR\u0003WKH\u0003*38\u000f\u0003SHUIRUPHG\u0003WKH\u0003FRPSXWDWLRQ\u000f\u0003FRSLHG\u0003WKH\u0003LQWHUPHGLDWH\u0003 UHVXOWV\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u000f\u0003DQG\u0003FRPSOHWHG\u0003WKH\u0003FRPSXWDWLRQ\u0003RQ\u0003WKH\u0003&38\u0011 Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/one.lf/five.lf\u0014\u0014\u0011\u0015\u0003222 ,Q\u0003WKLV\u0003YHUVLRQ\u000f\u0003ZH\u01e2OO\u0003VNLS\u0003WKH\u0003H[SOLFLW\u0003FRSLHV\u0003RI\u0003RXU\u0003LQSXW\u0003XS\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003LQVWHDG\u0003 XVH\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003WR\u0003DFFHVV\u0003WKH\u0003GDWD\u0003GLUHFWO\\\u0003IURP\u0003WKH\u0003*38\u0011\u00037KLV\u0003YHUVLRQ\u0003RI\u0003 GRW\u0003SURGXFW\u0003ZLOO\u0003EH\u0003VHW\u0003XS\u0003H[DFWO\\\u0003OLNH\u0003RXU\u0003SLQQHG\u0003PHPRU\\\u0003WHVW\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003ZH\u01e2OO\u0003 ZULWH\u0003WZR\u0003IXQFWLRQV \u0003RQH\u0003ZLOO\u0003SHUIRUP\u0003WKH\u0003WHVW\u0003ZLWK\u0003VWDQGDUG\u0003KRVW\u0003PHPRU\\\u000f\u0003DQG\u0003 WKH\u0003RWKHU\u0003ZLOO\u0003\u020cQLVK\u0003WKH\u0003UHGXFWLRQ\u0003RQ\u0003WKH\u0003*38\u0003XVLQJ\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003WR\u0003KROG\u0003 WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0011\u0003)LUVW\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003WKH\u0003VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003 YHUVLRQ\u0003RI\u0003WKH\u0003GRW\u0003SURGXFW\u0011\u0003:H\u0003VWDUW\u0003LQ\u0003WKH\u0003XVXDO\u0003IDVKLRQ\u0003E\\\u0003FUHDWLQJ\u0003WLPLQJ\u0003HYHQWV\u000f\u0003 DOORFDWLQJ\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u000f\u0003DQG\u0003\u020cOOLQJ\u0003RXU\u0003LQSXW\u0003EXIIHUV\u0003ZLWK\u0003GDWD\u0011 float",
    "ZLWK\u0003\u0003cudaHostAllocDefault \u0003LV\u0003SLQQHG\u000f\u0003VSHFL\u020cFDOO\\\u0003WKDW\u0003LW\u0003FDQQRW\u0003EH\u0003SDJHG\u0003RXW\u0003 RI\u0003RU\u0003UHORFDWHG\u0003ZLWKLQ\u0003SK\\VLFDO\u0003PHPRU\\\u0011\u0003%XW\u0003LQ\u0003DGGLWLRQ\u0003WR\u0003XVLQJ\u0003WKLV\u0003PHPRU\\\u0003IURP\u0003 WKH\u0003KRVW\u0003IRU\u0003PHPRU\\\u0003FRSLHV\u0003WR\u0003DQG\u0003IURP\u0003WKH\u0003*38\u000f\u0003WKLV\u0003QHZ\u0003NLQG\u0003RI\u0003KRVW\u0003PHPRU\\\u0003 DOORZV\u0003XV\u0003WR\u0003YLRODWH\u0003RQH\u0003RI\u0003WKH\u0003\u020cUVW\u0003UXOHV\u0003ZH\u0003SUHVHQWHG\u0003LQ\u0003&KDSWHU \u0003\u0016\u0003FRQFHUQLQJ\u0003 KRVW\u0003PHPRU\\ \u0003:H\u0003FDQ\u0003DFFHVV\u0003WKLV\u0003KRVW\u0003PHPRU\\\u0003GLUHFWO\\\u0003IURP\u0003ZLWKLQ\u0003&8'$\u0003&\u0003 NHUQHOV\u0011\u0003%HFDXVH\u0003WKLV\u0003PHPRU\\\u0003GRHV\u0003QRW\u0003UHTXLUH\u0003FRSLHV\u0003WR\u0003DQG\u0003IURP\u0003WKH\u0003*38\u000f\u0003ZH\u0003 UHIHU\u0003WR\u0003LW\u0003DV\u0003 zero-copy \u0003PHPRU\\\u0011 =(52\u0210&23<\u0003'27\u0003352'8&7 \u0014\u0014\u0011\u0015\u0011\u0014\u0003 7\\SLFDOO\\\u000f\u0003RXU\u0003*38\u0003DFFHVVHV\u0003RQO\\\u0003*38\u0003PHPRU\\\u000f\u0003DQG\u0003RXU\u0003&38\u0003DFFHVVHV\u0003RQO\\\u0003KRVW\u0003 PHPRU\\\u0011\u0003%XW\u0003LQ\u0003VRPH\u0003FLUFXPVWDQFHV\u000f\u0003LW\u01e2V\u0003EHWWHU\u0003WR\u0003EUHDN\u0003WKHVH\u0003UXOHV\u0011\u00037R\u0003VHH\u0003DQ\u0003 LQVWDQFH\u0003ZKHUH\u0003LW\u01e2V\u0003EHWWHU\u0003WR\u0003KDYH\u0003WKH\u0003*38\u0003PDQLSXODWH\u0003KRVW\u0003PHPRU\\\u000f\u0003ZH\u01e2OO\u0003UHYLVLW\u0003 RXU\u0003IDYRULWH\u0003UHGXFWLRQ \u0003WKH\u0003YHFWRU\u0003GRW\u0003SURGXFW\u0011\u0003,I\u0003\\RX\u01e2YH\u0003PDQDJHG\u0003WR\u0003UHDG\u0003WKLV\u0003 HQWLUH\u0003ERRN\u000f\u0003\\RX\u0003PD\\\u0003UHFDOO\u0003RXU\u0003\u020cUVW\u0003DWWHPSW\u0003DW\u0003WKH\u0003GRW\u0003SURGXFW\u0011\u0003:H\u0003FRSLHG\u0003WKH\u0003WZR\u0003 LQSXW\u0003YHFWRUV\u0003WR\u0003WKH\u0003*38\u000f\u0003SHUIRUPHG\u0003WKH\u0003FRPSXWDWLRQ\u000f\u0003FRSLHG\u0003WKH\u0003LQWHUPHGLDWH\u0003 UHVXOWV\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u000f\u0003DQG\u0003FRPSOHWHG\u0003WKH\u0003FRPSXWDWLRQ\u0003RQ\u0003WKH\u0003&38\u0011 Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/one.lf/five.lf\u0014\u0014\u0011\u0015\u0003222 ,Q\u0003WKLV\u0003YHUVLRQ\u000f\u0003ZH\u01e2OO\u0003VNLS\u0003WKH\u0003H[SOLFLW\u0003FRSLHV\u0003RI\u0003RXU\u0003LQSXW\u0003XS\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003LQVWHDG\u0003 XVH\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003WR\u0003DFFHVV\u0003WKH\u0003GDWD\u0003GLUHFWO\\\u0003IURP\u0003WKH\u0003*38\u0011\u00037KLV\u0003YHUVLRQ\u0003RI\u0003 GRW\u0003SURGXFW\u0003ZLOO\u0003EH\u0003VHW\u0003XS\u0003H[DFWO\\\u0003OLNH\u0003RXU\u0003SLQQHG\u0003PHPRU\\\u0003WHVW\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003ZH\u01e2OO\u0003 ZULWH\u0003WZR\u0003IXQFWLRQV \u0003RQH\u0003ZLOO\u0003SHUIRUP\u0003WKH\u0003WHVW\u0003ZLWK\u0003VWDQGDUG\u0003KRVW\u0003PHPRU\\\u000f\u0003DQG\u0003 WKH\u0003RWKHU\u0003ZLOO\u0003\u020cQLVK\u0003WKH\u0003UHGXFWLRQ\u0003RQ\u0003WKH\u0003*38\u0003XVLQJ\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003WR\u0003KROG\u0003 WKH\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0011\u0003)LUVW\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003WKH\u0003VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003 YHUVLRQ\u0003RI\u0003WKH\u0003GRW\u0003SURGXFW\u0011\u0003:H\u0003VWDUW\u0003LQ\u0003WKH\u0003XVXDO\u0003IDVKLRQ\u0003E\\\u0003FUHDWLQJ\u0003WLPLQJ\u0003HYHQWV\u000f\u0003 DOORFDWLQJ\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u000f\u0003DQG\u0003\u020cOOLQJ\u0003RXU\u0003LQSXW\u0003EXIIHUV\u0003ZLWK\u0003GDWD\u0011 float malloc_test( int size ) { cudaEvent_t start, stop; float *a, *b, c, *partial_c; float *dev_a, *dev_b, *dev_partial_c; float elapsedTime; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); // allocate memory on the CPU side a = ( float*)malloc( size* sizeof(float) ); b = ( float*)malloc( size* sizeof(float) ); partial_c = (float*)malloc( blocksPerGrid* sizeof(float) ); // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, size* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, size* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_partial_c, blocksPerGrid* sizeof(float) ) ); // fill in the host memory with data for (int i=0; i<size; i++) { a[i] = i; b[i] = i*2; } Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/one.lf/six.lf$IWHU\u0003WKH\u0003DOORFDWLRQV\u0003DQG\u0003GDWD\u0003FUHDWLRQ\u000f\u0003ZH\u0003FDQ\u0003EHJLQ\u0003WKH\u0003FRPSXWDWLRQV\u0011\u0003:H\u0003VWDUW\u0003 RXU\u0003WLPHU\u000f\u0003FRS\\\u0003RXU\u0003LQSXWV\u0003WR\u0003WKH\u0003*38\u000f\u0003H[HFXWH\u0003WKH\u0003GRW\u0003SURGXFW\u0003NHUQHO\u000f\u0003DQG\u0003FRS\\\u0003 WKH\u0003SDUWLDO\u0003UHVXOWV\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u0011 HANDLE_ERROR( cudaEventRecord( start, 0 ) ); // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, size* sizeof(float), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, size* sizeof(float), cudaMemcpyHostToDevice ) ); dot<<<blocksPerGrid,threadsPerBlock>>>( size, dev_a, dev_b, dev_partial_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid* sizeof(float), cudaMemcpyDeviceToHost ) ); 1RZ\u0003ZH\u0003QHHG\u0003WR\u0003\u020cQLVK\u0003XS\u0003RXU\u0003FRPSXWDWLRQV\u0003RQ\u0003WKH\u0003&38\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003&KDSWHU\u0003\u0018\u0011\u0003 %HIRUH\u0003GRLQJ\u0003WKLV\u000f\u0003ZH\u01e2OO\u0003VWRS\u0003RXU\u0003HYHQW\u0003WLPHU\u0003EHFDXVH\u0003LW\u0003RQO\\\u0003PHDVXUHV\u0003ZRUN\u0003WKDW\u01e2V\u0003 EHLQJ\u0003SHUIRUPHG\u0003RQ\u0003WKH\u0003*38 HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); )LQDOO\\\u000f\u0003ZH\u0003VXP\u0003RXU\u0003SDUWLDO\u0003UHVXOWV\u0003DQG\u0003IUHH\u0003RXU\u0003LQSXW\u0003DQG\u0003RXWSXW\u0003EXIIHUV\u0011 // finish up on the CPU side c = 0; for (int i=0; i<blocksPerGrid; i++) { c += partial_c[i]; } Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/one.lf/seven.lf\u0014\u0014\u0011\u0015\u0003222 HANDLE_ERROR( cudaFree( dev_a ) ); HANDLE_ERROR( cudaFree( dev_b ) ); HANDLE_ERROR( cudaFree( dev_partial_c ) ); // free memory on the CPU side free( a ); free( b ); free( partial_c ); // free events HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); printf( \" Value calculated: %f\\n\" , c ); return elapsedTime; } 7KH\u0003YHUVLRQ\u0003WKDW\u0003XVHV\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003ZLOO\u0003EH\u0003UHPDUNDEO\\\u0003VLPLODU\u000f\u0003ZLWK\u0003WKH\u0003 H[FHSWLRQ\u0003RI\u0003PHPRU\\\u0003DOORFDWLRQ\u0011\u00036R\u000f\u0003ZH\u0003VWDUW\u0003E\\\u0003DOORFDWLQJ\u0003RXU\u0003LQSXW\u0003DQG\u0003RXWSXW\u000f\u0003 \u020cOOLQJ\u0003WKH\u0003LQSXW\u0003PHPRU\\\u0003ZLWK\u0003GDWD\u0003DV\u0003EHIRUH float cuda_host_alloc_test( int size ) { cudaEvent_t start, stop; float *a, *b, c, *partial_c; float *dev_a, *dev_b, *dev_partial_c; float elapsedTime; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); // allocate the memory on the CPU HANDLE_ERROR( cudaHostAlloc( ( void**)&a, size* sizeof(float), cudaHostAllocWriteCombined | cudaHostAllocMapped ) ); Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/one.lf/eight.lf HANDLE_ERROR( cudaHostAlloc( ( void**)&b, size* sizeof(float), cudaHostAllocWriteCombined | cudaHostAllocMapped ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&partial_c, blocksPerGrid* sizeof(float), cudaHostAllocMapped ) ); // fill in the host memory with data for (int i=0; i<size; i++) { a[i] = i; b[i] = i*2; } $V\u0003ZLWK\u0003&KDSWHU\u0003\u0014\u0013\u000f\u0003ZH\u0003VHH\u0003 cudaHostAlloc() \u0003LQ\u0003DFWLRQ\u0003DJDLQ\u000f\u0003DOWKRXJK\u0003ZH\u01e2UH\u0003 QRZ\u0003XVLQJ\u0003WKH\u0003 flags\u0003DUJXPHQW\u0003WR\u0003VSHFLI\\\u0003PRUH\u0003WKDQ\u0003MXVW\u0003GHIDXOW\u0003EHKDYLRU\u0011\u00037KH\u0003 \u020dDJ\u0003cudaHostAllocMapped \u0003WHOOV\u0003WKH\u0003UXQWLPH\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003DFFHVV\u0003WKLV\u0003 EXIIHU\u0003IURP\u0003WKH\u0003*38\u0011\u0003,Q\u0003RWKHU\u0003ZRUGV\u000f\u0003WKLV\u0003\u020dDJ\u0003LV\u0003ZKDW\u0003PDNHV\u0003RXU\u0003EXIIHU\u0003 zero-copy \u0011\u0003 )RU\u0003WKH\u0003WZR\u0003LQSXW\u0003EXIIHUV\u000f\u0003ZH\u0003VSHFLI\\\u0003WKH\u0003\u020dDJ\u0003 cudaHostAllocWriteCombined \u0011\u0003 7KLV\u0003\u020dDJ\u0003LQGLFDWHV\u0003WKDW\u0003WKH\u0003UXQWLPH\u0003VKRXOG\u0003DOORFDWH\u0003WKH\u0003EXIIHU\u0003DV\u0003ZULWH\u0010FRPELQHG\u0003 ZLWK\u0003UHVSHFW\u0003WR\u0003WKH\u0003&38\u0003FDFKH\u0011\u00037KLV\u0003\u020dDJ\u0003ZLOO\u0003QRW\u0003FKDQJH\u0003IXQFWLRQDOLW\\\u0003LQ\u0003RXU\u0003DSSOL - FDWLRQ\u0003EXW\u0003UHSUHVHQWV\u0003DQ\u0003LPSRUWDQW\u0003SHUIRUPDQFH\u0003HQKDQFHPHQW\u0003IRU\u0003EXIIHUV\u0003WKDW\u0003 ZLOO\u0003EH\u0003UHDG\u0003RQO\\\u0003E\\\u0003WKH\u0003*38\u0011\u0003+RZHYHU\u000f\u0003ZULWH\u0010FRPELQHG\u0003PHPRU\\\u0003FDQ\u0003EH\u0003H[WUHPHO\\\u0003 LQHI\u020cFLHQW\u0003LQ\u0003VFHQDULRV\u0003ZKHUH\u0003WKH\u0003&38\u0003DOVR\u0003QHHGV\u0003WR\u0003SHUIRUP\u0003UHDGV\u0003IURP\u0003WKH\u0003 EXIIHU\u000f\u0003VR\u0003\\RX\u0003ZLOO\u0003KDYH\u0003WR\u0003FRQVLGHU\u0003\\RXU\u0003DSSOLFDWLRQ\u01e2V\u0003OLNHO\\\u0003DFFHVV\u0003SDWWHUQV\u0003ZKHQ\u0003 PDNLQJ\u0003WKLV\u0003GHFLVLRQ\u0011 6LQFH\u0003ZH\u01e2YH\u0003DOORFDWHG\u0003RXU\u0003KRVW\u0003PHPRU\\\u0003ZLWK\u0003WKH\u0003\u020dDJ\u0003 \u0003cudaHostAllocMapped , WKH\u0003EXIIHUV\u0003FDQ\u0003EH\u0003DFFHVVHG\u0003IURP\u0003WKH\u0003*38\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003*38\u0003KDV\u0003D\u0003GLIIHUHQW\u0003 YLUWXDO\u0003PHPRU\\\u0003VSDFH\u0003WKDQ\u0003WKH\u0003&38\u000f\u0003VR\u0003WKH\u0003EXIIHUV\u0003ZLOO\u0003KDYH\u0003GLIIHUHQW\u0003DGGUHVVHV\u0003 ZKHQ\u0003WKH\\\u01e2UH\u0003DFFHVVHG\u0003RQ\u0003WKH\u0003*38\u0003DV\u0003FRPSDUHG\u0003WR\u0003WKH\u0003&38\u0011\u00037KH\u0003FDOO\u0003WR\u0003 cudaHostAlloc() \u0003UHWXUQV\u0003WKH\u0003&38\u0003SRLQWHU\u0003IRU\u0003WKH\u0003PHPRU\\\u000f\u0003VR\u0003ZH\u0003QHHG\u0003WR\u0003FDOO\u0003 cudaHostGetDevicePointer() \u0003LQ\u0003RUGHU\u0003WR\u0003JHW\u0003D\u0003YDOLG\u0003*38\u0003SRLQWHU\u0003IRU\u0003WKH\u0003 PHPRU\\\u0011\u00037KHVH\u0003SRLQWHUV\u0003ZLOO\u0003EH\u0003SDVVHG\u0003WR\u0003WKH\u0003NHUQHO\u0003DQG\u0003WKHQ\u0003XVHG\u0003E\\\u0003WKH\u0003*38\u0003WR\u0003 UHDG\u0003IURP\u0003DQG\u0003ZULWH\u0003WR\u0003RXU\u0003KRVW\u0003DOORFDWLRQV Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/one.lf/nine.lf\u0014\u0014\u0011\u0015\u0003222 HANDLE_ERROR( cudaHostGetDevicePointer( &dev_a, a, 0",
    "\u0003WHOOV\u0003WKH\u0003UXQWLPH\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003DFFHVV\u0003WKLV\u0003 EXIIHU\u0003IURP\u0003WKH\u0003*38\u0011\u0003,Q\u0003RWKHU\u0003ZRUGV\u000f\u0003WKLV\u0003\u020dDJ\u0003LV\u0003ZKDW\u0003PDNHV\u0003RXU\u0003EXIIHU\u0003 zero-copy \u0011\u0003 )RU\u0003WKH\u0003WZR\u0003LQSXW\u0003EXIIHUV\u000f\u0003ZH\u0003VSHFLI\\\u0003WKH\u0003\u020dDJ\u0003 cudaHostAllocWriteCombined \u0011\u0003 7KLV\u0003\u020dDJ\u0003LQGLFDWHV\u0003WKDW\u0003WKH\u0003UXQWLPH\u0003VKRXOG\u0003DOORFDWH\u0003WKH\u0003EXIIHU\u0003DV\u0003ZULWH\u0010FRPELQHG\u0003 ZLWK\u0003UHVSHFW\u0003WR\u0003WKH\u0003&38\u0003FDFKH\u0011\u00037KLV\u0003\u020dDJ\u0003ZLOO\u0003QRW\u0003FKDQJH\u0003IXQFWLRQDOLW\\\u0003LQ\u0003RXU\u0003DSSOL - FDWLRQ\u0003EXW\u0003UHSUHVHQWV\u0003DQ\u0003LPSRUWDQW\u0003SHUIRUPDQFH\u0003HQKDQFHPHQW\u0003IRU\u0003EXIIHUV\u0003WKDW\u0003 ZLOO\u0003EH\u0003UHDG\u0003RQO\\\u0003E\\\u0003WKH\u0003*38\u0011\u0003+RZHYHU\u000f\u0003ZULWH\u0010FRPELQHG\u0003PHPRU\\\u0003FDQ\u0003EH\u0003H[WUHPHO\\\u0003 LQHI\u020cFLHQW\u0003LQ\u0003VFHQDULRV\u0003ZKHUH\u0003WKH\u0003&38\u0003DOVR\u0003QHHGV\u0003WR\u0003SHUIRUP\u0003UHDGV\u0003IURP\u0003WKH\u0003 EXIIHU\u000f\u0003VR\u0003\\RX\u0003ZLOO\u0003KDYH\u0003WR\u0003FRQVLGHU\u0003\\RXU\u0003DSSOLFDWLRQ\u01e2V\u0003OLNHO\\\u0003DFFHVV\u0003SDWWHUQV\u0003ZKHQ\u0003 PDNLQJ\u0003WKLV\u0003GHFLVLRQ\u0011 6LQFH\u0003ZH\u01e2YH\u0003DOORFDWHG\u0003RXU\u0003KRVW\u0003PHPRU\\\u0003ZLWK\u0003WKH\u0003\u020dDJ\u0003 \u0003cudaHostAllocMapped , WKH\u0003EXIIHUV\u0003FDQ\u0003EH\u0003DFFHVVHG\u0003IURP\u0003WKH\u0003*38\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003*38\u0003KDV\u0003D\u0003GLIIHUHQW\u0003 YLUWXDO\u0003PHPRU\\\u0003VSDFH\u0003WKDQ\u0003WKH\u0003&38\u000f\u0003VR\u0003WKH\u0003EXIIHUV\u0003ZLOO\u0003KDYH\u0003GLIIHUHQW\u0003DGGUHVVHV\u0003 ZKHQ\u0003WKH\\\u01e2UH\u0003DFFHVVHG\u0003RQ\u0003WKH\u0003*38\u0003DV\u0003FRPSDUHG\u0003WR\u0003WKH\u0003&38\u0011\u00037KH\u0003FDOO\u0003WR\u0003 cudaHostAlloc() \u0003UHWXUQV\u0003WKH\u0003&38\u0003SRLQWHU\u0003IRU\u0003WKH\u0003PHPRU\\\u000f\u0003VR\u0003ZH\u0003QHHG\u0003WR\u0003FDOO\u0003 cudaHostGetDevicePointer() \u0003LQ\u0003RUGHU\u0003WR\u0003JHW\u0003D\u0003YDOLG\u0003*38\u0003SRLQWHU\u0003IRU\u0003WKH\u0003 PHPRU\\\u0011\u00037KHVH\u0003SRLQWHUV\u0003ZLOO\u0003EH\u0003SDVVHG\u0003WR\u0003WKH\u0003NHUQHO\u0003DQG\u0003WKHQ\u0003XVHG\u0003E\\\u0003WKH\u0003*38\u0003WR\u0003 UHDG\u0003IURP\u0003DQG\u0003ZULWH\u0003WR\u0003RXU\u0003KRVW\u0003DOORFDWLRQV Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/one.lf/nine.lf\u0014\u0014\u0011\u0015\u0003222 HANDLE_ERROR( cudaHostGetDevicePointer( &dev_a, a, 0 ) ); HANDLE_ERROR( cudaHostGetDevicePointer( &dev_b, b, 0 ) ); HANDLE_ERROR( cudaHostGetDevicePointer( &dev_partial_c, partial_c, 0 ) ); :LWK\u0003YDOLG\u0003GHYLFH\u0003SRLQWHUV\u0003LQ\u0003KDQG\u000f\u0003ZH\u01e2UH\u0003UHDG\\\u0003WR\u0003VWDUW\u0003RXU\u0003WLPHU\u0003DQG\u0003ODXQFK\u0003RXU\u0003 NHUQHO\u0011 HANDLE_ERROR( cudaEventRecord( start, 0 ) ); dot<<<blocksPerGrid,threadsPerBlock>>>( size, dev_a, dev_b, dev_partial_c ); HANDLE_ERROR( cudaThreadSynchronize() ); (YHQ\u0003WKRXJK\u0003WKH\u0003SRLQWHUV\u0003 dev_a, dev_b\u000f\u0003DQG\u0003dev_partial_c \u0003DOO\u0003UHVLGH\u0003RQ\u0003 WKH\u0003KRVW\u000f\u0003WKH\\\u0003ZLOO\u0003ORRN\u0003WR\u0003RXU\u0003NHUQHO\u0003DV\u0003LI\u0003WKH\\\u0003DUH\u0003*38\u0003PHPRU\\\u000f\u0003WKDQNV\u0003WR\u0003RXU\u0003 FDOOV\u0003WR\u0003cudaHostGetDevicePointer() \u0011\u00036LQFH\u0003RXU\u0003SDUWLDO\u0003UHVXOWV\u0003DUH\u0003DOUHDG\\\u0003 RQ\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003GRQ\u01e2W\u0003QHHG\u0003WR\u0003ERWKHU\u0003ZLWK\u0003D\u0003 cudaMemcpy() \u0003IURP\u0003WKH\u0003GHYLFH\u0011\u0003 +RZHYHU\u000f\u0003\\RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003ZH\u01e2UH\u0003V\\QFKURQL]LQJ\u0003WKH\u0003&38\u0003ZLWK\u0003WKH\u0003*38\u0003E\\\u0003FDOOLQJ\u0003 cudaThreadSynchronize() \u0011\u00037KH\u0003FRQWHQWV\u0003RI\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003DUH\u0003XQGH\u020cQHG\u0003 GXULQJ\u0003WKH\u0003H[HFXWLRQ\u0003RI\u0003D\u0003NHUQHO\u0003WKDW\u0003SRWHQWLDOO\\\u0003PDNHV\u0003FKDQJHV\u0003WR\u0003LWV\u0003FRQWHQWV\u0011\u0003 $IWHU\u0003V\\QFKURQL]LQJ\u000f\u0003ZH\u01e2UH\u0003VXUH\u0003WKDW\u0003WKH\u0003NHUQHO\u0003KDV\u0003FRPSOHWHG\u0003DQG\u0003WKDW\u0003RXU\u0003]HUR\u0010 FRS\\\u0003EXIIHU\u0003FRQWDLQV\u0003WKH\u0003UHVXOWV\u0003VR\u0003ZH\u0003FDQ\u0003VWRS\u0003RXU\u0003WLPHU\u0003DQG\u0003\u020cQLVK\u0003WKH\u0003FRPSXWD - WLRQ\u0003RQ\u0003WKH\u0003&38\u0003DV\u0003ZH\u0003GLG\u0003EHIRUH\u0011 HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); // finish up on the CPU side c = 0; for (int i=0; i<blocksPerGrid; i++) { c += partial_c[i]; } Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/two.lf/zero.lf7KH\u0003RQO\\\u0003WKLQJ\u0003UHPDLQLQJ\u0003LQ\u0003WKH\u0003 cudaHostAlloc() \u0003YHUVLRQ\u0003RI\u0003WKH\u0003GRW\u0003SURGXFW\u0003LV\u0003 FOHDQXS\u0011 HANDLE_ERROR( cudaFreeHost( a ) ); HANDLE_ERROR( cudaFreeHost( b ) ); HANDLE_ERROR( cudaFreeHost( partial_c ) ); // free events HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); printf( \"Value calculated: %f\\n\" , c ); return elapsedTime; } <RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003QR\u0003PDWWHU\u0003ZKDW\u0003\u020dDJV\u0003ZH\u0003XVH\u0003ZLWK\u0003 cudaHostAlloc() , WKH\u0003PHPRU\\\u0003DOZD\\V\u0003JHWV\u0003IUHHG\u0003LQ\u0003WKH\u0003VDPH\u0003ZD\\\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003D\u0003FDOO\u0003WR\u0003 cudaFreeHost() \u0003GRHV\u0003WKH\u0003WULFN\u0011\u0003 $QG\u0003WKDW\u01e2V\u0003WKDW\u0004\u0003$OO\u0003WKDW\u0003UHPDLQV\u0003LV\u0003WR\u0003ORRN\u0003DW\u0003KRZ\u0003 main()\u0003WLHV\u0003DOO\u0003RI\u0003WKLV\u0003WRJHWKHU\u0011\u0003 7KH\u0003\u020cUVW\u0003WKLQJ\u0003ZH\u0003QHHG\u0003WR\u0003FKHFN\u0003LV\u0003ZKHWKHU\u0003RXU\u0003GHYLFH\u0003VXSSRUWV\u0003PDSSLQJ\u0003KRVW\u0003 PHPRU\\\u0011\u0003:H\u0003GR\u0003WKLV\u0003WKH\u0003VDPH\u0003ZD\\\u0003ZH\u0003FKHFNHG\u0003IRU\u0003GHYLFH\u0003RYHUODS\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003 FKDSWHU\u000f\u0003ZLWK\u0003D\u0003FDOO\u0003WR\u0003 cudaGetDeviceProperties() \u0011 int main( void ) { cudaDeviceProp prop; int whichDevice; HANDLE_ERROR( cudaGetDevice( &whichDevice ) ); HANDLE_ERROR( cudaGetDeviceProperties( &prop, whichDevice ) ); if (prop.canMapHostMemory != 1) { printf( \"Device cannot map memory.\\n\" ); return 0; } Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/two.lf/one.lf\u0014\u0014\u0011\u0015\u0003222 $VVXPLQJ\u0003WKDW\u0003RXU\u0003GHYLFH\u0003VXSSRUWV\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u000f\u0003ZH\u0003SODFH\u0003WKH\u0003UXQWLPH\u0003 LQWR\u0003D\u0003VWDWH\u0003ZKHUH\u0003LW\u0003ZLOO\u0003EH\u0003DEOH\u0003WR\u0003DOORFDWH\u0003]HUR\u0010FRS\\\u0003EXIIHUV\u0003IRU\u0003XV\u0011\u0003:H\u0003DFFRP - SOLVK\u0003WKLV\u0003E\\\u0003D\u0003FDOO\u0003WR\u0003 cudaSetDeviceFlags() \u0003DQG\u0003E\\\u0003SDVVLQJ\u0003WKH\u0003\u020dDJ\u0003 cudaDeviceMapHost \u0003WR\u0003LQGLFDWH\u0003WKDW\u0003ZH\u0003ZDQW\u0003WKH\u0003GHYLFH\u0003WR\u0003EH\u0003DOORZHG\u0003WR\u0003PDS\u0003 KRVW\u0003PHPRU\\ HANDLE_ERROR( cudaSetDeviceFlags( cudaDeviceMapHost ) ); 7KDW\u01e2V\u0003UHDOO\\\u0003DOO\u0003WKHUH\u0003LV\u0003WR\u0003 main()\u0011\u0003:H\u0003UXQ\u0003RXU\u0003WZR\u0003WHVWV\u000f\u0003GLVSOD\\\u0003WKH\u0003HODSVHG\u0003 WLPH\u000f\u0003DQG\u0003H[LW\u0003WKH\u0003DSSOLFDWLRQ float elapsedTime = malloc_test( N ); printf( \"Time using cudaMalloc: %3.1f ms\\n\" , elapsedTime ); elapsedTime = cuda_host_alloc_test( N ); printf( \"Time using cudaHostAlloc: %3.1f ms\\n\" , elapsedTime ); } 7KH\u0003NHUQHO\u0003LWVHOI\u0003LV\u0003XQFKDQJHG\u0003IURP\u0003&KDSWHU\u0003\u0018\u000f\u0003EXW\u0003IRU\u0003WKH\u0003VDNH\u0003RI\u0003FRPSOHWHQHVV\u000f\u0003 KHUH\u0003LW\u0003LV\u0003LQ\u0003LWV\u0003HQWLUHW\\ #define imin(a,b) (a<b?a:b) const int N = 33 * 1024 * 1024; const int threadsPerBlock = 256; const int blocksPerGrid = imin( 32, (N+threadsPerBlock-1) / threadsPerBlock ); __global__ void dot( int size, float *a, float *b, float *c ) { __shared__ float cache[threadsPerBlock]; int tid = threadIdx.x + blockIdx.x * blockDim.x; int cacheIndex = threadIdx.x; Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/two.lf/two.lf float temp = 0; while (tid < size) { temp += a[tid] * b[tid]; tid += blockDim.x * gridDim.x; } // set the cache values cache[cacheIndex] = temp; // synchronize threads in this block __syncthreads(); // for reductions, threadsPerBlock must be a power of 2 // because of the following code int i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); i /= 2; } if (cacheIndex == 0) c[blockIdx.x] = cache[0]; } =(52\u0210&23<\u00033(5)250$1&( \u0014\u0014\u0011\u0015\u0011\u0015\u0003 :KDW\u0003VKRXOG\u0003ZH\u0003H[SHFW\u0003WR\u0003JDLQ\u0003IURP\u0003XVLQJ\u0003]HUR\u0010FRS\\\u0003PHPRU\\\"\u00037KH\u0003DQVZHU\u0003WR\u0003 WKLV\u0003TXHVWLRQ\u0003LV\u0003GLIIHUHQW\u0003IRU\u0003GLVFUHWH\u0003*38V\u0003DQG\u0003LQWHJUDWHG\u0003*38V\u0011\u0003 Discrete GPUs DUH\u0003JUDSKLFV\u0003SURFHVVRUV\u0003WKDW\u0003KDYH\u0003WKHLU\u0003RZQ\u0003GHGLFDWHG\u0003'5$0V\u0003DQG\u0003W\\SLFDOO\\\u0003VLW\u0003 RQ\u0003VHSDUDWH\u0003FLUFXLW\u0003ERDUGV\u0003IURP\u0003WKH\u0003&38\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LI\u0003\\RX\u0003KDYH\u0003HYHU\u0003LQVWDOOHG\u0003 D\u0003JUDSKLFV\u0003FDUG\u0003LQWR\u0003\\RXU\u0003GHVNWRS\u000f\u0003WKLV\u0003*38\u0003LV\u0003D\u0003GLVFUHWH\u0003*38\u0011\u0003 Integrated GPUs DUH\u0003JUDSKLFV\u0003SURFHVVRUV\u0003EXLOW\u0003LQWR\u0003D\u0003V\\VWHP\u01e2V\u0003FKLSVHW\u0003DQG\u0003XVXDOO\\\u0003VKDUH\u0003UHJXODU\u0003 Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/two.lf/three.lf\u0014\u0014\u0011\u0015\u0003222 V\\VWHP\u0003PHPRU\\\u0003ZLWK\u0003WKH\u0003&38\u0011\u00030DQ\\\u0003UHFHQW\u0003V\\VWHPV\u0003EXLOW\u0003ZLWK\u000319,',$\u01e2V\u0003Q)RUFH\u0003 PHGLD\u0003DQG\u0003FRPPXQLFDWLRQV\u0003SURFHVVRUV\u0003 0&3V \u0003FRQWDLQ\u0003&8'$\u0010FDSDEOH\u0003LQWH - JUDWHG\u0003*38V\u0011\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003Q)RUFH\u00030&3V\u000f\u0003DOO\u0003WKH\u0003QHWERRN\u000f\u0003QRWHERRN\u000f\u0003DQG\u0003GHVNWRS\u0003 FRPSXWHUV\u0003EDVHG\u0003RQ\u000319,',$\u01e2V\u0003QHZ\u0003,21\u0003SODWIRUP\u0003FRQWDLQ\u0003LQWHJUDWHG\u000f\u0003&8'$\u0010 FDSDEOH\u0003*38V\u0011\u0003)RU\u0003LQWHJUDWHG\u0003*38V\u000f\u0003WKH\u0003XVH\u0003RI\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003LV\u0003 always a SHUIRUPDQFH\u0003ZLQ\u0003EHFDXVH\u0003WKH\u0003PHPRU\\\u0003LV\u0003SK\\VLFDOO\\\u0003VKDUHG\u0003ZLWK\u0003WKH\u0003KRVW\u0003DQ\\ZD\\\u0011\u0003 'HFODULQJ\u0003D\u0003EXIIHU\u0003DV\u0003]HUR\u0010FRS\\\u0003KDV\u0003WKH\u0003VROH\u0003HIIHFW\u0003RI\u0003SUHYHQWLQJ\u0003XQQHFHVVDU\\\u0003 FRSLHV\u0003RI\u0003GDWD\u0011\u0003%XW\u0003UHPHPEHU\u0003WKDW\u0003QRWKLQJ\u0003LV\u0003IUHH\u0003DQG\u0003WKDW\u0003]HUR\u0010FRS\\\u0003EXIIHUV\u0003 DUH\u0003VWLOO\u0003FRQVWUDLQHG\u0003LQ\u0003WKH\u0003VDPH\u0003ZD\\\u0003WKDW\u0003DOO\u0003SLQQHG\u0003PHPRU\\\u0003DOORFDWLRQV\u0003DUH\u0003 FRQVWUDLQHG \u0003(DFK\u0003SLQQHG\u0003DOORFDWLRQ\u0003FDUYHV\u0003LQWR\u0003WKH\u0003V\\VWHP\u01e2V\u0003DYDLODEOH\u0003SK\\VLFDO\u0003 PHPRU\\\u000f\u0003ZKLFK\u0003ZLOO\u0003HYHQWXDOO\\\u0003GHJUDGH\u0003V\\VWHP\u0003SHUIRUPDQFH\u0011 ,Q\u0003FDVHV\u0003ZKHUH\u0003LQSXWV\u0003DQG\u0003RXWSXWV\u0003DUH\u0003XVHG\u0003H[DFWO\\\u0003RQFH\u000f\u0003ZH\u0003ZLOO\u0003HYHQ\u0003VHH\u0003D\u0003 SHUIRUPDQFH\u0003HQKDQFHPHQW\u0003ZKHQ\u0003XVLQJ\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003ZLWK\u0003D\u0003GLVFUHWH\u0003*38\u0011\u0003 6LQFH\u0003*38V\u0003DUH\u0003GHVLJQHG\u0003WR\u0003H[FHO\u0003DW\u0003KLGLQJ\u0003WKH\u0003ODWHQFLHV\u0003DVVRFLDWHG\u0003ZLWK\u0003PHPRU\\\u0003 DFFHVV\u000f\u0003SHUIRUPLQJ\u0003UHDGV\u0003DQG\u0003ZULWHV\u0003RYHU\u0003WKH\u00033&,\u0003([SUHVV\u0003EXV\u0003FDQ\u0003EH\u0003PLWLJDWHG\u0003 WR\u0003VRPH\u0003GHJUHH\u0003E\\\u0003WKLV\u0003PHFKDQLVP\u000f\u0003\\LHOGLQJ\u0003D\u0003QRWLFHDEOH\u0003SHUIRUPDQFH\u0003DGYDQWDJH\u0011\u0003 %XW\u0003VLQFH\u0003WKH\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003LV\u0003QRW\u0003FDFKHG\u0003RQ\u0003WKH\u0003*38\u000f\u0003LQ\u0003VLWXDWLRQV\u0003ZKHUH\u0003",
    "WKLV\u0003TXHVWLRQ\u0003LV\u0003GLIIHUHQW\u0003IRU\u0003GLVFUHWH\u0003*38V\u0003DQG\u0003LQWHJUDWHG\u0003*38V\u0011\u0003 Discrete GPUs DUH\u0003JUDSKLFV\u0003SURFHVVRUV\u0003WKDW\u0003KDYH\u0003WKHLU\u0003RZQ\u0003GHGLFDWHG\u0003'5$0V\u0003DQG\u0003W\\SLFDOO\\\u0003VLW\u0003 RQ\u0003VHSDUDWH\u0003FLUFXLW\u0003ERDUGV\u0003IURP\u0003WKH\u0003&38\u0011\u0003)RU\u0003H[DPSOH\u000f\u0003LI\u0003\\RX\u0003KDYH\u0003HYHU\u0003LQVWDOOHG\u0003 D\u0003JUDSKLFV\u0003FDUG\u0003LQWR\u0003\\RXU\u0003GHVNWRS\u000f\u0003WKLV\u0003*38\u0003LV\u0003D\u0003GLVFUHWH\u0003*38\u0011\u0003 Integrated GPUs DUH\u0003JUDSKLFV\u0003SURFHVVRUV\u0003EXLOW\u0003LQWR\u0003D\u0003V\\VWHP\u01e2V\u0003FKLSVHW\u0003DQG\u0003XVXDOO\\\u0003VKDUH\u0003UHJXODU\u0003 Download from www.wowebook.comptg===((( 555\u0210\u0210\u0210 &&&222 333 <<<\u0003\u0003\u0003+ + +222 666 777\u0003\u0003\u00030 0 0((( 000 222 555 <<< /two.lf/two.lf/three.lf\u0014\u0014\u0011\u0015\u0003222 V\\VWHP\u0003PHPRU\\\u0003ZLWK\u0003WKH\u0003&38\u0011\u00030DQ\\\u0003UHFHQW\u0003V\\VWHPV\u0003EXLOW\u0003ZLWK\u000319,',$\u01e2V\u0003Q)RUFH\u0003 PHGLD\u0003DQG\u0003FRPPXQLFDWLRQV\u0003SURFHVVRUV\u0003 0&3V \u0003FRQWDLQ\u0003&8'$\u0010FDSDEOH\u0003LQWH - JUDWHG\u0003*38V\u0011\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003Q)RUFH\u00030&3V\u000f\u0003DOO\u0003WKH\u0003QHWERRN\u000f\u0003QRWHERRN\u000f\u0003DQG\u0003GHVNWRS\u0003 FRPSXWHUV\u0003EDVHG\u0003RQ\u000319,',$\u01e2V\u0003QHZ\u0003,21\u0003SODWIRUP\u0003FRQWDLQ\u0003LQWHJUDWHG\u000f\u0003&8'$\u0010 FDSDEOH\u0003*38V\u0011\u0003)RU\u0003LQWHJUDWHG\u0003*38V\u000f\u0003WKH\u0003XVH\u0003RI\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003LV\u0003 always a SHUIRUPDQFH\u0003ZLQ\u0003EHFDXVH\u0003WKH\u0003PHPRU\\\u0003LV\u0003SK\\VLFDOO\\\u0003VKDUHG\u0003ZLWK\u0003WKH\u0003KRVW\u0003DQ\\ZD\\\u0011\u0003 'HFODULQJ\u0003D\u0003EXIIHU\u0003DV\u0003]HUR\u0010FRS\\\u0003KDV\u0003WKH\u0003VROH\u0003HIIHFW\u0003RI\u0003SUHYHQWLQJ\u0003XQQHFHVVDU\\\u0003 FRSLHV\u0003RI\u0003GDWD\u0011\u0003%XW\u0003UHPHPEHU\u0003WKDW\u0003QRWKLQJ\u0003LV\u0003IUHH\u0003DQG\u0003WKDW\u0003]HUR\u0010FRS\\\u0003EXIIHUV\u0003 DUH\u0003VWLOO\u0003FRQVWUDLQHG\u0003LQ\u0003WKH\u0003VDPH\u0003ZD\\\u0003WKDW\u0003DOO\u0003SLQQHG\u0003PHPRU\\\u0003DOORFDWLRQV\u0003DUH\u0003 FRQVWUDLQHG \u0003(DFK\u0003SLQQHG\u0003DOORFDWLRQ\u0003FDUYHV\u0003LQWR\u0003WKH\u0003V\\VWHP\u01e2V\u0003DYDLODEOH\u0003SK\\VLFDO\u0003 PHPRU\\\u000f\u0003ZKLFK\u0003ZLOO\u0003HYHQWXDOO\\\u0003GHJUDGH\u0003V\\VWHP\u0003SHUIRUPDQFH\u0011 ,Q\u0003FDVHV\u0003ZKHUH\u0003LQSXWV\u0003DQG\u0003RXWSXWV\u0003DUH\u0003XVHG\u0003H[DFWO\\\u0003RQFH\u000f\u0003ZH\u0003ZLOO\u0003HYHQ\u0003VHH\u0003D\u0003 SHUIRUPDQFH\u0003HQKDQFHPHQW\u0003ZKHQ\u0003XVLQJ\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003ZLWK\u0003D\u0003GLVFUHWH\u0003*38\u0011\u0003 6LQFH\u0003*38V\u0003DUH\u0003GHVLJQHG\u0003WR\u0003H[FHO\u0003DW\u0003KLGLQJ\u0003WKH\u0003ODWHQFLHV\u0003DVVRFLDWHG\u0003ZLWK\u0003PHPRU\\\u0003 DFFHVV\u000f\u0003SHUIRUPLQJ\u0003UHDGV\u0003DQG\u0003ZULWHV\u0003RYHU\u0003WKH\u00033&,\u0003([SUHVV\u0003EXV\u0003FDQ\u0003EH\u0003PLWLJDWHG\u0003 WR\u0003VRPH\u0003GHJUHH\u0003E\\\u0003WKLV\u0003PHFKDQLVP\u000f\u0003\\LHOGLQJ\u0003D\u0003QRWLFHDEOH\u0003SHUIRUPDQFH\u0003DGYDQWDJH\u0011\u0003 %XW\u0003VLQFH\u0003WKH\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003LV\u0003QRW\u0003FDFKHG\u0003RQ\u0003WKH\u0003*38\u000f\u0003LQ\u0003VLWXDWLRQV\u0003ZKHUH\u0003 WKH\u0003PHPRU\\\u0003JHWV\u0003UHDG\u0003PXOWLSOH\u0003WLPHV\u000f\u0003ZH\u0003ZLOO\u0003HQG\u0003XS\u0003SD\\LQJ\u0003D\u0003ODUJH\u0003SHQDOW\\\u0003WKDW\u0003 FRXOG\u0003EH\u0003DYRLGHG\u0003E\\\u0003VLPSO\\\u0003FRS\\LQJ\u0003WKH\u0003GDWD\u0003WR\u0003WKH\u0003*38\u0003\u020cUVW\u0011\u0003 +RZ\u0003GR\u0003\\RX\u0003GHWHUPLQH\u0003ZKHWKHU\u0003D\u0003*38\u0003LV\u0003LQWHJUDWHG\u0003RU\u0003GLVFUHWH\"\u0003:HOO\u000f\u0003\\RX\u0003FDQ\u0003 RSHQ\u0003XS\u0003\\RXU\u0003FRPSXWHU\u0003DQG\u0003ORRN\u000f\u0003EXW\u0003WKLV\u0003VROXWLRQ\u0003LV\u0003IDLUO\\\u0003XQZRUNDEOH\u0003IRU\u0003\\RXU\u0003 &8'$\u0003&\u0003DSSOLFDWLRQ\u0011\u0003<RXU\u0003FRGH\u0003FDQ\u0003FKHFN\u0003WKLV\u0003SURSHUW\\\u0003RI\u0003D\u0003*38\u0003E\\\u000f\u0003QRW\u0003VXUSULV - LQJO\\\u000f\u0003ORRNLQJ\u0003DW\u0003WKH\u0003VWUXFWXUH\u0003UHWXUQHG\u0003E\\\u0003 cudaGetDeviceProperties() \u0011\u00037KLV\u0003 VWUXFWXUH\u0003KDV\u0003D\u0003\u020cHOG\u0003QDPHG\u0003 integrated \u000f\u0003ZKLFK\u0003ZLOO\u0003EH\u0003 true\u0003LI\u0003WKH\u0003GHYLFH\u0003LV\u0003DQ\u0003 LQWHJUDWHG\u0003*38\u0003DQG\u0003 false\u0003LI\u0003LW\u01e2V\u0003QRW\u0011\u0003 6LQFH\u0003RXU\u0003GRW\u0003SURGXFW\u0003DSSOLFDWLRQ\u0003VDWLV\u020cHV\u0003WKH\u0003\u01e4UHDG\u0003DQG\u0012RU\u0003ZULWH\u0003H[DFWO\\\u0003RQFH\u01e5\u0003 FRQVWUDLQW\u000f\u0003LW\u01e2V\u0003SRVVLEOH\u0003WKDW\u0003LW\u0003ZLOO\u0003HQMR\\\u0003D\u0003SHUIRUPDQFH\u0003ERRVW\u0003ZKHQ\u0003UXQ\u0003ZLWK\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0011\u0003$QG\u0003LQ\u0003IDFW\u000f\u0003LW\u0003GRHV\u0003HQMR\\\u0003D\u0003VOLJKW\u0003ERRVW\u0003LQ\u0003SHUIRUPDQFH\u0011\u00032Q\u0003D\u0003 *H)RUFH\u0003*7;\u0003\u0015\u001b\u0018\u000f\u0003WKH\u0003H[HFXWLRQ\u0003WLPH\u0003LPSURYHV\u0003E\\\u0003PRUH\u0003WKDQ\u0003\u0017\u0018\u0003SHUFHQW\u000f\u0003GURS - SLQJ\u0003IURP\u0003 \u001b\u0011\u0014PV\u0003WR\u0003\u0018\u0015\u0011\u0014PV\u0003ZKHQ\u0003PLJUDWHG\u0003WR\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0011\u0003$\u0003*H)RUFH\u0003*7;\u0003 \u0015\u001b\u0013\u0003HQMR\\V\u0003D\u0003VLPLODU\u0003LPSURYHPHQW\u000f\u0003VSHHGLQJ\u0003XS\u0003E\\\u0003\u0016\u0017\u0003SHUFHQW\u0003IURP\u0003\u0014\u0017\u0016\u0011 \u0003PV\u0003WR\u0003 \u0017\u0011\u001aPV\u0011\u00032I\u0003FRXUVH\u000f\u0003GLIIHUHQW\u0003*38V\u0003ZLOO\u0003H[KLELW\u0003GLIIHUHQW\u0003SHUIRUPDQFH\u0003FKDUDFWHULV - WLFV\u0003EHFDXVH\u0003RI\u0003YDU\\LQJ\u0003UDWLRV\u0003RI\u0003FRPSXWDWLRQ\u0003WR\u0003EDQGZLGWK\u000f\u0003DV\u0003ZHOO\u0003DV\u0003EHFDXVH\u0003RI\u0003 YDULDWLRQV\u0003LQ\u0003HIIHFWLYH\u00033&,\u0003([SUHVV\u0003EDQGZLGWK\u0003DFURVV\u0003FKLSVHWV\u0011 Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/two.lf/four.lf8VLQJ\u00030XOWLSOH\u0003*38V\u0014\u0014\u0011\u0016\u0003 ,Q\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003ZH\u0003PHQWLRQHG\u0003KRZ\u0003GHYLFHV\u0003DUH\u0003HLWKHU\u0003LQWHJUDWHG\u0003RU\u0003 GLVFUHWH\u0003*38V\u000f\u0003ZKHUH\u0003WKH\u0003IRUPHU\u0003LV\u0003EXLOW\u0003LQWR\u0003WKH\u0003V\\VWHP\u01e2V\u0003FKLSVHW\u0003DQG\u0003WKH\u0003ODWWHU\u0003LV\u0003 W\\SLFDOO\\\u0003DQ\u0003H[SDQVLRQ\u0003FDUG\u0003LQ\u0003D\u00033&,\u0003([SUHVV\u0003VORW\u0011\u00030RUH\u0003DQG\u0003PRUH\u0003V\\VWHPV\u0003FRQWDLQ\u0003 both \u0003LQWHJUDWHG\u0003DQG\u0003GLVFUHWH\u0003*38V\u000f\u0003PHDQLQJ\u0003WKDW\u0003WKH\\\u0003DOVR\u0003KDYH\u0003PXOWLSOH\u0003&8'$\u0010 FDSDEOH\u0003SURFHVVRUV\u0011\u000319,',$\u0003DOVR\u0003VHOOV\u0003SURGXFWV\u000f\u0003VXFK\u0003DV\u0003WKH\u0003*H)RUFH\u0003*7;\u0003\u0015 \u0018\u000f\u0003 WKDW\u0003FRQWDLQ\u0003PRUH\u0003WKDQ\u0003RQH\u0003*38\u0011\u0003$\u0003*H)RUFH\u0003*7;\u0003\u0015 \u0018\u000f\u0003ZKLOH\u0003SK\\VLFDOO\\\u0003RFFXS\\LQJ\u0003 D\u0003VLQJOH\u0003H[SDQVLRQ\u0003VORW\u000f\u0003ZLOO\u0003DSSHDU\u0003WR\u0003\\RXU\u0003&8'$\u0003DSSOLFDWLRQV\u0003DV\u0003WZR\u0003VHSDUDWH\u0003 *38V\u0011\u0003)XUWKHUPRUH\u000f\u0003XVHUV\u0003FDQ\u0003DOVR\u0003DGG\u0003PXOWLSOH\u0003*38V\u0003WR\u0003VHSDUDWH\u00033&,\u0003([SUHVV\u0003 VORWV\u000f\u0003FRQQHFWLQJ\u0003WKHP\u0003ZLWK\u0003EULGJHV\u0003XVLQJ\u000319,',$\u01e2V\u0003 scalable link interface (SLI) WHFKQRORJ\\\u0011\u0003$V\u0003D\u0003UHVXOW\u0003RI\u0003WKHVH\u0003WUHQGV\u000f\u0003LW\u0003KDV\u0003EHFRPH\u0003UHODWLYHO\\\u0003FRPPRQ\u0003WR\u0003KDYH\u0003 D\u0003&8'$\u0003DSSOLFDWLRQ\u0003UXQQLQJ\u0003RQ\u0003D\u0003V\\VWHP\u0003ZLWK\u0003PXOWLSOH\u0003JUDSKLFV\u0003SURFHVVRUV\u0011\u00036LQFH\u0003 RXU\u0003&8'$\u0003DSSOLFDWLRQV\u0003WHQG\u0003WR\u0003EH\u0003YHU\\\u0003SDUDOOHOL]DEOH\u0003WR\u0003EHJLQ\u0003ZLWK\u000f\u0003LW\u0003ZRXOG\u0003EH\u0003 H[FHOOHQW\u0003LI\u0003ZH\u0003FRXOG\u0003XVH\u0003HYHU\\\u0003&8'$\u0003GHYLFH\u0003LQ\u0003WKH\u0003V\\VWHP\u0003WR\u0003DFKLHYH\u0003PD[LPXP\u0003 WKURXJKSXW\u0011\u00036R\u000f\u0003OHW\u01e2V\u0003\u020cJXUH\u0003RXW\u0003KRZ\u0003ZH\u0003FDQ\u0003DFFRPSOLVK\u0003WKLV\u0011 7R\u0003DYRLG\u0003OHDUQLQJ\u0003D\u0003QHZ\u0003H[DPSOH\u000f\u0003OHW\u01e2V\u0003FRQYHUW\u0003RXU\u0003GRW\u0003SURGXFW\u0003WR\u0003XVH\u0003PXOWLSOH\u0003 *38V\u0011\u00037R\u0003PDNH\u0003RXU\u0003OLYHV\u0003HDVLHU\u000f\u0003ZH\u0003ZLOO\u0003VXPPDUL]H\u0003DOO\u0003WKH\u0003GDWD\u0003QHFHVVDU\\\u0003WR\u0003 FRPSXWH\u0003D\u0003GRW\u0003SURGXFW\u0003LQ\u0003D\u0003VLQJOH\u0003VWUXFWXUH\u0011\u0003<RX\u01e2OO\u0003VHH\u0003PRPHQWDULO\\\u0003H[DFWO\\\u0003ZK\\\u0003 WKLV\u0003ZLOO\u0003PDNH\u0003RXU\u0003OLYHV\u0003HDVLHU\u0011 struct DataStruct { int deviceID; int size; float *a; float *b; float returnValue; }; 7KLV\u0003VWUXFWXUH\u0003FRQWDLQV\u0003WKH\u0003LGHQWL\u020cFDWLRQ\u0003IRU\u0003WKH\u0003GHYLFH\u0003RQ\u0003ZKLFK\u0003WKH\u0003GRW\u0003SURGXFW\u0003 ZLOO\u0003EH\u0003FRPSXWHG \u0003LW\u0003FRQWDLQV\u0003WKH\u0003VL]H\u0003RI\u0003WKH\u0003LQSXW\u0003EXIIHUV\u0003DV\u0003ZHOO\u0003DV\u0003SRLQWHUV\u0003WR\u0003 WKH\u0003WZR\u0003LQSXWV\u0003 a\u0003DQG\u0003b\u0011\u0003)LQDOO\\\u000f\u0003LW\u0003KDV\u0003DQ\u0003HQWU\\\u0003WR\u0003VWRUH\u0003WKH\u0003YDOXH\u0003FRPSXWHG\u0003DV\u0003WKH\u0003 GRW\u0003SURGXFW\u0003RI\u0003 a\u0003DQG\u0003b\u0011 7R\u0003XVH\u0003N\u0003*38V\u000f\u0003ZH\u0003\u020cUVW\u0003ZRXOG\u0003OLNH\u0003WR\u0003NQRZ\u0003H[DFWO\\\u0003ZKDW\u0003YDOXH\u0003RI\u0003 N\u0003ZH\u01e2UH\u0003GHDOLQJ\u0003 ZLWK\u0011\u00036R\u000f\u0003ZH\u0003VWDUW\u0003RXU\u0003DSSOLFDWLRQ\u0003ZLWK\u0003D\u0003FDOO\u0003WR\u0003 cudaGetDeviceCount() \u0003LQ\u0003 Download from www.wowebook.comptgUSING MULTIPLE GP US /two.lf/two.lf/five.lf\u0014\u0014\u0011\u0016\u000386,1*\u000308/7,3/(\u0003*386 RUGHU\u0003WR\u0003GHWHUPLQH\u0003KRZ\u0003PDQ\\\u0003&8'$\u0010FDSDEOH\u0003SURFHVVRUV\u0003KDYH\u0003EHHQ\u0003LQVWDOOHG\u0003LQ\u0003 RXU\u0003V\\VWHP\u0011 int main( void ) { int deviceCount; HANDLE_ERROR( cudaGetDeviceCount( &deviceCount ) ); if (deviceCount < 2) { printf( \"We need at least two compute 1.0 or greater \" \"devices, but only found %d\\n\" , deviceCount ); return 0; } 7KLV\u0003H[DPSOH\u0003LV\u0003GHVLJQHG\u0003WR\u0003VKRZ\u0003PXOWL\u0010*38\u0003XVDJH\u000f\u0003VR\u0003\\RX\u01e2OO\u0003QRWLFH\u0003WKDW\u0003ZH\u0003 VLPSO\\\u0003H[LW\u0003LI\u0003WKH\u0003V\\VWHP\u0003KDV\u0003RQO\\\u0003RQH\u0003&8'$\u0003GHYLFH\u0003 QRW\u0003WKDW\u0003WKHUH\u01e2V\u0003DQ\\WKLQJ\u0003 ZURQJ\u0003ZLWK\u0003WKDW \u0011\u00037KLV\u0003LV\u0003QRW\u0003HQFRXUDJHG\u0003DV\u0003D\u0003EHVW\u0003SUDFWLFH\u0003IRU\u0003REYLRXV\u0003UHDVRQV\u0011\u0003 7R\u0003NHHS\u0003WKLQJV\u0003DV\u0003VLPSOH\u0003DV\u0003SRVVLEOH\u000f\u0003ZH\u01e2OO\u0003DOORFDWH\u0003VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003IRU\u0003RXU\u0003 LQSXWV\u0003DQG\u0003\u020cOO\u0003WKHP\u0003ZLWK\u0003GDWD\u0003H[DFWO\\\u0003KRZ\u0003ZH\u01e2YH\u0003GRQH\u0003LQ\u0003WKH\u0003SDVW\u0011 float *a = (float*)malloc( sizeof(float) * N ); HANDLE_NULL( a ); float *b = (float*)malloc( sizeof(float) * N ); HANDLE_NULL( b ); // fill in the host memory with data for (int i=0; i<N; i++) { a[i] = i; b[i] = i*2; } :H\u01e2UH\u0003QRZ\u0003UHDG\\\u0003WR\u0003GLYH\u0003LQWR\u0003WKH\u0003PXOWL\u0010*38\u0003FRGH\u0011\u00037KH\u0003WULFN\u0003WR\u0003XVLQJ\u0003PXOWLSOH\u0003*38V\u0003 ZLWK\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003$3,\u0003LV\u0003UHDOL]LQJ\u0003WKDW\u0003HDFK\u0003*38\u0003QHHGV\u0003WR\u0003EH\u0003FRQWUROOHG\u0003 E\\\u0003D\u0003GLIIHUHQW\u0003&38\u0003WKUHDG\u0011\u00036LQFH\u0003ZH\u0003KDYH\u0003XVHG\u0003RQO\\\u0003D\u0003VLQJOH\u0003*38\u0003EHIRUH\u000f\u0003ZH\u0003 KDYHQ\u01e2W\u0003QHHGHG\u0003WR\u0003ZRUU\\\u0003DERXW\u0003WKLV\u0011\u0003:H\u0003KDYH\u0003PRYHG\u0003D\u0003ORW\u0003RI\u0003WKH\u0003DQQR\\DQFH\u0003RI\u0003 PXOWLWKUHDGHG\u0003FRGH\u0003WR\u0003RXU\u0003\u020cOH\u0003RI\u0003DX[LOLDU\\\u0003FRGH\u000f\u0003 book.h\u0011\u0003:LWK\u0003WKLV\u0003FRGH\u0003WXFNHG\u0003 DZD\\\u000f\u0003DOO\u0003ZH\u0003QHHG\u0003WR\u0003GR\u0003LV\u0003\u020cOO\u0003D\u0003VWUXFWXUH\u0003ZLWK\u0003GDWD\u0003QHFHVVDU\\\u0003WR\u0003SHUIRUP\u0003WKH\u0003 Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/two.lf/six.lfFRPSXWDWLRQV\u0011\u0003$OWKRXJK\u0003WKH\u0003V\\VWHP\u0003FRXOG\u0003KDYH\u0003DQ\\\u0003QXPEHU\u0003RI\u0003*38V\u0003JUHDWHU\u0003WKDQ\u0003 RQH\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003RQO\\\u0003WZR\u0003RI\u0003WKHP\u0003IRU\u0003FODULW\\ DataStruct data[2]; data[0].deviceID = 0; data[0].size = N/2; data[0].a = a; data[0].b = b; data[1].deviceID = 1; data[1].size = N/2; data[1].a = a + N/2; data[1].b = b + N/2; 7R\u0003SURFHHG\u000f\u0003ZH\u0003SDVV\u0003RQH\u0003RI\u0003WKH\u0003 DataStruct \u0003YDULDEOHV\u0003WR\u0003D\u0003XWLOLW\\\u0003IXQFWLRQ\u0003ZH\u01e2YH\u0003 QDPHG\u0003start_thread() \u0011\u0003:H\u0003DOVR\u0003SDVV\u0003 start_thread() \u0003D\u0003SRLQWHU\u0003WR\u0003D\u0003IXQF - WLRQ\u0003WR\u0003EH\u0003FDOOHG\u0003E\\\u0003WKH\u0003QHZO\\\u0003FUHDWHG\u0003WKUHDG \u0003WKLV\u0003H[DPSOH\u01e2V\u0003WKUHDG\u0003IXQFWLRQ\u0003LV\u0003 FDOOHG\u0003routine() \u0011\u00037KH\u0003IXQFWLRQ\u0003 start_thread() \u0003ZLOO\u0003FUHDWH\u0003D\u0003QHZ\u0003WKUHDG\u0003WKDW\u0003 WKHQ\u0003FDOOV\u0003WKH\u0003VSHFL\u020cHG\u0003IXQFWLRQ\u000f\u0003SDVVLQJ\u0003WKH\u0003 DataStruct \u0003WR\u0003WKLV\u0003IXQFWLRQ\u0011\u00037KH\u0003 RWKHU\u0003FDOO\u0003WR\u0003 routine() \u0003JHWV\u0003PDGH\u0003IURP\u0003WKH\u0003GHIDXOW\u0003DSSOLFDWLRQ\u0003WKUHDG\u0003 VR\u0003ZH\u01e2YH\u0003 FUHDWHG\u0003RQO\\\u0003RQH\u0003 additional \u0003WKUHDG \u0011 CUTThread thread = start_thread( routine, &(data[0]) ); routine( &(data[1]) ); %HIRUH\u0003ZH\u0003SURFHHG\u000f\u0003ZH\u0003KDYH\u0003WKH\u0003PDLQ\u0003DSSOLFDWLRQ\u0003WKUHDG\u0003ZDLW\u0003IRU\u0003WKH\u0003RWKHU\u0003WKUHDG\u0003 WR\u0003\u020cQLVK\u0003E\\\u0003FDOOLQJ\u0003 end_thread() \u0011 end_thread( thread ); 6LQFH\u0003ERWK\u0003WKUHDGV\u0003KDYH\u0003FRPSOHWHG\u0003DW\u0003WKLV\u0003SRLQW\u0003LQ\u0003 main()\u000f\u0003LW\u01e2V\u0003VDIH\u0003WR\u0003FOHDQ\u0003XS\u0003 DQG\u0003GLVSOD\\\u0003WKH\u0003UHVXOW\u0011 Download from www.wowebook.comptgUSING MULTIPLE GP US /two.lf/two.lf/seven.lf\u0014\u0014\u0011\u0016\u000386,1*\u000308/7,3/(\u0003*386 free( a ); free( b ); printf( \"Value calculated: %f\\n\" , data[0].returnValue + data[1].returnValue ); return 0; } 1RWLFH\u0003WKDW\u0003ZH\u0003VXP\u0003WKH\u0003UHVXOWV\u0003FRPSXWHG\u0003E\\\u0003HDFK\u0003WKUHDG\u0011\u00037KLV\u0003LV\u0003WKH\u0003ODVW\u0003VWHS\u0003 LQ\u0003RXU\u0003GRW\u0003SURGXFW\u0003UHGXFWLRQ\u0011\u0003,Q\u0003DQRWKHU\u0003DOJRULWKP\u000f\u0003WKLV\u0003FRPELQDWLRQ\u0003RI\u0003PXOWLSOH\u0003 UHVXOWV\u0003PD\\\u0003LQYROYH\u0003RWKHU\u0003VWHSV\u0011\u0003,Q\u0003IDFW\u000f\u0003LQ\u0003VRPH\u0003DSSOLFDWLRQV\u000f\u0003WKH\u0003WZR\u0003*38V\u0003PD\\\u0003 EH\u0003H[HFXWLQJ\u0003FRPSOHWHO\\\u0003GLIIHUHQW\u0003FRGH\u0003RQ\u0003FRPSOHWHO\\\u0003GLIIHUHQW\u0003GDWD\u0003VHWV\u0011\u0003)RU\u0003 VLPSOLFLW\\\u01e2V\u0003VDNH\u000f\u0003WKLV\u0003LV\u0003QRW\u0003WKH\u0003FDVH\u0003LQ\u0003RXU\u0003GRW\u0003SURGXFW\u0003H[DPSOH\u0011 6LQFH\u0003WKH\u0003GRW\u0003SURGXFW\u0003URXWLQH\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003RWKHU\u0003YHUVLRQV\u0003\\RX\u01e2YH\u0003VHHQ\u000f\u0003ZH\u01e2OO\u0003 RPLW\u0003LW\u0003IURP\u0003WKLV\u0003VHFWLRQ\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003FRQWHQWV\u0003RI\u0003 routine() \u0003PD\\\u0003EH\u0003RI\u0003LQWHUHVW\u0011\u0003 :H\u0003GHFODUH\u0003 routine() \u0003DV\u0003WDNLQJ\u0003DQG\u0003UHWXUQLQJ\u0003D\u0003 void*\u0003VR\u0003WKDW\u0003\\RX\u0003FDQ\u0003UHXVH\u0003 WKH\u0003start_thread() \u0003FRGH\u0003ZLWK\u0003DUELWUDU\\\u0003LPSOHPHQWDWLRQV\u0003RI\u0003D\u0003WKUHDG\u0003IXQFWLRQ\u0011\u0003 $OWKRXJK\u0003ZH\u01e2G\u0003ORYH\u0003WR\u0003WDNH\u0003FUHGLW\u0003IRU\u0003WKLV\u0003LGHD\u000f\u0003LW\u01e2V\u0003IDLUO\\\u0003VWDQGDUG\u0003SURFHGXUH\u0003IRU\u0003 FDOOEDFN\u0003IXQFWLRQV\u0003LQ\u0003& void* routine( void *pvoidData ) { DataStruct *data = (DataStruct*)pvoidData; HANDLE_ERROR( cudaSetDevice( data->deviceID ) ); (DFK\u0003WKUHDG\u0003FDOOV\u0003 cudaSetDevice() \u000f\u0003DQG\u0003HDFK\u0003SDVVHV\u0003D\u0003GLIIHUHQW\u0003,'\u0003WR\u0003WKLV\u0003 IXQFWLRQ\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003ZH\u0003NQRZ\u0003HDFK\u0003WKUHDG\u0003ZLOO\u0003EH\u0003PDQLSXODWLQJ\u0003D\u0003GLIIHUHQW\u0003*38\u0011\u0003 7KHVH\u0003*38V\u0003PD\\\u0003KDYH\u0003LGHQWLFDO\u0003SHUIRUPDQFH\u000f\u0003DV\u0003ZLWK\u0003WKH\u0003GXDO\u0010*38\u0003*H)RUFH\u0003 *7;\u0003\u0015 \u0018\u000f\u0003RU\u0003WKH\\\u0003PD\\\u0003EH\u0003GLIIHUHQW\u0003*38V\u0003DV\u0003ZRXOG\u0003EH\u0003WKH\u0003FDVH\u0003LQ\u0003D\u0003V\\VWHP\u0003WKDW\u0003 KDV\u0003ERWK\u0003DQ\u0003LQWHJUDWHG\u0003*38\u0003DQG\u0003D\u0003GLVFUHWH\u0003*38\u0011\u00037KHVH\u0003GHWDLOV\u0003DUH\u0003QRW\u0003LPSRUWDQW\u0003 WR\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003WKRXJK\u0003WKH\\\u0003PLJKW\u0003EH\u0003RI\u0003LQWHUHVW\u0003WR\u0003\\RX\u0011\u00033DUWLFXODUO\\\u000f\u0003WKHVH\u0003 GHWDLOV\u0003SURYH\u0003XVHIXO\u0003LI\u0003\\RX\u0003GHSHQG\u0003RQ\u0003D\u0003FHUWDLQ\u0003PLQLPXP\u0003FRPSXWH\u0003FDSDELOLW\\\u0003WR\u0003 ODXQFK\u0003\\RXU\u0003NHUQHOV\u0003RU\u0003LI\u0003\\RX\u0003KDYH\u0003D\u0003VHULRXV\u0003GHVLUH\u0003WR\u0003ORDG\u0003EDODQFH\u0003\\RXU\u0003DSSOLFD - WLRQ\u0003DFURVV\u0003WKH\u0003V\\VWHP\u01e2V\u0003*38V\u0011\u0003,I\u0003WKH\u0003*38V\u0003DUH\u0003GLIIHUHQW\u000f\u0003\\RX\u0003ZLOO\u0003QHHG\u0003WR\u0003GR\u0003VRPH\u0003 Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/two.lf/eight.lfZRUN\u0003WR\u0003SDUWLWLRQ\u0003WKH\u0003FRPSXWDWLRQV\u0003VR\u0003WKDW\u0003HDFK\u0003*38\u0003LV\u0003RFFXSLHG\u0003IRU\u0003URXJKO\\\u0003 WKH\u0003VDPH\u0003DPRXQW\u0003RI\u0003WLPH\u0011\u0003)RU\u0003RXU\u0003SXUSRVHV\u0003LQ\u0003WKLV\u0003H[DPSOH\u000f\u0003KRZHYHU\u000f\u0003WKHVH\u0003DUH\u0003 SLGGOLQJ\u0003GHWDLOV\u0003ZLWK\u0003ZKLFK\u0003ZH\u0003ZRQ\u01e2W\u0003ZRUU\\\u0011 2XWVLGH\u0003WKH\u0003FDOO\u0003WR\u0003 cudaSetDevice() \u0003WR\u0003VSHFLI\\\u0003ZKLFK\u0003&8'$\u0003GHYLFH\u0003ZH\u0003 LQWHQG\u0003WR\u0003XVH\u000f\u0003WKLV\u0003LPSOHPHQWDWLRQ\u0003RI\u0003 routine() \u0003LV\u0003UHPDUNDEO\\\u0003VLPLODU\u0003WR\u0003WKH\u0003 YDQLOOD\u0003malloc_test() \u0003IURP\u00036HFWLRQ\u0003\u0014\u0014\u0011\u0014\u0011\u0014 \u0003=HUR\u0010&RS\\\u0003'RW\u00033URGXFW\u0011\u0003:H\u0003DOOR - FDWH\u0003EXIIHUV\u0003IRU\u0003RXU\u0003*38\u0003FRSLHV\u0003RI\u0003WKH\u0003LQSXW\u0003DQG\u0003D\u0003EXIIHU\u0003IRU\u0003RXU\u0003SDUWLDO\u0003UHVXOWV\u0003 IROORZHG\u0003E\\\u0003D\u0003 cudaMemcpy() \u0003RI\u0003HDFK\u0003LQSXW\u0003DUUD\\\u0003WR\u0003WKH\u0003*38\u0011 int size = data->size; float *a, *b, c, *partial_c; float *dev_a, *dev_b, *dev_partial_c; // allocate memory on the CPU side a = data->a; b = data->b; partial_c = (float*)malloc( blocksPerGrid* sizeof(float) ); // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, size* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, size* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_partial_c, blocksPerGrid* sizeof(float) ) ); // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, size* sizeof(float), cudaMemcpyHostToDevice",
    "sizeof(float) ); // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, size* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, size* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_partial_c, blocksPerGrid* sizeof(float) ) ); // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, size* sizeof(float), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, size* sizeof(float), cudaMemcpyHostToDevice ) ); :H\u0003WKHQ\u0003ODXQFK\u0003RXU\u0003GRW\u0003SURGXFW\u0003NHUQHO\u000f\u0003FRS\\\u0003WKH\u0003UHVXOWV\u0003EDFN\u000f\u0003DQG\u0003\u020cQLVK\u0003WKH\u0003 FRPSXWDWLRQ\u0003RQ\u0003WKH\u0003&38\u0011 Download from www.wowebook.comptgUSING MULTIPLE GP US /two.lf/two.lf/nine.lf\u0014\u0014\u0011\u0016\u000386,1*\u000308/7,3/(\u0003*386 dot<<<blocksPerGrid,threadsPerBlock>>>( size, dev_a, dev_b, dev_partial_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid* sizeof(float), cudaMemcpyDeviceToHost ) ); // finish up on the CPU side c = 0; for (int i=0; i<blocksPerGrid; i++) { c += partial_c[i]; } $V\u0003XVXDO\u000f\u0003ZH\u0003FOHDQ\u0003XS\u0003RXU\u0003*38\u0003EXIIHUV\u0003DQG\u0003UHWXUQ\u0003WKH\u0003GRW\u0003SURGXFW\u0003ZH\u01e2YH\u0003 FRPSXWHG\u0003LQ\u0003WKH\u0003 returnValue \u0003\u020cHOG\u0003RI\u0003RXU\u0003 DataStruct \u0011 HANDLE_ERROR( cudaFree( dev_a ) ); HANDLE_ERROR( cudaFree( dev_b ) ); HANDLE_ERROR( cudaFree( dev_partial_c ) ); // free memory on the CPU side free( partial_c ); data->returnValue = c; return 0; } 6R\u0003ZKHQ\u0003ZH\u0003JHW\u0003GRZQ\u0003WR\u0003LW\u000f\u0003RXWVLGH\u0003RI\u0003WKH\u0003KRVW\u0003WKUHDG\u0003PDQDJHPHQW\u0003LVVXH\u000f\u0003XVLQJ\u0003 PXOWLSOH\u0003*38V\u0003LV\u0003QRW\u0003WRR\u0003PXFK\u0003WRXJKHU\u0003WKDQ\u0003XVLQJ\u0003D\u0003VLQJOH\u0003*38\u0011\u00038VLQJ\u0003RXU\u0003KHOSHU\u0003 FRGH\u0003WR\u0003FUHDWH\u0003D\u0003WKUHDG\u0003DQG\u0003H[HFXWH\u0003D\u0003IXQFWLRQ\u0003RQ\u0003WKDW\u0003WKUHDG\u000f\u0003WKLV\u0003EHFRPHV\u0003 VLJQL\u020cFDQWO\\\u0003PRUH\u0003PDQDJHDEOH\u0011\u0003,I\u0003\\RX\u0003KDYH\u0003\\RXU\u0003RZQ\u0003WKUHDG\u0003OLEUDULHV\u000f\u0003\\RX\u0003VKRXOG\u0003 IHHO\u0003IUHH\u0003WR\u0003XVH\u0003WKHP\u0003LQ\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u0003<RX\u0003MXVW\u0003QHHG\u0003WR\u0003UHPHPEHU\u0003WKDW\u0003 HDFK\u0003*38\u0003JHWV\u0003LWV\u0003RZQ\u0003WKUHDG\u000f\u0003DQG\u0003HYHU\\WKLQJ\u0003HOVH\u0003LV\u0003FUHDP\u0003FKHHVH\u0011 Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/three.lf/zero.lf3RUWDEOH\u00033LQQHG\u00030HPRU\\\u0014\u0014\u0011\u0017\u0003 7KH\u0003ODVW\u0003LPSRUWDQW\u0003SLHFH\u0003WR\u0003XVLQJ\u0003PXOWLSOH\u0003*38V\u0003LQYROYHV\u0003WKH\u0003XVH\u0003RI\u0003SLQQHG\u0003 PHPRU\\\u0011\u0003:H\u0003OHDUQHG\u0003LQ\u0003&KDSWHU\u0003\u0014\u0013\u0003WKDW\u0003SLQQHG\u0003PHPRU\\\u0003LV\u0003DFWXDOO\\\u0003KRVW\u0003PHPRU\\\u0003 WKDW\u0003KDV\u0003LWV\u0003SDJHV\u0003ORFNHG\u0003LQ\u0003SK\\VLFDO\u0003PHPRU\\\u0003WR\u0003SUHYHQW\u0003LW\u0003IURP\u0003EHLQJ\u0003SDJHG\u0003RXW\u0003 RU\u0003UHORFDWHG\u0011\u0003+RZHYHU\u000f\u0003LW\u0003WXUQV\u0003RXW\u0003WKDW\u0003SDJHV\u0003FDQ\u0003DSSHDU\u0003SLQQHG\u0003WR\u0003D\u0003VLQJOH\u0003&38\u0003 WKUHDG\u0003RQO\\\u0011\u00037KDW\u0003LV\u000f\u0003WKH\\\u0003ZLOO\u0003UHPDLQ\u0003SDJH\u0010ORFNHG\u0003LI\u0003 any\u0003WKUHDG\u0003KDV\u0003DOORFDWHG\u0003WKHP\u0003 DV\u0003SLQQHG\u0003PHPRU\\\u000f\u0003EXW\u0003WKH\\\u0003ZLOO\u0003RQO\\\u0003 appear \u0003SDJH\u0010ORFNHG\u0003WR\u0003WKH\u0003WKUHDG\u0003WKDW\u0003DOOR - FDWHG\u0003WKHP\u0011\u0003,I\u0003WKH\u0003SRLQWHU\u0003WR\u0003WKLV\u0003PHPRU\\\u0003LV\u0003VKDUHG\u0003EHWZHHQ\u0003WKUHDGV\u000f\u0003WKH\u0003RWKHU\u0003 WKUHDGV\u0003ZLOO\u0003VHH\u0003WKH\u0003EXIIHU\u0003DV\u0003VWDQGDUG\u000f\u0003SDJHDEOH\u0003GDWD\u0011\u0003 $V\u0003D\u0003VLGH\u0003HIIHFW\u0003RI\u0003WKLV\u0003EHKDYLRU\u000f\u0003ZKHQ\u0003D\u0003WKUHDG\u0003WKDW\u0003GLG\u0003QRW\u0003DOORFDWH\u0003D\u0003SLQQHG\u0003 EXIIHU\u0003DWWHPSWV\u0003WR\u0003SHUIRUP\u0003D\u0003 cudaMemcpy() \u0003XVLQJ\u0003LW\u000f\u0003WKH\u0003FRS\\\u0003ZLOO\u0003EH\u0003SHUIRUPHG\u0003 DW\u0003VWDQGDUG\u0003SDJHDEOH\u0003PHPRU\\\u0003VSHHGV\u0011\u0003$V\u0003ZH\u0003VDZ\u0003LQ\u0003&KDSWHU\u0003\u0014\u0013\u000f\u0003WKLV\u0003VSHHG\u0003FDQ\u0003 EH\u0003URXJKO\\\u0003\u0018\u0013\u0003SHUFHQW\u0003RI\u0003WKH\u0003PD[LPXP\u0003DWWDLQDEOH\u0003WUDQVIHU\u0003VSHHG\u0011\u0003:KDW\u01e2V\u0003ZRUVH\u000f\u0003 LI\u0003WKH\u0003WKUHDG\u0003DWWHPSWV\u0003WR\u0003HQTXHXH\u0003D\u0003 cudaMemcpyAsync() \u0003FDOO\u0003LQWR\u0003D\u0003&8'$\u0003 VWUHDP\u000f\u0003WKLV\u0003RSHUDWLRQ\u0003ZLOO\u0003IDLO\u0003EHFDXVH\u0003LW\u0003UHTXLUHV\u0003D\u0003SLQQHG\u0003EXIIHU\u0003WR\u0003SURFHHG\u0011\u0003 6LQFH\u0003WKH\u0003EXIIHU\u0003DSSHDUV\u0003SDJHDEOH\u0003IURP\u0003WKH\u0003WKUHDG\u0003WKDW\u0003GLGQ\u01e2W\u0003DOORFDWH\u0003LW\u000f\u0003WKH\u0003FDOO\u0003 GLHV\u0003D\u0003JULVO\\\u0003GHDWK\u0011\u0003(YHQ\u0003LQ\u0003WKH\u0003IXWXUH\u0003QRWKLQJ\u0003ZRUNV\u0004 %XW\u0003WKHUH\u0003LV\u0003D\u0003UHPHG\\\u0003WR\u0003WKLV\u0003SUREOHP\u0011\u0003:H\u0003FDQ\u0003DOORFDWH\u0003SLQQHG\u0003PHPRU\\\u0003DV\u0003 portable \u000f\u0003PHDQLQJ\u0003WKDW\u0003ZH\u0003ZLOO\u0003EH\u0003DOORZHG\u0003WR\u0003PLJUDWH\u0003LW\u0003EHWZHHQ\u0003KRVW\u0003WKUHDGV\u0003 DQG\u0003DOORZ\u0003DQ\\\u0003WKUHDG\u0003WR\u0003YLHZ\u0003LW\u0003DV\u0003D\u0003SLQQHG\u0003EXIIHU\u0011\u00037R\u0003GR\u0003VR\u000f\u0003ZH\u0003XVH\u0003RXU\u0003WUXVW\\\u0003 cudaHostAlloc() \u0003WR\u0003DOORFDWH\u0003WKH\u0003PHPRU\\\u000f\u0003EXW\u0003ZH\u0003FDOO\u0003LW\u0003ZLWK\u0003D\u0003QHZ\u0003\u020dDJ \u0003 cudaHostAllocPortable \u0011\u00037KLV\u0003\u020dDJ\u0003FDQ\u0003EH\u0003XVHG\u0003LQ\u0003FRQFHUW\u0003ZLWK\u0003WKH\u0003 RWKHU\u0003\u020dDJV\u0003\\RX\u01e2YH\u0003VHHQ\u000f\u0003VXFK\u0003DV\u0003 cudaHostAllocWriteCombined \u0003DQG\u0003 cudaHostAllocMapped \u0011\u00037KLV\u0003PHDQV\u0003WKDW\u0003\\RX\u0003FDQ\u0003DOORFDWH\u0003\\RXU\u0003KRVW\u0003EXIIHUV\u0003DV\u0003 DQ\\\u0003FRPELQDWLRQ\u0003RI\u0003SRUWDEOH\u000f\u0003]HUR\u0010FRS\\\u0003DQG\u0003ZULWH\u0010FRPELQHG\u0011 7R\u0003GHPRQVWUDWH\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003ZH\u01e2OO\u0003HQKDQFH\u0003RXU\u0003PXOWL\u0010*38\u0003GRW\u0003 SURGXFW\u0003DSSOLFDWLRQ\u0011\u0003:H\u01e2OO\u0003DGDSW\u0003RXU\u0003RULJLQDO\u0003]HUR\u0010FRS\\\u0003YHUVLRQ\u0003RI\u0003WKH\u0003GRW\u0003 SURGXFW\u000f\u0003VR\u0003WKLV\u0003YHUVLRQ\u0003EHJLQV\u0003DV\u0003VRPHWKLQJ\u0003RI\u0003D\u0003PDVK\u0010XS\u0003RI\u0003WKH\u0003]HUR\u0010FRS\\\u0003DQG\u0003 PXOWL\u0010*38\u0003YHUVLRQV\u0011\u0003$V\u0003ZH\u0003KDYH\u0003WKURXJKRXW\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003QHHG\u0003WR\u0003YHULI\\\u0003WKDW\u0003 WKHUH\u0003DUH\u0003DW\u0003OHDVW\u0003WZR\u0003&8'$\u0010FDSDEOH\u0003*38V\u0003DQG\u0003WKDW\u0003ERWK\u0003FDQ\u0003KDQGOH\u0003]HUR\u0010FRS\\\u0003 EXIIHUV\u0011 Download from www.wowebook.comptg333555$$$(((333'''000<<< /two.lf/three.lf/one.lf\u0014\u0014\u0011\u0017\u0003222777%%% ///\u0003\u0003\u0003,,, 1 1 1 1 1 1 ( ( (\u0003\u0003\u0003((( 000 222 555int main( void ) { int deviceCount; HANDLE_ERROR( cudaGetDeviceCount( &deviceCount ) ); if (deviceCount < 2) { printf( \"We need at least two compute 1.0 or greater \" \"devices, but only found %d\\n\" , deviceCount ); return 0; } cudaDeviceProp prop; for (int i=0; i<2; i++) { HANDLE_ERROR( cudaGetDeviceProperties( &prop, i ) ); if (prop.canMapHostMemory != 1) { printf( \" Device %d cannot map memory.\\n\" , i ); return 0; } } ,Q\u0003SUHYLRXV\u0003H[DPSOHV\u000f\u0003ZH\u01e2G\u0003EH\u0003UHDG\\\u0003WR\u0003VWDUW\u0003DOORFDWLQJ\u0003PHPRU\\\u0003RQ\u0003WKH\u0003KRVW\u0003WR\u0003 KROG\u0003RXU\u0003LQSXW\u0003YHFWRUV\u0011\u00037R\u0003DOORFDWH\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003KRZHYHU\u000f\u0003LW\u01e2V\u0003QHFHV - VDU\\\u0003WR\u0003\u020cUVW\u0003VHW\u0003WKH\u0003&8'$\u0003GHYLFH\u0003RQ\u0003ZKLFK\u0003ZH\u0003LQWHQG\u0003WR\u0003UXQ\u0011\u00036LQFH\u0003ZH\u0003LQWHQG\u0003WR\u0003 XVH\u0003WKH\u0003GHYLFH\u0003IRU\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003DV\u0003ZHOO\u000f\u0003ZH\u0003IROORZ\u0003WKH\u0003 cudaSetDevice() FDOO\u0003ZLWK\u0003D\u0003FDOO\u0003WR\u0003 cudaSetDeviceFlags() \u000f\u0003DV\u0003ZH\u0003GLG\u0003LQ\u00036HFWLRQ\u0003\u0014\u0014\u0011\u0014\u0011\u0014 \u0003=HUR\u0010 &RS\\\u0003'RW\u00033URGXFW\u0011 float *a, *b; HANDLE_ERROR( cudaSetDevice( 0 ) ); HANDLE_ERROR( cudaSetDeviceFlags( cudaDeviceMapHost ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&a, N* sizeof(float), cudaHostAllocWriteCombined | cudaHostAllocPortable | cudaHostAllocMapped ) ); HANDLE_ERROR( cudaHostAlloc( ( void**)&b, N* sizeof(float), cudaHostAllocWriteCombined | cudaHostAllocPortable | cudaHostAllocMapped ) ); Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/three.lf/two.lf(DUOLHU\u0003LQ\u0003WKLV\u0003FKDSWHU\u000f\u0003ZH\u0003FDOOHG\u0003 cudaSetDevice() \u0003EXW\u0003QRW\u0003XQWLO\u0003ZH\u0003KDG\u0003DOUHDG\\\u0003 DOORFDWHG\u0003RXU\u0003PHPRU\\\u0003DQG\u0003FUHDWHG\u0003RXU\u0003WKUHDGV\u0011\u00032QH\u0003RI\u0003WKH\u0003UHTXLUHPHQWV\u0003RI\u0003DOOR - FDWLQJ\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u0003ZLWK\u0003 cudaHostAlloc() \u000f\u0003WKRXJK\u000f\u0003LV\u0003WKDW\u0003ZH\u0003KDYH\u0003 LQLWLDOL]HG\u0003WKH\u0003GHYLFH\u0003\u020cUVW\u0003E\\\u0003FDOOLQJ\u0003 cudaSetDevice() \u0011\u0003<RX\u0003ZLOO\u0003DOVR\u0003QRWLFH\u0003WKDW\u0003 ZH\u0003SDVV\u0003RXU\u0003QHZO\\\u0003OHDUQHG\u0003\u020dDJ\u000f\u0003 cudaHostAllocPortable \u000f\u0003WR\u0003ERWK\u0003DOORFDWLRQV\u0011\u0003 6LQFH\u0003WKHVH\u0003ZHUH\u0003DOORFDWHG\u0003DIWHU\u0003FDOOLQJ\u0003 cudaSetDevice(0) \u000f\u0003RQO\\\u0003&8'$\u0003GHYLFH\u0003 ]HUR\u0003ZRXOG\u0003VHH\u0003WKHVH\u0003EXIIHUV\u0003DV\u0003SLQQHG\u0003PHPRU\\\u0003LI\u0003ZH\u0003KDG\u0003QRW\u0003VSHFL\u020cHG\u0003WKDW\u0003WKH\\\u0003 ZHUH\u0003WR\u0003EH\u0003SRUWDEOH\u0003DOORFDWLRQV\u0011 :H\u0003FRQWLQXH\u0003WKH\u0003DSSOLFDWLRQ\u0003DV\u0003ZH\u0003KDYH\u0003LQ\u0003WKH\u0003SDVW\u000f\u0003JHQHUDWLQJ\u0003GDWD\u0003IRU\u0003RXU\u0003LQSXW\u0003 YHFWRUV\u0003DQG\u0003SUHSDULQJ\u0003RXU\u0003 DataStruct \u0003VWUXFWXUHV\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003PXOWL\u0010*38\u0003 H[DPSOH\u0003LQ\u00036HFWLRQ\u0003\u0014\u0014\u0011\u0015 \u0003=HUR\u0010&RS\\\u00033HUIRUPDQFH\u0011 // fill in the host memory with data for (int i=0; i<N; i++) { a[i] = i; b[i] = i*2; } // prepare for multithread DataStruct data[2]; data[0].deviceID = 0; data[0].offset = 0; data[0].size = N/2; data[0].a = a; data[0].b = b; data[1].deviceID = 1; data[1].offset = N/2; data[1].size = N/2; data[1].a = a; data[1].b = b; :H\u0003FDQ\u0003WKHQ\u0003FUHDWH\u0003RXU\u0003VHFRQGDU\\\u0003WKUHDG\u0003DQG\u0003FDOO\u0003 routine() \u0003WR\u0003EHJLQ\u0003 FRPSXWLQJ\u0003RQ\u0003HDFK\u0003GHYLFH\u0011 Download from www.wowebook.comptg333555$$$(((333'''000<<< /two.lf/three.lf/three.lf\u0014\u0014\u0011\u0017\u0003222777%%% ///\u0003\u0003\u0003,,, 1 1 1 1 1 1 ( ( (\u0003\u0003\u0003((( 000 222 555 CUTThread thread = start_thread( routine, &(data[1]) ); routine( &(data[0]) ); end_thread( thread ); %HFDXVH\u0003RXU\u0003KRVW\u0003PHPRU\\\u0003ZDV\u0003DOORFDWHG\u0003E\\\u0003WKH\u0003&8'$\u0003UXQWLPH\u000f\u0003ZH\u0003XVH\u0003 cudaFreeHost() \u0003WR\u0003IUHH\u0003LW\u0011\u00032WKHU\u0003WKDQ\u0003QR\u0003ORQJHU\u0003FDOOLQJ\u0003 free()\u000f\u0003ZH\u0003KDYH\u0003VHHQ\u0003 DOO\u0003WKHUH\u0003LV\u0003WR\u0003VHH\u0003LQ\u0003 main()\u0011 // free memory on the CPU side HANDLE_ERROR( cudaFreeHost( a ) ); HANDLE_ERROR( cudaFreeHost( b ) ); printf( \"Value calculated:",
    "1 1 1 1 1 ( ( (\u0003\u0003\u0003((( 000 222 555 CUTThread thread = start_thread( routine, &(data[1]) ); routine( &(data[0]) ); end_thread( thread ); %HFDXVH\u0003RXU\u0003KRVW\u0003PHPRU\\\u0003ZDV\u0003DOORFDWHG\u0003E\\\u0003WKH\u0003&8'$\u0003UXQWLPH\u000f\u0003ZH\u0003XVH\u0003 cudaFreeHost() \u0003WR\u0003IUHH\u0003LW\u0011\u00032WKHU\u0003WKDQ\u0003QR\u0003ORQJHU\u0003FDOOLQJ\u0003 free()\u000f\u0003ZH\u0003KDYH\u0003VHHQ\u0003 DOO\u0003WKHUH\u0003LV\u0003WR\u0003VHH\u0003LQ\u0003 main()\u0011 // free memory on the CPU side HANDLE_ERROR( cudaFreeHost( a ) ); HANDLE_ERROR( cudaFreeHost( b ) ); printf( \"Value calculated: %f\\n\" , data[0].returnValue + data[1].returnValue ); return 0; } 7R\u0003VXSSRUW\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u0003DQG\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003LQ\u0003RXU\u0003PXOWL\u0010*38\u0003 DSSOLFDWLRQ\u000f\u0003ZH\u0003QHHG\u0003WR\u0003PDNH\u0003WZR\u0003QRWDEOH\u0003FKDQJHV\u0003LQ\u0003WKH\u0003FRGH\u0003IRU\u0003 routine() \u0011\u0003 7KH\u0003\u020cUVW\u0003LV\u0003D\u0003ELW\u0003VXEWOH\u000f\u0003DQG\u0003LQ\u0003 \u0003QR\u0003ZD\\\u0003VKRXOG\u0003WKLV\u0003KDYH\u0003EHHQ\u0003REYLRXV\u0011 void* routine( void *pvoidData ) { DataStruct *data = (DataStruct*)pvoidData; if (data->deviceID != 0) { HANDLE_ERROR( cudaSetDevice( data->deviceID ) ); HANDLE_ERROR( cudaSetDeviceFlags( cudaDeviceMapHost ) ); } <RX\u0003PD\\\u0003UHFDOO\u0003LQ\u0003RXU\u0003PXOWL\u0010*38\u0003YHUVLRQ\u0003RI\u0003WKLV\u0003FRGH\u000f\u0003ZH\u0003QHHG\u0003D\u0003FDOO\u0003WR\u0003 cudaSetDevice() \u0003LQ\u0003routine() \u0003LQ\u0003RUGHU\u0003WR\u0003HQVXUH\u0003WKDW\u0003HDFK\u0003SDUWLFLSDWLQJ\u0003 WKUHDG\u0003FRQWUROV\u0003D\u0003GLIIHUHQW\u0003*38\u0011\u00032Q\u0003WKH\u0003RWKHU\u0003KDQG\u000f\u0003LQ\u0003WKLV\u0003H[DPSOH\u0003ZH\u0003KDYH\u0003 DOUHDG\\\u0003PDGH\u0003D\u0003FDOO\u0003WR\u0003 cudaSetDevice() \u0003IURP\u0003WKH\u0003PDLQ\u0003WKUHDG\u0011\u0003:H\u0003GLG\u0003VR\u0003LQ\u0003 RUGHU\u0003WR\u0003DOORFDWH\u0003SLQQHG\u0003PHPRU\\\u0003LQ\u0003 main()\u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003ZH\u0003RQO\\\u0003ZDQW\u0003WR\u0003FDOO\u0003 Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/three.lf/four.lfcudaSetDevice() \u0003DQG\u0003cudaSetDeviceFlags() \u0003RQ\u0003GHYLFHV\u0003ZKHUH\u0003ZH\u0003KDYH\u0003 QRW\u0003PDGH\u0003WKLV\u0003FDOO\u0011\u00037KDW\u0003LV\u000f\u0003ZH\u0003FDOO\u0003WKHVH\u0003WZR\u0003IXQFWLRQV\u0003LI\u0003WKH\u0003 deviceID \u0003LV\u0003QRW\u0003 ]HUR\u0011\u0003$OWKRXJK\u0003LW\u0003ZRXOG\u0003\\LHOG\u0003FOHDQHU\u0003FRGH\u0003WR\u0003VLPSO\\\u0003UHSHDW\u0003WKHVH\u0003FDOOV\u0003RQ\u0003GHYLFH\u0003 ]HUR\u000f\u0003LW\u0003WXUQV\u0003RXW\u0003WKDW\u0003WKLV\u0003LV\u0003LQ\u0003IDFW\u0003DQ\u0003HUURU\u0011\u00032QFH\u0003\\RX\u0003KDYH\u0003VHW\u0003WKH\u0003GHYLFH\u0003RQ\u0003D\u0003 SDUWLFXODU\u0003WKUHDG\u000f\u0003\\RX\u0003FDQQRW\u0003FDOO\u0003 cudaSetDevice() \u0003DJDLQ\u000f\u0003HYHQ\u0003LI\u0003\\RX\u0003SDVV\u0003WKH\u0003 VDPH\u0003GHYLFH\u0003LGHQWL\u020cHU\u0011\u00037KH\u0003KLJKOLJKWHG\u0003 if()\u0003VWDWHPHQW\u0003KHOSV\u0003XV\u0003DYRLG\u0003WKLV\u0003OLWWOH\u0003 QDVW\\\u0010JUDP\u0003IURP\u0003WKH\u0003&8'$\u0003UXQWLPH\u000f\u0003VR\u0003ZH\u0003PRYH\u0003RQ\u0003WR\u0003WKH\u0003QH[W\u0003LPSRUWDQW\u0003FKDQJH\u0003 WR\u0003routine() \u0011 ,Q\u0003DGGLWLRQ\u0003WR\u0003XVLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u0003IRU\u0003WKH\u0003KRVW\u0010VLGH\u0003PHPRU\\\u000f\u0003ZH\u0003 DUH\u0003XVLQJ\u0003]HUR\u0010FRS\\\u0003LQ\u0003RUGHU\u0003WR\u0003DFFHVV\u0003WKHVH\u0003EXIIHUV\u0003GLUHFWO\\\u0003IURP\u0003WKH\u0003*38\u0011\u0003 &RQVHTXHQWO\\\u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003XVH\u0003 cudaMemcpy() \u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003RULJLQDO\u0003 PXOWL\u0010*38\u0003DSSOLFDWLRQ\u000f\u0003EXW\u0003ZH\u0003XVH\u0003 cudaHostGetDevicePointer() \u0003WR\u0003JHW\u0003 YDOLG\u0003GHYLFH\u0003SRLQWHUV\u0003IRU\u0003WKH\u0003KRVW\u0003PHPRU\\\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003WKH\u0003]HUR\u0010FRS\\\u0003H[DPSOH\u0011\u0003 +RZHYHU\u000f\u0003\\RX\u0003ZLOO\u0003QRWLFH\u0003WKDW\u0003ZH\u0003XVH\u0003VWDQGDUG\u0003*38\u0003PHPRU\\\u0003IRU\u0003WKH\u0003SDUWLDO\u0003UHVXOWV\u0011\u0003 $V\u0003DOZD\\V\u000f\u0003WKLV\u0003PHPRU\\\u0003JHWV\u0003DOORFDWHG\u0003XVLQJ\u0003 cudaMalloc() \u0011 int size = data->size; float *a, *b, c, *partial_c; float *dev_a, *dev_b, *dev_partial_c; // allocate memory on the CPU side a = data->a; b = data->b; partial_c = ( float*)malloc( blocksPerGrid* sizeof(float) ); HANDLE_ERROR( cudaHostGetDevicePointer( &dev_a, a, 0 ) ); HANDLE_ERROR( cudaHostGetDevicePointer( &dev_b, b, 0 ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_partial_c, blocksPerGrid* sizeof(float) ) ); // offset 'a' and 'b' to where this GPU is gets it data dev_a += data->offset; dev_b += data->offset; Download from www.wowebook.comptg+++ $$$777 (((\u0003\u0003\u0003((( 999 , , , ((( /two.lf/three.lf/five.lf\u0014\u0014\u0011\u0018\u0003&&&333555555:::$W\u0003WKLV\u0003SRLQW\u000f\u0003ZH\u01e2UH\u0003SUHWW\\\u0003PXFK\u0003UHDG\\\u0003WR\u0003JR\u000f\u0003VR\u0003ZH\u0003ODXQFK\u0003RXU\u0003NHUQHO\u0003DQG\u0003FRS\\\u0003RXU\u0003 UHVXOWV\u0003EDFN\u0003IURP\u0003WKH\u0003*38\u0011 dot<<<blocksPerGrid,threadsPerBlock>>>( size, dev_a, dev_b, dev_partial_c ); // copy the array 'c' back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( partial_c, dev_partial_c, blocksPerGrid* sizeof(float), cudaMemcpyDeviceToHost ) ); :H\u0003FRQFOXGH\u0003DV\u0003ZH\u0003DOZD\\V\u0003KDYH\u0003LQ\u0003RXU\u0003GRW\u0003SURGXFW\u0003H[DPSOH\u0003E\\\u0003VXPPLQJ\u0003 RXU\u0003SDUWLDO\u0003UHVXOWV\u0003RQ\u0003WKH\u0003&38\u000f\u0003IUHHLQJ\u0003RXU\u0003WHPSRUDU\\\u0003VWRUDJH\u000f\u0003DQG\u0003UHWXUQLQJ\u0003 WR\u0003main()\u0011 // finish up on the CPU side c = 0; for (int i=0; i<blocksPerGrid; i++) { c += partial_c[i]; } HANDLE_ERROR( cudaFree( dev_partial_c ) ); // free memory on the CPU side free( partial_c ); data->returnValue = c; return 0; } &KDSWHU\u00035HYLHZ\u0014\u0014\u0011\u0018\u0003 :H\u0003KDYH\u0003VHHQ\u0003VRPH\u0003QHZ\u0003W\\SHV\u0003RI\u0003KRVW\u0003PHPRU\\\u0003DOORFDWLRQV\u000f\u0003DOO\u0003RI\u0003ZKLFK\u0003JHW\u0003 DOORFDWHG\u0003ZLWK\u0003D\u0003VLQJOH\u0003FDOO\u000f\u0003 cudaHostAlloc() \u0011\u00038VLQJ\u0003D\u0003FRPELQDWLRQ\u0003RI\u0003WKLV\u0003 RQH\u0003HQWU\\\u0003SRLQW\u0003DQG\u0003D\u0003VHW\u0003RI\u0003DUJXPHQW\u0003\u020dDJV\u000f\u0003ZH\u0003FDQ\u0003DOORFDWH\u0003PHPRU\\\u0003DV\u0003DQ\\\u0003 FRPELQDWLRQ\u0003RI\u0003]HUR\u0010FRS\\\u000f\u0003SRUWDEOH\u000f\u0003DQG\u0012RU\u0003ZULWH\u0010FRPELQHG\u0011\u0003:H\u0003XVHG\u0003 zero-copy Download from www.wowebook.comptgCUDA C ON MULTIPLE GPUS /two.lf/three.lf/six.lfEXIIHUV\u0003WR\u0003DYRLG\u0003PDNLQJ\u0003H[SOLFLW\u0003FRSLHV\u0003RI\u0003GDWD\u0003WR\u0003DQG\u0003IURP\u0003WKH\u0003*38\u000f\u0003D\u0003PDQHXYHU\u0003 WKDW\u0003SRWHQWLDOO\\\u0003VSHHGV\u0003XS\u0003D\u0003ZLGH\u0003FODVV\u0003RI\u0003DSSOLFDWLRQV\u0011\u00038VLQJ\u0003D\u0003VXSSRUW\u0003OLEUDU\\\u0003IRU\u0003 WKUHDGLQJ\u000f\u0003ZH\u0003PDQLSXODWHG\u0003PXOWLSOH\u0003*38V\u0003IURP\u0003WKH\u0003VDPH\u0003DSSOLFDWLRQ\u000f\u0003DOORZLQJ\u0003 RXU\u0003GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003WR\u0003EH\u0003SHUIRUPHG\u0003DFURVV\u0003PXOWLSOH\u0003GHYLFHV\u0011\u0003)LQDOO\\\u000f\u0003 ZH\u0003VDZ\u0003KRZ\u0003PXOWLSOH\u0003*38V\u0003FRXOG\u0003VKDUH\u0003SLQQHG\u0003PHPRU\\\u0003DOORFDWLRQV\u0003E\\\u0003DOOR - FDWLQJ\u0003WKHP\u0003DV\u0003 portable \u0003SLQQHG\u0003PHPRU\\\u0011\u00032XU\u0003ODVW\u0003H[DPSOH\u0003XVHG\u0003SRUWDEOH\u0003SLQQHG\u0003 PHPRU\\\u000f\u0003PXOWLSOH\u0003*38V\u000f\u0003DQG\u0003]HUR\u0010FRS\\\u0003EXIIHUV\u0003LQ\u0003RUGHU\u0003WR\u0003GHPRQVWUDWH\u0003D\u0003WXUER - FKDUJHG\u0003YHUVLRQ\u0003RI\u0003WKH\u0003GRW\u0003SURGXFW\u0003ZH\u0003VWDUWHG\u0003WR\\LQJ\u0003ZLWK\u0003EDFN\u0003LQ\u0003&KDSWHU\u0003\u0018\u0011\u0003$V\u0003 PXOWLSOH\u0010GHYLFH\u0003V\\VWHPV\u0003JDLQ\u0003SRSXODULW\\\u000f\u0003WKHVH\u0003WHFKQLTXHV\u0003VKRXOG\u0003VHUYH\u0003\\RX\u0003ZHOO\u0003 LQ\u0003KDUQHVVLQJ\u0003WKH\u0003FRPSXWDWLRQDO\u0003SRZHU\u0003RI\u0003\\RXU\u0003WDUJHW\u0003SODWIRUP\u0003LQ\u0003LWV\u0003HQWLUHW\\\u0011 Download from www.wowebook.comptg /two.lf/three.lf/seven.lfChapter 12 The Final Countdown &RQJUDWXODWLRQV\u0004\u0003:H\u0003KRSH\u0003\\RX\u01e2YH\u0003HQMR\\HG\u0003OHDUQLQJ\u0003DERXW\u0003&8'$\u0003&\u0003DQG\u0003H[SHUL - PHQWLQJ\u0003VRPH\u0003ZLWK\u0003*38\u0003FRPSXWLQJ\u0011\u0003,W\u01e2V\u0003EHHQ\u0003D\u0003ORQJ\u0003WULS\u000f\u0003VR\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003PRPHQW\u0003 WR\u0003UHYLHZ\u0003ZKHUH\u0003ZH\u0003VWDUWHG\u0003DQG\u0003KRZ\u0003PXFK\u0003JURXQG\u0003ZH\u01e2YH\u0003FRYHUHG\u0011\u00036WDUWLQJ\u0003ZLWK\u0003 D\u0003EDFNJURXQG\u0003LQ\u0003&\u0003RU\u0003&\u000e\u000e\u0003SURJUDPPLQJ\u000f\u0003ZH\u01e2YH\u0003OHDUQHG\u0003KRZ\u0003WR\u0003XVH\u0003WKH\u0003&8'$\u0003 UXQWLPH\u01e2V\u0003DQJOH\u0003EUDFNHW\u0003V\\QWD[\u0003WR\u0003HDVLO\\\u0003ODXQFK\u0003PXOWLSOH\u0003FRSLHV\u0003RI\u0003NHUQHOV\u0003DFURVV\u0003 DQ\\\u0003QXPEHU\u0003RI\u0003PXOWLSURFHVVRUV\u0011\u0003:H\u0003H[SDQGHG\u0003WKHVH\u0003FRQFHSWV\u0003WR\u0003XVH\u0003FROOHF - WLRQV\u0003RI\u0003WKUHDGV\u0003 and\u0003EORFNV\u000f\u0003RSHUDWLQJ\u0003RQ\u0003DUELWUDULO\\\u0003ODUJH\u0003LQSXWV\u0011\u00037KHVH\u0003PRUH\u0003 FRPSOH[\u0003ODXQFKHV\u0003H[SORLWHG\u0003LQWHUWKUHDG\u0003FRPPXQLFDWLRQ\u0003XVLQJ\u0003WKH\u0003*38\u01e2V\u0003VSHFLDO\u000f\u0003 RQ\u0010FKLS\u0003VKDUHG\u0003PHPRU\\\u000f\u0003DQG\u0003WKH\\\u0003HPSOR\\HG\u0003GHGLFDWHG\u0003V\\QFKURQL]DWLRQ\u0003SULPLWLYHV\u0003 WR\u0003HQVXUH\u0003FRUUHFW\u0003RSHUDWLRQ\u0003LQ\u0003DQ\u0003HQYLURQPHQW\u0003WKDW\u0003VXSSRUWV\u0003 DQG\u0003HQFRXUDJHV \u0003 WKRXVDQGV\u0003XSRQ\u0003WKRXVDQGV\u0003RI\u0003SDUDOOHO\u0003WKUHDGV\u0011 $UPHG\u0003ZLWK\u0003EDVLF\u0003FRQFHSWV\u0003DERXW\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003XVLQJ\u0003&8'$\u0003&\u0003RQ\u0003 19,',$\u01e2V\u0003&8'$\u0003$UFKLWHFWXUH\u000f\u0003ZH\u0003H[SORUHG\u0003VRPH\u0003RI\u0003WKH\u0003PRUH\u0003DGYDQFHG\u0003FRQFHSWV\u0003 DQG\u0003$3,V\u0003WKDW\u000319,',$\u0003SURYLGHV\u0011\u00037KH\u0003*38\u01e2V\u0003GHGLFDWHG\u0003JUDSKLFV\u0003KDUGZDUH\u0003SURYHV\u0003 XVHIXO\u0003IRU\u0003*38\u0003FRPSXWLQJ\u000f\u0003VR\u0003ZH\u0003OHDUQHG\u0003KRZ\u0003WR\u0003H[SORLW\u0003WH[WXUH\u0003PHPRU\\\u0003WR\u0003DFFHO - HUDWH\u0003VRPH\u0003FRPPRQ\u0003SDWWHUQV\u0003RI\u0003PHPRU\\\u0003DFFHVV\u0011\u0003%HFDXVH\u0003PDQ\\\u0003XVHUV\u0003DGG\u0003*38\u0003 FRPSXWLQJ\u0003WR\u0003WKHLU\u0003LQWHUDFWLYH\u0003JUDSKLFV\u0003DSSOLFDWLRQV\u000f\u0003ZH\u0003H[SORUHG\u0003WKH\u0003LQWHURSHUD - WLRQ\u0003RI\u0003&8'$\u0003&\u0003NHUQHOV\u0003ZLWK\u0003LQGXVWU\\\u0010VWDQGDUG\u0003JUDSKLFV\u0003$3,V\u0003VXFK\u0003DV\u00032SHQ*/\u0003 DQG\u0003'LUHFW;\u0011\u0003$WRPLF\u0003RSHUDWLRQV\u0003RQ\u0003ERWK\u0003JOREDO\u0003DQG\u0003VKDUHG\u0003PHPRU\\\u0003DOORZHG\u0003VDIH\u000f\u0003 Download from www.wowebook.comptg7+(\u0003),1$/\u0003&2817'2:1 /two.lf/three.lf/eight.lfPXOWLWKUHDGHG\u0003DFFHVV\u0003WR\u0003FRPPRQ\u0003PHPRU\\\u0003ORFDWLRQV\u0011\u00030RYLQJ\u0003VWHDGLO\\\u0003LQWR\u0003PRUH\u0003 DQG\u0003PRUH\u0003DGYDQFHG\u0003WRSLFV\u000f\u0003VWUHDPV\u0003HQDEOHG\u0003XV\u0003WR\u0003NHHS\u0003RXU\u0003HQWLUH\u0003V\\VWHP\u0003DV\u0003EXV\\\u0003 DV\u0003SRVVLEOH\u000f\u0003DOORZLQJ\u0003NHUQHOV\u0003WR\u0003H[HFXWH\u0003VLPXOWDQHRXVO\\\u0003ZLWK\u0003PHPRU\\\u0003FRSLHV\u0003 EHWZHHQ\u0003WKH\u0003KRVW\u0003DQG\u0003*38\u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003ORRNHG\u0003DW\u0003WKH\u0003ZD\\V\u0003LQ\u0003ZKLFK\u0003ZH\u0003FRXOG\u0003DOOR - FDWH\u0003DQG\u0003XVH\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003WR\u0003DFFHOHUDWH\u0003DSSOLFDWLRQV\u0003RQ\u0003LQWHJUDWHG\u0003*38V\u0011\u0003 0RUHRYHU\u000f\u0003ZH\u0003OHDUQHG\u0003WR\u0003LQLWLDOL]H\u0003PXOWLSOH\u0003GHYLFHV\u0003DQG\u0003DOORFDWH\u0003SRUWDEOH\u0003SLQQHG\u0003 PHPRU\\\u0003LQ\u0003RUGHU\u0003WR\u0003ZULWH\u0003&8'$\u0003&\u0003WKDW\u0003IXOO\\\u0003XWLOL]HV\u0003LQFUHDVLQJO\\\u0003FRPPRQ\u000f\u0003PXOWL\u0010 *38\u0003HQYLURQPHQWV\u0011 &KDSWHU\u00032EMHFWLYHV\u0014\u0015\u0011\u0014\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003FKDSWHU\u000f\u0003\\RX\u0003ZLOO\u0003DFFRPSOLVK\u0003WKH\u0003IROORZLQJ <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003VRPH\u0003RI\u0003WKH\u0003WRROV\u0003DYDLODEOH\u0003WR\u0003DLG\u0003\\RXU\u0003&8'$\u0003&\u0003GHYHORSPHQW\u0011\u01e9\u0003 <RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003DGGLWLRQDO\u0003ZULWWHQ\u0003DQG\u0003FRGH\u0003UHVRXUFHV\u0003WR\u0003WDNH\u0003\\RXU\u0003&8'$\u0003&\u0003\u01e9\u0003 GHYHORSPHQW\u0003WR\u0003WKH\u0003QH[W\u0003OHYHO\u0011 &8'$\u00037RROV\u0014\u0015\u0011\u0015\u0003 7KURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKLV\u0003ERRN\u000f\u0003ZH\u0003KDYH\u0003UHOLHG\u0003XSRQ\u0003VHYHUDO\u0003FRPSRQHQWV\u0003RI\u0003 WKH\u0003&8'$\u0003&\u0003VRIWZDUH\u0003V\\VWHP\u0011\u00037KH\u0003DSSOLFDWLRQV\u0003ZH\u0003ZURWH\u0003PDGH\u0003KHDY\\\u0003XVH\u0003RI\u0003WKH\u0003 &8'$\u0003&\u0003FRPSLOHU\u0003LQ\u0003RUGHU\u0003WR\u0003FRQYHUW\u0003RXU\u0003&8'$\u0003&\u0003NHUQHOV\u0003LQWR\u0003FRGH\u0003WKDW\u0003FRXOG\u0003EH\u0003 H[HFXWHG\u0003RQ\u000319,',$\u0003*38V\u0011\u0003:H\u0003DOVR\u0003XVHG\u0003WKH\u0003&8'$\u0003UXQWLPH\u0003LQ\u0003RUGHU\u0003WR\u0003SHUIRUP\u0003 PXFK\u0003RI\u0003WKH\u0003VHWXS\u0003DQG\u0003GLUW\\\u0003ZRUN\u0003EHKLQG\u0003ODXQFKLQJ\u0003NHUQHOV\u0003DQG\u0003FRPPXQLFDWLQJ\u0003 ZLWK\u0003WKH\u0003*38\u0011\u00037KH\u0003&8'$\u0003UXQWLPH\u000f\u0003LQ\u0003WXUQ\u000f\u0003XVHV\u0003WKH\u0003&8'$\u0003GULYHU\u0003WR\u0003WDON\u0003GLUHFWO\\\u0003 WR\u0003WKH\u0003KDUGZDUH\u0003LQ\u0003\\RXU\u0003V\\VWHP\u0011\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003WKHVH\u0003FRPSRQHQWV\u0003WKDW\u0003ZH\u0003KDYH\u0003 DOUHDG\\\u0003XVHG\u0003DW\u0003OHQJWK\u000f\u000319,',$\u0003PDNHV\u0003DYDLODEOH\u0003D\u0003KRVW\u0003RI\u0003RWKHU\u0003VRIWZDUH\u0003LQ\u0003RUGHU\u0003 WR\u0003HDVH\u0003WKH\u0003GHYHORSPHQW\u0003RI\u0003&8'$\u0003&\u0003DSSOLFDWLRQV\u0011\u00037KLV\u0003VHFWLRQ\u0003GRHV\u0003QRW\u0003VHUYH\u0003ZHOO\u0003 DV\u0003D\u0003XVHU\u01e2V\u0003PDQXDO\u0003WR\u0003WKHVH\u0003SURGXFWV\u000f\u0003EXW\u0003UDWKHU\u000f\u0003LW\u0003DLPV\u0003VROHO\\\u0003WR\u0003LQIRUP\u0003\\RX\u0003RI\u0003 WKH\u0003H[LVWHQFH\u0003DQG\u0003XWLOLW\\\u0003RI\u0003WKHVH\u0003SDFNDJHV\u0011 CUDA TOOLKIT \u0014\u0015\u0011\u0015\u0011\u0014\u0003 <RX\u0003DOPRVW\u0003FHUWDLQO\\\u0003DOUHDG\\\u0003KDYH\u0003WKH\u0003&8'$\u00037RRONLW\u0003FROOHFWLRQ\u0003RI\u0003VRIWZDUH\u0003RQ\u0003 \\RXU\u0003GHYHORSPHQW\u0003PDFKLQH\u0011\u0003:H\u0003FDQ\u0003EH\u0003VR\u0003VXUH\u0003RI\u0003WKLV\u0003EHFDXVH\u0003WKH\u0003VHW\u0003RI\u0003&8'$\u0003 &\u0003FRPSLOHU\u0003WRROV\u0003FRPSULVHV\u0003RQH\u0003RI\u0003WKH\u0003SULQFLSDO\u0003FRPSRQHQWV\u0003RI\u0003WKLV\u0003SDFNDJH\u0011\u0003,I\u0003 Download from www.wowebook.comptgCUDA TOOLS /two.lf/three.lf/nine.lf\u0014\u0015\u0011\u0015\u0003&8'$\u0003722/6\\RX\u0003GRQ\u01e2W\u0003KDYH\u0003WKH\u0003&8'$\u00037RRONLW\u0003RQ\u0003\\RXU\u0003PDFKLQH\u000f\u0003WKHQ\u0003LW\u01e2V\u0003D\u0003YHULWDEOH\u0003FHUWDLQW\\\u0003 WKDW\u0003\\RX\u0003KDYHQ\u01e2W\u0003WULHG\u0003WR\u0003ZULWH\u0003RU\u0003FRPSLOH\u0003DQ\\\u0003&8'$\u0003&\u0003FRGH\u0011\u0003:H\u01e2UH\u0003RQ\u0003WR\u0003\\RX\u0003QRZ\u000f\u0003 VXFNHU\u0004\u0003$FWXDOO\\\u000f\u0003WKLV\u0003LV\u0003QR\u0003ELJ\u0003GHDO\u0003 EXW\u0003LW\u0003GRHV\u0003PDNH\u0003XV\u0003ZRQGHU\u0003ZK\\\u0003\\RX\u01e2YH\u0003UHDG\u0003 WKLV\u0003HQWLUH\u0003ERRN \u0011\u00032Q\u0003WKH\u0003RWKHU\u0003KDQG\u000f\u0003LI\u0003\\RX\u0003 have \u0003EHHQ\u0003ZRUNLQJ\u0003WKURXJK\u0003WKH\u0003H[DP - SOHV\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003WKHQ\u0003\\RX\u0003VKRXOG\u0003SRVVHVV\u0003WKH\u0003OLEUDULHV\u0003ZH\u01e2UH\u0003DERXW\u0003WR\u0003GLVFXVV\u0011 &8))7\u0014\u0015\u0011\u0015\u0011\u0015\u0003 7KH\u0003&8'$\u00037RRONLW\u0003FRPHV\u0003ZLWK\u0003WZR\u0003YHU\\\u0003LPSRUWDQW\u0003XWLOLW\\\u0003OLEUDULHV\u0003LI\u0003\\RX\u0003SODQ\u0003WR\u0003 SXUVXH\u0003*38\u0003FRPSXWLQJ\u0003LQ\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u0003)LUVW\u000f\u000319,',$\u0003SURYLGHV\u0003D\u0003WXQHG\u0003 )DVW\u0003)RXULHU\u00037UDQVIRUP\u0003OLEUDU\\\u0003NQRZQ\u0003DV\u0003 CUFFT \u0011\u0003$V\u0003RI\u0003UHOHDVH\u0003\u0016\u0011\u0013\u000f\u0003WKH\u0003&8))7\u0003 OLEUDU\\\u0003VXSSRUWV\u0003D\u0003QXPEHU\u0003RI\u0003XVHIXO\u0003IHDWXUHV\u000f\u0003LQFOXGLQJ\u0003WKH\u0003IROORZLQJ 2QH\u0010\u000f\u0003WZR\u0010\u000f\u0003DQG\u0003WKUHH\u0010GLPHQVLRQDO\u0003WUDQVIRUPV\u0003RI\u0003ERWK\u0003UHDO\u0010YDOXHG\u0003DQG\u0003\u01e9\u0003 FRPSOH[\u0010YDOXHG\u0003LQSXW\u0003GDWD %DWFK\u0003H[HFXWLRQ\u0003IRU\u0003SHUIRUPLQJ\u0003PXOWLSOH\u0003RQH\u0010GLPHQVLRQDO\u0003WUDQVIRUPV\u0003LQ\u0003\u01e9\u0003 parallel \u0015'\u0003DQG\u0003\u0016'\u0003WUDQVIRUPV\u0003ZLWK\u0003VL]HV\u0003UDQJLQJ\u0003IURP\u0003\u0015\u0003WR\u0003\u0014\u0019\u000f\u0016\u001b\u0017\u0003LQ\u0003DQ\\\u0003GLPHQVLRQ\u01e9\u0003 \u0014'\u0003WUDQVIRUPV\u0003RI\u0003LQSXWV\u0003XS\u0003WR\u0003\u001b\u0003PLOOLRQ\u0003HOHPHQWV\u0003LQ\u0003VL]H\u01e9\u0003 ,Q\u0010SODFH\u0003DQG\u0003RXW\u0010RI\u0010SODFH\u0003WUDQVIRUPV\u0003IRU\u0003ERWK\u0003UHDO\u0010YDOXHG\u0003DQG\u0003FRPSOH[ \u0010 \u01e9\u0003 YDOXHG\u0003GDWD 19,',$\u0003SURYLGHV\u0003WKH\u0003&8))7\u0003OLEUDU\\\u0003IUHH\u0003RI\u0003FKDUJH\u0003ZLWK\u0003DQ\u0003DFFRPSDQ\\LQJ\u0003OLFHQVH\u0003 WKDW\u0003DOORZV\u0003IRU\u0003XVH\u0003LQ\u0003DQ\\\u0003DSSOLFDWLRQ\u000f\u0003UHJDUGOHVV\u0003RI\u0003ZKHWKHU\u0003LW\u01e2V\u0003IRU\u0003SHUVRQDO\u000f\u0003 DFDGHPLF\u000f\u0003RU\u0003SURIHVVLRQDO\u0003GHYHORSPHQW\u0011 &8%/$6\u0014\u0015\u0011\u0015\u0011\u0016\u0003 ,Q\u0003DGGLWLRQ\u0003WR\u0003D\u0003)DVW\u0003)RXULHU\u00037UDQVIRUP\u0003OLEUDU\\\u000f\u000319,',$\u0003DOVR\u0003SURYLGHV\u0003D\u0003OLEUDU\\\u0003RI\u0003 OLQHDU\u0003DOJHEUD\u0003URXWLQHV\u0003WKDW\u0003LPSOHPHQWV\u0003WKH\u0003ZHOO\u0010NQRZQ\u0003SDFNDJH\u0003RI\u0003%DVLF\u0003/LQHDU\u0003 $OJHEUD\u00036XESURJUDPV\u0003 %/$6 \u0011\u00037KLV\u0003OLEUDU\\\u000f\u0003QDPHG\u0003 CUBLAS \u000f\u0003LV\u0003DOVR\u0003IUHHO\\\u0003DYDLO - DEOH\u0003DQG\u0003VXSSRUWV\u0003D\u0003ODUJH\u0003VXEVHW\u0003RI\u0003WKH\u0003IXOO\u0003%/$6\u0003SDFNDJH\u0011\u00037KLV\u0003LQFOXGHV\u0003YHUVLRQV\u0003 RI\u0003HDFK\u0003URXWLQH\u0003WKDW\u0003DFFHSW\u0003ERWK\u0003VLQJOH\u0010\u0003DQG\u0003GRXEOH\u0010SUHFLVLRQ\u0003LQSXWV\u0003DV\u0003ZHOO\u0003 DV\u0003UHDO\u0010\u0003DQG\u0003FRPSOH[\u0010YDOXHG\u0003GDWD\u0011\u0003%HFDXVH\u0003%/$6\u0003ZDV\u0003RULJLQDOO\\\u0003D\u0003)2575$1\u0010 LPSOHPHQWHG\u0003OLEUDU\\\u0003RI\u0003OLQHDU\u0003DOJHEUD\u0003URXWLQHV\u000f\u000319,',$\u0003DWWHPSWV\u0003WR\u0003PD[LPL]H\u0003 FRPSDWLELOLW\\\u0003ZLWK\u0003WKH\u0003UHTXLUHPHQWV\u0003DQG\u0003H[SHFWDWLRQV\u0003RI\u0003WKHVH\u0003LPSOHPHQWDWLRQV\u0011\u0003 6SHFL\u020cFDOO\\\u000f\u0003WKH\u0003&8%/$6\u0003OLEUDU\\\u0003XVHV\u0003D\u0003FROXPQ\u0010PDMRU\u0003VWRUDJH\u0003OD\\RXW\u0003IRU\u0003DUUD\\V\u000f\u0003 UDWKHU\u0003WKDQ\u0003WKH\u0003URZ\u0010PDMRU\u0003OD\\RXW\u0003QDWLYHO\\\u0003XVHG\u0003E\\\u0003&\u0003DQG\u0003&\u000e\u000e\u0011\u0003,Q\u0003SUDFWLFH\u000f\u0003WKLV\u0003LV\u0003 Download from www.wowebook.comptg7+(\u0003),1$/\u0003&2817'2:1 /two.lf/four.lf/zero.lfQRW\u0003W\\SLFDOO\\\u0003D\u0003FRQFHUQ\u000f\u0003EXW\u0003LW\u0003GRHV\u0003DOORZ\u0003IRU\u0003FXUUHQW\u0003XVHUV\u0003RI\u0003%/$6\u0003WR\u0003DGDSW\u0003WKHLU\u0003 DSSOLFDWLRQV\u0003WR\u0003H[SORLW\u0003WKH\u0003*38\u0010DFFHOHUDWHG\u0003&8%/$6\u0003ZLWK\u0003PLQLPDO\u0003HIIRUW\u0011\u000319,',$\u0003 DOVR\u0003GLVWULEXWHV\u0003)2575$1\u0003ELQGLQJV\u0003WR\u0003&8%/$6\u0003LQ\u0003RUGHU\u0003WR\u0003GHPRQVWUDWH\u0003KRZ\u0003WR\u0003 OLQN\u0003H[LVWLQJ\u0003)2575$1\u0003DSSOLFDWLRQV\u0003WR\u0003&8'$\u0003OLEUDULHV\u0011 NVIDIA GP U COMPUTING SDK \u0014\u0015\u0011\u0015\u0011\u0017\u0003 $YDLODEOH\u0003VHSDUDWHO\\\u0003IURP\u0003WKH\u000319,',$\u0003GULYHUV\u0003DQG\u0003&8'$\u00037RRONLW\u000f\u0003WKH\u0003RSWLRQDO\u0003 GPU Computing SDK GRZQORDG\u0003FRQWDLQV\u0003D\u0003SDFNDJH\u0003RI\u0003GR]HQV\u0003DQG\u0003GR]HQV\u0003RI\u0003VDPSOH\u0003 *38\u0003FRPSXWLQJ\u0003DSSOLFDWLRQV\u0011\u0003:H\u0003PHQWLRQHG\u0003WKLV\u00036'.\u0003HDUOLHU\u0003LQ\u0003WKH\u0003ERRN\u0003EHFDXVH\u0003 LWV\u0003VDPSOHV\u0003VHUYH\u0003DV\u0003DQ\u0003H[FHOOHQW\u0003FRPSOHPHQW\u0003WR\u0003WKH\u0003PDWHULDO\u0003ZH\u01e2YH\u0003FRYHUHG\u0003LQ\u0003 WKH\u0003\u020cUVW\u0003\u0014\u0014\u0003FKDSWHUV\u0011\u0003%XW\u0003LI\u0003\\RX\u0003KDYHQ\u01e2W\u0003WDNHQ\u0003D\u0003ORRN\u0003\\HW\u000f\u000319,',$\u0003KDV\u0003JHDUHG\u0003WKHVH\u0003 VDPSOHV\u0003WRZDUG\u0003YDU\\LQJ\u0003OHYHOV\u0003RI\u0003&8'$\u0003&\u0003FRPSHWHQF\\\u0003DV\u0003ZHOO\u0003DV\u0003VSUHDGLQJ\u0003WKHP\u0003 RYHU\u0003D\u0003EURDG\u0003VSHFWUXP\u0003RI\u0003VXEMHFW\u0003PDWHULDO\u0011\u00037KH\u0003VDPSOHV\u0003DUH\u0003URXJKO\\\u0003FDWHJRUL]HG\u0003 LQWR\u0003WKH\u0003IROORZLQJ\u0003VHFWLRQV &8'$\u0003%DVLF\u00037RSLFV &8'$\u0003$GYDQFHG\u00037RSLFV\u0003 &8'$\u00036\\VWHPV\u0003,QWHJUDWLRQ\u0003 'DWD\u00103DUDOOHO\u0003$OJRULWKPV\u0003 *UDSKLFV\u0003,QWHURSHUDELOLW\\\u0003 7H[WXUH\u0003 3HUIRUPDQFH\u00036WUDWHJLHV\u0003 /LQHDU\u0003$OJHEUD\u0003 ,PDJH\u00129LGHR\u00033URFHVVLQJ &RPSXWDWLRQDO\u0003)LQDQFH\u0003 'DWD\u0003&RPSUHVVLRQ\u0003 3K\\VLFDOO\\\u0010%DVHG\u00036LPXODWLRQ 7KH\u0003H[DPSOHV\u0003ZRUN\u0003RQ\u0003DQ\\\u0003SODWIRUP\u0003WKDW\u0003&8'$\u0003&\u0003ZRUNV\u0003RQ\u0003DQG\u0003FDQ\u0003VHUYH\u0003DV\u0003 H[FHOOHQW\u0003MXPSLQJ\u0010RII\u0003SRLQWV\u0003IRU\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u0003)RU\u0003UHDGHUV\u0003ZKR\u0003KDYH\u0003 FRQVLGHUDEOH\u0003H[SHULHQFH\u0003LQ\u0003VRPH\u0003RI\u0003WKHVH\u0003DUHDV\u000f\u0003ZH\u0003ZDUQ\u0003\\RX\u0003DJDLQVW\u0003H[SHFWLQJ\u0003 WR\u0003VHH\u0003VWDWH\u0010RI\u0010WKH\u0010DUW\u0003LPSOHPHQWDWLRQV\u0003RI\u0003\\RXU\u0003IDYRULWH\u0003DOJRULWKPV\u0003LQ\u0003WKH\u000319,',$\u0003 Download from www.wowebook.comptgCUDA TOOLS /two.lf/four.lf/one.lf\u0014\u0015\u0011\u0015\u0003&8'$\u0003722/6*38\u0003&RPSXWLQJ\u00036'.\u0011\u00037KHVH\u0003FRGH\u0003VDPSOHV\u0003VKRXOG\u0003QRW\u0003EH\u0003WUHDWHG\u0003DV\u0003SURGXFWLRQ\u0010 ZRUWK\\\u0003OLEUDU\\\u0003FRGH\u0003EXW\u0003UDWKHU\u0003DV\u0003HGXFDWLRQDO\u0003LOOXVWUDWLRQV\u0003RI\u0003IXQFWLRQLQJ\u0003&8'$\u0003&\u0003 SURJUDPV\u000f\u0003QRW\u0003XQOLNH\u0003WKH\u0003H[DPSOHV\u0003LQ\u0003WKLV\u0003ERRN\u0011 19,',$\u00033 (5)250$1&(\u000335,0,7,9(6 \u0014\u0015\u0011\u0015\u0011\u0018\u0003 ,Q\u0003DGGLWLRQ\u0003WR\u0003WKH\u0003URXWLQHV\u0003RIIHUHG\u0003LQ\u0003WKH\u0003&8))7\u0003DQG\u0003&8%/$6\u0003OLEUDULHV\u000f\u000319,',$\u0003 DOVR\u0003PDLQWDLQV\u0003D\u0003OLEUDU\\\u0003RI\u0003IXQFWLRQV\u0003IRU\u0003SHUIRUPLQJ\u0003&8'$\u0010DFFHOHUDWHG\u0003GDWD\u0003 SURFHVVLQJ\u0003NQRZQ\u0003DV\u0003WKH\u000319,',$\u00033HUIRUPDQFH\u00033ULPLWLYHV\u0003 133 \u0011\u0003&XUUHQWO\\\u000f\u0003133\u01e2V\u0003 LQLWLDO\u0003VHW\u0003RI\u0003IXQFWLRQDOLW\\\u0003IRFXVHV\u0003VSHFL\u020cFDOO\\\u0003RQ\u0003LPDJLQJ\u0003DQG\u0003YLGHR\u0003SURFHVVLQJ\u0003 DQG\u0003LV\u0003ZLGHO\\\u0003DSSOLFDEOH\u0003IRU\u0003GHYHORSHUV\u0003LQ\u0003WKHVH\u0003DUHDV\u0011\u000319,',$\u0003LQWHQGV\u0003IRU\u0003133\u0003WR\u0003 HYROYH\u0003RYHU\u0003WLPH\u0003WR\u0003DGGUHVV\u0003D\u0003JUHDWHU\u0003QXPEHU\u0003RI\u0003FRPSXWLQJ\u0003WDVNV\u0003LQ\u0003D\u0003ZLGHU\u0003UDQJH\u0003",
    "GP U COMPUTING SDK \u0014\u0015\u0011\u0015\u0011\u0017\u0003 $YDLODEOH\u0003VHSDUDWHO\\\u0003IURP\u0003WKH\u000319,',$\u0003GULYHUV\u0003DQG\u0003&8'$\u00037RRONLW\u000f\u0003WKH\u0003RSWLRQDO\u0003 GPU Computing SDK GRZQORDG\u0003FRQWDLQV\u0003D\u0003SDFNDJH\u0003RI\u0003GR]HQV\u0003DQG\u0003GR]HQV\u0003RI\u0003VDPSOH\u0003 *38\u0003FRPSXWLQJ\u0003DSSOLFDWLRQV\u0011\u0003:H\u0003PHQWLRQHG\u0003WKLV\u00036'.\u0003HDUOLHU\u0003LQ\u0003WKH\u0003ERRN\u0003EHFDXVH\u0003 LWV\u0003VDPSOHV\u0003VHUYH\u0003DV\u0003DQ\u0003H[FHOOHQW\u0003FRPSOHPHQW\u0003WR\u0003WKH\u0003PDWHULDO\u0003ZH\u01e2YH\u0003FRYHUHG\u0003LQ\u0003 WKH\u0003\u020cUVW\u0003\u0014\u0014\u0003FKDSWHUV\u0011\u0003%XW\u0003LI\u0003\\RX\u0003KDYHQ\u01e2W\u0003WDNHQ\u0003D\u0003ORRN\u0003\\HW\u000f\u000319,',$\u0003KDV\u0003JHDUHG\u0003WKHVH\u0003 VDPSOHV\u0003WRZDUG\u0003YDU\\LQJ\u0003OHYHOV\u0003RI\u0003&8'$\u0003&\u0003FRPSHWHQF\\\u0003DV\u0003ZHOO\u0003DV\u0003VSUHDGLQJ\u0003WKHP\u0003 RYHU\u0003D\u0003EURDG\u0003VSHFWUXP\u0003RI\u0003VXEMHFW\u0003PDWHULDO\u0011\u00037KH\u0003VDPSOHV\u0003DUH\u0003URXJKO\\\u0003FDWHJRUL]HG\u0003 LQWR\u0003WKH\u0003IROORZLQJ\u0003VHFWLRQV &8'$\u0003%DVLF\u00037RSLFV &8'$\u0003$GYDQFHG\u00037RSLFV\u0003 &8'$\u00036\\VWHPV\u0003,QWHJUDWLRQ\u0003 'DWD\u00103DUDOOHO\u0003$OJRULWKPV\u0003 *UDSKLFV\u0003,QWHURSHUDELOLW\\\u0003 7H[WXUH\u0003 3HUIRUPDQFH\u00036WUDWHJLHV\u0003 /LQHDU\u0003$OJHEUD\u0003 ,PDJH\u00129LGHR\u00033URFHVVLQJ &RPSXWDWLRQDO\u0003)LQDQFH\u0003 'DWD\u0003&RPSUHVVLRQ\u0003 3K\\VLFDOO\\\u0010%DVHG\u00036LPXODWLRQ 7KH\u0003H[DPSOHV\u0003ZRUN\u0003RQ\u0003DQ\\\u0003SODWIRUP\u0003WKDW\u0003&8'$\u0003&\u0003ZRUNV\u0003RQ\u0003DQG\u0003FDQ\u0003VHUYH\u0003DV\u0003 H[FHOOHQW\u0003MXPSLQJ\u0010RII\u0003SRLQWV\u0003IRU\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u0003)RU\u0003UHDGHUV\u0003ZKR\u0003KDYH\u0003 FRQVLGHUDEOH\u0003H[SHULHQFH\u0003LQ\u0003VRPH\u0003RI\u0003WKHVH\u0003DUHDV\u000f\u0003ZH\u0003ZDUQ\u0003\\RX\u0003DJDLQVW\u0003H[SHFWLQJ\u0003 WR\u0003VHH\u0003VWDWH\u0010RI\u0010WKH\u0010DUW\u0003LPSOHPHQWDWLRQV\u0003RI\u0003\\RXU\u0003IDYRULWH\u0003DOJRULWKPV\u0003LQ\u0003WKH\u000319,',$\u0003 Download from www.wowebook.comptgCUDA TOOLS /two.lf/four.lf/one.lf\u0014\u0015\u0011\u0015\u0003&8'$\u0003722/6*38\u0003&RPSXWLQJ\u00036'.\u0011\u00037KHVH\u0003FRGH\u0003VDPSOHV\u0003VKRXOG\u0003QRW\u0003EH\u0003WUHDWHG\u0003DV\u0003SURGXFWLRQ\u0010 ZRUWK\\\u0003OLEUDU\\\u0003FRGH\u0003EXW\u0003UDWKHU\u0003DV\u0003HGXFDWLRQDO\u0003LOOXVWUDWLRQV\u0003RI\u0003IXQFWLRQLQJ\u0003&8'$\u0003&\u0003 SURJUDPV\u000f\u0003QRW\u0003XQOLNH\u0003WKH\u0003H[DPSOHV\u0003LQ\u0003WKLV\u0003ERRN\u0011 19,',$\u00033 (5)250$1&(\u000335,0,7,9(6 \u0014\u0015\u0011\u0015\u0011\u0018\u0003 ,Q\u0003DGGLWLRQ\u0003WR\u0003WKH\u0003URXWLQHV\u0003RIIHUHG\u0003LQ\u0003WKH\u0003&8))7\u0003DQG\u0003&8%/$6\u0003OLEUDULHV\u000f\u000319,',$\u0003 DOVR\u0003PDLQWDLQV\u0003D\u0003OLEUDU\\\u0003RI\u0003IXQFWLRQV\u0003IRU\u0003SHUIRUPLQJ\u0003&8'$\u0010DFFHOHUDWHG\u0003GDWD\u0003 SURFHVVLQJ\u0003NQRZQ\u0003DV\u0003WKH\u000319,',$\u00033HUIRUPDQFH\u00033ULPLWLYHV\u0003 133 \u0011\u0003&XUUHQWO\\\u000f\u0003133\u01e2V\u0003 LQLWLDO\u0003VHW\u0003RI\u0003IXQFWLRQDOLW\\\u0003IRFXVHV\u0003VSHFL\u020cFDOO\\\u0003RQ\u0003LPDJLQJ\u0003DQG\u0003YLGHR\u0003SURFHVVLQJ\u0003 DQG\u0003LV\u0003ZLGHO\\\u0003DSSOLFDEOH\u0003IRU\u0003GHYHORSHUV\u0003LQ\u0003WKHVH\u0003DUHDV\u0011\u000319,',$\u0003LQWHQGV\u0003IRU\u0003133\u0003WR\u0003 HYROYH\u0003RYHU\u0003WLPH\u0003WR\u0003DGGUHVV\u0003D\u0003JUHDWHU\u0003QXPEHU\u0003RI\u0003FRPSXWLQJ\u0003WDVNV\u0003LQ\u0003D\u0003ZLGHU\u0003UDQJH\u0003 RI\u0003GRPDLQV\u0011\u0003,I\u0003\\RX\u0003KDYH\u0003DQ\u0003LQWHUHVW\u0003LQ\u0003KLJK\u0010SHUIRUPDQFH\u0003LPDJLQJ\u0003RU\u0003YLGHR\u0003DSSOLFD - WLRQV\u000f\u0003\\RX\u0003VKRXOG\u0003PDNH\u0003LW\u0003D\u0003SULRULW\\\u0003WR\u0003ORRN\u0003LQWR\u0003133\u000f\u0003DYDLODEOH\u0003DV\u0003D\u0003IUHH\u0003GRZQORDG\u0003 DW\u0003ZZZ\u0011QYLGLD\u0011FRP\u0012REMHFW\u0012QSS\u0011KWPO\u0003 RU\u0003DFFHVVLEOH\u0003IURP\u0003\\RXU\u0003IDYRULWH\u0003ZHE\u0003VHDUFK\u0003 HQJLQH \u0011 '(%8**,1*\u0003&8'$\u0003& \u0014\u0015\u0011\u0015\u0011\u0019\u0003 :H\u0003KDYH\u0003KHDUG\u0003IURP\u0003D\u0003YDULHW\\\u0003RI\u0003VRXUFHV\u0003WKDW\u000f\u0003LQ\u0003UDUH\u0003LQVWDQFHV\u000f\u0003FRPSXWHU\u0003 VRIWZDUH\u0003GRHV\u0003QRW\u0003ZRUN\u0003H[DFWO\\\u0003DV\u0003LQWHQGHG\u0003ZKHQ\u0003\u020cUVW\u0003H[HFXWHG\u0011\u00036RPH\u0003FRGH\u0003 FRPSXWHV\u0003LQFRUUHFW\u0003YDOXHV\u000f\u0003VRPH\u0003IDLOV\u0003WR\u0003WHUPLQDWH\u0003H[HFXWLRQ\u000f\u0003DQG\u0003VRPH\u0003 FRGH\u0003HYHQ\u0003SXWV\u0003WKH\u0003FRPSXWHU\u0003LQWR\u0003D\u0003VWDWH\u0003WKDW\u0003RQO\\\u0003D\u0003\u020dLS\u0003RI\u0003WKH\u0003SRZHU\u0003VZLWFK\u0003 FDQ\u0003UHPHG\\\u0011\u0003$OWKRXJK\u0003KDYLQJ\u0003FOHDUO\\\u0003 never \u0003ZULWWHQ\u0003FRGH\u0003OLNH\u0003WKLV\u0003SHUVRQDOO\\\u000f\u0003 WKH\u0003DXWKRUV\u0003RI\u0003WKLV\u0003ERRN\u0003UHFRJQL]H\u0003WKDW\u0003VRPH\u0003VRIWZDUH\u0003HQJLQHHUV\u0003PD\\\u0003GHVLUH\u0003 UHVRXUFHV\u0003WR\u0003GHEXJ\u0003WKHLU\u0003&8'$\u0003&\u0003NHUQHOV\u0011\u0003)RUWXQDWHO\\\u000f\u000319,',$\u0003SURYLGHV\u0003WRROV\u0003WR\u0003 PDNH\u0003WKLV\u0003SDLQIXO\u0003SURFHVV\u0003VLJQL\u020cFDQWO\\\u0003OHVV\u0003WURXEOHVRPH\u0011 &8'$\u0210*'% $\u0003WRRO\u0003NQRZQ\u0003DV\u0003 CUDA-GDB \u0003LV\u0003RQH\u0003RI\u0003WKH\u0003PRVW\u0003XVHIXO\u0003&8'$\u0003GRZQORDGV\u0003DYDLODEOH\u0003 WR\u0003&8'$\u0003&\u0003SURJUDPPHUV\u0003ZKR\u0003GHYHORS\u0003WKHLU\u0003FRGH\u0003RQ\u0003/LQX[\u0010EDVHG\u0003V\\VWHPV\u0011\u000319,',$\u0003 H[WHQGHG\u0003WKH\u0003RSHQ\u0003VRXUFH\u0003*18\u0003GHEXJJHU\u0003 gdb \u0003WR\u0003WUDQVSDUHQWO\\\u0003VXSSRUW\u0003GHEXJ - JLQJ\u0003GHYLFH\u0003FRGH\u0003LQ\u0003UHDO\u0003WLPH\u0003ZKLOH\u0003PDLQWDLQLQJ\u0003WKH\u0003IDPLOLDU\u0003LQWHUIDFH\u0003RI\u0003 gdb\u0011\u00033ULRU\u0003 WR\u0003&8'$\u0010*'%\u000f\u0003WKHUH\u0003H[LVWHG\u0003QR\u0003JRRG\u0003ZD\\\u0003WR\u0003GHEXJ\u0003GHYLFH\u0003FRGH\u0003RXWVLGH\u0003RI\u0003XVLQJ\u0003 WKH\u0003&38\u0003WR\u0003VLPXODWH\u0003WKH\u0003ZD\\\u0003LQ\u0003ZKLFK\u0003LW\u0003ZDV\u0003H[SHFWHG\u0003WR\u0003UXQ\u0011\u00037KLV\u0003PHWKRG\u0003\\LHOGHG\u0003 H[WUHPHO\\\u0003VORZ\u0003GHEXJJLQJ\u000f\u0003DQG\u0003LQ\u0003IDFW\u000f\u0003LW\u0003ZDV\u0003IUHTXHQWO\\\u0003D\u0003YHU\\\u0003SRRU\u0003DSSUR[L - PDWLRQ\u0003RI\u0003WKH\u0003H[DFW\u0003*38\u0003H[HFXWLRQ\u0003RI\u0003WKH\u0003NHUQHO\u0011\u000319,',$\u01e2V\u0003&8'$\u0010*'%\u0003HQDEOHV\u0003 SURJUDPPHUV\u0003WR\u0003GHEXJ\u0003WKHLU\u0003NHUQHOV\u0003GLUHFWO\\\u0003RQ\u0003WKH\u0003*38\u000f\u0003DIIRUGLQJ\u0003WKHP\u0003DOO\u0003RI\u0003 Download from www.wowebook.comptg7+(\u0003),1$/\u0003&2817'2:1 /two.lf/four.lf/two.lfWKH\u0003FRQWURO\u0003WKDW\u0003WKH\\\u01e2YH\u0003JURZQ\u0003DFFXVWRPHG\u0003WR\u0003ZLWK\u0003&38\u0003GHEXJJHUV\u0011\u00036RPH\u0003RI\u0003WKH\u0003 KLJKOLJKWV\u0003RI\u0003&8'$\u0010*'%\u0003LQFOXGH\u0003WKH\u0003IROORZLQJ 9LHZLQJ\u0003&8'$\u0003VWDWH\u000f\u0003VXFK\u0003DV\u0003LQIRUPDWLRQ\u0003UHJDUGLQJ\u0003LQVWDOOHG\u0003*38V\u0003DQG\u0003WKHLU\u0003\u01e9\u0003 FDSDELOLWLHV 6HWWLQJ\u0003EUHDNSRLQWV\u0003LQ\u0003&8'$\u0003&\u0003VRXUFH\u0003FRGH\u01e9\u0003 ,QVSHFWLQJ\u0003*38\u0003PHPRU\\\u000f\u0003LQFOXGLQJ\u0003DOO\u0003JOREDO\u0003DQG\u0003VKDUHG\u0003PHPRU\\\u01e9\u0003 ,QVSHFWLQJ\u0003WKH\u0003EORFNV\u0003DQG\u0003WKUHDGV\u0003FXUUHQWO\\\u0003UHVLGHQW\u0003RQ\u0003WKH\u0003*38\u01e9\u0003 6LQJOH\u0010VWHSSLQJ\u0003D\u0003ZDUS\u0003RI\u0003WKUHDGV\u01e9\u0003 %UHDNLQJ\u0003LQWR\u0003FXUUHQWO\\\u0003UXQQLQJ\u0003DSSOLFDWLRQV\u000f\u0003LQFOXGLQJ\u0003KXQJ\u0003RU\u0003GHDGORFNHG\u0003\u01e9\u0003 DSSOLFDWLRQV $ORQJ\u0003ZLWK\u0003WKH\u0003GHEXJJHU\u000f\u000319,',$\u0003SURYLGHV\u0003WKH\u0003&8'$\u00030HPRU\\\u0003&KHFNHU\u0003ZKRVH\u0003 IXQFWLRQDOLW\\\u0003FDQ\u0003EH\u0003DFFHVVHG\u0003WKURXJK\u0003&8'$\u0010*'%\u0003RU\u0003WKH\u0003VWDQG\u0010DORQH\u0003WRRO\u000f\u0003 cuda-memcheck \u0011\u0003%HFDXVH\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003LQFOXGHV\u0003D\u0003VRSKLVWLFDWHG\u0003 PHPRU\\\u0003PDQDJHPHQW\u0003XQLW\u0003EXLOW\u0003GLUHFWO\\\u0003LQWR\u0003WKH\u0003KDUGZDUH\u000f\u0003DOO\u0003LOOHJDO\u0003PHPRU\\\u0003 DFFHVVHV\u0003ZLOO\u0003EH\u0003GHWHFWHG\u0003DQG\u0003SUHYHQWHG\u0003E\\\u0003WKH\u0003KDUGZDUH\u0011\u0003$V\u0003D\u0003UHVXOW\u0003RI\u0003D\u0003 PHPRU\\\u0003YLRODWLRQ\u000f\u0003\\RXU\u0003SURJUDP\u0003ZLOO\u0003FHDVH\u0003IXQFWLRQLQJ\u0003DV\u0003H[SHFWHG\u000f\u0003VR\u0003\\RX\u0003ZLOO\u0003 FHUWDLQO\\\u0003ZDQW\u0003YLVLELOLW\\\u0003LQWR\u0003WKHVH\u0003W\\SHV\u0003RI\u0003HUURUV\u0011\u0003:KHQ\u0003HQDEOHG\u000f\u0003WKH\u0003&8'$\u0003 0HPRU\\\u0003&KHFNHU\u0003ZLOO\u0003GHWHFW\u0003DQ\\\u0003JOREDO\u0003PHPRU\\\u0003YLRODWLRQV\u0003RU\u0003PLVDOLJQHG\u0003JOREDO\u0003 PHPRU\\\u0003DFFHVVHV\u0003WKDW\u0003\\RXU\u0003NHUQHO\u0003DWWHPSWV\u0003WR\u0003PDNH\u000f\u0003UHSRUWLQJ\u0003WKHP\u0003WR\u0003\\RX\u0003LQ\u0003D\u0003 IDU\u0003PRUH\u0003KHOSIXO\u0003DQG\u0003YHUERVH\u0003PDQQHU\u0003WKDQ\u0003SUHYLRXVO\\\u0003SRVVLEOH\u0011\u0003 19,',$\u00033 $5$//(/\u000316,*+7 $OWKRXJK\u0003&8'$\u0010*'%\u0003LV\u0003D\u0003PDWXUH\u0003DQG\u0003IDQWDVWLF\u0003WRRO\u0003IRU\u0003GHEXJJLQJ\u0003\\RXU\u0003&8'$\u0003 &\u0003NHUQHOV\u0003RQ\u0003KDUGZDUH\u0003LQ\u0003UHDO\u0003WLPH\u000f\u000319,',$\u0003UHFRJQL]HV\u0003WKDW\u0003QRW\u0003HYHU\\\u0003GHYHO - RSHU\u0003LV\u0003RYHU\u0003WKH\u0003PRRQ\u0003DERXW\u0003/LQX[\u0011\u00036R\u000f\u0003XQOHVV\u0003:LQGRZV\u0003XVHUV\u0003DUH\u0003KHGJLQJ\u0003WKHLU\u0003 EHWV\u0003E\\\u0003VDYLQJ\u0003XS\u0003WR\u0003RSHQ\u0003WKHLU\u0003RZQ\u0003SHW\u0003VWRUHV\u000f\u0003WKH\\\u0003QHHG\u0003D\u0003ZD\\\u0003WR\u0003GHEXJ\u0003WKHLU\u0003 DSSOLFDWLRQV\u000f\u0003WRR\u0011\u00037RZDUG\u0003WKH\u0003HQG\u0003RI\u0003\u0015\u0013\u0013 \u000f\u000319,',$\u0003LQWURGXFHG\u000319,',$\u00033DUDOOHO\u0003 1VLJKW\u0003 RULJLQDOO\\\u0003FRGH\u0010QDPHG\u00031H[XV \u000f\u0003WKH\u0003\u020cUVW\u0003LQWHJUDWHG\u0003*38\u0012&38\u0003GHEXJJHU\u0003 IRU\u00030LFURVRIW\u00039LVXDO\u00036WXGLR\u0011\u0003/LNH\u0003&8'$\u0010*'%\u000f\u00033DUDOOHO\u00031VLJKW\u0003VXSSRUWV\u0003GHEXJ - JLQJ\u0003&8'$\u0003DSSOLFDWLRQV\u0003ZLWK\u0003WKRXVDQGV\u0003RI\u0003WKUHDGV\u0011\u00038VHUV\u0003FDQ\u0003SODFH\u0003EUHDNSRLQWV\u0003 DQ\\ZKHUH\u0003LQ\u0003WKHLU\u0003&8'$\u0003&\u0003VRXUFH\u0003FRGH\u000f\u0003LQFOXGLQJ\u0003EUHDNSRLQWV\u0003WKDW\u0003WULJJHU\u0003RQ\u0003 ZULWHV\u0003WR\u0003DUELWUDU\\\u0003PHPRU\\\u0003ORFDWLRQV\u0011\u00037KH\\\u0003FDQ\u0003LQVSHFW\u0003*38\u0003PHPRU\\\u0003GLUHFWO\\\u0003 IURP\u0003WKH\u00039LVXDO\u00036WXGLR\u00030HPRU\\\u0003ZLQGRZ\u0003DQG\u0003FKHFN\u0003IRU\u0003RXW\u0010RI\u0010ERXQGV\u0003PHPRU\\\u0003 DFFHVVHV\u0011\u00037KLV\u0003WRRO\u0003KDV\u0003EHHQ\u0003PDGH\u0003SXEOLFO\\\u0003DYDLODEOH\u0003LQ\u0003D\u0003EHWD\u0003SURJUDP\u0003DV\u0003RI\u0003 SUHVV\u0003WLPH\u000f\u0003DQG\u0003WKH\u0003\u020cQDO\u0003YHUVLRQ\u0003VKRXOG\u0003EH\u0003UHOHDVHG\u0003VKRUWO\\\u0011 Download from www.wowebook.comptgCUDA TOOLS /two.lf/four.lf/three.lf\u0014\u0015\u0011\u0015\u0003&8'$\u0003722/6&8'$\u00039,68$/\u0003352),/(5 \u0014\u0015\u0011\u0015\u0011\u001a\u0003 :H\u0003RIWHQ\u0003WRXW\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003DV\u0003D\u0003ZRQGHUIXO\u0003IRXQGDWLRQ\u0003IRU\u0003KLJK\u0010 SHUIRUPDQFH\u0003FRPSXWLQJ\u0003DSSOLFDWLRQV\u0011\u00038QIRUWXQDWHO\\\u000f\u0003WKH\u0003UHDOLW\\\u0003LV\u0003WKDW\u0003DIWHU\u0003 IHUUHWLQJ\u0003RXW\u0003DOO\u0003WKH\u0003EXJV\u0003IURP\u0003\\RXU\u0003DSSOLFDWLRQV\u000f\u0003HYHQ\u0003WKH\u0003PRVW\u0003ZHOO\u0010PHDQLQJ\u0003 \u01e4KLJK\u0010SHUIRUPDQFH\u0003FRPSXWLQJ\u01e5\u0003DSSOLFDWLRQV\u0003DUH\u0003PRUH\u0003DFFXUDWHO\\\u0003UHIHUUHG\u0003WR\u0003DV\u0003 VLPSO\\\u0003\u01e4FRPSXWLQJ\u01e5\u0003DSSOLFDWLRQV\u0011\u0003:H\u0003KDYH\u0003RIWHQ\u0003EHHQ\u0003LQ\u0003WKH\u0003SRVLWLRQ\u0003ZKHUH\u0003ZH\u0003 ZRQGHU\u000f\u0003\u01e4:K\\\u0003LQ\u0003WKH\u00036DP\u0003+LOO\u0003LV\u0003P\\\u0003FRGH\u0003SHUIRUPLQJ\u0003VR\u0003SRRUO\\\"\u01e5\u0003,Q\u0003VLWXDWLRQV\u0003OLNH\u0003 WKLV\u000f\u0003LW\u0003KHOSV\u0003WR\u0003EH\u0003DEOH\u0003WR\u0003H[HFXWH\u0003WKH\u0003NHUQHOV\u0003LQ\u0003TXHVWLRQ\u0003XQGHU\u0003WKH\u0003ZDWFKIXO\u0003JD]H\u0003 RI\u0003D\u0003SUR\u020cOLQJ\u0003WRRO\u0011\u000319,',$\u0003SURYLGHV\u0003MXVW\u0003VXFK\u0003D\u0003WRRO\u000f\u0003DYDLODEOH\u0003DV\u0003D\u0003VHSDUDWH\u0003GRZQ - ORDG\u0003RQ\u0003WKH\u0003&8'$\u0003=RQH\u0003ZHEVLWH\u0011\u0003)LJXUH\u0003\u0014\u0015\u0011\u0014\u0003VKRZV\u0003WKH\u00039LVXDO\u00033UR\u020cOHU\u0003EHLQJ\u0003XVHG\u0003 WR\u0003FRPSDUH\u0003WZR\u0003LPSOHPHQWDWLRQV\u0003RI\u0003D\u0003PDWUL[\u0003WUDQVSRVH\u0003RSHUDWLRQ\u0011\u0003'HVSLWH\u0003QRW\u0003 ORRNLQJ\u0003DW\u0003D\u0003OLQH\u0003RI\u0003FRGH\u000f\u0003LW\u0003EHFRPHV\u0003TXLWH\u0003HDV\\\u0003WR\u0003GHWHUPLQH\u0003WKDW\u0003ERWK\u0003PHPRU\\\u0003 DQG\u0003LQVWUXFWLRQ\u0003WKURXJKSXW\u0003RI\u0003WKH\u0003 transpose() \u0003NHUQHO\u0003RXWVWULS\u0003WKDW\u0003RI\u0003WKH\u0003 transpose_naive() \u0003NHUQHO\u0011\u0003 %XW\u0003WKHQ\u0003DJDLQ\u000f\u0003LW\u0003ZRXOG\u0003EH\u0003XQIDLU\u0003WR\u0003H[SHFW\u0003PXFK\u0003 PRUH\u0003IURP\u0003D\u0003IXQFWLRQ\u0003ZLWK\u0003 naive \u0003LQ\u0003WKH\u0003QDPH\u0011 Figure 12.1 7KH\u0003&8'$\u00039LVXDO\u00033UR\u020cOHU\u0003EHLQJ\u0003XVHG\u0003WR\u0003SUR\u020cOH\u0003D\u0003PDWUL[\u0003WUDQVSRVH\u0003 DSSOLFDWLRQ Download from www.wowebook.comptg7+(\u0003),1$/\u0003&2817'2:1 /two.lf/four.lf/four.lf7KH\u0003&8'$\u00039LVXDO\u00033UR\u020cOHU\u0003ZLOO\u0003H[HFXWH\u0003\\RXU\u0003DSSOLFDWLRQ\u000f\u0003H[DPLQLQJ\u0003VSHFLDO\u0003SHUIRU - PDQFH\u0003FRXQWHUV\u0003EXLOW\u0003LQWR\u0003WKH\u0003*38\u0011\u0003$IWHU\u0003H[HFXWLRQ\u000f\u0003WKH\u0003SUR\u020cOHU\u0003FDQ\u0003FRPSLOH\u0003GDWD\u0003 EDVHG\u0003RQ\u0003WKHVH\u0003FRXQWHUV\u0003DQG\u0003SUHVHQW\u0003\\RX\u0003ZLWK\u0003UHSRUWV\u0003EDVHG\u0003RQ\u0003ZKDW\u0003LW\u0003REVHUYHG\u0011\u0003 ,W\u0003FDQ\u0003YHULI\\\u0003KRZ\u0003ORQJ\u0003\\RXU\u0003DSSOLFDWLRQ\u0003VSHQGV\u0003H[HFXWLQJ\u0003HDFK\u0003NHUQHO\u0003DV\u0003ZHOO\u0003 DV\u0003GHWHUPLQH\u0003WKH\u0003QXPEHU\u0003RI\u0003EORFNV\u0003ODXQFKHG\u000f\u0003ZKHWKHU\u0003\\RXU\u0003NHUQHO\u01e2V\u0003PHPRU\\\u0003 DFFHVVHV\u0003DUH\u0003FRDOHVFHG\u000f\u0003WKH\u0003QXPEHU\u0003RI\u0003GLYHUJHQW\u0003EUDQFKHV\u0003WKH\u0003ZDUSV\u0003LQ\u0003\\RXU\u0003FRGH\u0003 H[HFXWH\u000f\u0003DQG\u0003VR\u0003RQ\u0011\u0003:H\u0003HQFRXUDJH\u0003\\RX\u0003WR\u0003ORRN\u0003LQWR\u0003WKH\u0003&8'$\u00039LVXDO\u00033UR\u020cOHU\u0003LI\u0003\\RX\u0003 KDYH\u0003VRPH\u0003VXEWOH\u0003SHUIRUPDQFH\u0003SUREOHPV\u0003LQ\u0003QHHG\u0003RI\u0003UHVROXWLRQ\u0011 :ULWWHQ\u00035HVRXUFHV\u0014\u0015\u0011\u0016\u0003 ,I\u0003\\RX\u0003KDYHQ\u01e2W\u0003DOUHDG\\\u0003JURZQ\u0003TXHDV\\\u0003IURP\u0003DOO\u0003WKH\u0003SURVH\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003WKHQ\u0003LW\u01e2V\u0003 SRVVLEOH\u0003\\RX\u0003PLJKW\u0003DFWXDOO\\\u0003EH\u0003LQWHUHVWHG\u0003LQ\u0003UHDGLQJ\u0003PRUH\u0011\u0003:H\u0003NQRZ\u0003WKDW\u0003VRPH\u0003RI\u0003 \\RX\u0003DUH\u0003PRUH\u0003OLNHO\\\u0003WR\u0003ZDQW\u0003WR\u0003SOD\\\u0003ZLWK\u0003FRGH\u0003LQ\u0003RUGHU\u0003WR\u0003FRQWLQXH\u0003\\RXU\u0003OHDUQLQJ\u000f\u0003 EXW\u0003IRU\u0003WKH\u0003UHVW\u0003RI\u0003\\RX\u000f\u0003WKHUH\u0003DUH\u0003DGGLWLRQDO\u0003ZULWWHQ\u0003UHVRXUFHV\u0003WR\u0003PDLQWDLQ\u0003\\RXU\u0003 JURZWK\u0003DV\u0003D\u0003&8'$\u0003&\u0003FRGHU\u0011\u0003 352*5$00,1*\u00030$66,9(/<\u00033$5$//(/\u0003352&(66256 \u0003$\u0003 \u0014\u0015\u0011\u0016\u0011\u0014\u0003 +$1'6\u021021\u0003$3352$&+ ,I\u0003\\RX\u0003UHDG\u0003&KDSWHU\u0003\u0014\u000f\u0003ZH\u0003DVVXUHG\u0003\\RX\u0003WKDW\u0003WKLV\u0003ERRN\u0003ZDV\u0003PRVW\u0003GHFLGHGO\\\u0003 not a WH[WERRN\u0003RQ\u0003SDUDOOHO\u0003DUFKLWHFWXUHV\u0011\u00036XUH\u000f\u0003ZH\u0003EDQGLHG\u0003DERXW\u0003WHUPV\u0003VXFK\u0003DV\u0003 multi - processor \u0003DQG\u0003warp \u000f\u0003EXW\u0003WKLV\u0003ERRN\u0003VWULYHV\u0003WR\u0003WHDFK\u0003WKH\u0003VRIWHU\u0003VLGH\u0003RI\u0003SURJUDPPLQJ\u0003 ZLWK\u0003&8'$\u0003&\u0003DQG\u0003LWV\u0003DWWHQGDQW\u0003$3,V\u0011\u0003:H\u0003OHDUQHG\u0003WKH\u0003&8'$\u0003&\u0003ODQJXDJH\u0003ZLWKLQ\u0003WKH\u0003 SURJUDPPLQJ\u0003PRGHO\u0003VHW\u0003IRUWK\u0003LQ\u0003WKH\u0003 NVIDIA CUDA Programming Guide \u000f\u0003ODUJHO\\\u0003 LJQRULQJ\u0003WKH\u0003ZD\\\u000319,',$\u01e2V\u0003KDUGZDUH\u0003DFWXDOO\\\u0003DFFRPSOLVKHV\u0003WKH\u0003WDVNV\u0003ZH\u0003JLYH\u0003LW\u0011\u0003 %XW\u0003WR\u0003WUXO\\\u0003EHFRPH\u0003DQ\u0003DGYDQFHG\u000f\u0003ZHOO\u0010URXQGHG\u0003&8'$\u0003&\u0003SURJUDPPHU\u000f\u0003\\RX\u0003ZLOO\u0003 QHHG\u0003D\u0003PRUH\u0003LQWLPDWH\u0003IDPLOLDULW\\\u0003ZLWK\u0003WKH\u0003&8'$\u0003$UFKLWHFWXUH\u0003DQG\u0003VRPH\u0003RI\u0003WKH\u0003 QXDQFHV\u0003RI\u0003KRZ\u000319,',$\u0003*38V\u0003ZRUN\u0003EHKLQG\u0003WKH\u0003VFHQHV\u0011\u00037R\u0003DFFRPSOLVK\u0003WKLV\u000f\u0003 ZH\u0003UHFRPPHQG\u0003ZRUNLQJ\u0003\\RXU\u0003ZD\\\u0003WKURXJK\u0003 Programming Massively Parallel Processors: A Hands-on Approach \u0011\u00037R\u0003ZULWH\u0003LW\u000f\u0003'DYLG\u0003.LUN\u000f\u0003IRUPHUO\\\u000319,',$\u01e2V\u0003FKLHI\u0003 VFLHQWLVW\u000f\u0003FROODERUDWHG\u0003ZLWK\u0003:HQ\u0010PHL\u0003:\u0011\u0003+ZX\u000f\u0003WKH\u0003:\u0011-\u0011\u00036DQGHUV\u0003,,,\u0003FKDLUPDQ\u0003LQ\u0003 HOHFWULFDO\u0003DQG\u0003FRPSXWHU\u0003HQJLQHHULQJ\u0003DW\u00038QLYHUVLW\\\u0003RI\u0003,OOLQRLV\u0011\u0003<RX\u01e2OO\u0003HQFRXQWHU\u0003 D\u0003QXPEHU\u0003RI\u0003IDPLOLDU\u0003WHUPV\u0003DQG\u0003FRQFHSWV\u000f\u0003EXW\u0003\\RX\u0003ZLOO\u0003OHDUQ\u0003DERXW\u0003WKH\u0003JULWW\\\u0003 GHWDLOV\u0003RI\u000319,',$\u01e2V\u0003&8'$\u0003$UFKLWHFWXUH\u000f\u0003LQFOXGLQJ\u0003WKUHDG\u0003VFKHGXOLQJ\u0003DQG\u0003ODWHQF\\\u0003 WROHUDQFH\u000f\u0003PHPRU\\\u0003EDQGZLGWK\u0003XVDJH\u0003DQG\u0003HI\u020cFLHQF\\\u000f\u0003VSHFL\u020cFV\u0003RQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003 Download from www.wowebook.comptgWRITTEN RESOURCES /two.lf/four.lf/five.lf\u0014\u0015\u0011\u0016\u0003:5,77(1\u00035(6285&(6KDQGOLQJ\u000f\u0003DQG\u0003PXFK\u0003PRUH\u0011\u00037KH\u0003ERRN\u0003DOVR\u0003DGGUHVVHV\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003LQ\u0003 D\u0003PRUH\u0003JHQHUDO\u0003VHQVH\u0003WKDQ\u0003WKLV\u0003ERRN\u000f\u0003VR\u0003\\RX\u0003ZLOO\u0003JDLQ\u0003D\u0003EHWWHU\u0003RYHUDOO\u0003XQGHU - VWDQGLQJ\u0003RI\u0003KRZ\u0003WR\u0003HQJLQHHU\u0003SDUDOOHO\u0003VROXWLRQV\u0003WR\u0003ODUJH\u000f\u0003FRPSOH[\u0003SUREOHPV\u0011 CUDA U \u0014\u0015\u0011\u0016\u0011\u0015\u0003 6RPH\u0003RI\u0003XV\u0003ZHUH\u0003XQOXFN\\\u0003HQRXJK\u0003WR\u0003KDYH\u0003DWWHQGHG\u0003XQLYHUVLW\\\u0003SULRU\u0003WR\u0003WKH\u0003H[FLWLQJ\u0003 ZRUOG\u0003RI\u0003*38\u0003FRPSXWLQJ\u0011\u0003)RU\u0003WKRVH\u0003ZKR\u0003DUH\u0003IRUWXQDWH\u0003HQRXJK\u0003WR\u0003EH\u0003DWWHQGLQJ\u0003 FROOHJH\u0003QRZ\u0003RU\u0003LQ\u0003WKH\u0003QHDU\u0003IXWXUH\u000f\u0003DERXW\u0003\u0016\u0013\u0013\u0003XQLYHUVLWLHV\u0003DFURVV\u0003WKH\u0003ZRUOG\u0003 FXUUHQWO\\\u0003WHDFK\u0003FRXUVHV\u0003LQYROYLQJ\u0003&8'$\u0011\u0003%XW\u0003EHIRUH\u0003\\RX\u0003VWDUW\u0003D\u0003FUDVK\u0003GLHW\u0003WR\u0003\u020cW\u0003 EDFN\u0003LQWR\u0003\\RXU\u0003FROOHJH\u0003JHDU\u000f\u0003WKHUH\u01e2V\u0003DQ\u0003DOWHUQDWLYH\u0004\u00032Q\u0003WKH\u0003&8'$\u0003=RQH\u0003ZHEVLWH\u000f\u0003 \\RX\u0003ZLOO\u0003\u020cQG\u0003D\u0003OLQN\u0003IRU\u0003 CUDA U \u000f\u0003ZKLFK\u0003LV\u0003HVVHQWLDOO\\\u0003DQ\u0003RQOLQH\u0003XQLYHUVLW\\\u0003IRU\u0003&8'$\u0003 HGXFDWLRQ\u0011 2U\u0003\\RX\u0003FDQ\u0003QDYLJDWH\u0003GLUHFWO\\\u0003WKHUH\u0003ZLWK\u0003WKH\u000385/\u0003ZZZ\u0011QYLGLD\u0011FRP\u0012 REMHFW\u0012FXGDBHGXFDWLRQ\u0011\u0003$OWKRXJK\u0003\\RX\u0003ZLOO\u0003EH\u0003DEOH\u0003WR\u0003OHDUQ\u0003TXLWH\u0003D\u0003ELW\u0003DERXW\u0003*38\u0003 FRPSXWLQJ\u0003LI\u0003\\RX\u0003DWWHQG\u0003VRPH\u0003RI\u0003WKH\u0003RQOLQH\u0003OHFWXUHV\u0003DW\u0003&8'$\u00038\u000f\u0003DV\u0003RI\u0003SUHVV\u0003WLPH\u0003 WKHUH\u0003DUH\u0003VWLOO\u0003QR\u0003RQOLQH\u0003IUDWHUQLWLHV\u0003IRU\u0003SDUW\\LQJ\u0003DIWHU\u0003FODVV\u0011 UNIVERS ITY COURSE MATERIALS $PRQJ\u0003WKH\u0003P\\ULDG\u0003VRXUFHV\u0003RI\u0003&8'$\u0003HGXFDWLRQ\u000f\u0003RQH\u0003RI\u0003WKH\u0003KLJKOLJKWV\u0003LQFOXGHV\u0003DQ\u0003 HQWLUH\u0003FRXUVH\u0003IURP\u0003WKH\u00038QLYHUVLW\\\u0003RI\u0003,OOLQRLV\u0003RQ\u0003SURJUDPPLQJ\u0003LQ\u0003&8'$\u0003&\u0011\u000319,',$\u0003 DQG\u0003WKH\u00038QLYHUVLW\\\u0003RI\u0003,OOLQRLV\u0003SURYLGH\u0003WKLV\u0003FRQWHQW\u0003IUHH\u0003RI\u0003FKDUJH\u0003LQ\u0003WKH\u00030\u00179\u0003YLGHR\u0003 IRUPDW\u0003IRU\u0003\\RXU\u0003L3RG\u000f\u0003L3KRQHV\u000f\u0003RU\u0003FRPSDWLEOH\u0003YLGHR\u0003SOD\\HUV\u0011\u0003:H\u0003NQRZ\u0003ZKDW\u0003\\RX\u01e2UH\u0003 WKLQNLQJ \u0003\u01e4)LQDOO\\\u000f\u0003D\u0003ZD\\\u0003WR\u0003OHDUQ\u0003&8'$\u0003ZKLOH\u0003,\u0003ZDLW\u0003LQ\u0003OLQH\u0003DW\u0003WKH\u0003'HSDUWPHQW\u0003RI\u0003 0RWRU\u00039HKLFOHV\u0004\u01e5\u0003<RX\u0003PD\\\u0003DOVR\u0003EH\u0003ZRQGHULQJ\u0003ZK\\\u0003ZH\u0003ZDLWHG\u0003XQWLO\u0003WKH\u0003YHU\\\u0003HQG\u0003 RI\u0003WKLV\u0003ERRN\u0003WR\u0003LQIRUP\u0003\\RX\u0003RI\u0003WKH\u0003H[LVWHQFH\u0003RI\u0003ZKDW\u0003LV\u0003HVVHQWLDOO\\\u0003D\u0003PRYLH\u0003YHUVLRQ\u0003 RI\u0003WKLV\u0003ERRN\u0011\u0003:H\u01e2UH\u0003VRUU\\\u0003IRU\u0003KROGLQJ\u0003RXW\u0003RQ\u0003\\RX\u000f\u0003EXW\u0003WKH\u0003PRYLH\u0003LV\u0003KDUGO\\\u0003HYHU\u0003DV\u0003 JRRG\u0003DV\u0003WKH\u0003ERRN\u0003DQ\\ZD\\\u000f\u0003ULJKW\"\u0003,Q\u0003DGGLWLRQ\u0003WR\u0003DFWXDO\u0003FRXUVH\u0003PDWHULDOV\u0003IURP\u0003WKH\u0003 8QLYHUVLW\\\u0003RI\u0003,OOLQRLV\u0003DQG\u0003IURP\u0003WKH\u00038QLYHUVLW\\\u0003RI\u0003&DOLIRUQLD\u0003'DYLV\u000f\u0003\\RX\u0003ZLOO\u0003DOVR\u0003\u020cQG\u0003 PDWHULDOV\u0003IURP\u0003&8'$\u00037UDLQLQJ\u00033RGFDVWV\u0003DQG\u0003OLQNV\u0003WR\u0003WKLUG\u0010SDUW\\\u0003WUDLQLQJ\u0003DQG\u0003 FRQVXOWDQF\\\u0003VHUYLFHV\u0011 DR. DOBB\u2019S )RU\u0003PRUH\u0003WKDQ\u0003\u0016\u0013\u0003\\HDUV\u000f\u0003 Dr . Dobb\u2019s \u0003KDV\u0003FRYHUHG\u0003QHDUO\\\u0003HYHU\\\u0003PDMRU\u0003GHYHORS - PHQW\u0003LQ\u0003FRPSXWLQJ\u0003WHFKQRORJ\\\u000f\u0003DQG\u000319,',$\u01e2V\u0003&8'$\u0003LV\u0003QR\u0003H[FHSWLRQ\u0011\u0003$V\u0003SDUW\u0003RI\u0003DQ\u0003 RQJRLQJ\u0003VHULHV\u000f\u0003 Dr . Dobb\u2019s \u0003KDV\u0003SXEOLVKHG\u0003DQ\u0003H[WHQVLYH\u0003VHULHV\u0003RI\u0003DUWLFOHV\u0003FXWWLQJ\u0003D\u0003 EURDG\u0003VZDWK\u0003WKURXJK\u0003WKH\u0003&8'$\u0003ODQGVFDSH\u0011\u0003(QWLWOHG\u0003 CUDA, Supercomputing for the Masses \u000f\u0003WKH\u0003VHULHV\u0003VWDUWV\u0003ZLWK\u0003DQ\u0003LQWURGXFWLRQ\u0003WR\u0003*38\u0003FRPSXWLQJ\u0003DQG\u0003SURJUHVVHV\u0003 Download from www.wowebook.comptg7+(\u0003),1$/\u0003&2817'2:1 /two.lf/four.lf/six.lfTXLFNO\\\u0003IURP\u0003D\u0003\u020cUVW\u0003NHUQHO\u0003WR\u0003RWKHU\u0003SLHFHV\u0003RI\u0003WKH\u0003&8'$\u0003SURJUDPPLQJ\u0003PRGHO\u0011\u00037KH\u0003 DUWLFOHV\u0003LQ\u0003 Dr . Dobb\u2019s \u0003FRYHU\u0003HUURU\u0003KDQGOLQJ\u000f\u0003JOREDO\u0003PHPRU\\\u0003SHUIRUPDQFH\u000f\u0003VKDUHG\u0003 PHPRU\\\u000f\u0003WKH\u0003&8'$\u00039LVXDO\u00033UR\u020cOHU\u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003&8'$\u0010*'%\u000f\u0003DQG\u0003WKH\u0003&8'33\u0003 OLEUDU\\\u0003RI\u0003GDWD\u0010SDUDOOHO\u0003&8'$\u0003SULPLWLYHV\u000f\u0003DV\u0003ZHOO\u0003DV\u0003PDQ\\\u0003RWKHU\u0003WRSLFV\u0011\u00037KLV\u0003VHULHV\u0003 RI\u0003DUWLFOHV\u0003LV\u0003DQ\u0003H[FHOOHQW\u0003SODFH\u0003WR\u0003JHW\u0003DGGLWLRQDO\u0003LQIRUPDWLRQ\u0003DERXW\u0003VRPH\u0003RI\u0003WKH\u0003 PDWHULDO\u0003ZH\u01e2YH\u0003DWWHPSWHG\u0003WR\u0003FRQYH\\\u0003LQ\u0003WKLV\u0003ERRN\u0011\u0003)XUWKHUPRUH\u000f\u0003\\RX\u01e2OO\u0003\u020cQG\u0003SUDF - WLFDO\u0003LQIRUPDWLRQ\u0003FRQFHUQLQJ\u0003VRPH\u0003RI\u0003WKH\u0003WRROV\u0003WKDW\u0003ZH\u01e2YH\u0003RQO\\\u0003KDG\u0003WLPH\u0003WR\u0003JODQFH\u0003 RYHU\u0003LQ\u0003WKLV\u0003WH[W\u000f\u0003VXFK\u0003DV\u0003WKH\u0003SUR\u020cOLQJ\u0003DQG\u0003GHEXJJLQJ\u0003RSWLRQV\u0003DYDLODEOH\u0003WR\u0003\\RX\u0011\u00037KH\u0003 VHULHV\u0003RI\u0003DUWLFOHV\u0003LV\u0003OLQNHG\u0003IURP\u0003WKH\u0003&8'$\u0003=RQH\u0003ZHE\u0003SDJH\u0003EXW\u0003LV\u0003UHDGLO\\\u0003DFFHVVLEOH\u0003 WKURXJK\u0003D\u0003ZHE\u0003VHDUFK\u0003IRU\u0003 Dr Dobbs CUDA \u0011 19,',$\u0003) 25806 \u0014\u0015\u0011\u0016\u0011\u0016\u0003 (YHQ\u0003DIWHU\u0003GLJJLQJ\u0003DURXQG\u0003DOO\u0003RI\u000319,',$\u01e2V\u0003GRFXPHQWDWLRQ\u000f\u0003\\RX\u0003PD\\\u0003\u020cQG\u0003\\RXU - VHOI\u0003ZLWK\u0003DQ\u0003XQDQVZHUHG\u0003RU\u0003SDUWLFXODUO\\\u0003LQWULJXLQJ\u0003TXHVWLRQ\u0011\u00033HUKDSV\u0003\\RX\u01e2UH\u0003 ZRQGHULQJ\u0003ZKHWKHU\u0003DQ\\RQH\u0003HOVH\u0003KDV\u0003VHHQ\u0003VRPH\u0003IXQN\\\u0003EHKDYLRU\u0003\\RX\u01e2UH\u0003H[SH - ULHQFLQJ\u0011\u00032U\u0003PD\\EH\u0003\\RX\u01e2UH\u0003WKURZLQJ\u0003D\u0003&8'$\u0003FHOHEUDWLRQ\u0003SDUW\\\u0003DQG\u0003ZDQWHG\u0003WR\u0003 DVVHPEOH\u0003D\u0003JURXS\u0003RI\u0003OLNH\u0010PLQGHG\u0003LQGLYLGXDOV\u0011\u0003)RU\u0003DQ\\WKLQJ\u0003\\RX\u01e2UH\u0003LQWHUHVWHG\u0003LQ\u0003 DVNLQJ\u000f\u0003ZH\u0003VWURQJO\\\u0003UHFRPPHQG\u0003WKH\u0003IRUXPV\u0003RQ\u000319,',$\u01e2V\u0003ZHEVLWH\u0011\u0003/RFDWHG\u0003DW\u0003 KWWS \u0012\u0012IRUXPV\u0011QYLGLD\u0011FRP\u000f\u0003WKH\u0003IRUXPV\u0003DUH\u0003D\u0003JUHDW\u0003SODFH\u0003WR\u0003DVN\u0003TXHVWLRQV\u0003RI\u0003RWKHU\u0003 &8'$\u0003XVHUV\u0011\u0003,Q\u0003IDFW\u000f\u0003DIWHU\u0003UHDGLQJ\u0003WKLV\u0003ERRN\u000f\u0003\\RX\u01e2UH\u0003LQ\u0003D\u0003SRVLWLRQ\u0003WR\u0003SRWHQWLDOO\\\u0003 KHOS\u0003RWKHUV\u0003LI\u0003\\RX\u0003ZDQW\u0004\u000319,',$\u0003HPSOR\\HHV\u0003UHJXODUO\\\u0003SURZO\u0003WKH\u0003IRUXPV\u000f\u0003WRR\u000f\u0003VR\u0003 WKH\u0003WULFNLHVW\u0003TXHVWLRQV\u0003ZLOO\u0003SURPSW\u0003DXWKRULWDWLYH\u0003DGYLFH\u0003ULJKW\u0003IURP\u0003WKH\u0003VRXUFH\u0011\u0003:H\u0003 DOVR\u0003ORYH\u0003WR\u0003JHW\u0003VXJJHVWLRQV\u0003IRU\u0003QHZ\u0003IHDWXUHV\u0003DQG\u0003IHHGEDFN\u0003RQ\u0003WKH\u0003JRRG\u000f\u0003EDG\u000f\u0003DQG\u0003 XJO\\\u0003WKLQJV\u0003WKDW\u0003ZH\u0003DW\u000319,',$\u0003GR\u0011 &RGH\u00035HVRXUFHV\u0014\u0015\u0011\u0017\u0003 $OWKRXJK\u0003WKH\u000319,',$\u0003*38\u0003&RPSXWLQJ\u00036'.\u0003LV\u0003D\u0003WUHDVXUH\u0003WURYH\u0003RI\u0003KRZ\u0010WR\u0003VDPSOHV\u000f\u0003 LW\u01e2V\u0003QRW\u0003GHVLJQHG\u0003WR\u0003EH\u0003XVHG\u0003IRU\u0003PXFK\u0003PRUH\u0003WKDQ\u0003SHGDJRJ\\\u0011\u0003,I\u0003\\RX\u01e2UH\u0003KXQWLQJ\u0003IRU\u0003 SURGXFWLRQ\u0010FDOLEHU\u000f\u0003&8'$\u0010SRZHUHG\u0003OLEUDULHV\u0003RU\u0003VRXUFH\u0003FRGH\u000f\u0003\\RX\u01e2OO\u0003QHHG\u0003WR\u0003ORRN\u0003D\u0003 ELW\u0003IXUWKHU\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKHUH\u0003LV\u0003D\u0003ODUJH\u0003FRPPXQLW\\\u0003RI\u0003&8'$\u0003GHYHORSHUV\u0003ZKR\u0003KDYH\u0003 SURGXFHG\u0003WRS\u0010QRWFK\u0003VROXWLRQV\u0011\u0003$\u0003FRXSOH\u0003RI\u0003WKHVH\u0003WRROV\u0003DQG\u0003OLEUDULHV\u0003DUH\u0003SUHVHQWHG\u0003 KHUH\u000f\u0003EXW\u0003\\RX\u0003DUH\u0003HQFRXUDJHG\u0003WR\u0003VHDUFK\u0003WKH\u0003:HE\u0003IRU\u0003ZKDWHYHU\u0003VROXWLRQV\u0003\\RX\u0003QHHG\u0011\u0003 $QG\u0003KH\\\u000f\u0003PD\\EH\u0003\\RX\u01e2OO\u0003FRQWULEXWH\u0003VRPH\u0003RI\u0003\\RXU\u0003RZQ\u0003WR\u0003WKH\u0003&8'$\u0003&\u0003FRPPXQLW\\\u0003 VRPH\u0003GD\\\u0004 Download from www.wowebook.comptgCODE RESOURCES /two.lf/four.lf/seven.lf\u0014\u0015\u0011\u0017\u0003&2'(\u00035(6285&(6&8'$\u0003'$7$\u00033$5$//(/\u000335,0,7,9(6\u0003/,%5$5< \u0014\u0015\u0011\u0017\u0011\u0014\u0003 19,',$\u000f\u0003ZLWK\u0003WKH\u0003KHOS\u0003RI\u0003UHVHDUFKHUV\u0003DW\u0003WKH\u00038QLYHUVLW\\\u0003RI\u0003&DOLIRUQLD\u0003'DYLV\u000f\u0003KDV\u0003 UHOHDVHG\u0003D\u0003OLEUDU\\\u0003NQRZQ\u0003DV\u0003WKH\u0003&8'$\u0003'DWD\u00033DUDOOHO\u00033ULPLWLYHV\u0003/LEUDU\\\u0003 &8'33 \u0011\u0003 &8'33\u000f\u0003DV\u0003WKH\u0003QDPH\u0003LQGLFDWHV\u000f\u0003LV\u0003D\u0003OLEUDU\\\u0003RI\u0003GDWD\u0010SDUDOOHO\u0003DOJRULWKP\u0003SULPLWLYHV\u0011\u0003 6RPH\u0003RI\u0003WKHVH\u0003SULPLWLYHV\u0003LQFOXGH\u0003SDUDOOHO\u0003SUH\u020c[\u0010VXP\u0003 scan \u000f\u0003SDUDOOHO\u0003VRUW\u000f\u0003DQG\u0003 SDUDOOHO\u0003UHGXFWLRQ\u0011\u00033ULPLWLYHV\u0003VXFK\u0003DV\u0003WKHVH\u0003IRUP\u0003WKH\u0003IRXQGDWLRQ\u0003RI\u0003D\u0003ZLGH\u0003YDULHW\\\u0003 RI\u0003GDWD\u0010SDUDOOHO\u0003DOJRULWKPV\u000f\u0003LQFOXGLQJ\u0003VRUWLQJ\u000f\u0003VWUHDP\u0003FRPSDFWLRQ\u000f\u0003EXLOGLQJ\u0003 GDWD\u0003VWUXFWXUHV\u000f\u0003DQG\u0003PDQ\\\u0003RWKHUV\u0011\u0003,I\u0003\\RX\u01e2UH\u0003ORRNLQJ\u0003WR\u0003ZULWH\u0003DQ\u0003HYHQ\u0003PRGHUDWHO\\\u0003 FRPSOH[\u0003DOJRULWKPV\u000f\u0003FKDQFHV\u0003DUH\u0003JRRG\u0003WKDW\u0003HLWKHU\u0003&8'33\u0003DOUHDG\\\u0003KDV\u0003ZKDW\u0003\\RX\u0003 QHHG\u0003RU\u0003LW\u0003FDQ\u0003JHW\u0003\\RX\u0003VLJQL\u020cFDQWO\\\u0003FORVHU\u0003WR\u0003ZKHUH\u0003\\RX\u0003ZDQW\u0003WR\u0003EH\u0011\u0003'RZQORDG\u0003LW\u0003DW\u0003 KWWS \u0012\u0012FRGH\u0011JRRJOH\u0011FRP\u0012S\u0012FXGSS\u0011 CULATOOLS \u0014\u0015\u0011\u0017\u0011\u0015\u0003 $V\u0003ZH\u0003PHQWLRQHG\u0003LQ\u00036HFWLRQ\u0003\u0014\u0015\u0011\u0014\u0011\u0016 \u0003&8%/$6\u000f\u000319,',$\u0003SURYLGHV\u0003DQ\u0003LPSOHPHQWDWLRQ\u0003 RI\u0003WKH\u0003%/$6\u0003SDFNDJHG\u0003DORQJ\u0003ZLWK\u0003WKH\u0003&8'$\u00037RRONLW\u0003GRZQORDG\u0011\u0003)RU\u0003UHDGHUV\u0003ZKR\u0003 QHHG\u0003D\u0003EURDGHU\u0003VROXWLRQ\u0003IRU\u0003OLQHDU\u0003DOJHEUD\u000f\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003(0\u00033KRWRQLFV\u01e2\u0003&8'$\u0003 LPSOHPHQWDWLRQ\u0003RI\u0003WKH\u0003LQGXVWU\\\u0010VWDQGDUG\u0003/LQHDU\u0003$OJHEUD\u00033DFNDJH\u0003 /$3$&. \u0011\u0003 ,WV\u0003/$3$&.\u0003LPSOHPHQWDWLRQ\u0003LV\u0003NQRZQ\u0003DV\u0003 CULAtools \u0003DQG\u0003RIIHUV\u0003PRUH\u0003FRPSOH[\u0003 OLQHDU\u0003DOJHEUD\u0003URXWLQHV\u0003WKDW\u0003DUH\u0003EXLOW\u0003RQ\u000319,',$\u01e2V\u0003&8%/$6\u0003WHFKQRORJ\\\u0011\u00037KH\u0003 IUHHO\\\u0003DYDLODEOH\u0003%DVLF\u0003SDFNDJH\u0003RIIHUV\u0003/8\u0003GHFRPSRVLWLRQ\u000f\u000345\u0003IDFWRUL]DWLRQ\u000f\u0003OLQHDU\u0003 V\\VWHP\u0003VROYHU\u000f\u0003DQG\u0003VLQJXODU\u0003YDOXH\u0003GHFRPSRVLWLRQ\u000f\u0003DV\u0003ZHOO\u0003DV\u0003OHDVW\u0003VTXDUHV\u0003DQG\u0003 FRQVWUDLQHG\u0003OHDVW\u0003VTXDUHV\u0003VROYHUV\u0011\u0003<RX\u0003FDQ\u0003REWDLQ\u0003WKH\u0003%DVLF\u0003GRZQORDG\u0003DW\u0003 ZZZ\u0011FXODWRROV\u0011FRP\u0012YHUVLRQV\u0012EDVLF\u0011 \u0003<RX\u0003ZLOO\u0003DOVR\u0003QRWLFH\u0003WKDW\u0003(0\u00033KRWRQLFV\u0003RIIHUV\u0003 3UHPLXP\u0003DQG\u0003&RPPHUFLDO\u0003OLFHQVHV\u000f\u0003ZKLFK\u0003FRQWDLQ\u0003D\u0003IDU\u0003JUHDWHU\u0003IUDFWLRQ\u0003RI\u0003WKH\u0003 /$3$&.\u0003URXWLQHV\u000f\u0003DV\u0003ZHOO\u0003DV\u0003OLFHQVLQJ\u0003WHUPV\u0003WKDW\u0003ZLOO\u0003DOORZ\u0003\\RX\u0003WR\u0003GLVWULEXWH\u0003\\RXU\u0003 RZQ\u0003FRPPHUFLDO\u0003DSSOLFDWLRQV\u0003EDVHG\u0003RQ\u0003&8/$WRROV\u0011 LANGUAGE WRAPPERS \u0014\u0015\u0011\u0017\u0011\u0016\u0003 7KLV\u0003ERRN\u0003KDV\u0003SULPDULO\\\u0003EHHQ\u0003FRQFHUQHG\u0003ZLWK\u0003&\u0003DQG\u0003&\u000e\u000e\u000f\u0003EXW\u0003FOHDUO\\\u0003KXQGUHGV\u0003 RI\u0003SURMHFWV\u0003H[LVW\u0003WKDW\u0003GRQ\u01e2W\u0003HPSOR\\\u0003WKHVH\u0003ODQJXDJHV\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKLUG\u0003SDUWLHV\u0003 KDYH\u0003ZULWWHQ\u0003ZUDSSHUV\u0003WR\u0003DOORZ\u0003DFFHVV\u0003WR\u0003&8'$\u0003WHFKQRORJ\\\u0003IURP\u0003ODQJXDJHV\u0003QRW\u0003 RI\u020cFLDOO\\\u0003VXSSRUWHG\u0003E\\\u000319,',$\u0011\u000319,',$\u0003LWVHOI\u0003SURYLGHV\u0003)2575$1\u0003ELQGLQJV\u0003IRU\u0003 LWV\u0003&8%/$6\u0003OLEUDU\\\u000f\u0003EXW\u0003\\RX\u0003FDQ\u0003DOVR\u0003\u020cQG\u0003-DYD\u0003ELQGLQJV\u0003IRU\u0003VHYHUDO\u0003RI\u0003WKH\u0003&8'$\u0003 OLEUDULHV\u0003DW\u0003ZZZ\u0011MFXGD\u0011RUJ\u0011\u0003/LNHZLVH\u000f\u00033\\WKRQ\u0003ZUDSSHUV\u0003WR\u0003DOORZ\u0003WKH\u0003XVH\u0003RI\u0003&8'$\u0003&\u0003 NHUQHOV\u0003IURP\u00033\\WKRQ\u0003DSSOLFDWLRQV\u0003DUH\u0003DYDLODEOH\u0003IURP\u0003WKH\u00033\\&8'$\u0003SURMHFW\u0003DW\u0003 Download from www.wowebook.comptg7+(\u0003),1$/\u0003&2817'2:1 /two.lf/four.lf/eight.lfKWWS \u0012\u0012PDWKHPD\u0011WLFLDQ\u0011GH\u0012VRIWZDUH\u0012S\\FXGD\u0011\u0003)LQDOO\\\u000f\u0003WKHUH\u0003DUH\u0003ELQGLQJV\u0003IRU\u0003 WKH\u00030LFURVRIW\u0003\u00111(7\u0003HQYLURQPHQW\u0003DYDLODEOH\u0003IURP\u0003WKH\u0003&8'$\u00111(7\u0003SURMHFW\u0003DW\u0003 ZZZ\u0011KRRSRH\u0010FORXG\u0011FRP\u00126ROXWLRQV\u0012&8'$\u00111(7\u0011 \u0003 $OWKRXJK\u0003WKHVH\u0003SURMHFWV\u0003DUH\u0003QRW\u0003RI\u020cFLDOO\\\u0003VXSSRUWHG\u0003E\\\u000319,',$\u000f\u0003WKH\\\u0003KDYH\u0003EHHQ\u0003 DURXQG\u0003IRU\u0003VHYHUDO\u0003YHUVLRQV\u0003RI\u0003&8'$\u000f\u0003DUH\u0003DOO\u0003IUHHO\\\u0003DYDLODEOH\u000f\u0003DQG\u0003HDFK\u0003KDV\u0003PDQ\\\u0003 VXFFHVVIXO\u0003FXVWRPHUV\u0011\u00037KH\u0003PRUDO\u0003RI\u0003WKLV\u0003VWRU\\\u0003LV\u000f\u0003LI\u0003\\RXU\u0003ODQJXDJH\u0003RI\u0003FKRLFH\u0003 RU\u0003 \\RXU\u0003ERVV\u01e2V\u0003FKRLFH \u0003LV\u0003QRW\u0003&\u0003RU\u0003&\u000e\u000e\u000f\u0003\\RX\u0003VKRXOG\u0003QRW\u0003UXOH\u0003RXW\u0003*38\u0003FRPSXWLQJ\u0003XQWLO\u0003 \\RX\u01e2YH\u0003\u020cUVW\u0003ORRNHG\u0003WR\u0003VHH\u0003ZKHWKHU\u0003WKH\u0003QHFHVVDU\\\u0003ELQGLQJV\u0003DUH\u0003DYDLODEOH\u0011\u0003 &KDSWHU\u00035HYLHZ\u0014\u0015\u0011\u0018\u0003 $QG\u0003WKHUH\u0003\\RX\u0003KDYH\u0003LW\u0011\u0003(YHQ\u0003DIWHU\u0003\u0014\u0014\u0003FKDSWHUV\u0003RI\u0003&8'$\u0003&\u000f\u0003WKHUH\u0003DUH\u0003VWLOO\u0003ORDGV\u0003RI\u0003 UHVRXUFHV\u0003WR\u0003GRZQORDG\u000f\u0003UHDG\u000f\u0003ZDWFK\u000f\u0003DQG\u0003FRPSLOH\u0011\u00037KLV\u0003LV\u0003D\u0003UHPDUNDEO\\\u0003LQWHUHVWLQJ\u0003 WLPH\u0003WR\u0003EH\u0003OHDUQLQJ\u0003*38\u0003FRPSXWLQJ\u000f\u0003DV\u0003WKH\u0003HUD\u0003RI\u0003KHWHURJHQHRXV\u0003FRPSXWLQJ\u0003 SODWIRUPV\u0003PDWXUHV\u0011\u0003:H\u0003KRSH\u0003WKDW\u0003\\RX\u0003KDYH\u0003HQMR\\HG\u0003OHDUQLQJ\u0003DERXW\u0003RQH\u0003RI\u0003WKH\u0003 PRVW\u0003SHUYDVLYH\u0003SDUDOOHO\u0003SURJUDPPLQJ\u0003HQYLURQPHQWV\u0003LQ\u0003H[LVWHQFH\u0011\u00030RUHRYHU\u000f\u0003ZH\u0003 KRSH\u0003WKDW\u0003\\RX\u0003OHDYH\u0003WKLV\u0003H[SHULHQFH\u0003H[FLWHG\u0003DERXW\u0003WKH\u0003SRVVLELOLWLHV\u0003WR\u0003GHYHORS\u0003QHZ\u0003 DQG\u0003H[FLWLQJ\u0003PHDQV\u0003IRU\u0003LQWHUDFWLQJ\u0003ZLWK\u0003FRPSXWHUV\u0003DQG\u0003IRU\u0003SURFHVVLQJ\u0003WKH\u0003HYHU\u0010 LQFUHDVLQJ\u0003DPRXQW\u0003RI\u0003LQIRUPDWLRQ\u0003DYDLODEOH\u0003WR\u0003\\RXU\u0003VRIWZDUH\u0011\u0003,W\u01e2V\u0003\\RXU\u0003LGHDV\u0003DQG\u0003WKH\u0003 DPD]LQJ\u0003WHFKQRORJLHV\u0003\\RX\u0003GHYHORS\u0003WKDW\u0003ZLOO\u0003SXVK\u0003*38\u0003FRPSXWLQJ\u0003WR\u0003WKH\u0003QH[W\u0003OHYHO\u0011\u0003 Download from www.wowebook.comptg /two.lf/four.lf/nine.lfAppendix Advanced Atomics &KDSWHU\u0003 \u0003FRYHUHG\u0003VRPH\u0003RI\u0003WKH\u0003ZD\\V\u0003LQ\u0003ZKLFK\u0003ZH\u0003FDQ\u0003XVH\u0003DWRPLF\u0003RSHUDWLRQV\u0003WR\u0003 HQDEOH\u0003KXQGUHGV\u0003RI\u0003WKUHDGV\u0003WR\u0003VDIHO\\\u0003PDNH\u0003FRQFXUUHQW\u0003PRGL\u020cFDWLRQV\u0003WR\u0003VKDUHG\u0003 GDWD\u0011\u0003,Q\u0003WKLV\u0003DSSHQGL[\u000f\u0003ZH\u01e2OO\u0003ORRN\u0003DW\u0003DQ\u0003DGYDQFHG\u0003PHWKRG\u0003IRU\u0003XVLQJ\u0003DWRPLFV\u0003WR\u0003 LPSOHPHQW\u0003ORFNLQJ\u0003GDWD\u0003VWUXFWXUHV\u0011\u00032Q\u0003LWV\u0003VXUIDFH\u000f\u0003WKLV\u0003WRSLF\u0003GRHV\u0003QRW\u0003VHHP\u0003PXFK\u0003 PRUH\u0003FRPSOLFDWHG\u0003WKDQ\u0003DQ\\WKLQJ\u0003HOVH\u0003ZH\u01e2YH\u0003H[DPLQHG\u0011\u0003$QG\u0003LQ\u0003UHDOLW\\\u000f\u0003WKLV\u0003LV\u0003DFFX - UDWH\u0011\u0003<RX\u01e2YH\u0003OHDUQHG\u0003D\u0003ORW\u0003RI\u0003FRPSOH[\u0003WRSLFV\u0003WKURXJK\u0003WKLV\u0003ERRN\u000f\u0003DQG\u0003ORFNLQJ\u0003GDWD\u0003 VWUXFWXUHV\u0003DUH\u0003QR\u0003PRUH\u0003FKDOOHQJLQJ\u0003WKDQ\u0003WKHVH\u0011\u00036R\u000f\u0003ZK\\\u0003LV\u0003WKLV\u0003PDWHULDO\u0003KLGLQJ\u0003LQ\u0003 WKH\u0003DSSHQGL[\"\u0003:H\u0003GRQ\u01e2W\u0003ZDQW\u0003WR\u0003UHYHDO\u0003DQ\\\u0003VSRLOHUV\u000f\u0003VR\u0003LI\u0003\\RX\u01e2UH\u0003LQWULJXHG\u000f\u0003UHDG\u0003RQ\u000f\u0003 DQG\u0003ZH\u01e2OO\u0003GLVFXVV\u0003WKLV\u0003WKURXJK\u0003WKH\u0003FRXUVH\u0003RI\u0003WKH\u0003DSSHQGL[\u0011 Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/five.lf/zero.lf'RW\u00033URGXFW\u00035HYLVLWHG$\u0011\u0014\u0003 ,Q\u0003&KDSWHU\u0003\u0018\u000f\u0003ZH\u0003ORRNHG\u0003DW\u0003WKH\u0003LPSOHPHQWDWLRQ\u0003RI\u0003D\u0003YHFWRU\u0003GRW\u0003SURGXFW\u0003XVLQJ\u0003&8'$\u0003 &\u0011\u00037KLV\u0003DOJRULWKP\u0003ZDV\u0003RQH\u0003RI\u0003D\u0003ODUJH\u0003IDPLO\\\u0003RI\u0003DOJRULWKPV\u0003NQRZQ\u0003DV\u0003 reductions \u0011\u0003,I\u0003 \\RX\u0003UHFDOO\u000f\u0003WKH\u0003DOJRULWKP\u0003FRPSXWHG\u0003WKH\u0003GRW\u0003SURGXFW\u0003RI\u0003WZR\u0003LQSXW\u0003YHFWRUV\u0003E\\\u0003GRLQJ\u0003 WKH\u0003IROORZLQJ (DFK\u0003WKUHDG\u0003LQ\u0003HDFK\u0003EORFN\u0003PXOWLSOLHV\u0003WZR\u0003FRUUHVSRQGLQJ\u0003HOHPHQWV\u0003RI\u0003WKH\u0003LQSXW\u0003\u0014\u0011\u0003 YHFWRUV\u0003DQG\u0003VWRUHV\u0003WKH\u0003SURGXFWV\u0003LQ\u0003VKDUHG\u0003PHPRU\\\u0011 $OWKRXJK\u0003D\u0003EORFN\u0003KDV\u0003PRUH\u0003WKDQ\u0003RQH\u0003SURGXFW\u000f\u0003D\u0003WKUHDG\u0003DGGV\u0003WZR\u0003RI\u0003WKH\u0003\u0015\u0011\u0003 SURGXFWV\u0003DQG\u0003VWRUHV\u0003WKH\u0003UHVXOW\u0003EDFN\u0003WR\u0003VKDUHG\u0003PHPRU\\\u0011\u0003(DFK\u0003VWHS\u0003UHVXOWV\u0003 LQ\u0003KDOI\u0003DV\u0003PDQ\\\u0003YDOXHV\u0003DV\u0003LW\u0003VWDUWHG\u0003ZLWK\u0003 WKLV\u0003LV\u0003ZKHUH\u0003WKH\u0003WHUP\u0003 reduction FRPHV\u0003IURP :KHQ\u0003HYHU\\\u0003EORFN\u0003KDV\u0003D\u0003\u020cQDO\u0003VXP\u000f\u0003HDFK\u0003RQH\u0003ZULWHV\u0003LWV\u0003YDOXH\u0003WR\u0003JOREDO\u0003PHPRU\\\u0003\u0016\u0011\u0003 DQG\u0003H[LWV\u0011 ,I\u0003WKH\u0003NHUQHO\u0003UDQ\u0003ZLWK\u0003\u0017\u0011\u0003 N\u0003SDUDOOHO\u0003EORFNV\u000f\u0003WKH\u0003&38\u0003VXPV\u0003WKHVH\u0003UHPDLQLQJ\u0003 N YDOXHV\u0003WR\u0003JHQHUDWH\u0003WKH\u0003\u020cQDO\u0003GRW\u0003SURGXFW\u0011 7KLV\u0003KLJK\u0010OHYHO\u0003ORRN\u0003DW\u0003WKH\u0003GRW\u0003SURGXFW\u0003DOJRULWKP\u0003LV\u0003LQWHQGHG\u0003WR\u0003EH\u0003UHYLHZ\u000f\u0003VR\u0003LI\u0003 LW\u01e2V\u0003EHHQ\u0003D\u0003ZKLOH\u0003RU\u0003\\RX\u01e2YH\u0003KDG\u0003D\u0003FRXSOH\u0003JODVVHV\u0003RI\u0003&KDUGRQQD\\\u000f\u0003LW\u0003PD\\\u0003EH\u0003ZRUWK\u0003 WKH\u0003WLPH\u0003WR\u0003UHYLHZ\u0003&KDSWHU\u0003\u0018\u0011\u0003,I\u0003\\RX\u0003IHHO\u0003FRPIRUWDEOH\u0003HQRXJK\u0003ZLWK\u0003WKH\u0003GRW\u0003SURGXFW\u0003 FRGH\u0003WR\u0003FRQWLQXH\u000f\u0003GUDZ\u0003\\RXU\u0003DWWHQWLRQ\u0003WR\u0003VWHS\u0003\u0017\u0003LQ\u0003WKH\u0003DOJRULWKP\u0011\u0003$OWKRXJK\u0003LW\u0003 GRHVQ\u01e2W\u0003LQYROYH\u0003FRS\\LQJ\u0003PXFK\u0003GDWD\u0003WR\u0003WKH\u0003KRVW\u0003RU\u0003SHUIRUPLQJ\u0003PDQ\\\u0003FDOFXOD - WLRQV\u0003RQ\u0003WKH\u0003&38\u000f\u0003PRYLQJ\u0003WKH\u0003FRPSXWDWLRQ\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0003WR\u0003\u020cQLVK\u0003LV\u0003LQGHHG\u0003DV\u0003 DZNZDUG\u0003DV\u0003LW\u0003VRXQGV\u0011\u0003 %XW\u0003LW\u01e2V\u0003PRUH\u0003WKDQ\u0003DQ\u0003LVVXH\u0003RI\u0003DQ\u0003DZNZDUG\u0003VWHS\u0003WR\u0003WKH\u0003DOJRULWKP\u0003RU\u0003WKH\u0003LQHOHJDQFH\u0003 RI\u0003WKH\u0003VROXWLRQ\u0011\u0003&RQVLGHU\u0003D\u0003VFHQDULR\u0003ZKHUH\u0003D\u0003GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003LV\u0003MXVW\u0003RQH\u0003 VWHS\u0003LQ\u0003D\u0003ORQJ\u0003VHTXHQFH\u0003RI\u0003RSHUDWLRQV\u0011\u0003,I\u0003\\RX\u0003ZDQW\u0003WR\u0003SHUIRUP\u0003 every \u0003RSHUDWLRQ\u0003RQ\u0003 WKH\u0003*38\u0003EHFDXVH\u0003\\RXU\u0003&38\u0003LV\u0003EXV\\\u0003ZLWK\u0003RWKHU\u0003WDVNV\u0003RU\u0003FRPSXWDWLRQV\u000f\u0003\\RX\u01e2UH\u0003RXW\u0003 RI\u0003OXFN\u0011\u0003$V\u0003LW\u0003VWDQGV\u000f\u0003\\RX\u01e2OO\u0003EH\u0003IRUFHG\u0003WR\u0003VWRS\u0003FRPSXWLQJ\u0003RQ\u0003WKH\u0003*38\u000f\u0003FRS\\\u0003LQWHU - PHGLDWH\u0003UHVXOWV\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u000f\u0003\u020cQLVK\u0003WKH\u0003FRPSXWDWLRQ\u0003ZLWK\u0003WKH\u0003&38\u000f\u0003DQG\u0003\u020cQDOO\\\u0003 XSORDG\u0003WKDW\u0003UHVXOW\u0003EDFN\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003UHVXPH\u0003FRPSXWLQJ\u0003ZLWK\u0003\\RXU\u0003QH[W\u0003NHUQHO\u0011 6LQFH\u0003WKLV\u0003LV\u0003DQ\u0003DSSHQGL[\u0003RQ\u0003DWRPLFV\u0003DQG\u0003ZH\u0003KDYH\u0003JRQH\u0003WR\u0003VXFK\u0003OHQJWKV\u0003WR\u0003H[SODLQ\u0003 ZKDW\u0003D\u0003SDLQ\u0003RXU\u0003RULJLQDO\u0003GRW\u0003SURGXFW\u0003DOJRULWKP\u0003LV\u000f\u0003\\RX\u0003VKRXOG\u0003VHH\u0003ZKHUH\u0003ZH\u01e2UH\u0003 KHDGLQJ\u0011\u0003:H\u0003LQWHQG\u0003WR\u0003\u020c[\u0003RXU\u0003GRW\u0003SURGXFW\u0003XVLQJ\u0003DWRPLFV\u0003VR\u0003WKH\u0003HQWLUH\u0003FRPSXWD - WLRQ\u0003FDQ\u0003VWD\\\u0003RQ\u0003WKH\u0003*38\u000f\u0003OHDYLQJ\u0003\\RXU\u0003&38\u0003IUHH\u0003WR\u0003SHUIRUP\u0003RWKHU\u0003WDVNV\u0011\u0003,GHDOO\\\u000f\u0003 Download from www.wowebook.comptg /two.lf/five.lf/one.lf$\u0011\u0014\u0003'27\u0003352'8&7\u00035(9,6,7('LQVWHDG\u0003RI\u0003H[LWLQJ\u0003WKH\u0003NHUQHO\u0003LQ\u0003VWHS\u0003\u0016\u0003DQG\u0003UHWXUQLQJ\u0003WR\u0003WKH\u0003&38\u0003LQ\u0003VWHS\u0003\u0017\u000f\u0003ZH\u0003ZDQW\u0003 HDFK\u0003EORFN\u0003WR\u0003DGG\u0003LWV\u0003\u020cQDO\u0003UHVXOW\u0003WR\u0003D\u0003WRWDO\u0003LQ\u0003JOREDO\u0003PHPRU\\\u0011\u0003,I\u0003HDFK\u0003YDOXH\u0003ZHUH\u0003 DGGHG\u0003DWRPLFDOO\\\u000f\u0003ZH\u0003ZRXOG\u0003QRW\u0003KDYH\u0003WR\u0003ZRUU\\\u0003DERXW\u0003SRWHQWLDO\u0003FROOLVLRQV\u0003RU\u0003LQGH - WHUPLQDWH\u0003UHVXOWV\u0011\u00036LQFH\u0003ZH\u0003KDYH\u0003DOUHDG\\\u0003XVHG\u0003DQ\u0003 atomicAdd() \u0003RSHUDWLRQ\u0003LQ\u0003WKH\u0003 KLVWRJUDP\u0003RSHUDWLRQ\u000f\u0003WKLV\u0003VHHPV\u0003OLNH\u0003DQ\u0003REYLRXV\u0003FKRLFH\u0011 8QIRUWXQDWHO\\\u000f\u0003SULRU\u0003WR\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0015\u0011\u0013\u000f\u0003 atomicAdd() RSHUDWHG\u0003RQO\\\u0003 RQ\u0003LQWHJHUV\u0011\u0003$OWKRXJK\u0003WKLV\u0003PLJKW\u0003EH\u0003\u020cQH\u0003LI\u0003\\RX\u0003SODQ\u0003WR\u0003FRPSXWH\u0003GRW\u0003SURGXFWV\u0003RI\u0003 YHFWRUV\u0003ZLWK\u0003LQWHJHU\u0003FRPSRQHQWV\u000f\u0003LW\u0003LV\u0003VLJQL\u020cFDQWO\\\u0003PRUH\u0003FRPPRQ\u0003WR\u0003XVH\u0003\u020dRDWLQJ\u0010 SRLQW\u0003FRPSRQHQWV\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003PDMRULW\\\u0003RI\u000319,',$\u0003KDUGZDUH\u0003GRHV\u0003QRW\u0003VXSSRUW\u0003 DWRPLF\u0003DULWKPHWLF\u0003RQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003QXPEHUV\u0004\u0003%XW\u0003WKHUH\u01e2V\u0003D\u0003UHDVRQDEOH\u0003H[SODQD - WLRQ\u0003IRU\u0003WKLV\u000f\u0003VR\u0003GRQ\u01e2W\u0003WKURZ\u0003\\RXU\u0003*38\u0003LQ\u0003WKH\u0003JDUEDJH\u0003MXVW\u0003\\HW\u0011 $WRPLF\u0003RSHUDWLRQV\u0003RQ\u0003D\u0003YDOXH\u0003LQ\u0003PHPRU\\\u0003JXDUDQWHH\u0003RQO\\\u0003WKDW\u0003HDFK\u0003WKUHDG\u01e2V\u0003UHDG\u0010 PRGLI\\\u0010ZULWH\u0003VHTXHQFH\u0003ZLOO\u0003FRPSOHWH\u0003ZLWKRXW\u0003RWKHU\u0003WKUHDGV\u0003UHDGLQJ\u0003RU\u0003ZULWLQJ\u0003WKH\u0003 WDUJHW\u0003YDOXH\u0003ZKLOH\u0003LQ\u0003SURFHVV\u0011\u00037KHUH\u0003LV\u0003QR\u0003VWLSXODWLRQ\u0003DERXW\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003WKH\u0003 WKUHDGV\u0003ZLOO\u0003SHUIRUP\u0003WKHLU\u0003RSHUDWLRQV\u000f\u0003VR\u0003LQ\u0003WKH\u0003FDVH\u0003RI\u0003WKUHH\u0003WKUHDGV\u0003SHUIRUPLQJ\u0003 DGGLWLRQ\u000f\u0003VRPHWLPHV\u0003WKH\u0003KDUGZDUH\u0003ZLOO\u0003SHUIRUP\u0003 (A+B)+C\u0003DQG\u0003VRPHWLPHV\u0003LW\u0003 ZLOO\u0003FRPSXWH\u0003",
    "7KLV\u0003KLJK\u0010OHYHO\u0003ORRN\u0003DW\u0003WKH\u0003GRW\u0003SURGXFW\u0003DOJRULWKP\u0003LV\u0003LQWHQGHG\u0003WR\u0003EH\u0003UHYLHZ\u000f\u0003VR\u0003LI\u0003 LW\u01e2V\u0003EHHQ\u0003D\u0003ZKLOH\u0003RU\u0003\\RX\u01e2YH\u0003KDG\u0003D\u0003FRXSOH\u0003JODVVHV\u0003RI\u0003&KDUGRQQD\\\u000f\u0003LW\u0003PD\\\u0003EH\u0003ZRUWK\u0003 WKH\u0003WLPH\u0003WR\u0003UHYLHZ\u0003&KDSWHU\u0003\u0018\u0011\u0003,I\u0003\\RX\u0003IHHO\u0003FRPIRUWDEOH\u0003HQRXJK\u0003ZLWK\u0003WKH\u0003GRW\u0003SURGXFW\u0003 FRGH\u0003WR\u0003FRQWLQXH\u000f\u0003GUDZ\u0003\\RXU\u0003DWWHQWLRQ\u0003WR\u0003VWHS\u0003\u0017\u0003LQ\u0003WKH\u0003DOJRULWKP\u0011\u0003$OWKRXJK\u0003LW\u0003 GRHVQ\u01e2W\u0003LQYROYH\u0003FRS\\LQJ\u0003PXFK\u0003GDWD\u0003WR\u0003WKH\u0003KRVW\u0003RU\u0003SHUIRUPLQJ\u0003PDQ\\\u0003FDOFXOD - WLRQV\u0003RQ\u0003WKH\u0003&38\u000f\u0003PRYLQJ\u0003WKH\u0003FRPSXWDWLRQ\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0003WR\u0003\u020cQLVK\u0003LV\u0003LQGHHG\u0003DV\u0003 DZNZDUG\u0003DV\u0003LW\u0003VRXQGV\u0011\u0003 %XW\u0003LW\u01e2V\u0003PRUH\u0003WKDQ\u0003DQ\u0003LVVXH\u0003RI\u0003DQ\u0003DZNZDUG\u0003VWHS\u0003WR\u0003WKH\u0003DOJRULWKP\u0003RU\u0003WKH\u0003LQHOHJDQFH\u0003 RI\u0003WKH\u0003VROXWLRQ\u0011\u0003&RQVLGHU\u0003D\u0003VFHQDULR\u0003ZKHUH\u0003D\u0003GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003LV\u0003MXVW\u0003RQH\u0003 VWHS\u0003LQ\u0003D\u0003ORQJ\u0003VHTXHQFH\u0003RI\u0003RSHUDWLRQV\u0011\u0003,I\u0003\\RX\u0003ZDQW\u0003WR\u0003SHUIRUP\u0003 every \u0003RSHUDWLRQ\u0003RQ\u0003 WKH\u0003*38\u0003EHFDXVH\u0003\\RXU\u0003&38\u0003LV\u0003EXV\\\u0003ZLWK\u0003RWKHU\u0003WDVNV\u0003RU\u0003FRPSXWDWLRQV\u000f\u0003\\RX\u01e2UH\u0003RXW\u0003 RI\u0003OXFN\u0011\u0003$V\u0003LW\u0003VWDQGV\u000f\u0003\\RX\u01e2OO\u0003EH\u0003IRUFHG\u0003WR\u0003VWRS\u0003FRPSXWLQJ\u0003RQ\u0003WKH\u0003*38\u000f\u0003FRS\\\u0003LQWHU - PHGLDWH\u0003UHVXOWV\u0003EDFN\u0003WR\u0003WKH\u0003KRVW\u000f\u0003\u020cQLVK\u0003WKH\u0003FRPSXWDWLRQ\u0003ZLWK\u0003WKH\u0003&38\u000f\u0003DQG\u0003\u020cQDOO\\\u0003 XSORDG\u0003WKDW\u0003UHVXOW\u0003EDFN\u0003WR\u0003WKH\u0003*38\u0003DQG\u0003UHVXPH\u0003FRPSXWLQJ\u0003ZLWK\u0003\\RXU\u0003QH[W\u0003NHUQHO\u0011 6LQFH\u0003WKLV\u0003LV\u0003DQ\u0003DSSHQGL[\u0003RQ\u0003DWRPLFV\u0003DQG\u0003ZH\u0003KDYH\u0003JRQH\u0003WR\u0003VXFK\u0003OHQJWKV\u0003WR\u0003H[SODLQ\u0003 ZKDW\u0003D\u0003SDLQ\u0003RXU\u0003RULJLQDO\u0003GRW\u0003SURGXFW\u0003DOJRULWKP\u0003LV\u000f\u0003\\RX\u0003VKRXOG\u0003VHH\u0003ZKHUH\u0003ZH\u01e2UH\u0003 KHDGLQJ\u0011\u0003:H\u0003LQWHQG\u0003WR\u0003\u020c[\u0003RXU\u0003GRW\u0003SURGXFW\u0003XVLQJ\u0003DWRPLFV\u0003VR\u0003WKH\u0003HQWLUH\u0003FRPSXWD - WLRQ\u0003FDQ\u0003VWD\\\u0003RQ\u0003WKH\u0003*38\u000f\u0003OHDYLQJ\u0003\\RXU\u0003&38\u0003IUHH\u0003WR\u0003SHUIRUP\u0003RWKHU\u0003WDVNV\u0011\u0003,GHDOO\\\u000f\u0003 Download from www.wowebook.comptg /two.lf/five.lf/one.lf$\u0011\u0014\u0003'27\u0003352'8&7\u00035(9,6,7('LQVWHDG\u0003RI\u0003H[LWLQJ\u0003WKH\u0003NHUQHO\u0003LQ\u0003VWHS\u0003\u0016\u0003DQG\u0003UHWXUQLQJ\u0003WR\u0003WKH\u0003&38\u0003LQ\u0003VWHS\u0003\u0017\u000f\u0003ZH\u0003ZDQW\u0003 HDFK\u0003EORFN\u0003WR\u0003DGG\u0003LWV\u0003\u020cQDO\u0003UHVXOW\u0003WR\u0003D\u0003WRWDO\u0003LQ\u0003JOREDO\u0003PHPRU\\\u0011\u0003,I\u0003HDFK\u0003YDOXH\u0003ZHUH\u0003 DGGHG\u0003DWRPLFDOO\\\u000f\u0003ZH\u0003ZRXOG\u0003QRW\u0003KDYH\u0003WR\u0003ZRUU\\\u0003DERXW\u0003SRWHQWLDO\u0003FROOLVLRQV\u0003RU\u0003LQGH - WHUPLQDWH\u0003UHVXOWV\u0011\u00036LQFH\u0003ZH\u0003KDYH\u0003DOUHDG\\\u0003XVHG\u0003DQ\u0003 atomicAdd() \u0003RSHUDWLRQ\u0003LQ\u0003WKH\u0003 KLVWRJUDP\u0003RSHUDWLRQ\u000f\u0003WKLV\u0003VHHPV\u0003OLNH\u0003DQ\u0003REYLRXV\u0003FKRLFH\u0011 8QIRUWXQDWHO\\\u000f\u0003SULRU\u0003WR\u0003FRPSXWH\u0003FDSDELOLW\\\u0003\u0015\u0011\u0013\u000f\u0003 atomicAdd() RSHUDWHG\u0003RQO\\\u0003 RQ\u0003LQWHJHUV\u0011\u0003$OWKRXJK\u0003WKLV\u0003PLJKW\u0003EH\u0003\u020cQH\u0003LI\u0003\\RX\u0003SODQ\u0003WR\u0003FRPSXWH\u0003GRW\u0003SURGXFWV\u0003RI\u0003 YHFWRUV\u0003ZLWK\u0003LQWHJHU\u0003FRPSRQHQWV\u000f\u0003LW\u0003LV\u0003VLJQL\u020cFDQWO\\\u0003PRUH\u0003FRPPRQ\u0003WR\u0003XVH\u0003\u020dRDWLQJ\u0010 SRLQW\u0003FRPSRQHQWV\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003PDMRULW\\\u0003RI\u000319,',$\u0003KDUGZDUH\u0003GRHV\u0003QRW\u0003VXSSRUW\u0003 DWRPLF\u0003DULWKPHWLF\u0003RQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003QXPEHUV\u0004\u0003%XW\u0003WKHUH\u01e2V\u0003D\u0003UHDVRQDEOH\u0003H[SODQD - WLRQ\u0003IRU\u0003WKLV\u000f\u0003VR\u0003GRQ\u01e2W\u0003WKURZ\u0003\\RXU\u0003*38\u0003LQ\u0003WKH\u0003JDUEDJH\u0003MXVW\u0003\\HW\u0011 $WRPLF\u0003RSHUDWLRQV\u0003RQ\u0003D\u0003YDOXH\u0003LQ\u0003PHPRU\\\u0003JXDUDQWHH\u0003RQO\\\u0003WKDW\u0003HDFK\u0003WKUHDG\u01e2V\u0003UHDG\u0010 PRGLI\\\u0010ZULWH\u0003VHTXHQFH\u0003ZLOO\u0003FRPSOHWH\u0003ZLWKRXW\u0003RWKHU\u0003WKUHDGV\u0003UHDGLQJ\u0003RU\u0003ZULWLQJ\u0003WKH\u0003 WDUJHW\u0003YDOXH\u0003ZKLOH\u0003LQ\u0003SURFHVV\u0011\u00037KHUH\u0003LV\u0003QR\u0003VWLSXODWLRQ\u0003DERXW\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003WKH\u0003 WKUHDGV\u0003ZLOO\u0003SHUIRUP\u0003WKHLU\u0003RSHUDWLRQV\u000f\u0003VR\u0003LQ\u0003WKH\u0003FDVH\u0003RI\u0003WKUHH\u0003WKUHDGV\u0003SHUIRUPLQJ\u0003 DGGLWLRQ\u000f\u0003VRPHWLPHV\u0003WKH\u0003KDUGZDUH\u0003ZLOO\u0003SHUIRUP\u0003 (A+B)+C\u0003DQG\u0003VRPHWLPHV\u0003LW\u0003 ZLOO\u0003FRPSXWH\u0003 A+(B+C)\u0011\u00037KLV\u0003LV\u0003DFFHSWDEOH\u0003IRU\u0003LQWHJHUV\u0003EHFDXVH\u0003LQWHJHU\u0003PDWK\u0003LV\u0003 DVVRFLDWLYH\u000f\u0003VR\u0003 (A+B)+C = A+(B+C) \u0011\u0003)ORDWLQJ\u0010SRLQW\u0003DULWKPHWLF\u0003LV\u0003 not\u0003DVVRFLD- WLYH\u0003EHFDXVH\u0003RI\u0003WKH\u0003URXQGLQJ\u0003RI\u0003LQWHUPHGLDWH\u0003UHVXOWV\u000f\u0003VR\u0003 (A+B)+C\u0003RIWHQ\u0003GRHV\u0003 QRW\u0003HTXDO A+(B+C) \u0011\u0003$V\u0003D\u0003UHVXOW\u000f\u0003DWRPLF\u0003DULWKPHWLF\u0003RQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003YDOXHV\u0003LV\u0003RI\u0003 GXELRXV\u0003XWLOLW\\\u0003EHFDXVH\u0003LW\u0003JLYHV\u0003ULVH\u0003WR\u0003QRQGHWHUPLQLVWLF\u0003UHVXOWV\u0003LQ\u0003D\u0003KLJKO\\\u0003PXOWL - WKUHDGHG\u0003HQYLURQPHQW\u0003VXFK\u0003DV\u0003RQ\u0003WKH\u0003*38\u0011\u00037KHUH\u0003DUH\u0003PDQ\\\u0003DSSOLFDWLRQV\u0003ZKHUH\u0003 LW\u0003LV\u0003VLPSO\\\u0003XQDFFHSWDEOH\u0003WR\u0003JHW\u0003WZR\u0003GLIIHUHQW\u0003UHVXOWV\u0003IURP\u0003WZR\u0003UXQV\u0003RI\u0003DQ\u0003DSSOL - FDWLRQ\u000f\u0003VR\u0003WKH\u0003VXSSRUW\u0003RI\u0003\u020dRDWLQJ\u0010SRLQW\u0003DWRPLF\u0003DULWKPHWLF\u0003ZDV\u0003QRW\u0003D\u0003SULRULW\\\u0003IRU\u0003 HDUOLHU\u0003KDUGZDUH\u0011\u0003 +RZHYHU\u000f\u0003LI\u0003ZH\u0003DUH\u0003ZLOOLQJ\u0003WR\u0003WROHUDWH\u0003VRPH\u0003QRQGHWHUPLQLVP\u0003LQ\u0003WKH\u0003UHVXOWV\u000f\u0003ZH\u0003FDQ\u0003 VWLOO\u0003DFFRPSOLVK\u0003WKH\u0003UHGXFWLRQ\u0003HQWLUHO\\\u0003RQ\u0003WKH\u0003*38\u0011\u0003%XW\u0003ZH\u01e2OO\u0003\u020cUVW\u0003QHHG\u0003WR\u0003GHYHORS\u0003 D\u0003ZD\\\u0003WR\u0003ZRUN\u0003DURXQG\u0003WKH\u0003ODFN\u0003RI\u0003DWRPLF\u0003\u020dRDWLQJ\u0010SRLQW\u0003DULWKPHWLF\u0011\u00037KH\u0003VROXWLRQ\u0003 ZLOO\u0003VWLOO\u0003XVH\u0003DWRPLF\u0003RSHUDWLRQV\u000f\u0003EXW\u0003QRW\u0003IRU\u0003WKH\u0003DULWKPHWLF\u0003LWVHOI\u0011 $\u0011\u0014\u0011\u0014\u0003$720,&\u0003/2&.6 7KH\u0003atomicAdd() \u0003IXQFWLRQ\u0003ZH\u0003XVHG\u0003WR\u0003EXLOG\u0003*38\u0003KLVWRJUDPV\u0003SHUIRUPHG\u0003D\u0003 UHDG\u0010PRGLI\\\u0010ZULWH\u0003RSHUDWLRQ\u0003ZLWKRXW\u0003LQWHUUXSWLRQ\u0003IURP\u0003RWKHU\u0003WKUHDGV\u0011\u0003$W\u0003D\u0003ORZ\u0003 OHYHO\u000f\u0003\\RX\u0003FDQ\u0003LPDJLQH\u0003WKH\u0003KDUGZDUH\u0003ORFNLQJ\u0003WKH\u0003WDUJHW\u0003PHPRU\\\u0003ORFDWLRQ\u0003ZKLOH\u0003 WKLV\u0003RSHUDWLRQ\u0003LV\u0003XQGHUZD\\\u000f\u0003DQG\u0003ZKLOH\u0003ORFNHG\u000f\u0003QR\u0003RWKHU\u0003WKUHDGV\u0003FDQ\u0003UHDG\u0003RU\u0003ZULWH\u0003 WKH\u0003YDOXH\u0003DW\u0003WKH\u0003ORFDWLRQ\u0011\u0003,I\u0003ZH\u0003KDG\u0003D\u0003ZD\\\u0003RI\u0003HPXODWLQJ\u0003WKLV\u0003ORFN\u0003LQ\u0003RXU\u0003&8'$\u0003&\u0003 NHUQHOV\u000f\u0003ZH\u0003FRXOG\u0003SHUIRUP\u0003DUELWUDU\\\u0003RSHUDWLRQV\u0003RQ\u0003DQ\u0003DVVRFLDWHG\u0003PHPRU\\\u0003ORFDWLRQ\u0003 Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/five.lf/two.lfRU\u0003GDWD\u0003VWUXFWXUH\u0011\u00037KH\u0003ORFNLQJ\u0003PHFKDQLVP\u0003LWVHOI\u0003ZLOO\u0003RSHUDWH\u0003H[DFWO\\\u0003OLNH\u0003D\u0003W\\SLFDO\u0003 CPU mutex \u0011\u0003,I\u0003\\RX\u0003DUH\u0003XQIDPLOLDU\u0003ZLWK\u0003PXWXDO\u0003H[FOXVLRQ\u0003 mutex \u000f\u0003GRQ\u01e2W\u0003IUHW\u0011\u0003,W\u01e2V\u0003QRW\u0003 DQ\\\u0003PRUH\u0003FRPSOLFDWHG\u0003WKDQ\u0003WKH\u0003WKLQJV\u0003\\RX\u01e2YH\u0003DOUHDG\\\u0003OHDUQHG\u0011 7KH\u0003EDVLF\u0003LGHD\u0003LV\u0003WKDW\u0003ZH\u0003DOORFDWH\u0003D\u0003VPDOO\u0003SLHFH\u0003PHPRU\\\u0003WR\u0003EH\u0003XVHG\u0003DV\u0003D\u0003 mutex \u0011\u0003 7KH\u0003PXWH[\u0003ZLOO\u0003DFW\u0003OLNH\u0003VRPHWKLQJ\u0003RI\u0003D\u0003WUDI\u020cF\u0003VLJQDO\u0003WKDW\u0003JRYHUQV\u0003DFFHVV\u0003WR\u0003VRPH\u0003 UHVRXUFH\u0011\u00037KH\u0003UHVRXUFH\u0003FRXOG\u0003EH\u0003D\u0003GDWD\u0003VWUXFWXUH\u000f\u0003D\u0003EXIIHU\u000f\u0003RU\u0003VLPSO\\\u0003D\u0003PHPRU\\\u0003 ORFDWLRQ\u0003ZH\u0003ZDQW\u0003WR\u0003PRGLI\\\u0003DWRPLFDOO\\\u0011\u0003:KHQ\u0003D\u0003WKUHDG\u0003UHDGV\u0003D\u0003\u0013\u0003IURP\u0003WKH\u0003PXWH[\u000f\u0003 LW\u0003LQWHUSUHWV\u0003WKLV\u0003YDOXH\u0003DV\u0003D\u0003\u01e4JUHHQ\u0003OLJKW\u01e5\u0003LQGLFDWLQJ\u0003WKDW\u0003QR\u0003RWKHU\u0003WKUHDG\u0003LV\u0003XVLQJ\u0003 WKH\u0003PHPRU\\\u0011\u00037KHUHIRUH\u000f\u0003WKH\u0003WKUHDG\u0003LV\u0003IUHH\u0003WR\u0003ORFN\u0003WKH\u0003PHPRU\\\u0003DQG\u0003PDNH\u0003ZKDWHYHU\u0003 FKDQJHV\u0003LW\u0003GHVLUHV\u000f\u0003IUHH\u0003RI\u0003LQWHUIHUHQFH\u0003IURP\u0003RWKHU\u0003WKUHDGV\u0011\u00037R\u0003ORFN\u0003WKH\u0003PHPRU\\\u0003 ORFDWLRQ\u0003LQ\u0003TXHVWLRQ\u000f\u0003WKH\u0003WKUHDG\u0003ZULWHV\u0003D\u0003\u0014\u0003WR\u0003WKH\u0003PXWH[\u0011\u00037KLV\u0003\u0014\u0003ZLOO\u0003DFW\u0003DV\u0003D\u0003\u01e4UHG\u0003 OLJKW\u01e5\u0003IRU\u0003SRWHQWLDOO\\\u0003FRPSHWLQJ\u0003WKUHDGV\u0011\u00037KH\u0003FRPSHWLQJ\u0003WKUHDGV\u0003PXVW\u0003WKHQ\u0003ZDLW\u0003 XQWLO\u0003WKH\u0003RZQHU\u0003KDV\u0003ZULWWHQ\u0003D\u0003\u0013\u0003WR\u0003WKH\u0003PXWH[\u0003EHIRUH\u0003WKH\\\u0003FDQ\u0003DWWHPSW\u0003WR\u0003PRGLI\\\u0003WKH\u0003 ORFNHG\u0003PHPRU\\\u0011\u0003 $\u0003VLPSOH\u0003FRGH\u0003VHTXHQFH\u0003WR\u0003DFFRPSOLVK\u0003WKLV\u0003ORFNLQJ\u0003SURFHVV\u0003PLJKW\u0003ORRN\u0003OLNH\u0003WKLV void lock( void ) { if( *mutex == 0 ) { *mutex = 1; //store a 1 to lock } } 8QIRUWXQDWHO\\\u000f\u0003WKHUH\u01e2V\u0003D\u0003SUREOHP\u0003ZLWK\u0003WKLV\u0003FRGH\u0011\u0003)RUWXQDWHO\\\u000f\u0003LW\u01e2V\u0003D\u0003IDPLOLDU\u0003 SUREOHP \u0003:KDW\u0003KDSSHQV\u0003LI\u0003DQRWKHU\u0003WKUHDG\u0003ZULWHV\u0003D\u0003\u0014\u0003WR\u0003WKH\u0003PXWH[\u0003DIWHU\u0003RXU\u0003WKUHDG\u0003 KDV\u0003UHDG\u0003WKH\u0003YDOXH\u0003WR\u0003EH\u0003]HUR\"\u00037KDW\u0003LV\u000f\u0003ERWK\u0003WKUHDGV\u0003FKHFN\u0003WKH\u0003YDOXH\u0003DW\u0003 mutex DQG\u0003VHH\u0003WKDW\u0003LW\u01e2V\u0003]HUR\u0011\u00037KH\\\u0003WKHQ\u0003ERWK\u0003ZULWH\u0003D\u0003\u0014\u0003WR\u0003WKLV\u0003ORFDWLRQ\u0003WR\u0003VLJQLI\\\u0003WR\u0003RWKHU\u0003 WKUHDGV\u0003WKDW\u0003WKH\u0003VWUXFWXUH\u0003LV\u0003ORFNHG\u0003DQG\u0003XQDYDLODEOH\u0003IRU\u0003PRGL\u020cFDWLRQ\u0011\u0003$IWHU\u0003GRLQJ\u0003 VR\u000f\u0003ERWK\u0003WKUHDGV\u0003WKLQN\u0003WKH\\\u0003RZQ\u0003WKH\u0003DVVRFLDWHG\u0003PHPRU\\\u0003RU\u0003GDWD\u0003VWUXFWXUH\u0003DQG\u0003 EHJLQ\u0003PDNLQJ\u0003XQVDIH\u0003PRGL\u020cFDWLRQV\u0011\u0003&DWDVWURSKH\u0003HQVXHV\u0004\u0003 7KH\u0003RSHUDWLRQ\u0003ZH\u0003ZDQW\u0003WR\u0003FRPSOHWH\u0003LV\u0003IDLUO\\\u0003VLPSOH \u0003:H\u0003QHHG\u0003WR\u0003FRPSDUH\u0003WKH\u0003YDOXH\u0003 DW\u0003mutex\u0003WR\u0003\u0013\u0003DQG\u0003VWRUH\u0003D\u0003\u0014\u0003DW\u0003WKDW\u0003ORFDWLRQ\u0003LI\u0003DQG\u0003RQO\\\u0003LI\u0003WKH\u0003 mutex\u0003ZDV\u0003\u0013\u0011\u00037R\u0003 DFFRPSOLVK\u0003WKLV\u0003FRUUHFWO\\\u000f\u0003WKLV\u0003HQWLUH\u0003RSHUDWLRQ\u0003QHHGV\u0003WR\u0003EH\u0003SHUIRUPHG\u0003DWRPLFDOO\\\u0003VR\u0003 ZH\u0003NQRZ\u0003WKDW\u0003QR\u0003RWKHU\u0003WKUHDG\u0003FDQ\u0003LQWHUIHUH\u0003ZKLOH\u0003RXU\u0003WKUHDG\u0003H[DPLQHV\u0003DQG\u0003XSGDWHV\u0003 WKH\u0003YDOXH\u0003DW\u0003 mutex\u0011\u0003,Q\u0003&8'$\u0003&\u000f\u0003WKLV\u0003RSHUDWLRQ\u0003FDQ\u0003EH\u0003SHUIRUPHG\u0003ZLWK\u0003WKH\u0003IXQFWLRQ\u0003 atomicCAS() \u000f\u0003DQ\u0003DWRPLF\u0003FRPSDUH\u0010DQG\u0010VZDS\u0011\u00037KH\u0003IXQFWLRQ\u0003 \u0003atomicCAS() \u0003WDNHV\u0003 D\u0003SRLQWHU\u0003WR\u0003PHPRU\\\u000f\u0003D\u0003YDOXH\u0003ZLWK\u0003ZKLFK\u0003WR\u0003FRPSDUH\u0003WKH\u0003YDOXH\u0003DW\u0003WKDW\u0003ORFDWLRQ\u000f\u0003DQG\u0003D\u0003 YDOXH\u0003WR\u0003VWRUH\u0003LQ\u0003WKDW\u0003ORFDWLRQ\u0003LI\u0003WKH\u0003FRPSDULVRQ\u0003LV\u0003VXFFHVVIXO\u0011\u00038VLQJ\u0003WKLV\u0003RSHUDWLRQ\u000f\u0003 ZH\u0003FDQ\u0003LPSOHPHQW\u0003D\u0003*38\u0003ORFN\u0003IXQFWLRQ\u0003DV\u0003IROORZV Download from www.wowebook.comptg /two.lf/five.lf/three.lf$\u0011\u0014\u0003'27\u0003352'8&7\u00035(9,6,7(' __device__ void lock( void ) { while( atomicCAS( mutex, 0, 1 ) != 0 ); } 7KH\u0003FDOO\u0003WR\u0003 atomicCAS() \u0003UHWXUQV\u0003WKH\u0003YDOXH\u0003WKDW\u0003LW\u0003IRXQG\u0003DW\u0003WKH\u0003DGGUHVV\u0003 mutex\u0011\u0003 $V\u0003D\u0003UHVXOW\u000f\u0003WKH\u0003 while()\u0003ORRS\u0003ZLOO\u0003FRQWLQXH\u0003WR\u0003UXQ\u0003XQWLO\u0003 atomicCAS() \u0003VHHV\u0003D\u0003\u0013\u0003 DW\u0003mutex\u0011\u0003:KHQ\u0003LW\u0003VHHV\u0003D\u0003\u0013\u000f\u0003WKH\u0003FRPSDULVRQ\u0003LV\u0003VXFFHVVIXO\u000f\u0003DQG\u0003WKH\u0003WKUHDG\u0003ZULWHV\u0003 D\u0003\u0014\u0003WR\u0003mutex\u0011\u0003(VVHQWLDOO\\\u000f\u0003WKH\u0003WKUHDG\u0003ZLOO\u0003VSLQ\u0003LQ\u0003WKH\u0003 while() ORRS\u0003XQWLO\u0003LW\u0003KDV\u0003 VXFFHVVIXOO\\\u0003ORFNHG\u0003WKH\u0003GDWD\u0003VWUXFWXUH\u0011\u0003:H\u01e2OO\u0003XVH\u0003WKLV\u0003ORFNLQJ\u0003PHFKDQLVP\u0003WR\u0003 LPSOHPHQW\u0003RXU\u0003*38\u0003KDVK\u0003WDEOH\u0011\u0003%XW\u0003\u020cUVW\u000f\u0003ZH\u0003GUHVV\u0003WKH\u0003FRGH\u0003XS\u0003LQ\u0003D\u0003VWUXFWXUH\u0003VR\u0003LW\u0003 ZLOO\u0003EH\u0003FOHDQHU\u0003WR\u0003XVH\u0003LQ\u0003WKH\u0003GRW\u0003SURGXFW\u0003DSSOLFDWLRQ struct Lock { int *mutex; Lock( void ) { int state = 0; HANDLE_ERROR( cudaMalloc( ( void**)& mutex, sizeof(int) ) ); HANDLE_ERROR( cudaMemcpy( mutex, &state, sizeof(int), cudaMemcpyHostToDevice ) ); } ~Lock( void ) { cudaFree( mutex ); } __device__ void lock( void ) { while( atomicCAS( mutex, 0, 1 ) != 0 ); } __device__ void unlock( void ) { atomicExch( mutex, 1 ); } }; 1RWLFH\u0003WKDW\u0003ZH\u0003UHVWRUH\u0003WKH\u0003YDOXH\u0003RI\u0003 mutex\u0003ZLWK\u0003atomicExch( mutex, 1 ) \u0011\u0003 7KH\u0003IXQFWLRQ\u0003 atomicExch() \u0003UHDGV\u0003WKH\u0003YDOXH\u0003WKDW\u0003LV\u0003ORFDWHG\u0003DW\u0003 mutex\u000f\u0003H[FKDQJHV\u0003 Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/five.lf/four.lfLW\u0003ZLWK\u0003WKH\u0003VHFRQG\u0003DUJXPHQW\u0003 D\u0003\u0014\u0003LQ\u0003WKLV\u0003FDVH \u000f\u0003DQG\u0003UHWXUQV\u0003WKH\u0003RULJLQDO\u0003YDOXH\u0003LW\u0003 UHDG\u0011\u0003:K\\\u0003ZRXOG\u0003ZH\u0003XVH\u0003DQ\u0003DWRPLF\u0003IXQFWLRQ\u0003IRU\u0003WKLV\u0003UDWKHU\u0003WKDQ\u0003WKH\u0003PRUH\u0003REYLRXV\u0003 PHWKRG\u0003WR\u0003UHVHW\u0003WKH\u0003YDOXH\u0003DW\u0003 mutex\" *mutex = 1; ,I\u0003\\RX\u01e2UH\u0003H[SHFWLQJ\u0003VRPH\u0003VXEWOH\u000f\u0003KLGGHQ\u0003UHDVRQ\u0003ZK\\\u0003WKLV\u0003PHWKRG\u0003IDLOV\u000f\u0003ZH\u0003KDWH\u0003WR\u0003 GLVDSSRLQW\u0003\\RX\u000f\u0003EXW\u0003WKLV\u0003ZRXOG\u0003ZRUN\u0003DV\u0003ZHOO\u0011\u00036R\u000f\u0003ZK\\\u0003QRW\u0003XVH\u0003WKLV\u0003PRUH\u0003REYLRXV\u0003 PHWKRG\"\u0003$WRPLF\u0003WUDQVDFWLRQV\u0003DQG\u0003JHQHULF\u0003JOREDO\u0003PHPRU\\\u0003RSHUDWLRQV\u0003IROORZ\u0003 GLIIHUHQW\u0003SDWKV\u0003WKURXJK\u0003WKH\u0003*38\u0011\u00038VLQJ\u0003ERWK\u0003DWRPLFV\u0003DQG\u0003VWDQGDUG\u0003JOREDO\u0003PHPRU\\\u0003 RSHUDWLRQV\u0003FRXOG\u0003WKHUHIRUH\u0003OHDG\u0003WR\u0003DQ\u0003 unlock() \u0003VHHPLQJ\u0003RXW\u0003RI\u0003V\\QF\u0003ZLWK\u0003D\u0003 VXEVHTXHQW\u0003DWWHPSW\u0003WR\u0003 lock()\u0003WKH\u0003PXWH[\u0011\u00037KH\u0003EHKDYLRU\u0003ZRXOG\u0003VWLOO\u0003EH\u0003IXQFWLRQ - DOO\\\u0003FRUUHFW\u000f\u0003EXW\u0003WR\u0003HQVXUH\u0003FRQVLVWHQWO\\\u0003LQWXLWLYH\u0003EHKDYLRU\u0003IURP\u0003WKH\u0003DSSOLFDWLRQ\u01e2V\u0003 SHUVSHFWLYH\u000f\u0003LW\u01e2V\u0003EHVW\u0003WR\u0003XVH\u0003WKH\u0003VDPH\u0003SDWKZD\\\u0003IRU\u0003DOO\u0003DFFHVVHV\u0003WR\u0003WKH\u0003PXWH[\u0011\u0003 %HFDXVH\u0003ZH\u01e2UH\u0003UHTXLUHG\u0003WR\u0003XVH\u0003DQ\u0003DWRPLF\u0003WR\u0003ORFN\u0003WKH\u0003UHVRXUFH\u000f\u0003ZH\u0003KDYH\u0003FKRVHQ\u0003WR\u0003 DOVR\u0003XVH\u0003DQ\u0003DWRPLF\u0003WR\u0003XQORFN\u0003WKH\u0003UHVRXUFH\u0011 $\u0011\u0014\u0011\u0015\u0003'27\u0003352'8&7\u00035('8; \u0003$720,&\u0003/2&.6 7KH\u0003RQO\\\u0003SLHFH\u0003RI\u0003RXU\u0003HDUOLHU\u0003GRW\u0003SURGXFW\u0003H[DPSOH\u0003WKDW\u0003ZH\u0003HQGHDYRU\u0003WR\u0003FKDQJH\u0003 LV\u0003WKH\u0003\u020cQDO\u0003&38\u0010EDVHG\u0003SRUWLRQ\u0003RI\u0003WKH\u0003UHGXFWLRQ\u0011\u0003,Q\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003ZH\u0003 GHVFULEHG\u0003KRZ\u0003ZH\u0003LPSOHPHQW\u0003D\u0003PXWH[\u0003RQ\u0003WKH\u0003*38\u0011\u00037KH\u0003 Lock\u0003VWUXFWXUH\u0003WKDW\u0003 LPSOHPHQWV\u0003WKLV\u0003PXWH[\u0003LV\u0003ORFDWHG\u0003LQ\u0003 lock.h\u0003DQG\u0003LQFOXGHG\u0003DW\u0003WKH\u0003EHJLQQLQJ\u0003RI\u0003RXU\u0003 LPSURYHG\u0003GRW\u0003SURGXFW\u0003H[DPSOH #include \"../common/book.h\" #include \"lock.h\" #define imin(a,b) (a<b?a:b) const int N = 33 * 1024 * 1024; const int threadsPerBlock = 256; const int blocksPerGrid = imin( 32, (N+threadsPerBlock-1) / threadsPerBlock ); :LWK\u0003WZR\u0003H[FHSWLRQV\u000f\u0003WKH\u0003EHJLQQLQJ\u0003RI\u0003RXU\u0003GRW\u0003SURGXFW\u0003NHUQHO\u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003 NHUQHO\u0003ZH\u0003XVHG\u0003LQ\u0003&KDSWHU\u0003\u0018\u0011\u0003%RWK\u0003H[FHSWLRQV\u0003LQYROYH\u0003WKH\u0003NHUQHO\u01e2V\u0003VLJQDWXUH __global__ void dot( Lock lock, float *a, float *b, float *c ) Download from www.wowebook.comptg /two.lf/five.lf/five.lf$\u0011\u0014\u0003'27\u0003352'8&7\u00035(9,6,7(' ,Q\u0003RXU\u0003XSGDWHG\u0003GRW\u0003SURGXFW\u000f\u0003ZH\u0003SDVV\u0003D\u0003 Lock\u0003WR\u0003WKH\u0003NHUQHO\u0003LQ\u0003DGGLWLRQ\u0003WR\u0003LQSXW\u0003 YHFWRUV\u0003DQG\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0011\u00037KH\u0003 Lock\u0003ZLOO\u0003JRYHUQ\u0003DFFHVV\u0003WR\u0003WKH\u0003RXWSXW\u0003EXIIHU\u0003 GXULQJ\u0003WKH\u0003\u020cQDO\u0003DFFXPXODWLRQ\u0003VWHS\u0011\u00037KH\u0003RWKHU\u0003FKDQJH\u0003LV\u0003QRW\u0003 noticeable \u0003IURP\u0003WKH\u0003 VLJQDWXUH\u0003EXW\u0003LQYROYHV\u0003WKH\u0003VLJQDWXUH\u0011\u00033UHYLRXVO\\\u000f\u0003WKH\u0003 float *c \u0003DUJXPHQW\u0003ZDV\u0003D\u0003 EXIIHU\u0003IRU\u0003 N\u0003\u020dRDWV\u0003ZKHUH\u0003HDFK\u0003RI\u0003WKH\u0003 N\u0003EORFNV\u0003FRXOG\u0003VWRUH\u0003LWV\u0003SDUWLDO\u0003UHVXOW\u0011\u00037KLV\u0003 EXIIHU\u0003ZDV\u0003FRSLHG\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0003WR\u0003FRPSXWH\u0003WKH\u0003\u020cQDO\u0003VXP\u0011\u00031RZ\u000f\u0003WKH\u0003DUJXPHQW\u0003 c\u0003QR\u0003ORQJHU\u0003SRLQWV\u0003WR\u0003D\u0003WHPSRUDU\\\u0003EXIIHU\u0003EXW\u0003WR\u0003D\u0003VLQJOH\u0003\u020dRDWLQJ\u0010SRLQW\u0003YDOXH\u0003WKDW\u0003 ZLOO\u0003VWRUH\u0003WKH\u0003GRW\u0003SURGXFW\u0003RI\u0003WKH\u0003YHFWRUV\u0003LQ\u0003 a\u0003DQG\u0003b\u0011\u0003%XW\u0003HYHQ\u0003ZLWK\u0003WKHVH\u0003FKDQJHV\u000f\u0003 WKH\u0003NHUQHO\u0003VWDUWV\u0003RXW\u0003H[DFWO\\\u0003DV\u0003LW\u0003GLG\u0003LQ\u0003&KDSWHU\u0003\u0018 __global__ void dot( Lock lock, float *a, float *b, float *c ) { __shared__ float cache[threadsPerBlock]; int tid = threadIdx.x + blockIdx.x * blockDim.x; int cacheIndex = threadIdx.x; float temp = 0; while (tid < N) { temp += a[tid] * b[tid]; tid += blockDim.x * gridDim.x; } // set the cache values cache[cacheIndex] = temp; // synchronize threads in this block __syncthreads(); // for reductions, threadsPerBlock must be a power of 2 // because of the following code int i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); i /= 2; } Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/five.lf/six.lf$W\u0003WKLV\u0003SRLQW\u0003LQ\u0003H[HFXWLRQ\u000f\u0003WKH\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003LQ\u0003HDFK\u0003EORFN\u0003KDYH\u0003VXPPHG\u0003WKHLU\u0003\u0015\u0018\u0019\u0003 SDLUZLVH\u0003SURGXFWV\u0003DQG\u0003FRPSXWHG\u0003D\u0003VLQJOH\u0003YDOXH\u0003WKDW\u01e2V\u0003VLWWLQJ\u0003LQ\u0003 cache[0] \u0011\u0003(DFK\u0003 WKUHDG\u0003EORFN\u0003QRZ\u0003QHHGV\u0003WR\u0003DGG\u0003LWV\u0003\u020cQDO\u0003YDOXH\u0003WR\u0003WKH\u0003YDOXH\u0003DW\u0003 c\u0011\u00037R\u0003GR\u0003WKLV\u0003VDIHO\\\u000f\u0003 ZH\u01e2OO\u0003XVH\u0003WKH\u0003ORFN\u0003WR\u0003JRYHUQ\u0003DFFHVV\u0003WR\u0003WKLV\u0003PHPRU\\\u0003ORFDWLRQ\u000f\u0003VR\u0003HDFK\u0003WKUHDG\u0003QHHGV\u0003 WR\u0003DFTXLUH\u0003WKH\u0003ORFN\u0003EHIRUH\u0003XSGDWLQJ\u0003WKH\u0003YDOXH\u0003 c\u0011\u0003$IWHU\u0003DGGLQJ\u0003WKH\u0003EORFN\u01e2V\u0003SDUWLDO\u0003 VXP\u0003WR\u0003WKH\u0003YDOXH\u0003DW\u0003 c\u000f\u0003LW\u0003XQORFNV\u0003WKH\u0003PXWH[\u0003VR\u0003RWKHU\u0003WKUHDGV\u0003FDQ\u0003DFFXPXODWH\u0003WKHLU\u0003 YDOXHV\u0011\u0003$IWHU\u0003DGGLQJ\u0003LWV\u0003YDOXH\u0003WR\u0003WKH\u0003\u020cQDO\u0003UHVXOW\u000f\u0003WKH\u0003EORFN\u0003KDV\u0003QRWKLQJ\u0003UHPDLQLQJ\u0003 WR\u0003FRPSXWH\u0003DQG\u0003FDQ\u0003UHWXUQ\u0003IURP\u0003WKH\u0003NHUQHO\u0011 if (cacheIndex == 0) { lock.lock(); *c += cache[0];",
    "i = blockDim.x/2; while (i != 0) { if (cacheIndex < i) cache[cacheIndex] += cache[cacheIndex + i]; __syncthreads(); i /= 2; } Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/five.lf/six.lf$W\u0003WKLV\u0003SRLQW\u0003LQ\u0003H[HFXWLRQ\u000f\u0003WKH\u0003\u0015\u0018\u0019\u0003WKUHDGV\u0003LQ\u0003HDFK\u0003EORFN\u0003KDYH\u0003VXPPHG\u0003WKHLU\u0003\u0015\u0018\u0019\u0003 SDLUZLVH\u0003SURGXFWV\u0003DQG\u0003FRPSXWHG\u0003D\u0003VLQJOH\u0003YDOXH\u0003WKDW\u01e2V\u0003VLWWLQJ\u0003LQ\u0003 cache[0] \u0011\u0003(DFK\u0003 WKUHDG\u0003EORFN\u0003QRZ\u0003QHHGV\u0003WR\u0003DGG\u0003LWV\u0003\u020cQDO\u0003YDOXH\u0003WR\u0003WKH\u0003YDOXH\u0003DW\u0003 c\u0011\u00037R\u0003GR\u0003WKLV\u0003VDIHO\\\u000f\u0003 ZH\u01e2OO\u0003XVH\u0003WKH\u0003ORFN\u0003WR\u0003JRYHUQ\u0003DFFHVV\u0003WR\u0003WKLV\u0003PHPRU\\\u0003ORFDWLRQ\u000f\u0003VR\u0003HDFK\u0003WKUHDG\u0003QHHGV\u0003 WR\u0003DFTXLUH\u0003WKH\u0003ORFN\u0003EHIRUH\u0003XSGDWLQJ\u0003WKH\u0003YDOXH\u0003 c\u0011\u0003$IWHU\u0003DGGLQJ\u0003WKH\u0003EORFN\u01e2V\u0003SDUWLDO\u0003 VXP\u0003WR\u0003WKH\u0003YDOXH\u0003DW\u0003 c\u000f\u0003LW\u0003XQORFNV\u0003WKH\u0003PXWH[\u0003VR\u0003RWKHU\u0003WKUHDGV\u0003FDQ\u0003DFFXPXODWH\u0003WKHLU\u0003 YDOXHV\u0011\u0003$IWHU\u0003DGGLQJ\u0003LWV\u0003YDOXH\u0003WR\u0003WKH\u0003\u020cQDO\u0003UHVXOW\u000f\u0003WKH\u0003EORFN\u0003KDV\u0003QRWKLQJ\u0003UHPDLQLQJ\u0003 WR\u0003FRPSXWH\u0003DQG\u0003FDQ\u0003UHWXUQ\u0003IURP\u0003WKH\u0003NHUQHO\u0011 if (cacheIndex == 0) { lock.lock(); *c += cache[0]; lock.unlock(); } } 7KH\u0003main()\u0003URXWLQH\u0003LV\u0003YHU\\\u0003VLPLODU\u0003WR\u0003RXU\u0003RULJLQDO\u0003LPSOHPHQWDWLRQ\u000f\u0003WKRXJK\u0003LW\u0003GRHV\u0003 KDYH\u0003D\u0003FRXSOH\u0003GLIIHUHQFHV\u0011\u0003)LUVW\u000f\u0003ZH\u0003QR\u0003ORQJHU\u0003QHHG\u0003WR\u0003DOORFDWH\u0003D\u0003EXIIHU\u0003IRU\u0003SDUWLDO\u0003 UHVXOWV\u0003DV\u0003ZH\u0003GLG\u0003LQ\u0003&KDSWHU\u0003\u0018\u0011\u0003:H\u0003QRZ\u0003DOORFDWH\u0003VSDFH\u0003IRU\u0003RQO\\\u0003D\u0003VLQJOH\u0003\u020dRDWLQJ\u0010 SRLQW\u0003UHVXOW int main( void ) { float *a, *b, c = 0; float *dev_a, *dev_b, *dev_c; // allocate memory on the CPU side a = (float*)malloc( N* sizeof(float) ); b = (float*)malloc( N* sizeof(float) ); // allocate the memory on the GPU HANDLE_ERROR( cudaMalloc( ( void**)&dev_a, N* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_b, N* sizeof(float) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_c, sizeof(float) ) ); Download from www.wowebook.comptg /two.lf/five.lf/seven.lf$\u0011\u0014\u0003'27\u0003352'8&7\u00035(9,6,7(' $V\u0003ZH\u0003GLG\u0003LQ\u0003&KDSWHU\u0003\u0018\u000f\u0003ZH\u0003LQLWLDOL]H\u0003RXU\u0003LQSXW\u0003DUUD\\V\u0003DQG\u0003FRS\\\u0003WKHP\u0003WR\u0003WKH\u0003 *38\u0011\u0003%XW\u0003\\RX\u01e2OO\u0003QRWLFH\u0003DQ\u0003DGGLWLRQDO\u0003FRS\\\u0003LQ\u0003WKLV\u0003H[DPSOH \u0003:H\u01e2UH\u0003DOVR\u0003FRS\\LQJ\u0003 D\u0003]HUR\u0003WR\u0003 dev_c\u000f\u0003WKH\u0003ORFDWLRQ\u0003WKDW\u0003ZH\u0003LQWHQG\u0003WR\u0003XVH\u0003WR\u0003DFFXPXODWH\u0003RXU\u0003\u020cQDO\u0003GRW\u0003 SURGXFW\u0011\u00036LQFH\u0003HDFK\u0003EORFN\u0003ZDQWV\u0003WR\u0003UHDG\u0003WKLV\u0003YDOXH\u000f\u0003DGG\u0003LWV\u0003SDUWLDO\u0003VXP\u000f\u0003DQG\u0003 VWRUH\u0003WKH\u0003UHVXOW\u0003EDFN\u000f\u0003ZH\u0003QHHG\u0003WKH\u0003LQLWLDO\u0003YDOXH\u0003WR\u0003EH\u0003]HUR\u0003LQ\u0003RUGHU\u0003WR\u0003JHW\u0003WKH\u0003 FRUUHFW\u0003UHVXOW\u0011 // fill in the host memory with data for (int i=0; i<N; i++) { a[i] = i; b[i] = i*2; } // copy the arrays 'a' and 'b' to the GPU HANDLE_ERROR( cudaMemcpy( dev_a, a, N* sizeof(float), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_b, b, N* sizeof(float), cudaMemcpyHostToDevice ) ); HANDLE_ERROR( cudaMemcpy( dev_c, &c, sizeof(float), cudaMemcpyHostToDevice ) ); $OO\u0003WKDW\u0003UHPDLQV\u0003LV\u0003GHFODULQJ\u0003RXU\u0003 Lock\u000f\u0003LQYRNLQJ\u0003WKH\u0003NHUQHO\u000f\u0003DQG\u0003FRS\\LQJ\u0003WKH\u0003 UHVXOW\u0003EDFN\u0003WR\u0003WKH\u0003&38\u0011 Lock lock; dot<<<blocksPerGrid,threadsPerBlock>>>( lock, dev_a, dev_b, dev_c ); // copy c back from the GPU to the CPU HANDLE_ERROR( cudaMemcpy( &c, dev_c, sizeof(float), cudaMemcpyDeviceToHost ) ); Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/five.lf/eight.lf,Q\u0003&KDSWHU\u0003\u0018\u000f\u0003WKLV\u0003LV\u0003ZKHQ\u0003ZH\u0003ZRXOG\u0003GR\u0003D\u0003\u020cQDO\u0003 for()\u0003ORRS\u0003WR\u0003DGG\u0003WKH\u0003SDUWLDO\u0003 VXPV\u0011\u00036LQFH\u0003WKLV\u0003LV\u0003GRQH\u0003RQ\u0003WKH\u0003*38\u0003XVLQJ\u0003DWRPLF\u0003ORFNV\u000f\u0003ZH\u0003FDQ\u0003VNLS\u0003ULJKW\u0003WR\u0003WKH\u0003 DQVZHU\u0010FKHFNLQJ\u0003DQG\u0003FOHDQXS\u0003FRGH #define sum_squares(x) (x*(x+1)*(2*x+1)/6) printf( \"Does GPU value %.6g = %.6g?\\n\" , c, 2 * sum_squares( ( float)(N - 1) ) ); // free memory on the GPU side cudaFree( dev_a ); cudaFree( dev_b ); cudaFree( dev_c ); // free memory on the CPU side free( a ); free( b ); } %HFDXVH\u0003WKHUH\u0003LV\u0003QR\u0003ZD\\\u0003WR\u0003SUHFLVHO\\\u0003SUHGLFW\u0003WKH\u0003RUGHU\u0003LQ\u0003ZKLFK\u0003HDFK\u0003EORFN\u0003ZLOO\u0003 DGG\u0003LWV\u0003SDUWLDO\u0003VXP\u0003WR\u0003WKH\u0003\u020cQDO\u0003WRWDO\u000f\u0003LW\u0003LV\u0003YHU\\\u0003OLNHO\\\u0003 DOPRVW\u0003FHUWDLQ \u0003WKDW\u0003WKH\u0003\u020cQDO\u0003 UHVXOW\u0003ZLOO\u0003EH\u0003VXPPHG\u0003LQ\u0003D\u0003GLIIHUHQW\u0003RUGHU\u0003WKDQ\u0003WKH\u0003&38\u0003ZLOO\u0003VXP\u0003LW\u0011\u0003%HFDXVH\u0003RI\u0003 WKH\u0003QRQDVVRFLDWLYLW\\\u0003RI\u0003\u020dRDWLQJ\u0010SRLQW\u0003DGGLWLRQ\u000f\u0003LW\u01e2V\u0003WKHUHIRUH\u0003TXLWH\u0003SUREDEOH\u0003WKDW\u0003 WKH\u0003\u020cQDO\u0003UHVXOW\u0003ZLOO\u0003EH\u0003VOLJKWO\\\u0003GLIIHUHQW\u0003EHWZHHQ\u0003WKH\u0003*38\u0003DQG\u0003&38\u0011\u00037KHUH\u0003LV\u0003QRW\u0003 PXFK\u0003WKDW\u0003FDQ\u0003EH\u0003GRQH\u0003DERXW\u0003WKLV\u0003ZLWKRXW\u0003DGGLQJ\u0003D\u0003QRQWULYLDO\u0003FKXQN\u0003RI\u0003FRGH\u0003WR\u0003 HQVXUH\u0003WKDW\u0003WKH\u0003EORFNV\u0003DFTXLUH\u0003WKH\u0003ORFN\u0003LQ\u0003D\u0003GHWHUPLQLVWLF\u0003RUGHU\u0003WKDW\u0003PDWFKHV\u0003WKH\u0003 VXPPDWLRQ\u0003RUGHU\u0003RQ\u0003WKH\u0003&38\u0011\u0003,I\u0003\\RX\u0003IHHO\u0003H[WUDRUGLQDULO\\\u0003PRWLYDWHG\u000f\u0003JLYH\u0003WKLV\u0003D\u0003WU\\\u0011\u0003 2WKHUZLVH\u000f\u0003ZH\u01e2OO\u0003PRYH\u0003RQ\u0003WR\u0003VHH\u0003KRZ\u0003WKHVH\u0003DWRPLF\u0003ORFNV\u0003FDQ\u0003EH\u0003XVHG\u0003WR\u0003LPSOH - PHQW\u0003D\u0003PXOWLWKUHDGHG\u0003GDWD\u0003VWUXFWXUH\u0011 ,PSOHPHQWLQJ\u0003D\u0003+DVK\u00037DEOH$\u0011\u0015\u0003 7KH\u0003KDVK\u0003WDEOH\u0003LV\u0003RQH\u0003RI\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003DQG\u0003FRPPRQO\\\u0003XVHG\u0003GDWD\u0003VWUXFWXUHV\u0003 LQ\u0003FRPSXWHU\u0003VFLHQFH\u000f\u0003SOD\\LQJ\u0003DQ\u0003LPSRUWDQW\u0003UROH\u0003LQ\u0003D\u0003ZLGH\u0003YDULHW\\\u0003RI\u0003DSSOLFDWLRQV\u0011\u0003 )RU\u0003UHDGHUV\u0003QRW\u0003DOUHDG\\\u0003IDPLOLDU\u0003ZLWK\u0003KDVK\u0003WDEOHV\u000f\u0003ZH\u01e2OO\u0003SURYLGH\u0003D\u0003TXLFN\u0003SULPHU\u0003 KHUH\u0011\u00037KH\u0003VWXG\\\u0003RI\u0003GDWD\u0003VWUXFWXUHV\u0003ZDUUDQWV\u0003PRUH\u0003LQ\u0010GHSWK\u0003VWXG\\\u0003WKDQ\u0003ZH\u0003LQWHQG\u0003 WR\u0003SURYLGH\u000f\u0003EXW\u0003LQ\u0003WKH\u0003LQWHUHVW\u0003RI\u0003PDNLQJ\u0003IRUZDUG\u0003SURJUHVV\u000f\u0003ZH\u0003ZLOO\u0003NHHS\u0003WKLV\u0003EULHI\u0011\u0003 ,I\u0003\\RX\u0003DOUHDG\\\u0003IHHO\u0003FRPIRUWDEOH\u0003ZLWK\u0003WKH\u0003FRQFHSWV\u0003EHKLQG\u0003KDVK\u0003WDEOHV\u000f\u0003\\RX\u0003VKRXOG\u0003 VNLS\u0003WR\u0003WKH\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u0003LQ\u00036HFWLRQ\u0003$\u0011\u0015\u0011\u0015 \u0003$\u0003&38\u0003+DVK\u00037DEOH\u0011 Download from www.wowebook.comptg /two.lf/five.lf/nine.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/(+$6+\u00037$%/(\u000329(59,(:$\u0011\u0015\u0011\u0014\u0003 $\u0003KDVK\u0003WDEOH\u0003LV\u0003HVVHQWLDOO\\\u0003D\u0003VWUXFWXUH\u0003WKDW\u0003LV\u0003GHVLJQHG\u0003WR\u0003VWRUH\u0003SDLUV\u0003RI\u0003 keys \u0003DQG\u0003 values \u0011\u0003)RU\u0003H[DPSOH\u000f\u0003\\RX\u0003FRXOG\u0003WKLQN\u0003RI\u0003D\u0003GLFWLRQDU\\\u0003DV\u0003D\u0003KDVK\u0003WDEOH\u0011\u0003(YHU\\\u0003ZRUG\u0003LQ\u0003 WKH\u0003GLFWLRQDU\\\u0003LV\u0003D\u0003 key\u000f\u0003DQG\u0003HDFK\u0003ZRUG\u0003KDV\u0003D\u0003GH\u020cQLWLRQ\u0003DVVRFLDWHG\u0003ZLWK\u0003LW\u0011\u00037KH\u0003GH\u020c - QLWLRQ\u0003LV\u0003WKH\u0003 value \u0003DVVRFLDWHG\u0003ZLWK\u0003WKH\u0003ZRUG\u000f\u0003DQG\u0003WKXV\u0003HYHU\\\u0003ZRUG\u0003DQG\u0003GH\u020cQLWLRQ\u0003LQ\u0003 WKH\u0003GLFWLRQDU\\\u0003IRUP\u0003D\u0003NH\\\u0012YDOXH\u0003SDLU\u0011\u0003)RU\u0003WKLV\u0003GDWD\u0003VWUXFWXUH\u0003WR\u0003EH\u0003XVHIXO\u000f\u0003WKRXJK\u000f\u0003 LW\u0003LV\u0003LPSRUWDQW\u0003WKDW\u0003ZH\u0003PLQLPL]H\u0003WKH\u0003WLPH\u0003LW\u0003WDNHV\u0003WR\u0003\u020cQG\u0003D\u0003SDUWLFXODU\u0003YDOXH\u0003LI\u0003ZH\u01e2UH\u0003 JLYHQ\u0003D\u0003NH\\\u0011\u0003,Q\u0003JHQHUDO\u000f\u0003WKLV\u0003VKRXOG\u0003EH\u0003D\u0003FRQVWDQW\u0003DPRXQW\u0003RI\u0003WLPH\u0011\u00037KDW\u0003LV\u000f\u0003WKH\u0003WLPH\u0003 WR\u0003ORRN\u0003XS\u0003D\u0003YDOXH\u0003JLYHQ\u0003D\u0003NH\\\u0003VKRXOG\u0003EH\u0003WKH\u0003VDPH\u000f\u0003UHJDUGOHVV\u0003RI\u0003KRZ\u0003PDQ\\\u0003NH\\\u0012 YDOXH\u0003SDLUV\u0003DUH\u0003LQ\u0003WKH\u0003KDVK\u0003WDEOH\u0011 $W\u0003DQ\u0003DEVWUDFW\u0003OHYHO\u000f\u0003RXU\u0003KDVK\u0003WDEOH\u0003ZLOO\u0003SODFH\u0003YDOXHV\u0003LQ\u0003\u01e4EXFNHWV\u01e5\u0003EDVHG\u0003RQ\u0003WKH\u0003 YDOXH\u01e2V\u0003FRUUHVSRQGLQJ\u0003NH\\\u0011\u00037KH\u0003PHWKRG\u0003E\\\u0003ZKLFK\u0003ZH\u0003PDS\u0003NH\\V\u0003WR\u0003EXFNHWV\u0003LV\u0003RIWHQ\u0003 FDOOHG\u0003WKH\u0003 hash function \u0011\u0003$\u0003JRRG\u0003KDVK\u0003IXQFWLRQ\u0003ZLOO\u0003PDS\u0003WKH\u0003VHW\u0003RI\u0003SRVVLEOH\u0003NH\\V\u0003 XQLIRUPO\\\u0003DFURVV\u0003DOO\u0003WKH\u0003EXFNHWV\u0003EHFDXVH\u0003WKLV\u0003ZLOO\u0003KHOS\u0003VDWLVI\\\u0003RXU\u0003UHTXLUHPHQW\u0003 WKDW\u0003LW\u0003WDNH\u0003FRQVWDQW\u0003WLPH\u0003WR\u0003\u020cQG\u0003DQ\\\u0003YDOXH\u000f\u0003UHJDUGOHVV\u0003RI\u0003WKH\u0003QXPEHU\u0003RI\u0003YDOXHV\u0003 ZH\u01e2YH\u0003DGGHG\u0003WR\u0003WKH\u0003KDVK\u0003WDEOH\u0011\u0003 )RU\u0003H[DPSOH\u000f\u0003FRQVLGHU\u0003RXU\u0003GLFWLRQDU\\\u0003KDVK\u0003WDEOH\u0011\u00032QH\u0003REYLRXV\u0003KDVK\u0003IXQFWLRQ\u0003ZRXOG\u0003 LQYROYH\u0003XVLQJ\u0003\u0015\u0019\u0003EXFNHWV\u000f\u0003RQH\u0003IRU\u0003HDFK\u0003OHWWHU\u0003RI\u0003WKH\u0003DOSKDEHW\u0011\u00037KLV\u0003VLPSOH\u0003KDVK\u0003 IXQFWLRQ\u0003PLJKW\u0003VLPSO\\\u0003ORRN\u0003DW\u0003WKH\u0003\u020cUVW\u0003OHWWHU\u0003RI\u0003WKH\u0003NH\\\u0003DQG\u0003SXW\u0003WKH\u0003YDOXH\u0003LQ\u0003RQH\u0003 RI\u0003WKH\u0003\u0015\u0019\u0003EXFNHWV\u0003EDVHG\u0003RQ\u0003WKLV\u0003OHWWHU\u0011\u0003)LJXUH\u0003$\u0011\u0014\u0003VKRZV\u0003KRZ\u0003WKLV\u0003KDVK\u0003IXQFWLRQ\u0003 ZRXOG\u0003DVVLJQ\u0003IHZ\u0003VDPSOH\u0003ZRUGV\u0011 \u0003\u0004 \u0007\u0001\u0002 \u0005\b\u0006 \u0001\u0017\u0012 \u0012\u0003 \u0011 \u0014 \u0002 \u0015 \u0010\u0010 \u0007\u0014 \u0015\u0015\u000e\u0012\u0013\u0013 \u0014 \u0005\u0010 \u0016\u0014\u000f \u0010\u0002\u0001 \u0004\u0003 \u0006\u0005 \b\u0007 Figure A.1 +DVKLQJ\u0003RI\u0003ZRUGV\u0003LQWR\u0003EXFNHWV Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/six.lf/zero.lf*LYHQ\u0003ZKDW\u0003ZH\u0003NQRZ\u0003DERXW\u0003WKH\u0003GLVWULEXWLRQ\u0003RI\u0003ZRUGV\u0003LQ\u0003WKH\u0003(QJOLVK\u0003ODQJXDJH\u000f\u0003WKLV\u0003 KDVK\u0003IXQFWLRQ\u0003OHDYHV\u0003PXFK\u0003WR\u0003EH\u0003GHVLUHG\u0003EHFDXVH\u0003LW\u0003ZLOO\u0003QRW\u0003PDS\u0003ZRUGV\u0003XQLIRUPO\\\u0003 DFURVV\u0003WKH\u0003\u0015\u0019\u0003EXFNHWV\u0011\u00036RPH\u0003RI\u0003WKH\u0003EXFNHWV\u0003ZLOO\u0003FRQWDLQ\u0003YHU\\\u0003IHZ\u0003NH\\\u0012YDOXH\u0003SDLUV\u000f\u0003 DQG\u0003VRPH\u0003RI\u0003WKH\u0003EXFNHWV\u0003ZLOO\u0003FRQWDLQ\u0003D\u0003ODUJH\u0003QXPEHU\u0003RI\u0003SDLUV\u0011\u0003$FFRUGLQJO\\\u000f\u0003LW\u0003 ZLOO\u0003WDNH\u0003PXFK\u0003ORQJHU\u0003WR\u0003\u020cQG\u0003WKH\u0003YDOXH\u0003DVVRFLDWHG\u0003ZLWK\u0003D\u0003ZRUG\u0003WKDW\u0003EHJLQV\u0003ZLWK\u0003 D\u0003FRPPRQ\u0003OHWWHU\u0003VXFK\u0003DV\u00036\u0003WKDQ\u0003LW\u0003ZRXOG\u0003WDNH\u0003WR\u0003\u020cQG\u0003WKH\u0003YDOXH\u0003DVVRFLDWHG\u0003ZLWK\u0003D\u0003 ZRUG\u0003WKDW\u0003EHJLQV\u0003ZLWK\u0003WKH\u0003OHWWHU\u0003;\u0011\u00036LQFH\u0003ZH\u0003DUH\u0003ORRNLQJ\u0003IRU\u0003KDVK\u0003IXQFWLRQV\u0003WKDW\u0003 ZLOO\u0003JLYH\u0003XV\u0003FRQVWDQW\u0010WLPH\u0003UHWULHYDO\u0003RI\u0003DQ\\\u0003YDOXH\u000f\u0003WKLV\u0003FRQVHTXHQFH\u0003LV\u0003IDLUO\\\u0003XQGH - VLUDEOH\u0011\u0003$Q\u0003LPPHQVH\u0003DPRXQW\u0003RI\u0003UHVHDUFK\u0003KDV\u0003JRQH\u0003LQWR\u0003WKH\u0003VWXG\\\u0003RI\u0003KDVK\u0003IXQF - WLRQV\u000f\u0003EXW\u0003HYHQ\u0003D\u0003EULHI\u0003VXUYH\\\u0003RI\u0003WKHVH\u0003WHFKQLTXHV\u0003LV\u0003EH\\RQG\u0003WKH\u0003VFRSH\u0003RI\u0003WKLV\u0003ERRN\u0011\u0003 7KH\u0003ODVW\u0003FRPSRQHQW\u0003RI\u0003RXU\u0003KDVK\u0003WDEOH\u0003GDWD\u0003VWUXFWXUH\u0003LQYROYHV\u0003WKH\u0003EXFNHWV\u0011\u0003,I\u0003ZH\u0003 KDG\u0003D\u0003SHUIHFW\u0003KDVK\u0003IXQFWLRQ\u000f\u0003HYHU\\\u0003NH\\\u0003ZRXOG\u0003PDS\u0003WR\u0003D\u0003GLIIHUHQW\u0003EXFNHW\u0011\u0003,Q\u0003WKLV\u0003 FDVH\u000f\u0003ZH\u0003FDQ\u0003VLPSO\\\u0003VWRUH\u0003WKH\u0003NH\\\u0012YDOXH\u0003SDLUV\u0003LQ\u0003DQ\u0003DUUD\\\u0003ZKHUH\u0003HDFK\u0003HQWU\\\u0003LQ\u0003WKH\u0003 DUUD\\\u0003LV\u0003ZKDW\u0003ZH\u01e2YH\u0003EHHQ\u0003FDOOLQJ\u0003D\u0003 bucket \u0011\u0003+RZHYHU\u000f\u0003HYHQ\u0003ZLWK\u0003DQ\u0003H[FHOOHQW\u0003KDVK\u0003 IXQFWLRQ\u000f\u0003LQ\u0003PRVW\u0003VLWXDWLRQV\u0003ZH\u0003ZLOO\u0003KDYH\u0003WR\u0003GHDO\u0003ZLWK\u0003 collisions \u0011\u0003$\u0003FROOLVLRQ\u0003RFFXUV\u0003 ZKHQ\u0003PRUH\u0003WKDQ\u0003RQH\u0003NH\\\u0003PDSV\u0003WR\u0003D\u0003EXFNHW\u000f\u0003VXFK\u0003DV\u0003ZKHQ\u0003ZH\u0003DGG\u0003ERWK\u0003WKH\u0003ZRUGV\u0003 avocado \u0003DQG\u0003aardvark \u0003WR\u0003RXU\u0003GLFWLRQDU\\\u0003KDVK\u0003WDEOH\u0011\u00037KH\u0003VLPSOHVW\u0003ZD\\\u0003WR\u0003VWRUH\u0003DOO\u0003RI\u0003 WKH\u0003YDOXHV\u0003WKDW\u0003PDS\u0003WR\u0003D\u0003JLYHQ\u0003EXFNHW\u0003LV\u0003VLPSO\\\u0003WR\u0003PDLQWDLQ\u0003D\u0003OLVW\u0003RI\u0003YDOXHV\u0003LQ\u0003WKH\u0003 EXFNHW\u0011\u0003:KHQ\u0003ZH\u0003HQFRXQWHU\u0003D\u0003FROOLVLRQ\u000f\u0003VXFK\u0003DV\u0003DGGLQJ\u0003 aardvark \u0003WR\u0003D\u0003GLFWLRQDU\\\u0003 WKDW\u0003DOUHDG\\\u0003FRQWDLQV\u0003 avocado \u000f\u0003ZH\u0003SXW\u0003WKH\u0003YDOXH\u0003DVVRFLDWHG\u0003ZLWK\u0003 aardvark \u0003DW\u0003WKH\u0003 HQG\u0003RI\u0003WKH\u0003OLVW\u0003ZH\u01e2UH\u0003PDLQWDLQLQJ\u0003LQ\u0003WKH\u0003\u01e4$\u01e5\u0003EXFNHW\u000f\u0003DV\u0003VKRZQ\u0003LQ\u0003)LJXUH\u0003$\u0011\u0015\u0011 $IWHU\u0003DGGLQJ\u0003WKH\u0003ZRUG\u0003 avocado \u0003LQ\u0003)LJXUH\u0003$\u0011\u0015\u000f\u0003WKH\u0003\u020cUVW\u0003EXFNHW\u0003KDV\u0003D\u0003VLQJOH\u0003NH\\\u0012 YDOXH\u0003SDLU\u0003LQ\u0003LWV\u0003OLVW\u0011\u0003/DWHU\u0003LQ\u0003WKLV\u0003LPDJLQDU\\\u0003DSSOLFDWLRQ\u0003ZH\u0003DGG\u0003WKH\u0003ZRUG\u0003 aardvark , D\u0003ZRUG\u0003WKDW\u0003FROOLGHV\u0003ZLWK\u0003 avocado \u0003EHFDXVH\u0003WKH\\\u0003ERWK\u0003VWDUW\u0003ZLWK\u0003WKH\u0003OHWWHU\u0003 A\u0011\u0003<RX\u0003 ZLOO\u0003QRWLFH\u0003LQ\u0003)LJXUH\u0003$\u0011\u0016\u0003WKDW\u0003LW\u0003VLPSO\\\u0003JHWV\u0003SODFHG\u0003DW\u0003WKH\u0003HQG\u0003RI\u0003WKH\u0003OLVW\u0003LQ\u0003WKH\u0003\u020cUVW\u0003 EXFNHW avocado avocado Figure A.2 ,QVHUWLQJ\u0003WKH\u0003ZRUG\u0003 avocado \u0003LQWR\u0003WKH\u0003KDVK\u0003WDEOH Download from www.wowebook.comptg /two.lf/six.lf/one.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/(aardvarkavocado aardvarkavocado Figure A.3 5HVROYLQJ\u0003WKH\u0003FRQ\u020dLFW\u0003ZKHQ\u0003DGGLQJ\u0003WKH\u0003ZRUG\u0003 aardvark $UPHG\u0003ZLWK\u0003VRPH\u0003EDFNJURXQG\u0003RQ\u0003WKH\u0003QRWLRQV\u0003RI\u0003D\u0003 hash function \u0003DQG\u0003collision reso - lution \u000f\u0003ZH\u01e2UH\u0003UHDG\\\u0003WR\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003LPSOHPHQWLQJ\u0003RXU\u0003RZQ\u0003KDVK\u0003WDEOH\u0011 $\u0003&38\u0003+$6+\u00037$%/( $\u0011\u0015\u0011\u0015\u0003 $V\u0003GHVFULEHG\u0003LQ\u0003WKH\u0003SUHYLRXV\u0003VHFWLRQ\u000f\u0003RXU\u0003KDVK\u0003WDEOH\u0003ZLOO\u0003FRQVLVW\u0003RI\u0003HVVHQWLDOO\\\u0003WZR\u0003 SDUWV \u0003D\u0003KDVK\u0003IXQFWLRQ\u0003DQG\u0003D\u0003GDWD\u0003VWUXFWXUH\u0003RI\u0003EXFNHWV\u0011\u00032XU\u0003EXFNHWV\u0003ZLOO\u0003EH\u0003LPSOH - PHQWHG\u0003H[DFWO\\\u0003DV\u0003EHIRUH \u0003:H\u0003ZLOO\u0003DOORFDWH\u0003DQ\u0003DUUD\\\u0003RI\u0003OHQJWK\u0003 N\u000f\u0003DQG\u0003HDFK\u0003HQWU\\\u0003LQ\u0003 WKH\u0003DUUD\\\u0003KROGV\u0003D\u0003OLVW\u0003RI\u0003NH\\\u0012YDOXH\u0003SDLUV\u0011\u0003%HIRUH\u0003FRQFHUQLQJ\u0003RXUVHOYHV\u0003ZLWK\u0003D\u0003KDVK\u0003 IXQFWLRQ\u000f\u0003ZH\u0003ZLOO\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003WKH\u0003GDWD\u0003VWUXFWXUHV\u0003LQYROYHG #include \"../common/book.h\" struct Entry { unsigned int key; void* value; Entry *next; }; struct Table { size_t count; Entry **entries; Entry *pool; Entry *firstFree; }; Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/six.lf/two.lf$V\u0003GHVFULEHG\u0003LQ\u0003WKH\u0003LQWURGXFWRU\\\u0003VHFWLRQ\u000f\u0003WKH\u0003VWUXFWXUH\u0003 Entry\u0003KROGV\u0003ERWK\u0003D\u0003NH\\\u0003 DQG\u0003D\u0003YDOXH\u0011\u0003,Q\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003XQVLJQHG\u0003LQWHJHU\u0003NH\\V\u0003WR\u0003VWRUH\u0003RXU\u0003 NH\\\u0012YDOXH\u0003SDLUV\u0011\u00037KH\u0003YDOXH\u0003DVVRFLDWHG\u0003ZLWK\u0003WKLV\u0003NH\\\u0003FDQ\u0003EH\u0003DQ\\\u0003GDWD\u000f\u0003VR\u0003ZH\u0003KDYH\u0003 GHFODUHG\u0003 value\u0003DV\u0003D\u0003void*\u0003WR\u0003LQGLFDWH\u0003WKLV\u0011\u00032XU\u0003DSSOLFDWLRQ\u0003ZLOO\u0003SULPDULO\\\u0003EH\u0003 FRQFHUQHG\u0003ZLWK\u0003FUHDWLQJ\u0003WKH\u0003KDVK\u0003WDEOH\u0003GDWD\u0003VWUXFWXUH\u000f\u0003VR\u0003ZH\u0003ZRQ\u01e2W\u0003DFWXDOO\\\u0003VWRUH\u0003 DQ\\WKLQJ\u0003LQ\u0003WKH\u0003 value\u0003\u020cHOG\u0011\u0003:H\u0003KDYH\u0003LQFOXGHG\u0003LW\u0003LQ\u0003WKH\u0003VWUXFWXUH\u0003IRU\u0003FRPSOHWH - QHVV\u000f\u0003LQ\u0003FDVH\u0003\\RX\u0003ZDQW\u0003WR\u0003XVH\u0003WKLV\u0003FRGH\u0003LQ\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u00037KH\u0003ODVW\u0003SLHFH\u0003RI\u0003 GDWD\u0003LQ\u0003RXU\u0003KDVK\u0003WDEOH\u0003 Entry\u0003LV\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003QH[W\u0003 Entry\u0011\u0003$IWHU\u0003FROOLVLRQV\u000f\u0003ZH\u01e2OO\u0003 KDYH\u0003PXOWLSOH\u0003HQWULHV\u0003LQ\u0003WKH\u0003VDPH\u0003EXFNHW\u000f\u0003DQG\u0003ZH\u0003KDYH\u0003GHFLGHG\u0003WR\u0003VWRUH\u0003WKHVH\u0003 HQWULHV\u0003DV\u0003D\u0003OLVW\u0011\u00036R\u000f\u0003HDFK\u0003HQWU\\\u0003ZLOO\u0003SRLQW\u0003WR\u0003WKH\u0003QH[W\u0003HQWU\\\u0003LQ\u0003WKH\u0003EXFNHW\u000f\u0003WKHUHE\\\u0003 IRUPLQJ\u0003D\u0003OLVW\u0003RI\u0003HQWULHV\u0003WKDW\u0003KDYH\u0003KDVKHG\u0003WR\u0003WKH\u0003VDPH\u0003ORFDWLRQ\u0003LQ\u0003WKH\u0003WDEOH\u0011\u00037KH\u0003 ODVW\u0003HQWU\\\u0003ZLOO\u0003KDYH\u0003D\u0003 NULL next\u0003SRLQWHU\u0011\u0003 $W\u0003LWV\u0003KHDUW\u000f\u0003WKH\u0003 Table\u0003VWUXFWXUH\u0003LWVHOI\u0003LV\u0003DQ\u0003DUUD\\\u0003RI\u0003\u01e4EXFNHWV\u0011\u01e5\u00037KLV\u0003EXFNHW\u0003 DUUD\\\u0003LV\u0003MXVW\u0003DQ\u0003DUUD\\\u0003RI\u0003OHQJWK\u0003",
    "{ unsigned int key; void* value; Entry *next; }; struct Table { size_t count; Entry **entries; Entry *pool; Entry *firstFree; }; Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/six.lf/two.lf$V\u0003GHVFULEHG\u0003LQ\u0003WKH\u0003LQWURGXFWRU\\\u0003VHFWLRQ\u000f\u0003WKH\u0003VWUXFWXUH\u0003 Entry\u0003KROGV\u0003ERWK\u0003D\u0003NH\\\u0003 DQG\u0003D\u0003YDOXH\u0011\u0003,Q\u0003RXU\u0003DSSOLFDWLRQ\u000f\u0003ZH\u0003ZLOO\u0003XVH\u0003XQVLJQHG\u0003LQWHJHU\u0003NH\\V\u0003WR\u0003VWRUH\u0003RXU\u0003 NH\\\u0012YDOXH\u0003SDLUV\u0011\u00037KH\u0003YDOXH\u0003DVVRFLDWHG\u0003ZLWK\u0003WKLV\u0003NH\\\u0003FDQ\u0003EH\u0003DQ\\\u0003GDWD\u000f\u0003VR\u0003ZH\u0003KDYH\u0003 GHFODUHG\u0003 value\u0003DV\u0003D\u0003void*\u0003WR\u0003LQGLFDWH\u0003WKLV\u0011\u00032XU\u0003DSSOLFDWLRQ\u0003ZLOO\u0003SULPDULO\\\u0003EH\u0003 FRQFHUQHG\u0003ZLWK\u0003FUHDWLQJ\u0003WKH\u0003KDVK\u0003WDEOH\u0003GDWD\u0003VWUXFWXUH\u000f\u0003VR\u0003ZH\u0003ZRQ\u01e2W\u0003DFWXDOO\\\u0003VWRUH\u0003 DQ\\WKLQJ\u0003LQ\u0003WKH\u0003 value\u0003\u020cHOG\u0011\u0003:H\u0003KDYH\u0003LQFOXGHG\u0003LW\u0003LQ\u0003WKH\u0003VWUXFWXUH\u0003IRU\u0003FRPSOHWH - QHVV\u000f\u0003LQ\u0003FDVH\u0003\\RX\u0003ZDQW\u0003WR\u0003XVH\u0003WKLV\u0003FRGH\u0003LQ\u0003\\RXU\u0003RZQ\u0003DSSOLFDWLRQV\u0011\u00037KH\u0003ODVW\u0003SLHFH\u0003RI\u0003 GDWD\u0003LQ\u0003RXU\u0003KDVK\u0003WDEOH\u0003 Entry\u0003LV\u0003D\u0003SRLQWHU\u0003WR\u0003WKH\u0003QH[W\u0003 Entry\u0011\u0003$IWHU\u0003FROOLVLRQV\u000f\u0003ZH\u01e2OO\u0003 KDYH\u0003PXOWLSOH\u0003HQWULHV\u0003LQ\u0003WKH\u0003VDPH\u0003EXFNHW\u000f\u0003DQG\u0003ZH\u0003KDYH\u0003GHFLGHG\u0003WR\u0003VWRUH\u0003WKHVH\u0003 HQWULHV\u0003DV\u0003D\u0003OLVW\u0011\u00036R\u000f\u0003HDFK\u0003HQWU\\\u0003ZLOO\u0003SRLQW\u0003WR\u0003WKH\u0003QH[W\u0003HQWU\\\u0003LQ\u0003WKH\u0003EXFNHW\u000f\u0003WKHUHE\\\u0003 IRUPLQJ\u0003D\u0003OLVW\u0003RI\u0003HQWULHV\u0003WKDW\u0003KDYH\u0003KDVKHG\u0003WR\u0003WKH\u0003VDPH\u0003ORFDWLRQ\u0003LQ\u0003WKH\u0003WDEOH\u0011\u00037KH\u0003 ODVW\u0003HQWU\\\u0003ZLOO\u0003KDYH\u0003D\u0003 NULL next\u0003SRLQWHU\u0011\u0003 $W\u0003LWV\u0003KHDUW\u000f\u0003WKH\u0003 Table\u0003VWUXFWXUH\u0003LWVHOI\u0003LV\u0003DQ\u0003DUUD\\\u0003RI\u0003\u01e4EXFNHWV\u0011\u01e5\u00037KLV\u0003EXFNHW\u0003 DUUD\\\u0003LV\u0003MXVW\u0003DQ\u0003DUUD\\\u0003RI\u0003OHQJWK\u0003 count\u000f\u0003ZKHUH\u0003HDFK\u0003EXFNHW\u0003LQ\u0003 entries\u0003LV\u0003MXVW\u0003D\u0003 SRLQWHU\u0003WR\u0003DQ\u0003 Entry\u0011\u00037R\u0003DYRLG\u0003LQFXUULQJ\u0003WKH\u0003FRPSOLFDWLRQ\u0003DQG\u0003SHUIRUPDQFH\u0003KLW\u0003RI\u0003 DOORFDWLQJ\u0003PHPRU\\\u0003HYHU\\\u0003WLPH\u0003ZH\u0003ZDQW\u0003WR\u0003DGG\u0003DQ\u0003 Entry\u0003WR\u0003WKH\u0003WDEOH\u000f\u0003WKH\u0003WDEOH\u0003 ZLOO\u0003PDLQWDLQ\u0003D\u0003ODUJH\u0003DUUD\\\u0003RI\u0003DYDLODEOH\u0003HQWULHV\u0003LQ\u0003 pool\u0011\u00037KH\u0003\u020cHOG\u0003 firstFree SRLQWV\u0003WR\u0003WKH\u0003QH[W\u0003DYDLODEOH\u0003 Entry\u0003IRU\u0003XVH\u000f\u0003VR\u0003ZKHQ\u0003ZH\u0003QHHG\u0003WR\u0003DGG\u0003DQ\u0003HQWU\\\u0003WR\u0003 WKH\u0003WDEOH\u000f\u0003ZH\u0003FDQ\u0003VLPSO\\\u0003XVH\u0003WKH\u0003 Entry\u0003SRLQWHG\u0003WR\u0003E\\\u0003 firstFree \u0003DQG\u0003LQFUHPHQW\u0003 WKDW\u0003SRLQWHU\u0011\u00031RWH\u0003WKDW\u0003WKLV\u0003ZLOO\u0003DOVR\u0003VLPSOLI\\\u0003RXU\u0003FOHDQXS\u0003FRGH\u0003EHFDXVH\u0003ZH\u0003FDQ\u0003 IUHH\u0003DOO\u0003RI\u0003WKHVH\u0003HQWULHV\u0003ZLWK\u0003D\u0003VLQJOH\u0003FDOO\u0003WR\u0003 free()\u0011\u0003,I\u0003ZH\u0003KDG\u0003DOORFDWHG\u0003HYHU\\\u0003 HQWU\\\u0003DV\u0003ZH\u0003ZHQW\u000f\u0003ZH\u0003ZRXOG\u0003KDYH\u0003WR\u0003ZDON\u0003WKURXJK\u0003WKH\u0003WDEOH\u0003DQG\u0003IUHH\u0003HYHU\\\u0003HQWU\\\u0003 RQH\u0003E\\\u0003RQH\u0011 $IWHU\u0003XQGHUVWDQGLQJ\u0003WKH\u0003GDWD\u0003VWUXFWXUHV\u0003LQYROYHG\u000f\u0003OHW\u01e2V\u0003WDNH\u0003D\u0003ORRN\u0003DW\u0003VRPH\u0003RI\u0003WKH\u0003 RWKHU\u0003VXSSRUW\u0003FRGH void initialize_table( Table &table, int entries, int elements ) { table.count = entries; table.entries = (Entry**)calloc( entries, sizeof(Entry*) ); table.pool = (Entry*)malloc( elements * sizeof( Entry ) ); table.firstFree = table.pool; } Download from www.wowebook.comptg /two.lf/six.lf/three.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/( 7DEOH\u0003LQLWLDOL]DWLRQ\u0003FRQVLVWV\u0003SULPDULO\\\u0003RI\u0003DOORFDWLQJ\u0003PHPRU\\\u0003DQG\u0003FOHDULQJ\u0003PHPRU\\\u0003 IRU\u0003WKH\u0003EXFNHW\u0003DUUD\\\u0003 entries\u0011\u0003:H\u0003DOVR\u0003DOORFDWH\u0003VWRUDJH\u0003IRU\u0003D\u0003SRRO\u0003RI\u0003HQWULHV\u0003DQG\u0003 LQLWLDOL]H\u0003WKH\u0003 firstFree \u0003SRLQWHU\u0003WR\u0003EH\u0003WKH\u0003\u020cUVW\u0003HQWU\\\u0003LQ\u0003WKH\u0003SRRO\u0003DUUD\\\u0011\u0003 $W\u0003WKH\u0003HQG\u0003RI\u0003WKH\u0003DSSOLFDWLRQ\u000f\u0003ZH\u01e2OO\u0003ZDQW\u0003WR\u0003IUHH\u0003WKH\u0003PHPRU\\\u0003ZH\u01e2YH\u0003DOORFDWHG\u000f\u0003VR\u0003 RXU\u0003FOHDQXS\u0003URXWLQH\u0003IUHHV\u0003WKH\u0003EXFNHW\u0003DUUD\\\u0003DQG\u0003WKH\u0003SRRO\u0003RI\u0003IUHH\u0003HQWULHV void free_table( Table &table ) { free( table.entries ); free( table.pool ); } ,Q\u0003RXU\u0003LQWURGXFWLRQ\u000f\u0003ZH\u0003VSRNH\u0003TXLWH\u0003D\u0003ELW\u0003DERXW\u0003WKH\u0003KDVK\u0003IXQFWLRQ\u0011\u00036SHFL\u020cFDOO\\\u000f\u0003 ZH\u0003GLVFXVVHG\u0003KRZ\u0003D\u0003JRRG\u0003KDVK\u0003IXQFWLRQ\u0003FDQ\u0003PDNH\u0003WKH\u0003GLIIHUHQFH\u0003EHWZHHQ\u0003DQ\u0003 H[FHOOHQW\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u0003DQG\u0003SRRU\u0003RQH\u0011\u0003,Q\u0003WKLV\u0003H[DPSOH\u000f\u0003ZH\u01e2UH\u0003XVLQJ\u0003 XQVLJQHG\u0003LQWHJHUV\u0003DV\u0003RXU\u0003NH\\V\u000f\u0003DQG\u0003ZH\u0003QHHG\u0003WR\u0003PDS\u0003WKHVH\u0003WR\u0003WKH\u0003LQGLFHV\u0003RI\u0003RXU\u0003 EXFNHW\u0003DUUD\\\u0011\u00037KH\u0003VLPSOHVW\u0003ZD\\\u0003WR\u0003GR\u0003WKLV\u0003ZRXOG\u0003EH\u0003WR\u0003VHOHFW\u0003WKH\u0003EXFNHW\u0003ZLWK\u0003DQ\u0003 LQGH[\u0003HTXDO\u0003WR\u0003WKH\u0003NH\\\u0011\u00037KDW\u0003LV\u000f\u0003ZH\u0003FRXOG\u0003VWRUH\u0003WKH\u0003HQWU\\\u0003 e\u0003LQ\u0003table.entries[e. key]\u0011\u0003+RZHYHU\u000f\u0003ZH\u0003KDYH\u0003QR\u0003ZD\\\u0003RI\u0003JXDUDQWHHLQJ\u0003WKDW\u0003HYHU\\\u0003NH\\\u0003ZLOO\u0003EH\u0003OHVV\u0003WKDQ\u0003 WKH\u0003OHQJWK\u0003RI\u0003WKH\u0003DUUD\\\u0003RI\u0003EXFNHWV\u0011\u0003)RUWXQDWHO\\\u000f\u0003WKLV\u0003SUREOHP\u0003FDQ\u0003EH\u0003VROYHG\u0003UHOD - WLYHO\\\u0003SDLQOHVVO\\ size_t hash( unsigned int key, size_t count ) { return key % count; } ,I\u0003WKH\u0003KDVK\u0003IXQFWLRQ\u0003LV\u0003VR\u0003LPSRUWDQW\u000f\u0003KRZ\u0003FDQ\u0003ZH\u0003JHW\u0003DZD\\\u0003ZLWK\u0003VXFK\u0003D\u0003VLPSOH\u0003 RQH\"\u0003,GHDOO\\\u000f\u0003ZH\u0003ZDQW\u0003WKH\u0003NH\\V\u0003WR\u0003PDS\u0003XQLIRUPO\\\u0003DFURVV\u0003DOO\u0003WKH\u0003EXFNHWV\u0003LQ\u0003RXU\u0003 WDEOH\u000f\u0003DQG\u0003DOO\u0003ZH\u01e2UH\u0003GRLQJ\u0003KHUH\u0003LV\u0003WDNLQJ\u0003WKH\u0003NH\\\u0003PRGXOR\u0003WKH\u0003DUUD\\\u0003OHQJWK\u0011\u0003,Q\u0003 UHDOLW\\\u000f\u0003KDVK\u0003IXQFWLRQV\u0003PD\\\u0003QRW\u0003QRUPDOO\\\u0003EH\u0003WKLV\u0003VLPSOH\u000f\u0003EXW\u0003EHFDXVH\u0003WKLV\u0003LV\u0003MXVW\u0003 DQ\u0003H[DPSOH\u0003SURJUDP\u000f\u0003ZH\u0003ZLOO\u0003EH\u0003UDQGRPO\\\u0003JHQHUDWLQJ\u0003RXU\u0003NH\\V\u0011\u0003,I\u0003ZH\u0003DVVXPH\u0003 WKDW\u0003WKH\u0003UDQGRP\u0003QXPEHU\u0003JHQHUDWRU\u0003JHQHUDWHV\u0003YDOXHV\u0003URXJKO\\\u0003XQLIRUPO\\\u000f\u0003WKLV\u0003 KDVK\u0003IXQFWLRQ\u0003VKRXOG\u0003PDS\u0003WKHVH\u0003NH\\V\u0003XQLIRUPO\\\u0003DFURVV\u0003DOO\u0003RI\u0003WKH\u0003EXFNHWV\u0003RI\u0003WKH\u0003 KDVK\u0003WDEOH\u0011\u0003,Q\u0003\\RXU\u0003RZQ\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\\RX\u0003PD\\\u0003UHTXLUH\u0003D\u0003PRUH\u0003 FRPSOLFDWHG\u0003KDVK\u0003IXQFWLRQ\u0011\u0003 Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/six.lf/four.lf+DYLQJ\u0003VHHQ\u0003WKH\u0003KDVK\u0003WDEOH\u0003VWUXFWXUHV\u0003DQG\u0003WKH\u0003KDVK\u0003IXQFWLRQ\u000f\u0003ZH\u01e2UH\u0003UHDG\\\u0003WR\u0003ORRN\u0003 DW\u0003WKH\u0003SURFHVV\u0003RI\u0003DGGLQJ\u0003D\u0003NH\\\u0012YDOXH\u0003SDLU\u0003WR\u0003WKH\u0003WDEOH\u0011\u00037KH\u0003SURFHVV\u0003LQYROYHV\u0003WKUHH\u0003 EDVLF\u0003VWHSV &RPSXWH\u0003WKH\u0003KDVK\u0003IXQFWLRQ\u0003RQ\u0003WKH\u0003LQSXW\u0003NH\\\u0003WR\u0003GHWHUPLQH\u0003WKH\u0003QHZ\u0003HQWU\\\u01e2V\u0003\u0014\u0011\u0003 EXFNHW\u0011 7DNH\u0003D\u0003SUHDOORFDWHG\u0003\u0015\u0011\u0003 Entry\u0003IURP\u0003WKH\u0003SRRO\u0003DQG\u0003LQLWLDOL]H\u0003LWV\u0003 key\u0003DQG\u0003value \u020cHOGV\u0011 ,QVHUW\u0003WKH\u0003HQWU\\\u0003DW\u0003WKH\u0003IURQW\u0003RI\u0003WKH\u0003SURSHU\u0003EXFNHW\u01e2V\u0003OLVW\u0011\u0016\u0011\u0003 :H\u0003WUDQVODWH\u0003WKHVH\u0003VWHSV\u0003WR\u0003FRGH\u0003LQ\u0003D\u0003IDLUO\\\u0003VWUDLJKWIRUZDUG\u0003ZD\\\u0011 void add_to_table( Table &table, unsigned int key, void* value ) { //Step 1 size_t hashValue = hash( key, table.count ); //Step 2 Entry *location = table.firstFree++; location->key = key; location->value = value; //Step 3 location->next = table.entries[hashValue]; table.entries[hashValue] = location; } ,I\u0003\\RX\u0003KDYH\u0003QHYHU\u0003VHHQ\u0003OLQNHG\u0003OLVWV\u0003 RU\u0003LW\u01e2V\u0003EHHQ\u0003D\u0003ZKLOH \u000f\u0003VWHS\u0003\u0016\u0003PD\\\u0003EH\u0003WULFN\\\u0003 WR\u0003XQGHUVWDQG\u0003DW\u0003\u020cUVW\u0011\u00037KH\u0003H[LVWLQJ\u0003OLVW\u0003KDV\u0003LWV\u0003\u020cUVW\u0003QRGH\u0003VWRUHG\u0003DW\u0003 table. entries[hashValue] \u0011\u0003:LWK\u0003WKLV\u0003LQ\u0003PLQG\u000f\u0003ZH\u0003FDQ\u0003LQVHUW\u0003D\u0003QHZ\u0003QRGH\u0003DW\u0003WKH\u0003KHDG\u0003 RI\u0003WKH\u0003OLVW\u0003LQ\u0003WZR\u0003VWHSV \u0003)LUVW\u000f\u0003ZH\u0003VHW\u0003RXU\u0003QHZ\u0003HQWU\\\u01e2V\u0003 next\u0003SRLQWHU\u0003WR\u0003SRLQW\u0003WR\u0003WKH\u0003 \u020cUVW\u0003QRGH\u0003LQ\u0003WKH\u0003H[LVWLQJ\u0003OLVW\u0011\u00037KHQ\u000f\u0003ZH\u0003VWRUH\u0003WKH\u0003QHZ\u0003HQWU\\\u0003LQ\u0003WKH\u0003EXFNHW\u0003DUUD\\\u0003VR\u0003 it EHFRPHV\u0003WKH\u0003\u020cUVW\u0003QRGH\u0003RI\u0003WKH\u0003QHZ\u0003OLVW\u0011 Download from www.wowebook.comptg /two.lf/six.lf/five.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/( 6LQFH\u0003LW\u01e2V\u0003D\u0003JRRG\u0003LGHD\u0003WR\u0003KDYH\u0003VRPH\u0003LGHD\u0003ZKHWKHU\u0003WKH\u0003FRGH\u0003\\RX\u01e2YH\u0003ZULWWHQ\u0003ZRUNV\u000f\u0003 ZH\u01e2YH\u0003LPSOHPHQWHG\u0003D\u0003URXWLQH\u0003WR\u0003SHUIRUP\u0003D\u0003VDQLW\\\u0003FKHFN\u0003RQ\u0003D\u0003KDVK\u0003WDEOH\u0011\u00037KH\u0003 FKHFN\u0003LQYROYHV\u0003\u020cUVW\u0003ZDONLQJ\u0003WKURXJK\u0003WKH\u0003WDEOH\u0003DQG\u0003H[DPLQLQJ\u0003HYHU\\\u0003QRGH\u0011\u0003 :H\u0003FRPSXWH\u0003WKH\u0003KDVK\u0003IXQFWLRQ\u0003RQ\u0003WKH\u0003QRGH\u01e2V\u0003NH\\\u0003DQG\u0003FRQ\u020cUP\u0003WKDW\u0003WKH\u0003QRGH\u0003 LV\u0003VWRUHG\u0003LQ\u0003WKH\u0003FRUUHFW\u0003EXFNHW\u0011\u0003$IWHU\u0003FKHFNLQJ\u0003HYHU\\\u0003QRGH\u000f\u0003ZH\u0003YHULI\\\u0003WKDW\u0003WKH\u0003 QXPEHU\u0003RI\u0003QRGHV\u0003 actually \u0003LQ\u0003WKH\u0003WDEOH\u0003LV\u0003LQGHHG\u0003HTXDO\u0003WR\u0003WKH\u0003QXPEHU\u0003RI\u0003HOHPHQWV\u0003 we intended \u0003WR\u0003DGG\u0003WR\u0003WKH\u0003WDEOH\u0011\u0003,I\u0003WKHVH\u0003QXPEHUV\u0003GRQ\u01e2W\u0003DJUHH\u000f\u0003WKHQ\u0003HLWKHU\u0003 ZH\u01e2YH\u0003DGGHG\u0003D\u0003QRGH\u0003DFFLGHQWDOO\\\u0003WR\u0003PXOWLSOH\u0003EXFNHWV\u0003RU\u0003ZH\u0003KDYHQ\u01e2W\u0003LQVHUWHG\u0003LW\u0003 FRUUHFWO\\\u0011 #define SIZE (100*1024*1024) #define ELEMENTS (SIZE / sizeof(unsigned int )) void verify_table( const Table &table ) { int count = 0; for (size_t i=0; i<table.count; i++) { Entry *current = table.entries[i]; while (current != NULL) { ++count; if (hash( current->value, table.count ) != i) printf( \"%d hashed to %ld, but was located \" \"at %ld\\n\" , current->value, hash( current->value, table.count ), i ); current = current->next; } } if (count != ELEMENTS) printf( \"%d elements found in hash table. Should be %ld\\n\" , count, ELEMENTS ); else printf( \"All %d elements found in hash table.\\n\" , count); } Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/six.lf/six.lf:LWK\u0003DOO\u0003WKH\u0003LQIUDVWUXFWXUH\u0003FRGH\u0003RXW\u0003RI\u0003WKH\u0003ZD\\\u000f\u0003ZH\u0003FDQ\u0003ORRN\u0003DW\u0003 main()\u0011\u0003$V\u0003ZLWK\u0003 PDQ\\\u0003RI\u0003WKLV\u0003ERRN\u01e2V\u0003H[DPSOHV\u000f\u0003D\u0003ORW\u0003RI\u0003WKH\u0003KHDY\\\u0003OLIWLQJ\u0003KDV\u0003EHHQ\u0003GRQH\u0003LQ\u0003KHOSHU\u0003 IXQFWLRQV\u000f\u0003VR\u0003ZH\u0003KRSH\u0003WKDW\u0003 main()\u0003ZLOO\u0003EH\u0003UHODWLYHO\\\u0003HDV\\\u0003WR\u0003IROORZ #define HASH_ENTRIES 1024 int main( void ) { unsigned int *buffer = ( unsigned int *)big_random_block( SIZE ); clock_t start, stop; start = clock(); Table table; initialize_table( table, HASH_ENTRIES, ELEMENTS ); for (int i=0; i<ELEMENTS; i++) { add_to_table( table, buffer[i], ( void*)NULL ); } stop = clock(); float elapsedTime = ( float)(stop - start) / ( float)CLOCKS_PER_SEC * 1000.0f; printf( \"Time to hash: %3.1f ms\\n\" , elapsedTime ); verify_table( table ); free_table( table ); free( buffer ); return 0; } $V\u0003\\RX\u0003FDQ\u0003VHH\u000f\u0003ZH\u0003VWDUW\u0003E\\\u0003DOORFDWLQJ\u0003D\u0003ELJ\u0003FKXQN\u0003RI\u0003UDQGRP\u0003QXPEHUV\u0011\u00037KHVH\u0003 UDQGRPO\\\u0003JHQHUDWHG\u0003XQVLJQHG\u0003LQWHJHUV\u0003ZLOO\u0003EH\u0003WKH\u0003NH\\V\u0003ZH\u0003LQVHUW\u0003LQWR\u0003RXU\u0003 KDVK\u0003WDEOH\u0011\u0003$IWHU\u0003JHQHUDWLQJ\u0003WKH\u0003QXPEHUV\u000f\u0003ZH\u0003UHDG\u0003WKH\u0003V\\VWHP\u0003WLPH\u0003LQ\u0003RUGHU\u0003WR\u0003 PHDVXUH\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003RXU\u0003LPSOHPHQWDWLRQ\u0011\u0003:H\u0003LQLWLDOL]H\u0003WKH\u0003KDVK\u0003WDEOH\u0003DQG\u0003 WKHQ\u0003LQVHUW\u0003HDFK\u0003UDQGRP\u0003NH\\\u0003LQWR\u0003WKH\u0003WDEOH\u0003XVLQJ\u0003D\u0003 for()\u0003ORRS\u0011\u0003$IWHU\u0003DGGLQJ\u0003DOO\u0003 WKH\u0003NH\\V\u000f\u0003ZH\u0003UHDG\u0003WKH\u0003V\\VWHP\u0003WLPH\u0003DJDLQ\u0003WR\u0003FRPSXWH\u0003WKH\u0003HODSVHG\u0003WLPH\u0003WR\u0003LQLWLDOL]H\u0003 DQG\u0003DGG\u0003WKH\u0003NH\\V\u0011\u0003)LQDOO\\\u000f\u0003ZH\u0003YHULI\\\u0003WKH\u0003KDVK\u0003WDEOH\u0003ZLWK\u0003RXU\u0003VDQLW\\\u0003FKHFN\u0003URXWLQH\u0003 DQG\u0003IUHH\u0003WKH\u0003EXIIHUV\u0003ZH\u01e2YH\u0003DOORFDWHG\u0011\u0003 Download from www.wowebook.comptg /two.lf/six.lf/seven.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/(<RX\u0003SUREDEO\\\u0003QRWLFHG\u0003WKDW\u0003ZH\u0003DUH\u0003XVLQJ\u0003 NULL\u0003DV\u0003WKH\u0003YDOXH\u0003IRU\u0003HYHU\\\u0003NH\\\u0012YDOXH\u0003SDLU\u0011\u0003 ,Q\u0003D\u0003W\\SLFDO\u0003DSSOLFDWLRQ\u000f\u0003\\RX\u0003ZRXOG\u0003OLNHO\\\u0003VWRUH\u0003VRPH\u0003XVHIXO\u0003GDWD\u0003ZLWK\u0003WKH\u0003NH\\\u000f\u0003EXW\u0003 EHFDXVH\u0003ZH\u0003DUH\u0003SULPDULO\\\u0003FRQFHUQHG\u0003ZLWK\u0003WKH\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u0003LWVHOI\u000f\u0003 ZH\u01e2UH\u0003VWRULQJ\u0003D\u0003PHDQLQJOHVV\u0003YDOXH\u0003ZLWK\u0003HDFK\u0003NH\\\u0011\u0003 $\u0011\u0015\u0011\u0016\u000308/7,7+5($'('\u0003+$6+\u00037$%/( 7KHUH\u0003DUH\u0003VRPH\u0003DVVXPSWLRQV\u0003EXLOW\u0003LQWR\u0003RXU\u0003&38\u0003KDVK\u0003WDEOH\u0003WKDW\u0003ZLOO\u0003QR\u0003ORQJHU\u0003EH\u0003 YDOLG\u0003ZKHQ\u0003ZH\u0003PRYH\u0003WR\u0003WKH\u0003*38\u0011\u0003)LUVW\u000f\u0003ZH\u0003KDYH\u0003DVVXPHG\u0003WKDW\u0003RQO\\\u0003RQH\u0003QRGH\u0003FDQ\u0003 EH\u0003DGGHG\u0003WR\u0003WKH\u0003WDEOH\u0003DW\u0003D\u0003WLPH\u0003LQ\u0003RUGHU\u0003WR\u0003PDNH\u0003WKH\u0003DGGLWLRQ\u0003RI\u0003D\u0003QRGH\u0003VLPSOHU\u0011\u0003,I\u0003 PRUH\u0003WKDQ\u0003RQH\u0003WKUHDG\u0003ZHUH\u0003WU\\LQJ\u0003WR\u0003DGG\u0003D\u0003QRGH\u0003WR\u0003WKH\u0003WDEOH\u0003DW\u0003RQFH\u000f\u0003ZH\u0003FRXOG\u0003HQG\u0003 XS\u0003ZLWK\u0003SUREOHPV\u0003VLPLODU\u0003WR\u0003WKH\u0003PXOWLWKUHDGHG\u0003DGGLWLRQ\u0003SUREOHPV\u0003LQ\u0003WKH\u0003H[DPSOH\u0003 IURP\u0003&KDSWHU\u0003 \u0011 )RU\u0003H[DPSOH\u000f\u0003OHW\u01e2V\u0003UHYLVLW\u0003RXU\u0003\u01e4DYRFDGR\u0003DQG\u0003DDUGYDUN\u01e5\u0003H[DPSOH\u0003DQG\u0003LPDJLQH\u0003WKDW\u0003 WKUHDGV\u0003$\u0003DQG\u0003%\u0003DUH\u0003WU\\LQJ\u0003WR\u0003DGG\u0003WKHVH\u0003HQWULHV\u0003WR\u0003WKH\u0003WDEOH\u0011\u00037KUHDG\u0003$\u0003FRPSXWHV\u0003D\u0003 KDVK\u0003IXQFWLRQ\u0003RQ\u0003 avocado \u000f\u0003DQG\u0003WKUHDG\u0003%\u0003FRPSXWHV\u0003WKH\u0003IXQFWLRQ\u0003RQ\u0003 aardvark \u0011\u00037KH\\\u0003 ERWK\u0003GHFLGH\u0003WKHLU\u0003NH\\V\u0003EHORQJ\u0003LQ\u0003WKH\u0003VDPH\u0003EXFNHW\u0011\u00037R\u0003DGG\u0003WKH\u0003QHZ\u0003HQWU\\\u0003WR\u0003WKH\u0003OLVW\u000f\u0003 WKUHDG\u0003$\u0003DQG\u0003%\u0003VWDUW\u0003E\\\u0003VHWWLQJ\u0003WKHLU\u0003QHZ\u0003HQWU\\\u01e2V\u0003 next\u0003SRLQWHU\u0003WR\u0003WKH\u0003\u020cUVW\u0003QRGH\u0003RI\u0003 WKH\u0003H[LVWLQJ\u0003OLVW\u0003DV\u0003LQ\u0003)LJXUH\u0003$\u0011\u0017\u0011 7KHQ\u000f\u0003ERWK\u0003WKUHDGV\u0003WU\\\u0003WR\u0003UHSODFH\u0003WKH\u0003HQWU\\\u0003LQ\u0003WKH\u0003EXFNHW\u0003DUUD\\\u0003ZLWK\u0003WKHLU\u0003QHZ\u0003 HQWU\\\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003WKUHDG\u0003WKDW\u0003\u020cQLVKHV\u0003VHFRQG\u0003LV\u0003WKH\u0003RQO\\\u0003WKUHDG\u0003WKDW\u0003KDV\u0003LWV\u0003 XSGDWH\u0003SUHVHUYHG\u0003EHFDXVH\u0003LW\u0003RYHUZULWHV\u0003WKH\u0003ZRUN\u0003RI\u0003WKH\u0003SUHYLRXV\u0003WKUHDG\u0011\u00036R\u0003 FRQVLGHU\u0003WKH\u0003VFHQDULR\u0003ZKHUH\u0003WKUHDG\u0003$\u0003UHSODFHV\u0003WKH\u0003HQWU\\\u0003 altitude \u0003ZLWK\u0003LWV\u0003HQWU\\\u0003IRU\u0003 avocado \u0011\u0003,PPHGLDWHO\\\u0003DIWHU\u0003\u020cQLVKLQJ\u000f\u0003WKUHDG\u0003%\u0003UHSODFHV\u0003ZKDW\u0003LW\u0003EHOLHYH\u0003WR\u0003EH\u0003WKH\u0003 HQWU\\\u0003IRU\u0003 altitude \u0003ZLWK\u0003LWV\u0003HQWU\\\u0003IRU\u0003 aardvark \u0011\u00038QIRUWXQDWHO\\\u000f\u0003LW\u01e2V\u0003UHSODFLQJ\u0003 avocado LQVWHDG\u0003RI\u0003 altitude \u000f\u0003UHVXOWLQJ\u0003LQ\u0003WKH\u0003VLWXDWLRQ\u0003LOOXVWUDWHG\u0003LQ\u0003)LJXUH\u0003$\u0011\u0018\u0011aardvarkaltitudeaudienceavocado Figure A.4 0XOWLSOH\u0003WKUHDGV\u0003DWWHPSWLQJ\u0003WR\u0003DGG\u0003D\u0003QRGH\u0003WR\u0003WKH\u0003VDPH\u0003EXFNHW Download from www.wowebook.comptgADV ANCED",
    "from www.wowebook.comptg /two.lf/six.lf/seven.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/(<RX\u0003SUREDEO\\\u0003QRWLFHG\u0003WKDW\u0003ZH\u0003DUH\u0003XVLQJ\u0003 NULL\u0003DV\u0003WKH\u0003YDOXH\u0003IRU\u0003HYHU\\\u0003NH\\\u0012YDOXH\u0003SDLU\u0011\u0003 ,Q\u0003D\u0003W\\SLFDO\u0003DSSOLFDWLRQ\u000f\u0003\\RX\u0003ZRXOG\u0003OLNHO\\\u0003VWRUH\u0003VRPH\u0003XVHIXO\u0003GDWD\u0003ZLWK\u0003WKH\u0003NH\\\u000f\u0003EXW\u0003 EHFDXVH\u0003ZH\u0003DUH\u0003SULPDULO\\\u0003FRQFHUQHG\u0003ZLWK\u0003WKH\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u0003LWVHOI\u000f\u0003 ZH\u01e2UH\u0003VWRULQJ\u0003D\u0003PHDQLQJOHVV\u0003YDOXH\u0003ZLWK\u0003HDFK\u0003NH\\\u0011\u0003 $\u0011\u0015\u0011\u0016\u000308/7,7+5($'('\u0003+$6+\u00037$%/( 7KHUH\u0003DUH\u0003VRPH\u0003DVVXPSWLRQV\u0003EXLOW\u0003LQWR\u0003RXU\u0003&38\u0003KDVK\u0003WDEOH\u0003WKDW\u0003ZLOO\u0003QR\u0003ORQJHU\u0003EH\u0003 YDOLG\u0003ZKHQ\u0003ZH\u0003PRYH\u0003WR\u0003WKH\u0003*38\u0011\u0003)LUVW\u000f\u0003ZH\u0003KDYH\u0003DVVXPHG\u0003WKDW\u0003RQO\\\u0003RQH\u0003QRGH\u0003FDQ\u0003 EH\u0003DGGHG\u0003WR\u0003WKH\u0003WDEOH\u0003DW\u0003D\u0003WLPH\u0003LQ\u0003RUGHU\u0003WR\u0003PDNH\u0003WKH\u0003DGGLWLRQ\u0003RI\u0003D\u0003QRGH\u0003VLPSOHU\u0011\u0003,I\u0003 PRUH\u0003WKDQ\u0003RQH\u0003WKUHDG\u0003ZHUH\u0003WU\\LQJ\u0003WR\u0003DGG\u0003D\u0003QRGH\u0003WR\u0003WKH\u0003WDEOH\u0003DW\u0003RQFH\u000f\u0003ZH\u0003FRXOG\u0003HQG\u0003 XS\u0003ZLWK\u0003SUREOHPV\u0003VLPLODU\u0003WR\u0003WKH\u0003PXOWLWKUHDGHG\u0003DGGLWLRQ\u0003SUREOHPV\u0003LQ\u0003WKH\u0003H[DPSOH\u0003 IURP\u0003&KDSWHU\u0003 \u0011 )RU\u0003H[DPSOH\u000f\u0003OHW\u01e2V\u0003UHYLVLW\u0003RXU\u0003\u01e4DYRFDGR\u0003DQG\u0003DDUGYDUN\u01e5\u0003H[DPSOH\u0003DQG\u0003LPDJLQH\u0003WKDW\u0003 WKUHDGV\u0003$\u0003DQG\u0003%\u0003DUH\u0003WU\\LQJ\u0003WR\u0003DGG\u0003WKHVH\u0003HQWULHV\u0003WR\u0003WKH\u0003WDEOH\u0011\u00037KUHDG\u0003$\u0003FRPSXWHV\u0003D\u0003 KDVK\u0003IXQFWLRQ\u0003RQ\u0003 avocado \u000f\u0003DQG\u0003WKUHDG\u0003%\u0003FRPSXWHV\u0003WKH\u0003IXQFWLRQ\u0003RQ\u0003 aardvark \u0011\u00037KH\\\u0003 ERWK\u0003GHFLGH\u0003WKHLU\u0003NH\\V\u0003EHORQJ\u0003LQ\u0003WKH\u0003VDPH\u0003EXFNHW\u0011\u00037R\u0003DGG\u0003WKH\u0003QHZ\u0003HQWU\\\u0003WR\u0003WKH\u0003OLVW\u000f\u0003 WKUHDG\u0003$\u0003DQG\u0003%\u0003VWDUW\u0003E\\\u0003VHWWLQJ\u0003WKHLU\u0003QHZ\u0003HQWU\\\u01e2V\u0003 next\u0003SRLQWHU\u0003WR\u0003WKH\u0003\u020cUVW\u0003QRGH\u0003RI\u0003 WKH\u0003H[LVWLQJ\u0003OLVW\u0003DV\u0003LQ\u0003)LJXUH\u0003$\u0011\u0017\u0011 7KHQ\u000f\u0003ERWK\u0003WKUHDGV\u0003WU\\\u0003WR\u0003UHSODFH\u0003WKH\u0003HQWU\\\u0003LQ\u0003WKH\u0003EXFNHW\u0003DUUD\\\u0003ZLWK\u0003WKHLU\u0003QHZ\u0003 HQWU\\\u0011\u0003+RZHYHU\u000f\u0003WKH\u0003WKUHDG\u0003WKDW\u0003\u020cQLVKHV\u0003VHFRQG\u0003LV\u0003WKH\u0003RQO\\\u0003WKUHDG\u0003WKDW\u0003KDV\u0003LWV\u0003 XSGDWH\u0003SUHVHUYHG\u0003EHFDXVH\u0003LW\u0003RYHUZULWHV\u0003WKH\u0003ZRUN\u0003RI\u0003WKH\u0003SUHYLRXV\u0003WKUHDG\u0011\u00036R\u0003 FRQVLGHU\u0003WKH\u0003VFHQDULR\u0003ZKHUH\u0003WKUHDG\u0003$\u0003UHSODFHV\u0003WKH\u0003HQWU\\\u0003 altitude \u0003ZLWK\u0003LWV\u0003HQWU\\\u0003IRU\u0003 avocado \u0011\u0003,PPHGLDWHO\\\u0003DIWHU\u0003\u020cQLVKLQJ\u000f\u0003WKUHDG\u0003%\u0003UHSODFHV\u0003ZKDW\u0003LW\u0003EHOLHYH\u0003WR\u0003EH\u0003WKH\u0003 HQWU\\\u0003IRU\u0003 altitude \u0003ZLWK\u0003LWV\u0003HQWU\\\u0003IRU\u0003 aardvark \u0011\u00038QIRUWXQDWHO\\\u000f\u0003LW\u01e2V\u0003UHSODFLQJ\u0003 avocado LQVWHDG\u0003RI\u0003 altitude \u000f\u0003UHVXOWLQJ\u0003LQ\u0003WKH\u0003VLWXDWLRQ\u0003LOOXVWUDWHG\u0003LQ\u0003)LJXUH\u0003$\u0011\u0018\u0011aardvarkaltitudeaudienceavocado Figure A.4 0XOWLSOH\u0003WKUHDGV\u0003DWWHPSWLQJ\u0003WR\u0003DGG\u0003D\u0003QRGH\u0003WR\u0003WKH\u0003VDPH\u0003EXFNHW Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/six.lf/eight.lfaardvarkaltitudeaudienceavocado Figure A.5 7KH\u0003KDVK\u0003WDEOH\u0003DIWHU\u0003DQ\u0003XQVXFFHVVIXO\u0003FRQFXUUHQW\u0003PRGL\u020cFDWLRQ\u0003E\\\u0003 WZR\u0003WKUHDGV 7KUHDG\u0003$\u01e2V\u0003HQWU\\\u0003LV\u0003WUDJLFDOO\\\u0003\u01e4\u020dRDWLQJ\u01e5\u0003RXWVLGH\u0003RI\u0003WKH\u0003KDVK\u0003WDEOH\u0011\u0003)RUWXQDWHO\\\u000f\u0003RXU\u0003 VDQLW\\\u0003FKHFN\u0003URXWLQH\u0003ZRXOG\u0003FDWFK\u0003WKLV\u0003DQG\u0003DOHUW\u0003XV\u0003WR\u0003WKH\u0003SUHVHQFH\u0003RI\u0003D\u0003SUREOHP\u0003 EHFDXVH\u0003LW\u0003ZRXOG\u0003FRXQW\u0003IHZHU\u0003QRGHV\u0003WKDQ\u0003ZH\u0003H[SHFWHG\u0011\u0003%XW\u0003ZH\u0003VWLOO\u0003QHHG\u0003WR\u0003 DQVZHU\u0003WKLV\u0003TXHVWLRQ \u0003+RZ\u0003GR\u0003ZH\u0003EXLOG\u0003D\u0003KDVK\u0003WDEOH\u0003RQ\u0003WKH\u0003*38\"\u0004\u00037KH\u0003NH\\\u0003REVHU - YDWLRQ\u0003KHUH\u0003LQYROYHV\u0003WKH\u0003IDFW\u0003WKDW\u0003RQO\\\u0003RQH\u0003WKUHDG\u0003FDQ\u0003VDIHO\\\u0003PDNH\u0003PRGL\u020cFDWLRQV\u0003 WR\u0003D\u0003EXFNHW\u0003DW\u0003D\u0003WLPH\u0011\u00037KLV\u0003LV\u0003VLPLODU\u0003WR\u0003RXU\u0003GRW\u0003SURGXFW\u0003H[DPSOH\u0003ZKHUH\u0003RQO\\\u0003RQH\u0003 WKUHDG\u0003DW\u0003D\u0003WLPH\u0003FRXOG\u0003VDIHO\\\u0003DGG\u0003LWV\u0003YDOXH\u0003WR\u0003WKH\u0003\u020cQDO\u0003UHVXOW\u0011\u0003,I\u0003HDFK\u0003EXFNHW\u0003KDG\u0003 DQ\u0003DWRPLF\u0003ORFN\u0003DVVRFLDWHG\u0003ZLWK\u0003LW\u000f\u0003ZH\u0003FRXOG\u0003HQVXUH\u0003WKDW\u0003RQO\\\u0003D\u0003VLQJOH\u0003WKUHDG\u0003ZDV\u0003 PDNLQJ\u0003FKDQJHV\u0003WR\u0003D\u0003JLYHQ\u0003EXFNHW\u0003DW\u0003D\u0003WLPH\u0011 $\u0011\u0015\u0011\u0017\u0003$\u0003*38\u0003+$6+\u00037$%/( $UPHG\u0003ZLWK\u0003D\u0003PHWKRG\u0003WR\u0003HQVXUH\u0003VDIH\u0003PXOWLWKUHDGHG\u0003DFFHVV\u0003WR\u0003WKH\u0003KDVK\u0003WDEOH\u000f\u0003ZH\u0003 FDQ\u0003SURFHHG\u0003ZLWK\u0003D\u0003*38\u0003LPSOHPHQWDWLRQ\u0003RI\u0003WKH\u0003KDVK\u0003WDEOH\u0003DSSOLFDWLRQ\u0003ZH\u0003ZURWH\u0003 LQ\u00036HFWLRQ\u0003$\u0011\u0015\u0011\u0015 \u0003$\u0003&38\u0003+DVK\u00037DEOH\u0011\u0003:H\u01e2OO\u0003QHHG\u0003WR\u0003LQFOXGH\u0003 lock.h\u000f\u0003WKH\u0003LPSOH - PHQWDWLRQ\u0003RI\u0003RXU\u0003*38\u0003 Lock\u0003VWUXFWXUH\u0003IURP\u00036HFWLRQ\u0003$\u0011\u0014\u0011\u0014\u0003$WRPLF\u0003/RFNV\u000f\u0003DQG\u0003ZH\u01e2OO\u0003 QHHG\u0003WR\u0003GHFODUH\u0003WKH\u0003KDVK\u0003IXQFWLRQ\u0003DV\u0003D\u0003 __device__ \u0003IXQFWLRQ\u0011\u0003$VLGH\u0003IURP\u0003WKHVH\u0003 FKDQJHV\u000f\u0003WKH\u0003IXQGDPHQWDO\u0003GDWD\u0003VWUXFWXUHV\u0003DQG\u0003KDVK\u0003IXQFWLRQ\u0003DUH\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003 &38\u0003LPSOHPHQWDWLRQ\u0011 Download from www.wowebook.comptg /two.lf/six.lf/nine.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/(#include \u201c../common/book.h\u201d #include \u201clock.h\u201d struct Entry { unsigned int key; void* value; Entry *next; }; struct Table { size_t count; Entry **entries; Entry *pool; }; __device__ __host__ size_t hash( unsigned int value, size_t count ) { return value % count; } ,QLWLDOL]LQJ\u0003DQG\u0003IUHHLQJ\u0003WKH\u0003KDVK\u0003WDEOH\u0003FRQVLVWV\u0003RI\u0003WKH\u0003VDPH\u0003VWHSV\u0003DV\u0003ZH\u0003SHUIRUPHG\u0003 RQ\u0003WKH\u0003&38\u000f\u0003EXW\u0003DV\u0003ZLWK\u0003SUHYLRXV\u0003H[DPSOHV\u000f\u0003ZH\u0003XVH\u0003&8'$\u0003UXQWLPH\u0003IXQFWLRQV\u0003WR\u0003 DFFRPSOLVK\u0003WKLV\u0011\u0003:H\u0003XVH\u0003 cudaMalloc() \u0003WR\u0003DOORFDWH\u0003D\u0003EXFNHW\u0003DUUD\\\u0003DQG\u0003D\u0003SRRO\u0003RI\u0003 HQWULHV\u000f\u0003DQG\u0003ZH\u0003XVH\u0003 cudaMemset() \u0003WR\u0003VHW\u0003WKH\u0003EXFNHW\u0003DUUD\\\u0003HQWULHV\u0003WR\u0003]HUR\u0011\u00037R\u0003 IUHH\u0003WKH\u0003PHPRU\\\u0003XSRQ\u0003DSSOLFDWLRQ\u0003FRPSOHWLRQ\u000f\u0003ZH\u0003XVH\u0003 cudaFree() \u0011 void initialize_table( Table &table, int entries, int elements ) { table.count = entries; HANDLE_ERROR( cudaMalloc( ( void**)&table.entries, entries * sizeof(Entry*)) ); HANDLE_ERROR( cudaMemset( table.entries, 0, entries * sizeof(Entry*) ) ); HANDLE_ERROR( cudaMalloc( ( void**)&table.pool, elements * sizeof(Entry)) ); } Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/seven.lf/zero.lfvoid free_table( Table &table ) { cudaFree( table.pool ); cudaFree( table.entries ); } :H\u0003XVHG\u0003D\u0003URXWLQH\u0003WR\u0003FKHFN\u0003RXU\u0003KDVK\u0003WDEOH\u0003IRU\u0003FRUUHFWQHVV\u0003LQ\u0003WKH\u0003&38\u0003LPSOHPHQ - WDWLRQ\u0011\u0003:H\u0003QHHG\u0003D\u0003VLPLODU\u0003URXWLQH\u0003IRU\u0003WKH\u0003*38\u0003YHUVLRQ\u000f\u0003VR\u0003ZH\u0003KDYH\u0003WZR\u0003RSWLRQV\u0011\u0003:H\u0003 FRXOG\u0003ZULWH\u0003D\u0003*38\u0010EDVHG\u0003YHUVLRQ\u0003RI\u0003 verify_table() \u000f\u0003RU\u0003ZH\u0003FRXOG\u0003XVH\u0003WKH\u0003VDPH\u0003 FRGH\u0003ZH\u0003XVHG\u0003LQ\u0003WKH\u0003&38\u0003YHUVLRQ\u0003DQG\u0003DGG\u0003D\u0003IXQFWLRQ\u0003WKDW\u0003FRSLHV\u0003D\u0003KDVK\u0003WDEOH\u0003IURP\u0003 WKH\u0003*38\u0003WR\u0003WKH\u0003&38\u0011\u0003$OWKRXJK\u0003HLWKHU\u0003RSWLRQ\u0003JHWV\u0003XV\u0003ZKDW\u0003ZH\u0003QHHG\u000f\u0003WKH\u0003VHFRQG\u0003 RSWLRQ\u0003VHHPV\u0003VXSHULRU\u0003IRU\u0003WZR\u0003UHDVRQV \u0003)LUVW\u000f\u0003LW\u0003LQYROYHV\u0003UHXVLQJ\u0003RXU\u0003&38\u0003YHUVLRQ\u0003 RI\u0003verify_table() \u0011\u0003$V\u0003ZLWK\u0003FRGH\u0003UHXVH\u0003LQ\u0003JHQHUDO\u000f\u0003WKLV\u0003VDYHV\u0003WLPH\u0003DQG\u0003HQVXUHV\u0003 WKDW\u0003IXWXUH\u0003FKDQJHV\u0003WR\u0003WKH\u0003FRGH\u0003ZRXOG\u0003QHHG\u0003WR\u0003EH\u0003PDGH\u0003LQ\u0003RQO\\\u0003RQH\u0003SODFH\u0003IRU\u0003ERWK\u0003 YHUVLRQV\u0003RI\u0003WKH\u0003KDVK\u0003WDEOH\u0011\u00036HFRQG\u000f\u0003LPSOHPHQWLQJ\u0003D\u0003FRS\\\u0003IXQFWLRQ\u0003ZLOO\u0003XQFRYHU\u0003DQ\u0003 LQWHUHVWLQJ\u0003SUREOHP\u000f\u0003WKH\u0003VROXWLRQ\u0003WR\u0003ZKLFK\u0003PD\\\u0003EH\u0003YHU\\\u0003XVHIXO\u0003WR\u0003\\RX\u0003LQ\u0003WKH\u0003IXWXUH\u0011 $V\u0003SURPLVHG\u000f\u0003 verify_table() \u0003LV\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003&38\u0003LPSOHPHQWDWLRQ\u0003DQG\u0003LV\u0003 UHSULQWHG\u0003KHUH\u0003IRU\u0003\\RXU\u0003FRQYHQLHQFH #define SIZE (100*1024*1024) #define ELEMENTS (SIZE / sizeof(unsigned int )) #define HASH_ENTRIES 1024 void verify_table( const Table &dev_table ) { Table table; copy_table_to_host( dev_table, table ); int count = 0; for (size_t i=0; i<table.count; i++) { Entry *current = table.entries[i]; while (current != NULL) { ++count; if (hash( current->value, table.count ) != i) printf( \"%d hashed to %ld, but was located \" \"at %ld\\n\" , current->value, hash(current->value, table.count), i ); current = current->next; } } Download from www.wowebook.comptg /two.lf/seven.lf/one.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/( if (count != ELEMENTS) printf( \u201c%d elements found in hash table. Should be %ld\\n\u201d , count, ELEMENTS ); else printf( \u201c All %d elements found in hash table.\\n\u201d , count ); free( table.pool ); free( table.entries ); } 6LQFH\u0003ZH\u0003FKRVH\u0003WR\u0003UHXVH\u0003RXU\u0003&38\u0003LPSOHPHQWDWLRQ\u0003RI\u0003 verify_table() \u000f\u0003ZH\u0003QHHG\u0003D\u0003 IXQFWLRQ\u0003WR\u0003FRS\\\u0003WKH\u0003WDEOH\u0003IURP\u0003*38\u0003PHPRU\\\u0003WR\u0003KRVW\u0003PHPRU\\\u0011\u00037KHUH\u0003DUH\u0003WKUHH\u0003VWHSV\u0003 WR\u0003WKLV\u0003IXQFWLRQ\u000f\u0003WZR\u0003UHODWLYHO\\\u0003REYLRXV\u0003VWHSV\u0003DQG\u0003D\u0003WKLUG\u000f\u0003WULFNLHU\u0003VWHS\u0011\u00037KH\u0003\u020cUVW\u0003WZR\u0003 VWHSV\u0003LQYROYH\u0003DOORFDWLQJ\u0003KRVW\u0003PHPRU\\\u0003IRU\u0003WKH\u0003KDVK\u0003WDEOH\u0003GDWD\u0003DQG\u0003SHUIRUPLQJ\u0003D\u0003FRS\\\u0003 RI\u0003WKH\u0003*38\u0003GDWD\u0003VWUXFWXUHV\u0003LQWR\u0003WKLV\u0003PHPRU\\\u0003ZLWK\u0003 cudaMemcpy() \u0011\u0003:H\u0003KDYH\u0003GRQH\u0003 WKLV\u0003PDQ\\\u0003WLPHV\u0003SUHYLRXVO\\\u000f\u0003VR\u0003WKLV\u0003VKRXOG\u0003FRPH\u0003DV\u0003QR\u0003VXUSULVH\u0011 void copy_table_to_host( const Table &table, Table &hostTable) { hostTable.count = table.count; hostTable.entries = (Entry**)calloc( table.count, sizeof(Entry*) ); hostTable.pool = (Entry*)malloc( ELEMENTS * sizeof( Entry ) ); HANDLE_ERROR( cudaMemcpy( hostTable.entries, table.entries, table.count * sizeof(Entry*), cudaMemcpyDeviceToHost ) ); HANDLE_ERROR( cudaMemcpy( hostTable.pool, table.pool, ELEMENTS * sizeof( Entry ), cudaMemcpyDeviceToHost ) ); 7KH\u0003WULFN\\\u0003SRUWLRQ\u0003RI\u0003WKLV\u0003URXWLQH\u0003LQYROYHV\u0003WKH\u0003IDFW\u0003WKDW\u0003VRPH\u0003RI\u0003WKH\u0003GDWD\u0003ZH\u0003KDYH\u0003 FRSLHG\u0003DUH\u0003SRLQWHUV\u0011\u0003:H\u0003FDQQRW\u0003VLPSO\\\u0003FRS\\\u0003WKHVH\u0003SRLQWHUV\u0003WR\u0003WKH\u0003KRVW\u0003EHFDXVH\u0003 WKH\\\u0003DUH\u0003DGGUHVVHV\u0003RQ\u0003WKH\u0003*38 \u0003WKH\\\u0003ZLOO\u0003QR\u0003ORQJHU\u0003EH\u0003YDOLG\u0003SRLQWHUV\u0003RQ\u0003WKH\u0003KRVW\u0011\u0003 +RZHYHU\u000f\u0003WKH\u0003UHODWLYH\u0003RIIVHWV\u0003RI\u0003WKH\u0003SRLQWHUV\u0003 will\u0003VWLOO\u0003EH\u0003YDOLG\u0011\u0003(YHU\\\u0003*38\u0003SRLQWHU\u0003 Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/seven.lf/two.lfWR\u0003DQ\u0003Entry\u0003SRLQWV\u0003VRPHZKHUH\u0003ZLWKLQ\u0003WKH\u0003 table.pool[] \u0003DUUD\\\u000f\u0003EXW\u0003IRU\u0003WKH\u0003KDVK\u0003 WDEOH\u0003WR\u0003EH\u0003XVDEOH\u0003RQ\u0003WKH\u0003KRVW\u000f\u0003ZH\u0003QHHG\u0003WKHP\u0003WR\u0003SRLQW\u0003WR\u0003WKH\u0003VDPH\u0003 Entry\u0003LQ\u0003WKH\u0003 hostTable.pool[] \u0003DUUD\\\u0011\u0003 *LYHQ\u0003D\u0003*38\u0003SRLQWHU\u0003;\u000f\u0003ZH\u0003WKHUHIRUH\u0003QHHG\u0003WR\u0003DGG\u0003WKH\u0003SRLQWHU\u01e2V\u0003RIIVHW\u0003IURP\u0003 table. pool\u0003WR\u0003hostTable.pool \u0003WR\u0003JHW\u0003D\u0003YDOLG\u0003KRVW\u0003SRLQWHU\u0011\u00037KDW\u0003LV\u000f\u0003WKH\u0003QHZ\u0003SRLQWHU\u0003 VKRXOG\u0003EH\u0003FRPSXWHG\u0003DV\u0003IROORZV (X - table.pool) + hostTable.pool :H\u0003SHUIRUP\u0003WKLV\u0003XSGDWH\u0003IRU\u0003HYHU\\\u0003 Entry\u0003SRLQWHU\u0003ZH\u01e2YH\u0003FRSLHG\u0003IURP\u0003WKH\u0003*38 \u0003WKH\u0003 Entry\u0003SRLQWHUV\u0003LQ\u0003 hostTable.entries \u0003DQG\u0003WKH\u0003next\u0003SRLQWHU\u0003RI\u0003HYHU\\\u0003 Entry LQ\u0003WKH\u0003WDEOH\u01e2V\u0003SRRO\u0003RI\u0003HQWULHV for (int i=0; i<table.count; i++) { if (hostTable.entries[i] != NULL) hostTable.entries[i] = (Entry*)(( size_t)hostTable.entries[i] - ( size_t)table.pool + ( size_t)hostTable.pool); } for (int i=0; i<ELEMENTS; i++) { if (hostTable.pool[i].next != NULL) hostTable.pool[i].next = (Entry*)(( size_t)hostTable.pool[i].next - ( size_t)table.pool + ( size_t)hostTable.pool); } } +DYLQJ\u0003VHHQ\u0003WKH\u0003GDWD\u0003VWUXFWXUHV\u000f\u0003KDVK\u0003IXQFWLRQ\u000f\u0003LQLWLDOL]DWLRQ\u000f\u0003FOHDQXS\u000f\u0003DQG\u0003YHUL\u020c - FDWLRQ\u0003FRGH\u000f\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003SLHFH\u0003UHPDLQLQJ\u0003LV\u0003WKH\u0003RQH\u0003WKDW\u0003DFWXDOO\\\u0003LQYROYHV\u0003 &8'$\u0003&\u0003DWRPLFV\u0011\u0003$V\u0003DUJXPHQWV\u000f\u0003WKH\u0003 add_to_table() \u0003NHUQHO\u0003ZLOO\u0003WDNH\u0003DQ\u0003DUUD\\\u0003 RI\u0003NH\\V\u0003DQG\u0003YDOXHV\u0003WR\u0003EH\u0003DGGHG\u0003WR\u0003WKH\u0003KDVK\u0003WDEOH\u0011\u0003,WV\u0003QH[W\u0003DUJXPHQW\u0003LV\u0003WKH\u0003KDVK\u0003 WDEOH\u0003LWVHOI\u000f\u0003DQG\u0003WKH\u0003\u020cQDO\u0003DUJXPHQW\u0003LV\u0003DQ\u0003DUUD\\\u0003RI\u0003ORFNV\u0003WKDW\u0003ZLOO\u0003EH\u0003XVHG\u0003WR\u0003ORFN\u0003 HDFK\u0003RI\u0003WKH\u0003WDEOH\u01e2V\u0003EXFNHWV\u0011\u00036LQFH\u0003RXU\u0003LQSXW\u0003LV\u0003WZR\u0003DUUD\\V\u0003WKDW\u0003RXU\u0003WKUHDGV\u0003ZLOO\u0003 QHHG\u0003WR\u0003LQGH[\u000f\u0003ZH\u0003DOVR\u0003QHHG\u0003RXU\u0003DOO\u0010WRR\u0010FRPPRQ\u0003LQGH[\u0003OLQHDUL]DWLRQ __global__ void add_to_table( unsigned int *keys, void **values, Table table, Lock *lock ) { int tid = threadIdx.x + blockIdx.x *",
    "i<ELEMENTS; i++) { if (hostTable.pool[i].next != NULL) hostTable.pool[i].next = (Entry*)(( size_t)hostTable.pool[i].next - ( size_t)table.pool + ( size_t)hostTable.pool); } } +DYLQJ\u0003VHHQ\u0003WKH\u0003GDWD\u0003VWUXFWXUHV\u000f\u0003KDVK\u0003IXQFWLRQ\u000f\u0003LQLWLDOL]DWLRQ\u000f\u0003FOHDQXS\u000f\u0003DQG\u0003YHUL\u020c - FDWLRQ\u0003FRGH\u000f\u0003WKH\u0003PRVW\u0003LPSRUWDQW\u0003SLHFH\u0003UHPDLQLQJ\u0003LV\u0003WKH\u0003RQH\u0003WKDW\u0003DFWXDOO\\\u0003LQYROYHV\u0003 &8'$\u0003&\u0003DWRPLFV\u0011\u0003$V\u0003DUJXPHQWV\u000f\u0003WKH\u0003 add_to_table() \u0003NHUQHO\u0003ZLOO\u0003WDNH\u0003DQ\u0003DUUD\\\u0003 RI\u0003NH\\V\u0003DQG\u0003YDOXHV\u0003WR\u0003EH\u0003DGGHG\u0003WR\u0003WKH\u0003KDVK\u0003WDEOH\u0011\u0003,WV\u0003QH[W\u0003DUJXPHQW\u0003LV\u0003WKH\u0003KDVK\u0003 WDEOH\u0003LWVHOI\u000f\u0003DQG\u0003WKH\u0003\u020cQDO\u0003DUJXPHQW\u0003LV\u0003DQ\u0003DUUD\\\u0003RI\u0003ORFNV\u0003WKDW\u0003ZLOO\u0003EH\u0003XVHG\u0003WR\u0003ORFN\u0003 HDFK\u0003RI\u0003WKH\u0003WDEOH\u01e2V\u0003EXFNHWV\u0011\u00036LQFH\u0003RXU\u0003LQSXW\u0003LV\u0003WZR\u0003DUUD\\V\u0003WKDW\u0003RXU\u0003WKUHDGV\u0003ZLOO\u0003 QHHG\u0003WR\u0003LQGH[\u000f\u0003ZH\u0003DOVR\u0003QHHG\u0003RXU\u0003DOO\u0010WRR\u0010FRPPRQ\u0003LQGH[\u0003OLQHDUL]DWLRQ __global__ void add_to_table( unsigned int *keys, void **values, Table table, Lock *lock ) { int tid = threadIdx.x + blockIdx.x * blockDim.x; int stride = blockDim.x * gridDim.x; Download from www.wowebook.comptg /two.lf/seven.lf/three.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/( 2XU\u0003WKUHDGV\u0003ZDON\u0003WKURXJK\u0003WKH\u0003LQSXW\u0003DUUD\\V\u0003H[DFWO\\\u0003OLNH\u0003WKH\\\u0003GLG\u0003LQ\u0003WKH\u0003GRW\u0003SURGXFW\u0003 H[DPSOH\u0011\u0003)RU\u0003HDFK\u0003NH\\\u0003LQ\u0003WKH\u0003 keys[]\u0003DUUD\\\u000f\u0003WKH\u0003WKUHDG\u0003ZLOO\u0003FRPSXWH\u0003WKH\u0003KDVK\u0003 IXQFWLRQ\u0003LQ\u0003RUGHU\u0003WR\u0003GHWHUPLQH\u0003ZKLFK\u0003EXFNHW\u0003WKH\u0003NH\\\u0012YDOXH\u0003SDLU\u0003EHORQJV\u0003LQ\u0011\u0003$IWHU\u0003 GHWHUPLQLQJ\u0003WKH\u0003WDUJHW\u0003EXFNHW\u000f\u0003WKH\u0003WKUHDG\u0003ORFNV\u0003WKH\u0003EXFNHW\u000f\u0003DGGV\u0003LWV\u0003NH\\\u0012YDOXH\u0003 SDLU\u000f\u0003DQG\u0003XQORFNV\u0003WKH\u0003EXFNHW\u0011 while (tid < ELEMENTS) { unsigned int key = keys[tid]; size_t hashValue = hash( key, table.count ); for (int i=0; i<32; i++) { if ((tid % 32) == i) { Entry *location = &(table.pool[tid]); location->key = key; location->value = values[tid]; lock[hashValue].lock(); location->next = table.entries[hashValue]; table.entries[hashValue] = location; lock[hashValue].unlock(); } } tid += stride; } } 7KHUH\u0003LV\u0003VRPHWKLQJ\u0003UHPDUNDEO\\\u0003SHFXOLDU\u0003DERXW\u0003WKLV\u0003ELW\u0003RI\u0003FRGH\u000f\u0003KRZHYHU\u0011\u00037KH\u0003 for()\u0003ORRS\u0003DQG\u0003VXEVHTXHQW\u0003 if()\u0003VWDWHPHQW\u0003VHHP\u0003GHFLGHGO\\\u0003XQQHFHVVDU\\\u0011\u0003,Q\u0003 &KDSWHU\u0003\u0019\u000f\u0003ZH\u0003LQWURGXFHG\u0003WKH\u0003FRQFHSW\u0003RI\u0003D\u0003 warp \u0011\u0003,I\u0003\\RX\u01e2YH\u0003IRUJRWWHQ\u000f\u0003D\u0003ZDUS\u0003LV\u0003D\u0003 FROOHFWLRQ\u0003RI\u0003\u0016\u0015\u0003WKUHDGV\u0003WKDW\u0003H[HFXWH\u0003WRJHWKHU\u0003LQ\u0003ORFNVWHS\u0011\u0003$OWKRXJK\u0003WKH\u0003QXDQFHV\u0003 RI\u0003KRZ\u0003WKLV\u0003JHWV\u0003LPSOHPHQWHG\u0003LQ\u0003WKH\u0003*38\u0003DUH\u0003EH\\RQG\u0003WKH\u0003VFRSH\u0003RI\u0003WKLV\u0003ERRN\u000f\u0003RQO\\\u0003 RQH\u0003WKUHDG\u0003LQ\u0003WKH\u0003ZDUS\u0003FDQ\u0003DFTXLUH\u0003WKH\u0003ORFN\u0003DW\u0003D\u0003WLPH\u000f\u0003DQG\u0003ZH\u0003ZLOO\u0003VXIIHU\u0003PDQ\\\u0003D\u0003 KHDGDFKH\u0003LI\u0003ZH\u0003OHW\u0003DOO\u0003\u0016\u0015\u0003WKUHDGV\u0003LQ\u0003WKH\u0003ZDUS\u0003FRQWHQG\u0003IRU\u0003WKH\u0003ORFN\u0003VLPXOWDQHRXVO\\\u0011\u0003 ,Q\u0003WKLV\u0003VLWXDWLRQ\u000f\u0003ZH\u01e2YH\u0003IRXQG\u0003WKDW\u0003LW\u01e2V\u0003EHVW\u0003WR\u0003GR\u0003VRPH\u0003RI\u0003WKH\u0003ZRUN\u0003LQ\u0003VRIWZDUH\u0003DQG\u0003 VLPSO\\\u0003ZDON\u0003WKURXJK\u0003HDFK\u0003WKUHDG\u0003LQ\u0003WKH\u0003ZDUS\u000f\u0003JLYLQJ\u0003HDFK\u0003D\u0003FKDQFH\u0003WR\u0003DFTXLUH\u0003WKH\u0003 GDWD\u0003VWUXFWXUH\u01e2V\u0003ORFN\u000f\u0003GR\u0003LWV\u0003ZRUN\u000f\u0003DQG\u0003VXEVHTXHQWO\\\u0003UHOHDVH\u0003WKH\u0003ORFN\u0011 7KH\u0003\u020dRZ\u0003RI\u0003 main()\u0003VKRXOG\u0003DSSHDU\u0003LGHQWLFDO\u0003WR\u0003WKH\u0003&38\u0003LPSOHPHQWDWLRQ\u0011\u0003:H\u0003 VWDUW\u0003E\\\u0003DOORFDWLQJ\u0003D\u0003ODUJH\u0003FKXQN\u0003RI\u0003UDQGRP\u0003GDWD\u0003IRU\u0003RXU\u0003KDVK\u0003WDEOH\u0003NH\\V\u0011\u00037KHQ\u0003ZH\u0003 FUHDWH\u0003VWDUW\u0003DQG\u0003VWRS\u0003&8'$\u0003HYHQWV\u0003DQG\u0003UHFRUG\u0003WKH\u0003VWDUW\u0003HYHQW\u0003IRU\u0003RXU\u0003SHUIRUPDQFH\u0003 Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/seven.lf/four.lfPHDVXUHPHQWV\u0011\u0003:H\u0003SURFHHG\u0003WR\u0003DOORFDWH\u0003*38\u0003PHPRU\\\u0003IRU\u0003RXU\u0003DUUD\\\u0003RI\u0003UDQGRP\u0003 NH\\V\u000f\u0003FRS\\\u0003WKH\u0003DUUD\\\u0003XS\u0003WR\u0003WKH\u0003GHYLFH\u000f\u0003DQG\u0003LQLWLDOL]H\u0003RXU\u0003KDVK\u0003WDEOH int main( void ) { unsigned int *buffer = ( unsigned int *)big_random_block( SIZE ); cudaEvent_t start, stop; HANDLE_ERROR( cudaEventCreate( &start ) ); HANDLE_ERROR( cudaEventCreate( &stop ) ); HANDLE_ERROR( cudaEventRecord( start, 0 ) ); unsigned int *dev_keys; void **dev_values; HANDLE_ERROR( cudaMalloc( ( void**)&dev_keys, SIZE ) ); HANDLE_ERROR( cudaMalloc( ( void**)&dev_values, SIZE ) ); HANDLE_ERROR( cudaMemcpy( dev_keys, buffer, SIZE, cudaMemcpyHostToDevice ) ); // copy the values to dev_values here // filled in by user of this code example Table table; initialize_table( table, HASH_ENTRIES, ELEMENTS ); 7KH\u0003ODVW\u0003VWHS\u0003RI\u0003SUHSDUDWLRQ\u0003WR\u0003EXLOG\u0003RXU\u0003KDVK\u0003WDEOH\u0003LQYROYHV\u0003SUHSDULQJ\u0003ORFNV\u0003IRU\u0003 WKH\u0003KDVK\u0003WDEOH\u01e2V\u0003EXFNHWV\u0011\u0003:H\u0003DOORFDWH\u0003RQH\u0003ORFN\u0003IRU\u0003HDFK\u0003EXFNHW\u0003LQ\u0003WKH\u0003KDVK\u0003WDEOH\u0011\u0003 &RQFHLYDEO\\\u0003ZH\u0003FRXOG\u0003VDYH\u0003D\u0003ORW\u0003RI\u0003PHPRU\\\u0003E\\\u0003XVLQJ\u0003RQO\\\u0003RQH\u0003ORFN\u0003IRU\u0003WKH\u0003ZKROH\u0003 WDEOH\u0011\u0003%XW\u0003GRLQJ\u0003VR\u0003ZRXOG\u0003XWWHUO\\\u0003GHVWUR\\\u0003SHUIRUPDQFH\u0003EHFDXVH\u0003HYHU\\\u0003WKUHDG\u0003 ZRXOG\u0003KDYH\u0003WR\u0003FRPSHWH\u0003IRU\u0003WKH\u0003WDEOH\u0003ORFN\u0003ZKHQHYHU\u0003D\u0003JURXS\u0003RI\u0003WKUHDGV\u0003WULHV\u0003WR\u0003 VLPXOWDQHRXVO\\\u0003DGG\u0003HQWULHV\u0003WR\u0003WKH\u0003WDEOH\u0011\u00036R\u0003ZH\u0003GHFODUH\u0003DQ\u0003DUUD\\\u0003RI\u0003ORFNV\u000f\u0003RQH\u0003IRU\u0003 HYHU\\\u0003EXFNHW\u0003LQ\u0003WKH\u0003DUUD\\\u0011\u0003:H\u0003WKHQ\u0003DOORFDWH\u0003D\u0003*38\u0003DUUD\\\u0003IRU\u0003WKH\u0003ORFNV\u0003DQG\u0003FRS\\\u0003 WKHP\u0003XS\u0003WR\u0003WKH\u0003GHYLFH Download from www.wowebook.comptg /two.lf/seven.lf/five.lf$\u0011\u0015\u0003,03/(0(17,1*\u0003$\u0003+$6+\u00037$%/( Lock lock[HASH_ENTRIES]; Lock *dev_lock; HANDLE_ERROR( cudaMalloc( ( void**)&dev_lock, HASH_ENTRIES * sizeof( Lock ) ) ); HANDLE_ERROR( cudaMemcpy( dev_lock, lock, HASH_ENTRIES * sizeof( Lock ), cudaMemcpyHostToDevice ) ); 7KH\u0003UHVW\u0003RI\u0003 main()\u0003LV\u0003VLPLODU\u0003WR\u0003WKH\u0003&38\u0003YHUVLRQ \u0003:H\u0003DGG\u0003DOO\u0003RI\u0003RXU\u0003NH\\V\u0003WR\u0003WKH\u0003 KDVK\u0003WDEOH\u000f\u0003VWRS\u0003WKH\u0003SHUIRUPDQFH\u0003WLPHU\u000f\u0003YHULI\\\u0003WKH\u0003FRUUHFWQHVV\u0003RI\u0003WKH\u0003KDVK\u0003WDEOH\u000f\u0003 DQG\u0003FOHDQ\u0003XS\u0003DIWHU\u0003RXUVHOYHV add_to_table<<<60,256>>>( dev_keys, dev_values, table, dev_lock ); HANDLE_ERROR( cudaEventRecord( stop, 0 ) ); HANDLE_ERROR( cudaEventSynchronize( stop ) ); float elapsedTime; HANDLE_ERROR( cudaEventElapsedTime( &elapsedTime, start, stop ) ); printf( \"Time to hash: %3.1f ms\\n\" , elapsedTime ); verify_table( table ); HANDLE_ERROR( cudaEventDestroy( start ) ); HANDLE_ERROR( cudaEventDestroy( stop ) ); free_table( table ); cudaFree( dev_lock ); cudaFree( dev_keys ); cudaFree( dev_values ); free( buffer ); return 0; } Download from www.wowebook.comptgADV ANCED ATOM ICS /two.lf/seven.lf/six.lf$\u0011\u0015\u0011\u0018\u0003+$6+\u00037$%/(\u00033(5)250$1&( 8VLQJ\u0003DQ\u0003,QWHO\u0003&RUH\u0003\u0015\u0003'XR\u000f\u0003WKH\u0003&38\u0003KDVK\u0003WDEOH\u0003H[DPSOH\u0003LQ\u00036HFWLRQ\u0003$\u0011\u0015\u0011\u0015 \u0003$\u0003&38\u0003 +DVK\u00037DEOH\u0003WDNHV\u0003\u0016\u0019\u0013PV\u0003WR\u0003EXLOG\u0003D\u0003KDVK\u0003WDEOH\u0003IURP\u0003\u0014\u0013\u00130%\u0003RI\u0003GDWD\u0011\u00037KH\u0003FRGH\u0003 ZDV\u0003EXLOW\u0003ZLWK\u0003WKH\u0003RSWLRQ\u0003 -O3\u0003WR\u0003HQVXUH\u0003PD[LPDOO\\\u0003RSWLPL]HG\u0003&38\u0003FRGH\u0011\u00037KH\u0003 PXOWLWKUHDGHG\u0003*38\u0003KDVK\u0003WDEOH\u0003LQ\u00036HFWLRQ\u0003$\u0011\u0015\u0011\u0017 \u0003$\u0003*38\u0003+DVK\u00037DEOH\u0003WDNHV\u0003\u0016\u001a\u0018PV\u0003 WR\u0003FRPSOHWH\u0003WKH\u0003VDPH\u0003WDVN\u0011\u0003'LIIHULQJ\u0003E\\\u0003OHVV\u0003WKDQ\u0003\u0018\u0003SHUFHQW\u000f\u0003WKHVH\u0003DUH\u0003URXJKO\\\u0003 FRPSDUDEOH\u0003H[HFXWLRQ\u0003WLPHV\u000f\u0003ZKLFK\u0003UDLVHV\u0003DQ\u0003H[FHOOHQW\u0003TXHVWLRQ \u0003:K\\\u0003ZRXOG\u0003VXFK\u0003 D\u0003PDVVLYHO\\\u0003SDUDOOHO\u0003PDFKLQH\u0003VXFK\u0003DV\u0003D\u0003*38\u0003JHW\u0003EHDWHQ\u0003E\\\u0003D\u0003VLQJOH\u0010WKUHDGHG\u0003&38\u0003 YHUVLRQ\u0003RI\u0003WKH\u0003VDPH\u0003DSSOLFDWLRQ\"\u0003)UDQNO\\\u000f\u0003WKLV\u0003LV\u0003EHFDXVH\u0003*38V\u0003ZHUH\u0003QRW\u0003GHVLJQHG\u0003 WR\u0003H[FHO\u0003DW\u0003PXOWLWKUHDGHG\u0003DFFHVV\u0003WR\u0003FRPSOH[\u0003GDWD\u0003VWUXFWXUHV\u0003VXFK\u0003DV\u0003D\u0003KDVK\u0003WDEOH\u0011\u0003 )RU\u0003WKLV\u0003UHDVRQ\u000f\u0003WKHUH\u0003DUH\u0003YHU\\\u0003IHZ\u0003SHUIRUPDQFH\u0003PRWLYDWLRQV\u0003WR\u0003EXLOG\u0003D\u0003GDWD\u0003VWUXF - WXUH\u0003VXFK\u0003DV\u0003D\u0003KDVK\u0003WDEOH\u0003RQ\u0003WKH\u0003*38\u0011\u00036R\u0003LI\u0003 all\u0003\\RXU\u0003DSSOLFDWLRQ\u0003QHHGV\u0003WR\u0003GR\u0003LV\u0003EXLOG\u0003 D\u0003KDVK\u0003WDEOH\u0003RU\u0003VLPLODU\u0003GDWD\u0003VWUXFWXUH\u000f\u0003\\RX\u0003ZRXOG\u0003OLNHO\\\u0003EH\u0003EHWWHU\u0003RII\u0003GRLQJ\u0003WKLV\u0003RQ\u0003 \\RXU\u0003&38\u0011 2Q\u0003WKH\u0003RWKHU\u0003KDQG\u000f\u0003\\RX\u0003ZLOO\u0003VRPHWLPHV\u0003\u020cQG\u0003\\RXUVHOI\u0003LQ\u0003D\u0003VLWXDWLRQ\u0003ZKHUH\u0003D\u0003ORQJ\u0003 FRPSXWDWLRQ\u0003SLSHOLQH\u0003LQYROYHV\u0003RQH\u0003RU\u0003WZR\u0003VWDJHV\u0003WKDW\u0003WKH\u0003*38\u0003GRHV\u0003QRW\u0003HQMR\\\u0003D\u0003 SHUIRUPDQFH\u0003DGYDQWDJH\u0003RYHU\u0003FRPSDUDEOH\u0003&38\u0003LPSOHPHQWDWLRQV\u0011\u0003,Q\u0003WKHVH\u0003VLWXD - WLRQV\u000f\u0003\\RX\u0003KDYH\u0003WKUHH\u0003 VRPHZKDW\u0003REYLRXV \u0003RSWLRQV \u0003 3HUIRUP\u0003HYHU\\\u0003VWHS\u0003RI\u0003WKH\u0003SLSHOLQH\u0003RQ\u0003WKH\u0003*38\u01e9\u0003 3HUIRUP\u0003HYHU\\\u0003VWHS\u0003RI\u0003WKH\u0003SLSHOLQH\u0003RQ\u0003WKH\u0003&38\u01e9\u0003 3HUIRUP\u0003VRPH\u0003SLSHOLQH\u0003VWHSV\u0003RQ\u0003WKH\u0003*38\u0003DQG\u0003VRPH\u0003RQ\u0003WKH\u0003&38\u01e9\u0003 7KH\u0003ODVW\u0003RSWLRQ\u0003VRXQGV\u0003OLNH\u0003WKH\u0003EHVW\u0003RI\u0003ERWK\u0003ZRUOGV \u0003KRZHYHU\u000f\u0003LW\u0003LPSOLHV\u0003WKDW\u0003\\RX\u0003 ZLOO\u0003QHHG\u0003WR\u0003V\\QFKURQL]H\u0003\\RXU\u0003&38\u0003DQG\u0003*38\u0003DW\u0003DQ\\\u0003SRLQW\u0003LQ\u0003\\RXU\u0003DSSOLFDWLRQ\u0003ZKHUH\u0003 \\RX\u0003ZDQW\u0003WR\u0003PRYH\u0003FRPSXWDWLRQ\u0003IURP\u0003WKH\u0003*38\u0003WR\u0003&38\u0003RU\u0003EDFN\u0011\u00037KLV\u0003V\\QFKURQL]DWLRQ\u0003 DQG\u0003VXEVHTXHQW\u0003GDWD\u0003WUDQVIHU\u0003EHWZHHQ\u0003KRVW\u0003DQG\u0003*38\u0003FDQ\u0003RIWHQ\u0003NLOO\u0003DQ\\\u0003SHUIRU - PDQFH\u0003DGYDQWDJH\u0003\\RX\u0003PLJKW\u0003KDYH\u0003GHULYHG\u0003IURP\u0003HPSOR\\LQJ\u0003D\u0003K\\EULG\u0003DSSURDFK\u0003LQ\u0003 WKH\u0003\u020cUVW\u0003SODFH\u0011 ,Q\u0003VXFK\u0003D\u0003VLWXDWLRQ\u000f\u0003LW\u0003PD\\\u0003EH\u0003ZRUWK\u0003\\RXU\u0003WLPH\u0003WR\u0003SHUIRUP\u0003HYHU\\\u0003SKDVH\u0003RI\u0003FRPSX - WDWLRQ\u0003RQ\u0003WKH\u0003*38\u000f\u0003HYHQ\u0003LI\u0003WKH\u0003*38\u0003LV\u0003QRW\u0003LGHDOO\\\u0003VXLWHG\u0003IRU\u0003VRPH\u0003VWHSV\u0003RI\u0003WKH\u0003 DOJRULWKP\u0011\u0003,Q\u0003WKLV\u0003YHLQ\u000f\u0003WKH\u0003*38\u0003KDVK\u0003WDEOH\u0003FDQ\u0003SRWHQWLDOO\\\u0003SUHYHQW\u0003D\u0003&38\u0012*38\u0003 V\\QFKURQL]DWLRQ\u0003SRLQW\u000f\u0003PLQLPL]H\u0003GDWD\u0003WUDQVIHU\u0003EHWZHHQ\u0003WKH\u0003KRVW\u0003DQG\u0003*38\u0003DQG\u0003IUHH\u0003 WKH\u0003&38\u0003WR\u0003SHUIRUP\u0003RWKHU\u0003FRPSXWDWLRQV\u0011\u0003,Q\u0003VXFK\u0003D\u0003VFHQDULR\u000f\u0003LW\u01e2V\u0003SRVVLEOH\u0003WKDW\u0003WKH\u0003 RYHUDOO\u0003SHUIRUPDQFH\u0003RI\u0003D\u0003*38\u0003LPSOHPHQWDWLRQ\u0003ZRXOG\u0003H[FHHG\u0003D\u0003&38\u0012*38\u0003K\\EULG\u0003 DSSURDFK\u000f\u0003GHVSLWH\u0003WKH\u0003*38\u0003EHLQJ\u0003QR\u0003IDVWHU\u0003WKDQ\u0003WKH\u0003&38\u0003RQ\u0003FHUWDLQ\u0003VWHSV\u0003 RU\u0003 SRWHQWLDOO\\\u0003HYHQ\u0003JHWWLQJ\u0003WURXQFHG\u0003E\\\u0003WKH\u0003&38\u0003LQ\u0003VRPH\u0003FDVHV \u0011\u0003 Download from www.wowebook.comptg /two.lf/seven.lf/seven.lf$\u0011\u0016\u0003$33(1',;\u00035(9,(: $SSHQGL[\u00035HYLHZ$\u0011\u0016\u0003 :H\u0003VDZ\u0003KRZ\u0003WR\u0003XVH\u0003DWRPLF\u0003FRPSDUH\u0010DQG\u0010VZDS\u0003RSHUDWLRQV\u0003WR\u0003LPSOHPHQW\u0003D\u0003*38\u0003 PXWH[\u0011\u00038VLQJ\u0003D\u0003ORFN\u0003EXLOW\u0003ZLWK\u0003WKLV\u0003PXWH[\u000f\u0003ZH\u0003VDZ\u0003KRZ\u0003WR\u0003LPSURYH\u0003RXU\u0003RULJLQDO\u0003GRW\u0003 SURGXFW\u0003DSSOLFDWLRQ\u0003WR\u0003UXQ\u0003HQWLUHO\\\u0003RQ\u0003WKH\u0003*38\u0011\u0003:H\u0003FDUULHG\u0003WKLV\u0003LGHD\u0003IXUWKHU\u0003E\\\u0003 LPSOHPHQWLQJ\u0003D\u0003PXOWLWKUHDGHG\u0003KDVK\u0003WDEOH\u0003WKDW\u0003XVHG\u0003DQ\u0003DUUD\\\u0003RI\u0003ORFNV\u0003WR\u0003SUHYHQW\u0003 XQVDIH\u0003VLPXOWDQHRXV\u0003PRGL\u020cFDWLRQV\u0003E\\\u0003PXOWLSOH\u0003WKUHDGV\u0011\u0003,Q\u0003IDFW\u000f\u0003WKH\u0003PXWH[\u0003ZH\u0003 GHYHORSHG\u0003FRXOG\u0003EH\u0003XVHG\u0003IRU\u0003DQ\\\u0003PDQQHU\u0003RI\u0003SDUDOOHO\u0003GDWD\u0003VWUXFWXUHV\u000f\u0003DQG\u0003ZH\u0003KRSH\u0003 WKDW\u0003\\RX\u01e2OO\u0003\u020cQG\u0003LW\u0003XVHIXO\u0003LQ\u0003\\RXU\u0003RZQ\u0003H[SHULPHQWDWLRQ\u0003DQG\u0003DSSOLFDWLRQ\u0003GHYHORS - PHQW\u0011\u00032I\u0003FRXUVH\u000f\u0003WKH\u0003SHUIRUPDQFH\u0003RI\u0003DSSOLFDWLRQV\u0003WKDW\u0003XVH\u0003WKH\u0003*38\u0003WR\u0003LPSOH - PHQW\u0003PXWH[\u0010EDVHG\u0003GDWD\u0003VWUXFWXUHV\u0003QHHGV\u0003FDUHIXO\u0003VWXG\\\u0011\u00032XU\u0003*38\u0003KDVK\u0003WDEOH\u0003JHWV\u0003 EHDWHQ\u0003E\\\u0003D\u0003VLQJOH\u0010WKUHDGHG\u0003&38\u0003YHUVLRQ\u0003RI\u0003WKH\u0003VDPH\u0003FRGH\u000f\u0003VR\u0003LW\u0003ZLOO\u0003PDNH\u0003VHQVH\u0003 WR\u0003XVH\u0003WKH\u0003*38\u0003IRU\u0003WKLV\u0003W\\SH\u0003RI\u0003DSSOLFDWLRQ\u0003RQO\\\u0003LQ\u0003FHUWDLQ\u0003VLWXDWLRQV\u0011\u00037KHUH\u0003LV\u0003QR\u0003 EODQNHW\u0003UXOH\u0003WKDW\u0003FDQ\u0003EH\u0003XVHG\u0003WR\u0003GHWHUPLQH\u0003ZKHWKHU\u0003D\u0003*38\u0010RQO\\\u000f\u0003&38\u0010RQO\\\u000f\u0003RU\u0003 K\\EULG\u0003DSSURDFK\u0003ZLOO\u0003ZRUN\u0003EHVW\u000f\u0003EXW\u0003NQRZLQJ\u0003KRZ\u0003WR\u0003XVH\u0003DWRPLFV\u0003ZLOO\u0003DOORZ\u0003\\RX\u0003WR\u0003 PDNH\u0003WKDW\u0003GHFLVLRQ\u0003RQ\u0003D\u0003FDVH\u0010E\\\u0010FDVH\u0003EDVLV\u0011 Download from www.wowebook.comptgThis page intentionally left blank Download from www.wowebook.comptg /two.lf/seven.lf/nine.lfIndex A add()\u0003IXQFWLRQ\u000f\u0003&38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0013\u01de\u0017\u0017 add_to_table() \u0003NHUQHO\u000f\u0003*38\u0003KDVK\u0003WDEOH\u000f\u0003\u0015\u001a\u0015 $/8V\u0003 DULWKPHWLF\u0003ORJLF\u0003XQLWV &8'$\u0003$UFKLWHFWXUH\u000f\u0003\u001a XVLQJ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003 \u0019 anim_and_exit() \u0003PHWKRG\u000f\u0003*38\u0003ULSSOHV\u000f\u0003\u001a\u0013 anim_gpu() \u0003URXWLQH\u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u0016\u000f\u0003\u0014\u0015 DQLPDWLRQ *38\u0003-XOLD\u00036HW\u0003H[DPSOH\u000f\u0003\u0018\u0013\u01de\u0018\u001a *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019 \u01de\u001a\u0017 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003\u0014\u0015\u0014\u01de\u0014\u0015\u0018 animExit() , 149 DV\\QFKURQRXV\u0003FDOO cudaMemcpyAsync() DV\u000f\u0003\u0014 \u001a XVLQJ\u0003HYHQWV\u0003ZLWK\u000f\u0003\u0014\u0013 DWRPLF\u0003ORFNV\u0003 *38\u0003KDVK\u0003WDEOH\u000f\u0003\u0015\u001a\u0017\u01de\u0015\u001a\u0018 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017 atomicAdd() DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u000f\u0003\u0014\u001b\u0013 QRW\u0003VXSSRUWLQJ\u0003\u020dRDWLQJ\u0010SRLQW\u0003QXPEHUV\u000f\u0003\u0015\u0018\u0014 atomicCAS() \u000f\u0003*38\u0003ORFN\u000f\u0003\u0015\u0018\u0015\u01de\u0015\u0018\u0016 atomicExch() \u000f\u0003*38\u0003ORFN\u000f\u0003\u0015\u0018\u0016\u01de\u0015\u0018\u0017 DWRPLFV\u000f\u0003\u0014\u0019\u0016\u01de\u0014\u001b\u0017 DGYDQFHG\u000f\u0003\u0015\u0017 \u01de\u0015\u001a\u001a\u0003 FRPSXWH\u0003FDSDELOLW\\\u0003RI\u000319,',$\u0003*38V\u000f\u0003\u0014\u0019\u0017\u01de\u0014\u0019\u001a\u0003 GRW\u0003SURGXFW\u0003DQG\u000f\u0003\u0015\u0017\u001b\u01de\u0015\u0018\u0014\u0003 KDVK\u0003WDEOHV\u0011\u0003 see\u0003KDVK\u0003WDEOHV\u0003 KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003&38\u000f\u0003\u0014\u001a\u0014\u01de\u0014\u001a\u0016 KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003*38\u000f\u0003\u0014\u001a\u0016\u01de\u0014\u001a KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003RYHUYLHZ\u000f\u0003\u0014\u001a\u0013 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0014\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016\u0003 IRU\u0003PLQLPXP\u0003FRPSXWH\u0003FDSDELOLW\\\u000f\u0003\u0014\u0019\u001a\u01de\u0014\u0019\u001bORFNV\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017\u0003 RSHUDWLRQV\u000f\u0003\u0014\u0019\u001b\u01de\u0014\u001a\u0013\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0019\u0016\u01de\u0014\u0019\u0017\u000f\u0003\u0015\u0017 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014\u001b\u0016\u01de\u0014\u001b\u0017\u000f\u0003\u0015\u001a\u001a B EDQGZLGWK\u000f\u0003FRQVWDQW\u0003PHPRU\\\u0003VDYLQJ\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a\u0003 %DVLF\u0003/LQHDU\u0003$OJHEUD\u00036XESURJUDPV\u0003 %/$6 \u000f\u0003&8%/$6\u0003 OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013\u0003 ELQ\u0003FRXQWV\u000f\u0003&38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0014\u01de\u0014\u001a\u0016 %/$6\u0003 %DVLF\u0003/LQHDU\u0003$OJHEUD\u00036XESURJUDPV \u000f\u0003&8%/$6\u0003 OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013 blend_kernel() \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u0016",
    "DV\\QFKURQRXV\u0003FDOO cudaMemcpyAsync() DV\u000f\u0003\u0014 \u001a XVLQJ\u0003HYHQWV\u0003ZLWK\u000f\u0003\u0014\u0013 DWRPLF\u0003ORFNV\u0003 *38\u0003KDVK\u0003WDEOH\u000f\u0003\u0015\u001a\u0017\u01de\u0015\u001a\u0018 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017 atomicAdd() DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u000f\u0003\u0014\u001b\u0013 QRW\u0003VXSSRUWLQJ\u0003\u020dRDWLQJ\u0010SRLQW\u0003QXPEHUV\u000f\u0003\u0015\u0018\u0014 atomicCAS() \u000f\u0003*38\u0003ORFN\u000f\u0003\u0015\u0018\u0015\u01de\u0015\u0018\u0016 atomicExch() \u000f\u0003*38\u0003ORFN\u000f\u0003\u0015\u0018\u0016\u01de\u0015\u0018\u0017 DWRPLFV\u000f\u0003\u0014\u0019\u0016\u01de\u0014\u001b\u0017 DGYDQFHG\u000f\u0003\u0015\u0017 \u01de\u0015\u001a\u001a\u0003 FRPSXWH\u0003FDSDELOLW\\\u0003RI\u000319,',$\u0003*38V\u000f\u0003\u0014\u0019\u0017\u01de\u0014\u0019\u001a\u0003 GRW\u0003SURGXFW\u0003DQG\u000f\u0003\u0015\u0017\u001b\u01de\u0015\u0018\u0014\u0003 KDVK\u0003WDEOHV\u0011\u0003 see\u0003KDVK\u0003WDEOHV\u0003 KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003&38\u000f\u0003\u0014\u001a\u0014\u01de\u0014\u001a\u0016 KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003*38\u000f\u0003\u0014\u001a\u0016\u01de\u0014\u001a KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003RYHUYLHZ\u000f\u0003\u0014\u001a\u0013 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0014\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016\u0003 IRU\u0003PLQLPXP\u0003FRPSXWH\u0003FDSDELOLW\\\u000f\u0003\u0014\u0019\u001a\u01de\u0014\u0019\u001bORFNV\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017\u0003 RSHUDWLRQV\u000f\u0003\u0014\u0019\u001b\u01de\u0014\u001a\u0013\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0019\u0016\u01de\u0014\u0019\u0017\u000f\u0003\u0015\u0017 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014\u001b\u0016\u01de\u0014\u001b\u0017\u000f\u0003\u0015\u001a\u001a B EDQGZLGWK\u000f\u0003FRQVWDQW\u0003PHPRU\\\u0003VDYLQJ\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a\u0003 %DVLF\u0003/LQHDU\u0003$OJHEUD\u00036XESURJUDPV\u0003 %/$6 \u000f\u0003&8%/$6\u0003 OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013\u0003 ELQ\u0003FRXQWV\u000f\u0003&38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0014\u01de\u0014\u001a\u0016 %/$6\u0003 %DVLF\u0003/LQHDU\u0003$OJHEUD\u00036XESURJUDPV \u000f\u0003&8%/$6\u0003 OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013 blend_kernel() \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u0016 WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u001a\u01de\u0014\u0015 blockDim \u0003YDULDEOH\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0015\u01de\u0014\u0016\u0016\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u0019\u01de\u001a\u001b\u000f\u0003\u001b\u0018 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003LQFRUUHFW\u0003 RSWLPL]DWLRQ\u000f \u0003\u001b\u001b\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u000f\u0003 \u0015\u0015\u0014\u01de\u0015\u0015\u0015\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0015\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0015\u01de\u001a\u0016\u0003 *38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0018\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0019\u01de\u0019\u001a JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0018\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0013\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0015\u01de\u0014\u001b\u0016\u0003 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0015\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 WHPSHUDWXUH\u0003XSGDWH\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0013 Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/zero.lfblockIdx \u0003YDULDEOH\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0015\u01de\u0014\u0016\u0016\u0003 GH\u020cQHG\u000f\u0003\u0018\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u0019\u01de\u001a\u001a\u000f\u0003\u001b\u0018\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u000f\u0003 \u0015\u0015\u0014\u01de\u0015\u0015\u0015\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0015\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0015\u01de\u001a\u0016\u0003 *38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0017\u0003 *38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0017\u01de\u0017\u0018\u0003 JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0018\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0013\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0015\u01de\u0014\u001b\u0016\u0003 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0015\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 WHPSHUDWXUH\u0003XSGDWH\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0014 EORFNV\u0003 GH\u020cQHG\u000f\u0003\u0018\u001a\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0014\u0003 *38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0017\u01de\u0017\u0018\u0003 KDUGZDUH\u0010LPSRVHG\u0003OLPLWV\u0003RQ\u000f\u0003\u0017\u0019\u0003 VSOLWWLQJ\u0003LQWR\u0003WKUHDGV\u0011\u0003 see\u0003SDUDOOHO\u0003EORFNV\u000f\u0003VSOLWWLQJ\u0003 LQWR\u0003WKUHDGV\u0003 EUHDVW\u0003FDQFHU\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003IRU\u000f\u0003\u001b\u01de EULGJHV\u000f\u0003FRQQHFWLQJ\u0003PXOWLSOH\u0003*38V\u000f\u0003\u0015\u0015\u0017 EXFNHWV\u000f\u0003KDVK\u0003WDEOH FRQFHSW\u0003RI\u000f\u0003\u0015\u0018 \u01de\u0015\u0019\u0013\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019 \u01de\u0015\u001a\u0018 PXOWLWKUHDGHG\u0003KDVK\u0003WDEOHV\u0003DQG\u000f\u0003\u0015\u0019\u001a\u01de\u0015\u0019\u001b bufferObj \u0003YDULDEOH\u0003 FUHDWLQJ\u0003GPUAnimBitmap , 149 UHJLVWHULQJ\u0003ZLWK\u0003&8'$\u0003UXQWLPH\u000f\u0003\u0014\u0017\u0016 UHJLVWHULQJ\u0003ZLWK\u0003 cudaGraphicsGL - RegisterBuffer() \u000f\u0003\u0014\u0018\u0014\u0003 VHWWLQJ\u0003XS\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0014\u000f\u0003\u0014\u0017\u0016\u01de\u0014\u0017\u0017 EXIIHUV\u000f\u0003GHFODULQJ\u0003VKDUHG\u0003PHPRU\\\u000f\u0003\u001a\u0019\u01de\u001a\u001a C cache[]\u0003VKDUHG\u0003PHPRU\\\u0003YDULDEOH\u0003 GHFODULQJ\u0003EXIIHU\u0003RI\u0003VKDUHG\u0003PHPRU\\\u0003QDPHG\u000f\u0003\u001a\u0019\u01de\u001a\u001a GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a \u01de\u001b\u0013\u000f\u0003\u001b\u0018\u01de\u001b\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 cacheIndex \u000f\u0003LQFRUUHFW\u0003GRW\u0003SURGXFW\u0003RSWLPL]DWLRQ\u000f\u0003\u001b\u001b FDFKHV\u000f\u0003WH[WXUH\u000f\u0003\u0014\u0014\u0019\u01de\u0014\u0014\u001aFDOOEDFNV\u000f\u0003 GPUAnimBitmap \u0003XVHU\u0003UHJLVWUDWLRQ\u0003 IRU\u000f\u0003\u0014\u0017 &DPEULGJH\u00038QLYHUVLW\\\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u000f\u0003 \u01de\u0014\u0013 FDPHUD UD\\\u0003WUDFLQJ\u0003FRQFHSWV\u000f\u0003 \u001a\u01de \u001b UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003 \u01de\u0014\u0013\u0017 FHOOXODU\u0003SKRQHV\u000f\u0003SDUDOOHO\u0003SURFHVVLQJ\u0003LQ\u000f\u0003\u0015 FHQWUDO\u0003SURFHVVLQJ\u0003XQLWV\u0011\u0003 see\u0003&38V\u0003 FHQWUDO\u0003 SURFHVVLQJ\u0003XQLWV \u0003 FOHDQLQJ\u0003DJHQWV\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003IRU\u000f\u0003\u0014\u0013\u01de\u0014\u0014 clickDrag() , 149 FORFN\u0003VSHHG\u000f\u0003HYROXWLRQ\u0003RI\u000f\u0003\u0015\u01de\u0016\u0003 FRGH\u000f\u0003EUHDNLQJ\u0003DVVXPSWLRQV\u000f\u0003\u0017\u0018\u01de\u0017\u0019\u0003 FRGH\u0003UHVRXUFHV\u000f\u0003&8'D\u000f\u0003\u0015\u0017\u0019\u01de\u0015\u0017\u001b\u0003 FROOLVLRQ\u0003UHVROXWLRQ\u000f\u0003KDVK\u0003WDEOHV\u000f\u0003\u0015\u0019\u0013\u01de\u0015\u0019\u0014 FRORU &38\u0003-XOLD\u00036HW\u000f\u0003\u0017\u001b\u01de\u0017 \u0003 HDUO\\\u0003GD\\V\u0003RI\u0003*38\u0003FRPSXWLQJ\u000f\u0003\u0018\u01de\u0019 UD\\\u0003WUDFLQJ\u0003FRQFHSWV\u000f\u0003 \u001b FRPSLOHU\u0003 IRU\u0003PLQLPXP\u0003FRPSXWH\u0003FDSDELOLW\\\u000f\u0003\u0014\u0019\u001a\u01de\u0014\u0019\u001b VWDQGDUG\u0003&\u000f\u0003IRU\u0003*38\u0003FRGH\u000f\u0003\u0014\u001b\u01de\u0014 FRPSOH[\u0003QXPEHUV\u0003 GH\u020cQLQJ\u0003JHQHULF\u0003FODVV\u0003WR\u0003VWRUH\u000f\u0003\u0017 \u01de\u0018\u0013 VWRULQJ\u0003ZLWK\u0003VLQJOH\u0010SUHFLVLRQ\u0003\u020dRDWLQJ\u0010SRLQW\u0003 FRPSRQHQWV\u000f\u0003\u0018\u0017\u0003 FRPSXWDWLRQDO\u0003\u020dXLG\u0003G\\QDPLFV\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003 IRU\u000f\u0003 \u01de\u0014\u0013 FRPSXWH\u0003FDSDELOLW\\ FRPSLOLQJ\u0003IRU\u0003PLQLPXP\u000f\u0003\u0014\u0019\u001a\u01de\u0014\u0019\u001b cudaChooseDevice()and , 141 GH\u020cQHG\u000f\u0003\u0014\u0019\u0017\u0003 RI\u000319,',$\u0003*38V\u000f\u0003\u0014\u0019\u0017\u01de\u0014\u0019\u001a RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0017\u0014\u01de\u0014\u0017\u0015 FRPSXWHU\u0003JDPHV\u000f\u0003\u0016'\u0003JUDSKLF\u0003GHYHORSPHQW\u0003IRU\u000f\u0003\u0017\u01de\u0018 FRQVWDQW\u0003PHPRU\\ DFFHOHUDWLQJ\u0003DSSOLFDWLRQV\u0003ZLWK\u000f\u0003 \u0018 PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u01de\u0014\u0014\u0017 RYHUYLHZ\u0003RI\u000f\u0003 \u0019\u0003 SHUIRUPDQFH\u0003ZLWK\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a\u0003 UD\\\u0003WUDFLQJ\u0003LQWURGXFWLRQ\u000f\u0003 \u0019\u01de \u001b\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003 \u001b\u01de\u0014\u0013\u0017\u0003 UD\\\u0003WUDFLQJ\u0003ZLWK\u000f\u0003\u0014\u0013\u0017\u01de\u0014\u0013\u0019\u0003 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014\u0014\u0017 __constant__ IXQFWLRQ\u0003 GHFODULQJ\u0003PHPRU\\\u0003DV\u000f\u0003\u0014\u0013\u0017\u01de\u0014\u0013\u0019 SHUIRUPDQFH\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a copy_const_kernel() \u0003NHUQHO \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0016\u0003 XVLQJ\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015 \u01de\u0014\u0016\u0013 Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/one.lfcopy_constant_kernel() \u000f\u0003FRPSXWLQJ\u0003 WHPSHUDWXUH\u0003XSGDWHV\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0014 CPUAnimBitmap \u0003FODVV\u000f\u0003FUHDWLQJ\u0003*38\u0003ULSSOH\u000f\u0003\u0019 \u01de\u001a\u0013\u000f\u0003 \u0014\u0017\u001a\u01de\u0014\u0017\u001b &38V\u0003 FHQWUDO\u0003SURFHVVLQJ\u0003XQLWV \u0003 HYROXWLRQ\u0003RI\u0003FORFN\u0003VSHHG\u000f\u0003\u0015\u01de\u0016\u0003 HYROXWLRQ\u0003RI\u0003FRUH\u0003FRXQW\u000f\u0003\u0016\u0003 IUHHLQJ\u0003PHPRU\\\u0011\u0003 see free(),\u0003&\u0003ODQJXDJH KDVK\u0003WDEOHV\u000f\u0003\u0015\u0019\u0014\u01de\u0015\u0019\u001a\u0003 KLVWRJUDP\u0003FRPSXWDWLRQ\u0003RQ\u000f\u0003\u0014\u001a\u0014\u01de\u0014\u001a\u0016\u0003 DV\u0003KRVW\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003\u0015\u0016\u0003 WKUHDG\u0003PDQDJHPHQW\u0003DQG\u0003VFKHGXOLQJ\u0003LQ\u000f\u0003\u001a\u0015 YHFWRU\u0003VXPV\u000f\u0003\u0016 \u01de\u0017\u0014\u0003 YHULI\\LQJ\u0003*38\u0003KLVWRJUDP\u0003XVLQJ\u0003UHYHUVH\u0003&38\u0003 KLVWRJUDP\u000f\u0003\u0014\u001a\u0018\u01de\u0014\u001a\u0019\u0003 &8%/$6\u0003OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013\u0003 cuComplex \u0003VWUXFWXUH\u000f\u0003&38\u0003-XOLD\u00036HW\u000f\u0003\u0017\u001b\u01de\u0017 cuComplex \u0003VWUXFWXUH\u000f\u0003*38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0016\u01de\u0018\u0018 CUDA, Supercomputing for the Masses \u000f\u0003\u0015\u0017\u0018\u01de\u0015\u0017\u0019 &8'$\u0003$UFKLWHFWXUH FRPSXWDWLRQDO\u0003\u020dXLG\u0003G\\QDPLF\u0003DSSOLFDWLRQV\u000f\u0003 \u01de\u0014\u0013 GH\u020cQHG\u000f\u0003\u001a\u0003 HQYLURQPHQWDO\u0003VFLHQFH\u0003DSSOLFDWLRQV\u000f\u0003\u0014\u0013\u01de\u0014\u0014 \u020cUVW\u0003DSSOLFDWLRQ\u0003RI\u000f\u0003\u001a\u0003 PHGLFDO\u0003LPDJLQJ\u0003DSSOLFDWLRQV\u000f\u0003\u001b\u01de \u0003 UHVRXUFH\u0003IRU\u0003XQGHUVWDQGLQJ\u000f\u0003\u0015\u0017\u0017\u01de\u0015\u0017\u0018\u0003 XVLQJ\u000f\u0003\u001a\u01de\u001b CUDA C FRPSXWDWLRQDO\u0003\u020dXLG\u0003G\\QDPLF\u0003DSSOLFDWLRQV\u000f\u0003 \u01de\u0014\u0013 &8'$\u0003GHYHORSPHQW\u0003WRRONLW\u000f\u0003\u0014\u0019\u01de\u0014\u001b &8'$\u0010HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRU\u000f\u0003\u0014\u0017\u01de\u0014\u0019 GHEXJJLQJ\u000f\u0003\u0015\u0017\u0014\u01de\u0015\u0017\u0015\u0003 GHYHORSPHQW\u0003HQYLURQPHQW\u0003VHWXS\u0011\u0003 see\u0003GHYHORSPHQW\u0003 HQYLURQPHQW\u0003VHWXS\u0003 GHYHORSPHQW\u0003RI\u000f\u0003\u001a\u0003 HQYLURQPHQWDO\u0003VFLHQFH\u0003DSSOLFDWLRQV\u000f\u0003\u0014\u0013\u01de\u0014\u0014 JHWWLQJ\u0003VWDUWHG\u000f\u0003\u0014\u0016\u01de\u0015\u0013\u0003 PHGLFDO\u0003LPDJLQJ\u0003DSSOLFDWLRQV\u000f\u0003\u001b\u01de \u0003 19,',$\u0003GHYLFH\u0003GULYHU\u000f\u0003\u0014\u0019\u0003 RQ\u0003PXOWLSOH\u0003*38V\u0011\u0003 see\u0003*38V\u0003 JUDSKLFV\u0003SURFHVVLQJ\u0003 XQLWV \u000f\u0003PXOWL\u0010V\\VWHP\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0014\u01de\u0015\u0015\u0003 SDUDOOHO\u0003SURJUDPPLQJ\u0003LQ\u0011\u0003 see parallel SURJUDPPLQJ\u000f\u0003&8'$ SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0017\u01de\u0015\u001a TXHU\\LQJ\u0003GHYLFHV\u000f\u0003\u0015\u001a\u01de\u0016\u0016 VWDQGDUG\u0003&\u0003FRPSLOHU\u000f\u0003\u0014\u001b\u01de\u0014 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014 \u000f\u0003\u0016\u0018\u0003 XVLQJ\u0003GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0016\u01de\u0016\u0018 ZULWLQJ\u0003\u020cUVW\u0003SURJUDP\u000f\u0003\u0015\u0015\u01de\u0015\u0017 &8'$\u0003'DWD\u00033DUDOOHO\u00033ULPLWLYHV\u0003/LEUDU\\\u0003 &8'33 \u000f\u0003\u0015\u0017\u0019 &8'$\u0003HYHQW\u0003$3,\u000f\u0003DQG\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013&8'$\u00030HPRU\\\u0003&KHFNHU\u000f\u0003\u0015\u0017\u0015 &8'$\u0003VWUHDPV *38\u0003ZRUN\u0003VFKHGXOLQJ\u0003ZLWK\u000f\u0003\u0015\u0013\u0018\u01de\u0015\u0013\u001b PXOWLSOH\u000f\u0003\u0014 \u001b\u01de\u0015\u0013\u0018\u000f\u0003\u0015\u0013\u001b\u01de\u0015\u0014\u0013 RYHUYLHZ\u0003RI\u000f\u0003\u0014 \u0015\u0003 VLQJOH\u000f\u0003\u0014 \u0015\u01de\u0014 \u001b\u0003 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0015\u0014\u0014 &8'$\u00037RRONLW\u000f\u0003\u0015\u0016\u001b\u01de\u0015\u0017\u0013\u0003 LQ\u0003GHYHORSPHQW\u0003HQYLURQPHQW\u000f\u0003\u0014\u0019\u01de\u0014\u001b &8'$\u0003WRROV\u0003 &8%/$6\u0003OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013\u0003 &8'$\u00037RRONLW\u000f\u0003\u0015\u0016\u001b\u01de\u0015\u0016 \u0003 &8))7\u0003OLEUDU\\\u000f\u0003\u0015\u0016 \u0003 GHEXJJLQJ\u0003&8'$\u0003&\u000f\u0003\u0015\u0017\u0014\u01de\u0015\u0017\u0015\u0003 *38\u0003&RPSXWLQJ\u00036'.\u0003GRZQORDG\u000f\u0003\u0015\u0017\u0013\u01de\u0015\u0017\u0014 19,',$\u00033HUIRUPDQFH\u00033ULPLWLYHV\u000f\u0003\u0015\u0017\u0014 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0016\u001b\u0003 9LVXDO\u00033UR\u020cOHU\u000f\u0003\u0015\u0017\u0016\u01de\u0015\u0017\u0017 &8'$\u0003=RQH\u000f\u0003\u0014\u0019\u001a\u0003 cuda_malloc_test() \u000f\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u000f\u0003\u0014\u001b cudaBindTexture() \u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u0019\u01de\u0014\u0015\u001a cudaBindTexture2D() \u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0017 cudaChannelFormatDesc() \u000f\u0003ELQGLQJ\u0003\u0015'\u0003 WH[WXUHV\u000f\u0003\u0014\u0016\u0017 cudaChooseDevice() GH\u020cQHG\u000f\u0003\u0016\u0017\u0003 GPUAnimBitmap LQLWLDOL]DWLRQ\u000f\u0003\u0014\u0018\u0013 IRU\u0003YDOLG\u0003,'\u000f\u0003\u0014\u0017\u0014\u01de\u0014\u0017\u0015 cudaD39SetDirect3DDevice() \u000f\u0003'LUHFW;\u0003 LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0019\u0013\u01de\u0014\u0019\u0014 cudaDeviceMapHost() \u000f\u0003]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003 SURGXFW\u000f\u0003\u0015\u0015\u0014 cudaDeviceProp \u0003VWUXFWXUH cudaChooseDevice() ZRUNLQJ\u0003ZLWK\u000f\u0003\u0014\u0017\u0014 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0013\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u001b\u01de\u0016\u0014\u0003 VLQJOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0016\u01de\u0014 \u0017\u0003 XVLQJ\u0003GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0017 &8'$\u0010HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRUV\u000f\u0003\u0014\u0017\u01de\u0014\u0019 cudaEventCreate() \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0017\u0003 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0015\u000f\u0003\u0014 \u0017\u000f\u0003\u0015\u0013\u0014\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0017\u01de\u0015\u001a\u0018\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0016\u000f\u0003\u0014\u001a\u001a PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013\u000f\u0003\u0014\u0014\u0015 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DSSOLFDWLRQ\u000f\u0003\u0014\u001b\u001b\u01de\u0014\u001b SHUIRUPLQJ\u0003DQLPDWLRQ\u0003ZLWK\u0003 GPUAnimBitmap \u000f\u0003\u0014\u0018\u001b UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0013\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0018\u0003 WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u0017\u0003 ]HUR\u0010FRS\\\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0015\u0014\u0018\u000f\u0003\u0015\u0014\u001a Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/two.lfcudaEventDestroy() GH\u020cQHG\u000f\u0003\u0014\u0014\u0015\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0018\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0019\u000f\u0003\u0014\u001a\u001b\u0003 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003\u0014\u0015\u0016\u000f\u0003\u0014\u0016\u0014\u000f\u0003\u0014\u0016\u001a PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0014\u0014\u01de\u0014\u0014\u0016 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b \u01de\u0014 \u0013\u0003 WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0019\u0003 ]HUR\u0010FRS\\\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0015\u0014\u001a\u000f\u0003\u0015\u0015\u0013 cudaEventElapsedTime() \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0013\u0003 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u001b\u000f\u0003\u0015\u0013\u0017\u0003 GH\u020cQHG\u000f\u0003\u0014\u0014\u0015\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0018\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0018\u000f\u0003\u0014\u001a\u001b\u0003 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0015\u0003 KHDW\u0003WUDQVIHU\u0003XVLQJ\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0018\u001a SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b\u001b\u000f\u0003\u0014 \u0013\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0019 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014 cudaEventRecord() &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0017\u000f\u0003\u0014 \u001b\u000f\u0003\u0015\u0013\u0014\u0003 &8'$\u0003VWUHDPV\u0003DQG\u000f\u0003\u0014 \u0015\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0017\u01de\u0015\u001a\u0018 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0016\u000f\u0003\u0014\u001a\u0018\u000f\u0003\u0014\u001a\u001a KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0015\u0003 KHDW\u0003WUDQVIHU\u0003XVLQJ\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003 \u0014\u0018\u0019\u01de\u0014\u0018\u001a\u0003 PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0013 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u01de\u0014\u0014\u0016 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b\u001b\u01de\u0014 \u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0013\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0019 XVLQJ\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015 \u01de\u0014\u0016\u0013 cudaEventSynchronize() \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0013\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0018\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0018\u000f\u0003\u0014\u001a\u001b\u0003 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0015\u0003 KHDW\u0003WUDQVIHU\u0003XVLQJ\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0018\u001a PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0013 \u000f\u0003\u0014\u0014\u0014\u000f\u0003\u0014\u0014\u0016 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b\u001b\u000f\u0003\u0014 \u0013\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0019 cudaFree() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0018\u0003 &38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0015\u0003 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u001b\u000f\u0003\u0015\u0013\u0018\u0003 GH\u020cQHG\u000f\u0003\u0015\u0019\u01de\u0015\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0017\u000f\u0003\u001b\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u001b *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019 \u01de\u0015\u001a\u0013\u000f\u0003\u0015\u001a\u0018 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019 \u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019 PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015 \u0003 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b \u01de\u0014 \u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0014\u0003 UD\\\u0003WUDFLQJ\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0018 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a cudaFreeHost() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0016 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u001b\u000f\u0003\u0015\u0013\u0017\u0003 GH\u020cQHG\u000f\u0003\u0014 \u0013\u0003 IUHHLQJ\u0003EXIIHU\u0003DOORFDWHG\u0003ZLWK\u0003 cudaHostAlloc() , 190 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013 &8'$\u0010*'%\u0003GHEXJJLQJ\u0003WRRO\u000f\u0003\u0015\u0017\u0014\u01de\u0015\u0017\u0015 cudaGetDevice() &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0016\u000f\u0003\u0015\u0013\u0013\u0003 GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0017\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013 cudaGetDeviceCount() GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0017\u0003 JHWWLQJ\u0003FRXQW\u0003RI\u0003&8'$\u0003GHYLFHV\u000f\u0003\u0015\u001b PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0017\u01de\u0015\u0015\u0018 cudaGetDeviceProperties() GHWHUPLQLQJ\u0003LI\u0003*38\u0003LV\u0003LQWHJUDWHG\u0003RU\u0003GLVFUHWH\u000f\u0003\u0015\u0015\u0016 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0013\u0003 TXHU\\LQJ\u0003GHYLFHV\u000f\u0003\u0016\u0016\u01de\u0016\u0018\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013 cudaGLSetGLDevice() JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003ZLWK\u00032SHQ*/\u000f\u0003\u0014\u0018\u0013 SUHSDULQJ\u0003&8'$\u0003WR\u0003XVH\u00032SHQ*/\u0003GULYHU\u000f\u0003\u0014\u0017\u0015 cudaGraphicsGLRegisterBuffer() \u000f\u0003\u0014\u0017\u0016\u000f\u0003\u0014\u0018\u0014 cudaGraphicsMapFlagsNone() , 143 cudaGraphicsMapFlagsReadOnly() , 143 cudaGraphicsMapFlagsWriteDiscard() , 143 cudaGraphicsUnapResources()",
    "\u0003 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b \u01de\u0014 \u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0014\u0003 UD\\\u0003WUDFLQJ\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0018 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a cudaFreeHost() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0016 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u001b\u000f\u0003\u0015\u0013\u0017\u0003 GH\u020cQHG\u000f\u0003\u0014 \u0013\u0003 IUHHLQJ\u0003EXIIHU\u0003DOORFDWHG\u0003ZLWK\u0003 cudaHostAlloc() , 190 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013 &8'$\u0010*'%\u0003GHEXJJLQJ\u0003WRRO\u000f\u0003\u0015\u0017\u0014\u01de\u0015\u0017\u0015 cudaGetDevice() &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0016\u000f\u0003\u0015\u0013\u0013\u0003 GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0017\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013 cudaGetDeviceCount() GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0017\u0003 JHWWLQJ\u0003FRXQW\u0003RI\u0003&8'$\u0003GHYLFHV\u000f\u0003\u0015\u001b PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0017\u01de\u0015\u0015\u0018 cudaGetDeviceProperties() GHWHUPLQLQJ\u0003LI\u0003*38\u0003LV\u0003LQWHJUDWHG\u0003RU\u0003GLVFUHWH\u000f\u0003\u0015\u0015\u0016 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0013\u0003 TXHU\\LQJ\u0003GHYLFHV\u000f\u0003\u0016\u0016\u01de\u0016\u0018\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013 cudaGLSetGLDevice() JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003ZLWK\u00032SHQ*/\u000f\u0003\u0014\u0018\u0013 SUHSDULQJ\u0003&8'$\u0003WR\u0003XVH\u00032SHQ*/\u0003GULYHU\u000f\u0003\u0014\u0017\u0015 cudaGraphicsGLRegisterBuffer() \u000f\u0003\u0014\u0017\u0016\u000f\u0003\u0014\u0018\u0014 cudaGraphicsMapFlagsNone() , 143 cudaGraphicsMapFlagsReadOnly() , 143 cudaGraphicsMapFlagsWriteDiscard() , 143 cudaGraphicsUnapResources() , 144 cudaHostAlloc() &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0018\u000f\u0003\u0015\u0013\u0015\u0003 malloc() \u0003YHUVXV\u000f\u0003\u0014\u001b\u0019\u01de\u0014\u001b\u001a\u0003 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DSSOLFDWLRQ\u000f\u0003\u0014\u001b\u001a\u01de\u0014 \u0015 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a\u01de\u0015\u0015\u0013 cudaHostAllocDefault() &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0018\u000f\u0003\u0015\u0013\u0015\u0003 GHIDXOW\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0014\u0017 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b \u01de\u0014 \u0013 cudaHostAllocMapped() \u020dDJ\u0003 GHIDXOW\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0014\u0017\u0003 SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0014 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a\u01de\u0015\u0014\u001b cudaHostAllocPortable() \u000f\u0003SRUWDEOH\u0003SLQQHG\u0003 PHPRU\\\u000f\u0003\u0015\u0016\u0013\u01de\u0015\u0016\u0018 cudaHostAllocWriteCombined() \u020dDJ SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0014\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a\u01de\u0015\u0014\u001b Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/three.lfcudaHostGetDevicePointer() SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0017 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001b\u01de\u0015\u0014 cudaMalloc() , 124 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0016\u01de\u0014\u0016\u0018 DOORFDWLQJ\u0003GHYLFH\u0003PHPRU\\\u0003XVLQJ\u000f\u0003\u0015\u0019 &38\u0003YHFWRU\u0003VXPV\u0003DSSOLFDWLRQ\u000f\u0003\u0017\u0015\u0003 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0017\u000f\u0003\u0015\u0013\u0014\u01de\u0015\u0013\u0015\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0015\u000f\u0003\u001b\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003VWDQGDUG\u0003KRVW\u0003 PHPRU\\\u000f \u0003\u0015\u0014\u0018\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u0019 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019 \u000f\u0003\u0015\u001a\u0017\u01de\u0015\u001a\u0018 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0014\u0003 *38\u0003ORFN\u0003IXQFWLRQ\u000f\u0003\u0015\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0013\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u001b PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u000f\u0003\u0014\u0014\u0015 SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0017\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0013\u0003 UD\\\u0003WUDFLQJ\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0018\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0013\u0003 XVLQJ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u001b\u0003 XVLQJ\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u001a cuda-memcheck , 242 cudaMemcpy() \u0015'\u0003WH[WXUH\u0003ELQGLQJ\u000f\u0003\u0014\u0016\u0019\u0003 FRS\\LQJ\u0003GDWD\u0003EHWZHHQ\u0003KRVW\u0003DQG\u0003GHYLFH\u000f\u0003\u0015\u001a\u0003 &38\u0003YHFWRU\u0003VXPV\u0003DSSOLFDWLRQ\u000f\u0003\u0017\u0015\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0015\u01de\u001b\u0016\u000f\u0003\u001b\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u001a *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0013\u000f\u0003\u0015\u001a\u0017\u01de\u0015\u001a\u0018 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0017\u01de\u0014\u001a\u0018\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0015\u0003 *38\u0003ORFN\u0003IXQFWLRQ\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0013\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u001b\u0003 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0015\u01de\u0014\u0015\u0018 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0014 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DQG\u000f\u0003\u0014\u001b\u001a\u000f\u0003\u0014\u001b \u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0014\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0019\u0003 XVLQJ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u001b\u01de\u0015\u0015 cudaMemcpyAsync() *38\u0003ZRUN\u0003VFKHGXOLQJ\u000f\u0003\u0015\u0013\u0019\u01de\u0015\u0013\u001b\u0003 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0016\u000f\u0003\u0015\u0013\u001b\u01de\u0015\u0014\u0013\u0003 VLQJOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0019\u0003 WLPHOLQH\u0003RI\u0003LQWHQGHG\u0003DSSOLFDWLRQ\u0003H[HFXWLRQ\u0003XVLQJ\u0003 PXOWLSOH\u0003VWUHDPV\u000f\u0003\u0014 cudaMemcpyDeviceToHost() &38\u0003YHFWRU\u0003VXPV\u0003DSSOLFDWLRQ\u000f\u0003\u0017\u0015\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0015\u000f\u0003\u001b\u0019\u01de\u001b\u001a *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0013 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0017\u01de\u0014\u001a\u0018*38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0015\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u001b PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0017 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014 \u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0014\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0019 XVLQJ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015 cudaMemcpyHostToDevice() &38\u0003YHFWRU\u0003VXPV\u0003DSSOLFDWLRQ\u000f\u0003\u0017\u0015\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0019\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u001b LPSOHPHQWLQJ\u0003*38\u0003ORFN\u0003IXQFWLRQ\u000f\u0003\u0015\u0018\u0016 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0014 PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u001b\u0003 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0016 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0014\u001b VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0019 cudaMemcpyToSymbol() \u000f\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0018\u01de\u0014\u0013\u0019 cudaMemset() *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0017 &8'$\u00111(7\u0003SURMHFW\u000f\u0003\u0015\u0017\u001a cudaSetDevice() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0014\u01de\u0015\u0016\u0015\u000f\u0003 \u0015\u0016\u0016\u01de\u0015\u0016\u0017 XVLQJ\u0003GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0016\u0017 XVLQJ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u001a\u01de\u0015\u0015\u001b cudaSetDeviceFlags() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0014\u000f\u0003\u0015\u0016\u0017 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0014 cudaStreamCreate() , 194, 201 cudaStreamDestroy() \u000f\u0003\u0014 \u001b\u000f\u0003\u0015\u0013\u0018 cudaStreamSynchronize() \u000f\u0003\u0014 \u001a\u01de\u0014 \u001b\u000f\u0003\u0015\u0013\u0017 cudaThreadSynchronize() , 219 cudaUnbindTexture() \u000f\u0003\u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003 \u0014\u0016\u0019\u01de\u0014\u0016\u001a\u0003 &8'33\u0003 &8'$\u0003'DWD\u00033DUDOOHO\u00033ULPLWLYHV\u0003/LEUDU\\ \u000f\u0003\u0015\u0017\u0019 &8))7\u0003OLEUDU\\\u000f\u0003\u0015\u0016 \u0003 &8/$WRROV\u000f\u0003\u0015\u0017\u0019\u0003 FXUUHQW\u0003DQLPDWLRQ\u0003WLPH\u000f\u0003*38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003 \u001a\u0015\u01de\u001a\u0017 D GHEXJJLQJ\u0003&8'$\u0003&\u000f\u0003\u0015\u0017\u0014\u01de\u0015\u0017\u0015 GHWHUJHQWV\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u000f\u0003\u0014\u0013\u01de\u0014\u0014 dev_bitmap \u0003SRLQWHU\u000f\u0003*38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0014 GHYHORSPHQW\u0003HQYLURQPHQW\u0003VHWXS &8'$\u00037RRONLW\u000f\u0003\u0014\u0019\u01de\u0014\u001b\u0003 &8'$\u0010HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRU\u000f\u0003\u0014\u0017\u01de\u0014\u0019 19,',$\u0003GHYLFH\u0003GULYHU\u000f\u0003\u0014\u0019\u0003 VWDQGDUG\u0003&\u0003FRPSLOHU\u000f\u0003\u0014\u001b\u01de\u0014 \u0003 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014 Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/four.lfGHYLFH\u0003GULYHUV\u000f\u0003\u0014\u0019\u0003 GHYLFH\u0003RYHUODS\u000f\u0003*38\u000f\u0003\u0014 \u0017\u000f\u0003\u0014 \u001b\u01de\u0014 __device__ IXQFWLRQ *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u001b\u01de\u0015\u001a\u0018 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0017 GHYLFHV\u0003 JHWWLQJ\u0003FRXQW\u0003RI\u0003&8'$\u000f\u0003\u0015\u001b *38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0014\u01de\u0017\u0019 SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0018\u01de\u0015\u001a TXHU\\LQJ\u000f\u0003\u0015\u001a\u01de\u0016\u0016\u0003 XVH\u0003RI\u0003WHUP\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003\u0015\u0016 XVLQJ\u0003SURSHUWLHV\u0003RI\u000f\u0003\u0016\u0016\u01de\u0016\u0018 devPtr\u000f\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0017\u0003 dim3 YDULDEOH\u0003JULG\u000f\u0003*38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0014\u01de\u0018\u0015 DIMxDIM ELWPDS\u0003LPDJH\u000f\u0003*38\u0003-XOLD\u00036HW\u000f\u0003\u0017 \u01de\u0018\u0014\u000f\u0003\u0018\u0016 GLUHFW\u0003PHPRU\\\u0003DFFHVV\u0003 '0$ \u000f\u0003IRU\u0003SDJH\u0010ORFNHG\u0003 PHPRU\\\u000f\u0003\u0014\u001b\u0019 'LUHFW; DGGLQJ\u0003VWDQGDUG\u0003&\u0003WR\u000f\u0003\u001a EUHDNWKURXJK\u0003LQ\u0003*38\u0003WHFKQRORJ\\\u000f\u0003\u0018\u01de\u0019 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7;\u000f\u0003\u001a\u0003 JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0019\u0013\u01de\u0014\u0019\u0014 GLVFUHWH\u0003*38V\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0017\u0003 GLVSOD\\\u0003DFFHOHUDWRUV\u000f\u0003\u0015'\u000f\u0003\u0017\u0003 '0$\u0003 GLUHFW\u0003PHPRU\\\u0003DFFHVV \u000f\u0003IRU\u0003SDJH\u0010ORFNHG\u0003 PHPRU\\\u000f\u0003\u0014\u001b\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ RSWLPL]HG\u0003LQFRUUHFWO\\\u000f\u0003\u001b\u001a\u01de \u0013\u0003 VKDUHG\u0003PHPRU\\\u0003DQG\u000f\u0003\u001a\u0019\u01de\u001b\u001a\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003YHUVLRQ\u0003RI\u000f\u0003\u0015\u0014\u0018\u01de\u0015\u0014\u001a XVLQJ\u0003DWRPLFV\u0003WR\u0003NHHS\u0003HQWLUHO\\\u0003RQ\u0003*38\u000f\u0003\u0015\u0018\u0013\u01de\u0015\u0018\u0014\u000f\u0003 \u0015\u0018\u0017\u01de\u0015\u0018\u001b\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003PXOWLSOH\u0003*38V DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0013\u01de\u0015\u0016\u0018 XVLQJ\u000f\u0003\u0015\u0015\u0017\u01de\u0015\u0015 \u0003 ]HUR\u0010FRS\\\u000f\u0003\u0015\u0014\u001a\u01de\u0015\u0015\u0015\u0003 ]HUR\u0010FRS\\\u0003SHUIRUPDQFH\u000f\u0003\u0015\u0015\u0016 'U\u0011\u0003'REE V\u0003&8'$\u000f\u0003\u0015\u0017\u0018\u01de\u0015\u0017\u0019\u0003 '5$0V\u000f\u0003GLVFUHWH\u0003*38V\u0003ZLWK\u0003RZQ\u0003GHGLFDWHG\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0016 draw_func \u000f\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0017\u01de\u0014\u0017\u0019 E end_thread() \u000f\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0019 HQYLURQPHQWDO\u0003VFLHQFH\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003IRU\u000f\u0003\u0014\u0013\u01de\u0014\u0014 HYHQW\u0003WLPHU\u0011\u0003 see\u0003WLPHU\u000f\u0003HYHQW\u0003 HYHQWV FRPSXWLQJ\u0003HODSVHG\u0003WLPH\u0003EHWZHHQ\u0003UHFRUGHG\u0011\u0003 see cudaEventElapsedTime() FUHDWLQJ\u0011\u0003 see cudaEventCreate() *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0016 PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u000f\u0003 \u0018 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u01de\u0014\u0014\u0017RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013\u0003 UHFRUGLQJ\u0011\u0003 see cudaEventRecord() VWRSSLQJ\u0003DQG\u0003VWDUWLQJ\u0011\u0003 see cudaEventDestroy() VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014\u0014\u0017 EXIT_FAILURE() \u000f\u0003SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0019 F fAnim()\u000f\u0003VWRULQJ\u0003UHJLVWHUHG\u0003FDOOEDFNV\u000f\u0003\u0014\u0017 )DVW\u0003)RXULHU\u00037UDQVIRUP\u0003OLEUDU\\\u000f\u000319,',$\u000f\u0003 \u0015\u0016 \u020cUVW\u0003SURJUDP\u000f\u0003ZULWLQJ\u000f\u0003\u0015\u0015\u01de\u0015\u0017\u0003 \u020dDJV\u000f\u0003LQ\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0016 float_to_color() \u0003NHUQHOV\u000f\u0003LQ\u0003JUDSKLFV\u0003 LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0018\u001a \u020dRDWLQJ\u0010SRLQW\u0003QXPEHUV DWRPLF\u0003DULWKPHWLF\u0003QRW\u0003VXSSRUWHG\u0003IRU\u000f\u0003\u0015\u0018\u0014\u0003 &8'$\u0003$UFKLWHFWXUH\u0003GHVLJQHG\u0003IRU\u000f\u0003\u001a\u0003 HDUO\\\u0003GD\\V\u0003RI\u0003*38\u0003FRPSXWLQJ\u0003QRW\u0003DEOH\u0003WR\u0003KDQGOH\u000f\u0003\u0019 )2575$1\u0003DSSOLFDWLRQV &8%/$6\u0003FRPSDWLELOLW\\\u0003ZLWK\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013 ODQJXDJH\u0003ZUDSSHU\u0003IRU\u0003&8'$\u0003&\u000f\u0003\u0015\u0017\u0019 IRUXPV\u000f\u000319,',$\u000f\u0003\u0015\u0017\u0019\u0003 IUDFWDOV\u0011\u0003 see\u0003-XOLD\u00036HW\u0003H[DPSOH free(),\u0003&\u0003ODQJXDJH cudaFree( )YHUVXV\u000f\u0003\u0015\u0019\u01de\u0015\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u001b *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0018\u0003 PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u001a\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a G *H)RUFH\u0003\u0015\u0018\u0019\u000f\u0003\u0018\u0003 *H)RUFH\u0003\u001b\u001b\u0013\u0013\u0003*7;\u000f\u0003\u001a\u0003 generate_frame() \u000f\u0003*38\u0003ULSSOH\u000f\u0003\u001a\u0013\u000f\u0003\u001a\u0015\u01de\u001a\u0016\u000f\u0003\u0014\u0018\u0017 JHQHULF\u0003FODVVHV\u000f\u0003VWRULQJ\u0003FRPSOH[\u0003QXPEHUV\u0003ZLWK\u000f\u0003 \u0017 \u01de\u0018\u0013 GL_PIXEL_UNPACK_BUFFER_ARB \u0003WDUJHW\u000f\u00032SHQ*/\u0003 LQWHURSHUDWLRQ\u000f\u0003\u0014\u0018\u0014 glBindBuffer() FUHDWLQJ\u0003SL[HO\u0003EXIIHU\u0003REMHFW\u000f\u0003\u0014\u0017\u0016 JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0019 glBufferData() \u000f\u0003SL[HO\u0003EXIIHU\u0003REMHFW\u000f\u0003\u0014\u0017\u0016 glDrawPixels() JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0019 RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0018\u0017\u01de\u0014\u0018\u0018 glGenBuffers() \u000f\u0003SL[HO\u0003EXIIHU\u0003REMHFW\u000f\u0003\u0014\u0017\u0016 JOREDO\u0003PHPRU\\\u0003DWRPLFV *38\u0003FRPSXWH\u0003FDSDELOLW\\\u0003UHTXLUHPHQWV\u000f\u0003\u0014\u0019\u001a KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u000f\u0003\u0014\u001a \u01de\u0014\u001b\u0014 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0003DQG\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016 Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/five.lf__global__ IXQFWLRQ\u0003 add\u0003IXQFWLRQ\u000f\u0003\u0017\u0016\u0003 NHUQHO\u0003FDOO\u000f\u0003\u0015\u0016\u01de\u0015\u0017\u0003 UXQQLQJ\u0003kernel() \u0003LQ\u0003*38\u0003-XOLD\u00036HW\u0003DSSOLFDWLRQ\u000f\u0003 \u0018\u0014\u01de\u0018\u0015\u0003 */87\u0003 */\u00038WLOLW\\\u00037RRONLW JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003VHWXS\u000f\u0003\u0014\u0017\u0017 LQLWLDOL]DWLRQ\u0003RI\u000f\u0003\u0014\u0018\u0013\u0003 LQLWLDOL]LQJ\u00032SHQ*/\u0003GULYHU\u0003E\\\u0003FDOOLQJ\u000f\u0003\u0014\u0017\u0015 glutIdleFunc() , 149 glutInit() \u000f\u0003\u0014\u0018\u0013\u0003 glutMainLoop() , 144 *38\u0003&RPSXWLQJ\u00036'.\u0003GRZQORDG\u000f\u0003\u0014\u001b\u000f\u0003\u0015\u0017\u0013\u01de\u0015\u0017\u0014 GPU ripple ZLWK\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u001a\u01de\u0014\u0018\u0017 XVLQJ\u0003WKUHDGV\u000f\u0003\u0019 \u01de\u001a\u0017 *38\u0003YHFWRU\u0003VXPV\u0003 DSSOLFDWLRQ\u000f\u0003\u0017\u0014\u01de\u0017\u0019\u0003 RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019\u0018\u01de\u0019 RI\u0003ORQJHU\u0003YHFWRU\u000f\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019\u0016\u01de\u0019\u0018\u0003 XVLQJ\u0003WKUHDGV\u000f\u0003\u0019\u0014\u01de\u0019\u0016 gpu_anim.h \u000f\u0003\u0014\u0018\u0015\u01de\u0014\u0018\u0017 GPUAnimBitmap \u0003VWUXFWXUH FUHDWLQJ\u000f\u0003\u0014\u0017\u001b\u01de\u0014\u0018\u0015\u0003 *38\u0003ULSSOH\u0003SHUIRUPLQJ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0018\u0015\u01de\u0014\u0018\u0017 KHDW\u0003WUDQVIHU\u0003ZLWK\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003 \u0014\u0018\u0019\u01de\u0014\u0019\u0013\u0003 *38V\u0003 JUDSKLFV\u0003SURFHVVLQJ\u0003XQLWV FDOOHG\u0003\u0005GHYLFHV\u0005\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003\u0015\u0016 GHYHORSLQJ\u0003FRGH\u0003LQ\u0003&8'$\u0003&\u0003ZLWK\u0003&8'$\u0010HQDEOHG\u000f\u0003 \u0014\u0017\u01de\u0014\u0019\u0003 GHYHORSPHQW\u0003RI\u0003&8'$\u0003IRU\u000f\u0003\u0019\u01de\u001b\u0003 GLVFUHWH\u0003YHUVXV\u0003LQWHJUDWHG\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0016\u0003 HDUO\\\u0003GD\\V\u0003RI\u000f\u0003\u0018\u01de\u0019\u0003 IUHHLQJ\u0003PHPRU\\\u0011\u0003 see cudaFree() KDVK\u0003WDEOHV\u000f\u0003\u0015\u0019\u001b\u01de\u0015\u001a\u0018\u0003 KLVWRJUDP\u0003FRPSXWDWLRQ\u0003RQ\u000f\u0003\u0014\u001a\u0016\u01de\u0014\u001a \u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0014\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016\u0003 KLVWRU\\\u0003RI\u000f\u0003\u0017\u01de\u0018\u0003 -XOLD\u00036HW\u0003H[DPSOH\u000f\u0003\u0018\u0013\u01de\u0018\u001a\u0003 PHDVXULQJ\u0003SHUIRUPDQFH\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013 UD\\\u0003WUDFLQJ\u0003RQ\u000f\u0003 \u001b\u01de\u0014\u0013\u0017\u0003 ZRUN\u0003VFKHGXOLQJ\u000f\u0003\u0015\u0013\u0018\u01de\u0015\u0013\u001b *38V\u0003 JUDSKLFV\u0003SURFHVVLQJ\u0003XQLWV \u000f\u0003PXOWLSOH\u000f\u0003 \u0015\u0014\u0016\u01de\u0015\u0016\u0019 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0014\u0016\u01de\u0015\u0014\u0017\u0003 SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0013\u01de\u0015\u0016\u0018 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0015\u0016\u0018\u01de\u0015\u0016\u0019\u0003 XVLQJ\u000f\u0003\u0015\u0015\u0017\u01de\u0015\u0015 ]HUR\u0010FRS\\\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0015\u0014\u0017\u01de\u0015\u0015\u0015 ]HUR\u0010FRS\\\u0003SHUIRUPDQFH\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0016 JUDSKLFV\u0003DFFHOHUDWRUV\u000f\u0003\u0016'\u0003JUDSKLFV\u000f\u0003\u0017\u01de\u0018 JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0016 \u01de\u0014\u0019\u0014 'LUHFW;\u000f\u0003\u0014\u0019\u0013\u01de\u0014\u0019\u0014\u0003 JHQHUDWLQJ\u0003LPDJH\u0003GDWD\u0003ZLWK\u0003NHUQHO\u000f\u0003\u0014\u0016 \u01de\u0014\u0017\u0015 *38\u0003ULSSOH\u0003ZLWK\u000f\u0003\u0014\u0017\u001a\u01de\u0014\u0018\u0017\u0003 KHDW\u0003WUDQVIHU\u0003ZLWK\u000f\u0003\u0014\u0018\u0017\u01de\u0014\u0019\u0013\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0016 \u01de\u0014\u0017\u0013\u0003 SDVVLQJ\u0003LPDJH\u0003GDWD\u0003WR\u00032SHQ\u0003*/\u0003IRU\u0003UHQGHULQJ\u000f\u0003 \u0014\u0017\u0015\u01de\u0014\u0017\u001a VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014\u0019\u0014 JUDSKLFV\u0003SURFHVVLQJ\u0003XQLWV\u0011\u0003 see\u0003*38V\u0003 JUDSKLFV\u0003 SURFHVVLQJ\u0003XQLWV grey()\u000f\u0003*38\u0003ULSSOH\u000f\u0003\u001a\u0017 JULG DV\u0003FROOHFWLRQ\u0003RI\u0003SDUDOOHO\u0003EORFNV\u000f\u0003\u0017\u0018 GH\u020cQHG\u000f\u0003\u0018\u001a WKUHH\u0010GLPHQVLRQDO\u000f\u0003\u0018\u0014 gridDim\u0003YDULDEOH\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0015\u01de\u0014\u0016\u0016\u0003 GH\u020cQHG\u000f\u0003\u0018\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u001a\u01de\u001a\u001b\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0015\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0015\u01de\u001a\u0016\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0019\u01de\u0019\u001a JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003VHWXS\u000f\u0003\u0014\u0017\u0018\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0013\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0015\u01de\u0014\u001b\u0016\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0015\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 WHPSHUDWXUH\u0003XSGDWH\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0013 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0015 H KDOI\u0010ZDUSV\u000f\u0003UHDGLQJ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u001a HANDLE_ERROR() \u0003PDFUR \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0016\u01de\u0014\u0016\u0019\u0003 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0017\u01de\u0014 \u001b\u000f\u0003\u0015\u0013\u0014\u01de\u0015\u0013\u0017\u000f\u0003\u0015\u0013 \u01de\u0015\u0014\u0013 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0015\u01de\u001b\u0016\u000f\u0003\u001b\u0019\u01de\u001b\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0019\u01de\u0015\u0018\u001b\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0013\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003FRPSOHWLRQ\u000f\u0003\u0014\u001a\u0018 *38\u0003ORFN\u0003IXQFWLRQ\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0013\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u001b Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/six.lfHANDLE_ERROR() \u0003PDFUR\u000f\u0003continued KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0015\u01de\u0014\u0015\u0018 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u01de\u0014\u0014\u0017 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DSSOLFDWLRQ\u000f\u0003\u0014\u001b\u001b\u01de\u0014\u001b SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0019\u0003 SD\\LQJ\u0003DWWHQWLRQ\u0003WR\u000f\u0003\u0017\u0019\u0003",
    "WKUHH\u0010GLPHQVLRQDO\u000f\u0003\u0018\u0014 gridDim\u0003YDULDEOH\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0015\u01de\u0014\u0016\u0016\u0003 GH\u020cQHG\u000f\u0003\u0018\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u001a\u01de\u001a\u001b\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0015\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0015\u01de\u001a\u0016\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0019\u01de\u0019\u001a JUDSKLFV\u0003LQWHURSHUDELOLW\\\u0003VHWXS\u000f\u0003\u0014\u0017\u0018\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0013\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0015\u01de\u0014\u001b\u0016\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0015\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 WHPSHUDWXUH\u0003XSGDWH\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0013 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0015 H KDOI\u0010ZDUSV\u000f\u0003UHDGLQJ\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u001a HANDLE_ERROR() \u0003PDFUR \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0016\u01de\u0014\u0016\u0019\u0003 &8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0017\u01de\u0014 \u001b\u000f\u0003\u0015\u0013\u0014\u01de\u0015\u0013\u0017\u000f\u0003\u0015\u0013 \u01de\u0015\u0014\u0013 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0015\u01de\u001b\u0016\u000f\u0003\u001b\u0019\u01de\u001b\u001a\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0019\u01de\u0015\u0018\u001b\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0013\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u0003FRPSOHWLRQ\u000f\u0003\u0014\u001a\u0018 *38\u0003ORFN\u0003IXQFWLRQ\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0018\u0016\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0013\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u001b Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/six.lfHANDLE_ERROR() \u0003PDFUR\u000f\u0003continued KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0015\u01de\u0014\u0015\u0018 PHDVXULQJ\u0003UD\\\u0003WUDFHU\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u01de\u0014\u0014\u0017 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DSSOLFDWLRQ\u000f\u0003\u0014\u001b\u001b\u01de\u0014\u001b SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0019\u0003 SD\\LQJ\u0003DWWHQWLRQ\u0003WR\u000f\u0003\u0017\u0019\u0003 SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0014\u01de\u0015\u0016\u0018\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0013\u01de\u0014\u0013\u0014\u0003 UD\\\u0003WUDFLQJ\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0017\u01de\u0014\u0013\u0018 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0013\u01de \u0014\u0003 VWDQGDUG\u0003KRVW\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u0018\u01de\u0015\u0014\u001a WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u001a\u000f\u0003\u0014\u0015 \u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0014\u001a\u01de\u0015\u0015\u0015 KDUGZDUH\u0003 GHFRXSOLQJ\u0003SDUDOOHOL]DWLRQ\u0003IURP\u0003PHWKRG\u0003RI\u0003 H[HFXWLQJ\u000f\u0003\u0019\u0019\u0003 SHUIRUPLQJ\u0003DWRPLF\u0003RSHUDWLRQV\u0003RQ\u0003PHPRU\\\u000f\u0003\u0014\u0019\u001a KDUGZDUH\u0003OLPLWDWLRQV\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0018\u01de\u0019 QXPEHU\u0003RI\u0003EORFNV\u0003LQ\u0003VLQJOH\u0003ODXQFK\u000f\u0003\u0017\u0019\u0003 QXPEHU\u0003RI\u0003WKUHDGV\u0003SHU\u0003EORFN\u0003LQ\u0003NHUQHO\u0003ODXQFK\u000f\u0003\u0019\u0016 KDVK\u0003IXQFWLRQ\u0003 &38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u0014\u01de\u0015\u0019\u001a *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u001b\u01de\u0015\u001a\u0018 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0018 \u01de\u0015\u0019\u0014 KDVK\u0003WDEOHV\u0003 FRQFHSWV\u000f\u0003\u0015\u0018 \u01de\u0015\u0019\u0014 &38\u000f\u0003\u0015\u0019\u0014\u01de\u0015\u0019\u001a\u0003 *38\u000f\u0003\u0015\u0019\u001b\u01de\u0015\u001a\u0018 PXOWLWKUHDGHG\u000f\u0003\u0015\u0019\u001a\u01de\u0015\u0019\u001b SHUIRUPDQFH\u000f\u0003\u0015\u001a\u0019\u01de\u0015\u001a\u001a VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0015\u001a\u001a KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u001a\u0003 DQLPDWLQJ\u000f\u0003\u0014\u0015\u0014\u01de\u0014\u0015\u0018\u0003 FRPSXWLQJ\u0003WHPSHUDWXUH\u0003XSGDWHV\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0014 ZLWK\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0018\u0017\u01de\u0014\u0019\u0013 VLPSOH\u0003KHDWLQJ\u0003PRGHO\u000f\u0003\u0014\u0014\u001a\u01de\u0014\u0014\u001b\u0003 XVLQJ\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u0018\u01de\u0014\u0016\u0014 \u0005+HOOR\u000f\u0003:RUOG\u0005\u0003H[DPSOH NHUQHO\u0003FDOO\u000f\u0003\u0015\u0016\u01de\u0015\u0017\u0003 SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0017\u01de\u0015\u001a ZULWLQJ\u0003\u020cUVW\u0003SURJUDP\u000f\u0003\u0015\u0015\u01de\u0015\u0016 +LJKO\\\u00032SWLPL]HG\u00032EMHFW\u0010RULHQWHG\u00030DQ\\\u0010SDUWLFOH\u0003 '\\QDPLFV\u0003 +220' \u000f\u0003\u0014\u0013\u01de\u0014\u0014 KLVWRJUDP\u0003FRPSXWDWLRQ RQ\u0003&38V\u000f\u0003\u0014\u001a\u0014\u01de\u0014\u001a\u0016 RQ\u0003*38V\u000f\u0003\u0014\u001a\u0016\u01de\u0014\u001a RYHUYLHZ\u000f\u0003\u0014\u001a\u0013 KLVWRJUDP\u0003NHUQHO\u0003 XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003\u0014\u001a \u01de\u0014\u001b\u0014\u0003 XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016 hit()\u0003PHWKRG\u000f\u0003UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003 \u000f\u0003\u0014\u0013\u0015+220'\u0003 +LJKO\\\u00032SWLPL]HG\u00032EMHFW\u0010RULHQWHG\u0003 0DQ\\\u0010SDUWLFOH\u0003'\\QDPLFV \u000f\u0003\u0014\u0013\u01de\u0014\u0014 KRVWV DOORFDWLQJ\u0003PHPRU\\\u0003WR\u0011\u0003 see malloc() &38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0016 \u01de\u0017\u0014\u0003 &8'$\u0003&\u0003EOXUULQJ\u0003GHYLFH\u0003FRGH\u0003DQG\u000f\u0003\u0015\u0019 SDJH\u0010ORFNHG\u0003PHPRU\\\u000f\u0003\u0014\u001b\u0019\u01de\u0014 \u0015 SDVVLQJ\u0003SDUDPHWHUV\u000f\u0003\u0015\u0018\u01de\u0015\u001a\u0003 XVH\u0003RI\u0003WHUP\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003\u0015\u0016 ]HUR\u0010FRS\\\u0003KRVW\u0003PHPRU\\\u000f\u0003\u0015\u0014\u0017\u01de\u0015\u0015\u0015 I idle_func() \u0003PHPEHU\u000f\u0003 GPUAnimBitmap \u000f\u0003\u0014\u0018\u0017 ,(((\u0003UHTXLUHPHQWV\u000f\u0003$/8V\u000f\u0003\u001a\u0003 LQFUHPHQW\u0003RSHUDWRU\u0003 x++ \u000f\u0003\u0014\u0019\u001b\u01de\u0014\u001a\u0013 LQLWLDOL]DWLRQ &38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u0016\u000f\u0003\u0015\u0019\u0019 &38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0014\u0003 */87\u000f\u0003\u0014\u0017\u0015\u000f\u0003\u0014\u0018\u0013\u000f\u0003\u0014\u001a\u0016\u01de\u0014\u001a\u0017 GPUAnimBitmap , 149 LQQHU\u0003SURGXFWV\u0011\u0003 see\u0003GRW\u0003SURGXFW\u0003FRPSXWDWLRQ LQWHJUDWHG\u0003*38V\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0017\u0003 LQWHUOHDYHG\u0003RSHUDWLRQV\u000f\u0003\u0014\u0019 \u01de\u0014\u001a\u0013 LQWHURSHUDWLRQ\u0011\u0003 see\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\ J julia()\u0003IXQFWLRQ\u000f\u0003\u0017\u001b\u01de\u0017 \u000f\u0003\u0018\u0016 -XOLD\u00036HW\u0003H[DPSOH &38\u0003DSSOLFDWLRQ\u0003RI\u000f\u0003\u0017\u001a\u01de\u0018\u0013 *38\u0003DSSOLFDWLRQ\u0003RI\u000f\u0003\u0018\u0013\u01de\u0018\u001a RYHUYLHZ\u0003RI\u000f\u0003\u0017\u0019\u01de\u0017\u001a K NHUQHO\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u0016\u0003 blockIdx.x \u0003YDULDEOH\u000f\u0003\u0017\u0017\u0003 FDOO\u0003WR\u000f\u0003\u0015\u0016\u01de\u0015\u0017\u0003 GH\u020cQHG\u000f\u0003\u0015\u0016\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0019\u01de\u0014\u001a\u001b\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0017 \u01de\u0018\u0015\u0003 *38\u0003ULSSOH\u0003SHUIRUPLQJ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0018\u0017\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0013\u01de\u001a\u0015\u0003 *38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0018\u0003 JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0016 \u01de\u0014\u0017\u0015\u000f\u0003\u0014\u0017\u0017\u01de\u0014\u0017\u0019 \u0005+HOOR\u000f\u0003:RUOG\u0005\u0003H[DPSOH\u0003RI\u0003FDOO\u0003WR\u000f\u0003\u0015\u0016\u01de\u0015\u0017 ODXQFKLQJ\u0003ZLWK\u0003QXPEHU\u0003LQ\u0003DQJOH\u0003EUDFNHWV\u0003WKDW\u0003LV\u0003 QRW\u0003\u0014\u000f\u0003\u0017\u0016\u01de\u0017\u0017\u0003 SDVVLQJ\u0003SDUDPHWHUV\u0003WR\u000f\u0003\u0015\u0017\u01de\u0015\u001a UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0015\u01de\u0014\u0013\u0017 WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u001a\u01de\u0014\u0016\u0014 key_func \u000f\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0017\u01de\u0014\u0017\u0019 Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/seven.lfNH\\V &38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u0014\u01de\u0015\u0019\u001a *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019 \u01de\u0015\u001a\u0018 KDVK\u0003WDEOH\u0003FRQFHSWV\u000f\u0003\u0015\u0018 \u01de\u0015\u0019\u0013 L ODQJXDJH\u0003ZUDSSHUV\u000f\u0003\u0015\u0017\u0019\u01de\u0015\u0017\u001a /$3$&.\u0003 /LQHDU\u0003$OJHEUD\u00033DFNDJH \u000f\u0003\u0015\u0017\u0019 OLJKW\u0003HIIHFWV\u000f\u0003UD\\\u0003WUDFLQJ\u0003FRQFHSWV\u000f\u0003 \u001a /LQX[\u000f\u0003VWDQGDUG\u0003&\u0003FRPSLOHU\u0003IRU\u000f\u0003\u0014 Lock\u0003VWUXFWXUH\u000f\u0003\u0015\u0018\u0017\u01de\u0015\u0018\u001b\u000f\u0003\u0015\u0019\u001b\u01de\u0015\u001a\u0018 ORFNV\u000f\u0003DWRPLF\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017 M 0DFLQWRVK\u000326\u0003;\u000f\u0003VWDQGDUG\u0003&\u0003FRPSLOHU\u000f\u0003\u0014 main()URXWLQH \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0016\u01de\u0014\u0016\u0019\u0003 &38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u0019\u01de\u0015\u0019\u001a &38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0014\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001b\u0014\u01de\u001b\u0017\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0016\u01de\u0015\u001a\u0018\u0003 *38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0016\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0017\u001a\u000f\u0003\u0018\u0013\u01de\u0018\u0014\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019 \u01de\u001a\u0013\u0003 *38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0014\u01de\u0017\u0015\u0003 JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0017\u0003 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DSSOLFDWLRQ\u000f\u0003\u0014 \u0013\u01de\u0014 \u0015 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003 \u01de\u0014\u0013\u0013\u0003 UD\\\u0003WUDFLQJ\u0003ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0017\u01de\u0014\u0013\u0019 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0013\u0003 VLQJOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0014 \u0016\u01de\u0014 \u0017\u0003 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0013\u01de\u0015\u0015\u0015 malloc() cudaHostAlloc() \u0003YHUVXV\u000f\u0003\u0014\u001b\u0019 cudaHostAlloc() YHUVXV\u000f\u0003\u0014 \u0013 cudaMalloc( )YHUVXV\u000f\u0003\u0015\u0019\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0013 PDPPRJUDPV\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003IRU\u0003PHGLFDO\u0003 LPDJLQJ\u000f\u0003 maxThreadsPerBlock \u0003\u020cHOG\u000f\u0003GHYLFH\u0003SURSHUWLHV\u000f\u0003\u0019\u0016 PHGLD\u0003DQG\u0003FRPPXQLFDWLRQV\u0003SURFHVVRUV\u0003 0&3V \u000f\u0003\u0015\u0015\u0016 PHGLFDO\u0003LPDJLQJ\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003IRU\u000f\u0003\u001b\u01de memcpy() ,\u0003&\u0003ODQJXDJH\u000f\u0003\u0015\u001a\u0003 PHPRU\\ DOORFDWLQJ\u0003GHYLFH\u0011\u0003 see cudaMalloc() FRQVWDQW\u0011\u0003 see\u0003FRQVWDQW\u0003PHPRU\\\u0003 &8'$\u0003$UFKLWHFWXUH\u0003FUHDWLQJ\u0003DFFHVV\u0003WR\u000f\u0003\u001a\u0003 HDUO\\\u0003GD\\V\u0003RI\u0003*38\u0003FRPSXWLQJ\u000f\u0003\u0019\u0003 H[HFXWLQJ\u0003GHYLFH\u0003FRGH\u0003WKDW\u0003XVHV\u0003DOORFDWHG\u000f\u0003\u001a\u0013 IUHHLQJ\u0011\u0003see cudaFree() \u0003free(),\u0003&\u0003ODQJXDJH*38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u001a\u0016\u01de\u0014\u001a\u0017 SDJH\u0010ORFNHG\u0003KRVW\u0003 SLQQHG \u000f\u0003\u0014\u001b\u0019\u01de\u0014 \u0015 TXHU\\LQJ\u0003GHYLFHV\u000f\u0003\u0015\u001a\u01de\u0016\u0016\u0003 VKDUHG\u0011\u0003see\u0003VKDUHG\u0003PHPRU\\\u0003 WH[WXUH\u0011\u0003see\u0003WH[WXUH\u0003PHPRU\\\u0003 XVH\u0003RI\u0003WHUP\u0003LQ\u0003WKLV\u0003ERRN\u000f\u0003\u0015\u0016 0HPRU\\\u0003&KHFNHU\u000f\u0003&8'$\u000f\u0003\u0015\u0017\u0015\u0003 memset() ,\u0003&\u0003ODQJXDJH\u000f\u0003\u0014\u001a\u0017\u0003 0LFURVRIW\u0003:LQGRZV\u000f\u00039LVXDO\u00036WXGLR\u0003&\u0003FRPSLOHU\u000f\u0003\u0014\u001b\u01de\u0014 0LFURVRIW\u00111(7\u000f\u0003\u0015\u0017\u001a\u0003 PXOWLFRUH\u0003UHYROXWLRQ\u000f\u0003HYROXWLRQ\u0003RI\u0003&38V\u000f\u0003\u0016 PXOWLSOLFDWLRQ\u000f\u0003LQ\u0003YHFWRU\u0003GRW\u0003SURGXFWV\u000f\u0003\u001a\u0019 PXOWLWKUHDGHG\u0003KDVK\u0003WDEOHV\u000f\u0003\u0015\u0019\u001a\u01de\u0015\u0019\u001b\u0003 mutex\u000f\u0003*38\u0003ORFN\u0003IXQFWLRQ\u000f\u0003\u0015\u0018\u0015\u01de\u0015\u0018\u0017 N Q)RUFH\u0003PHGLD\u0003DQG\u0003FRPPXQLFDWLRQV\u0003SURFHVVRUV\u0003 0&3V \u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0016 NVIDIA FRPSXWH\u0003FDSDELOLW\\\u0003RI\u0003YDULRXV\u0003*38V\u000f\u0003\u0014\u0019\u0017\u01de\u0014\u0019\u001a FUHDWLQJ\u0003\u0016'\u0003JUDSKLFV\u0003IRU\u0003FRQVXPHUV\u000f\u0003\u0018\u0003 FUHDWLQJ\u0003&8'$\u0003&\u0003IRU\u0003*38\u000f\u0003\u001a\u0003 FUHDWLQJ\u0003\u020cUVW\u0003*38\u0003EXLOW\u0003ZLWK\u0003&8'$\u0003$UFKLWHFWXUH\u000f\u0003\u001a &8%/$6\u0003OLEUDU\\\u000f\u0003\u0015\u0016 \u01de\u0015\u0017\u0013\u0003 &8'$\u0010HQDEOHG\u0003JUDSKLFV\u0003SURFHVVRUV\u000f\u0003\u0014\u0017\u01de\u0014\u0019 &8'$\u0010*'%\u0003GHEXJJLQJ\u0003WRRO\u000f\u0003\u0015\u0017\u0014\u01de\u0015\u0017\u0015\u0003 &8))7\u0003OLEUDU\\\u000f\u0003\u0015\u0016 \u0003 GHYLFH\u0003GULYHU\u000f\u0003\u0014\u0019\u0003 *38\u0003&RPSXWLQJ\u00036'.\u0003GRZQORDG\u000f\u0003\u0014\u001b\u000f\u0003\u0015\u0017\u0013\u01de\u0015\u0017\u0014 3DUDOOHO\u000316LJKW\u0003GHEXJJLQJ\u0003WRRO\u000f\u0003\u0015\u0017\u0015 3HUIRUPDQFH\u00033ULPLWLYHV\u000f\u0003\u0015\u0017\u0014\u0003 SURGXFWV\u0003FRQWDLQLQJ\u0003PXOWLSOH\u0003*38V\u000f\u0003\u0015\u0015\u0017\u0003 9LVXDO\u00033UR\u020cOHU\u000f\u0003\u0015\u0017\u0016\u01de\u0015\u0017\u0017 NVIDIA CUDA Programming Guide , 31 O offset\u000f\u0003\u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0016\u0003 RQ\u0010FKLS\u0003FDFKLQJ\u0011\u0003 see\u0003FRQVWDQW\u0003PHPRU\\ \u0003WH[WXUH\u0003 PHPRU\\ RQH\u0010GLPHQVLRQDO\u0003EORFNV *38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016 WZR\u0010GLPHQVLRQDO\u0003EORFNV\u0003YHUVXV\u000f\u0003\u0017\u0017 RQOLQH\u0003UHVRXUFHV\u0011\u0003 see\u0003UHVRXUFHV\u000f\u0003RQOLQH 2SHQ*/ FUHDWLQJ\u0003GPUAnimBitmap \u000f\u0003\u0014\u0017\u001b\u01de\u0014\u0018\u0015\u0003 LQ\u0003HDUO\\\u0003GD\\V\u0003RI\u0003*38\u0003FRPSXWLQJ\u000f\u0003\u0018\u01de\u0019 JHQHUDWLQJ\u0003LPDJH\u0003GDWD\u0003ZLWK\u0003NHUQHO\u000f\u0003\u0014\u0016 \u01de\u0014\u0017\u0015 LQWHURSHUDWLRQ\u000f\u0003\u0014\u0017\u0015\u01de\u0014\u0017\u001a\u0003 ZULWLQJ\u0003\u0016'\u0003JUDSKLFV\u000f\u0003\u0017 RSHUDWLRQV\u000f\u0003DWRPLF\u000f\u0003\u0014\u0019\u001b\u01de\u0014\u001a\u0013 RSWLPL]DWLRQ\u000f\u0003LQFRUUHFW\u0003GRW\u0003SURGXFW\u000f\u0003\u001b\u001a\u01de \u0013 Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/eight.lfP SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003 DOORFDWLQJ\u0003DV\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0013\u01de\u0015\u0016\u0018 RYHUYLHZ\u0003RI\u000f\u0003\u0014\u001b\u0019\u01de\u0014\u001b\u001a\u0003 UHVWULFWHG\u0003XVH\u0003RI\u000f\u0003\u0014\u001b\u001a\u0003 VLQJOH\u0003&8'$\u0003VWUHDPV\u0003ZLWK\u000f\u0003\u0014 \u0018\u01de\u0014 \u001a SDUDOOHO\u0003EORFNV\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0014 *38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0018 SDUDOOHO\u0003EORFNV\u000f\u0003VSOLWWLQJ\u0003LQWR\u0003WKUHDGV\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0018\u01de\u0019 *38\u0003VXPV\u0003RI\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0018\u0003 *38\u0003YHFWRU\u0003VXPV\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019\u0014\u01de\u0019\u0016 RYHUYLHZ\u0003RI\u000f\u0003\u0019\u0013\u0003 YHFWRU\u0003VXPV\u000f\u0003\u0019\u0013\u01de\u0019\u0014 3DUDOOHO\u000316LJKW\u0003GHEXJJLQJ\u0003WRRO\u000f\u0003\u0015\u0017\u0015 SDUDOOHO\u0003SURFHVVLQJ HYROXWLRQ\u0003RI\u0003&38V\u000f\u0003\u0015\u01de\u0016 SDVW\u0003SHUFHSWLRQ\u0003RI\u000f\u0003\u0014 SDUDOOHO\u0003SURJUDPPLQJ\u000f\u0003&8'$\u0003 &38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0016 \u01de\u0017\u0014\u0003 H[DPSOH\u000f\u0003&38\u0003-XOLD\u00036HW\u0003DSSOLFDWLRQ\u000f\u0003\u0017\u001a\u01de\u0018\u0013 H[DPSOH\u000f\u0003*38\u0003-XOLD\u00036HW\u0003DSSOLFDWLRQ\u000f\u0003\u0018\u0013\u01de\u0018\u001a H[DPSOH\u000f\u0003RYHUYLHZ\u000f\u0003\u0017\u0019\u01de\u0017\u001a\u0003 *38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0014\u01de\u0017\u0019\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0016\u001b\u0003 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0018\u0019\u0003 VXPPLQJ\u0003YHFWRUV\u000f\u0003\u0016\u001b\u01de\u0017\u0014 SDUDPHWHU\u0003SDVVLQJ\u000f\u0003\u0015\u0017\u01de\u0015\u001a\u000f\u0003\u0017\u0013\u000f\u0003\u001a\u0015\u0003 3&\u0003JDPLQJ\u000f\u0003\u0016'\u0003JUDSKLFV\u0003IRU\u000f\u0003\u0017\u01de\u0018\u0003 3&,\u0003([SUHVV\u0003VORWV\u000f\u0003DGGLQJ\u0003PXOWLSOH\u0003*38V\u0003WR\u000f\u0003\u0015\u0015\u0017 SHUIRUPDQFH FRQVWDQW\u0003PHPRU\\\u0003DQG\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a\u0003 HYROXWLRQ\u0003RI\u0003&38V\u000f\u0003\u0015\u01de\u0016\u0003 KDVK\u0003WDEOH\u000f\u0003\u0015\u001a\u0019\u0003 ODXQFKLQJ\u0003NHUQHO\u0003IRU\u0003*38\u0003KLVWRJUDP\u0003FRPSXWDWLRQ\u000f\u0003 \u0014\u001a\u0019\u01de\u0014\u001a\u001a\u0003 PHDVXULQJ\u0003ZLWK\u0003HYHQWV\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0017 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DQG\u000f\u0003\u0014\u001b\u001a ]HUR\u0010FRS\\\u0003PHPRU\\\u0003DQG\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0016 SLQQHG\u0003PHPRU\\\u0003 DOORFDWLQJ\u0003DV\u0003SRUWDEOH\u000f\u0003\u0015\u0016\u0013\u01de\u0015\u0016\u0018 cudaHostAllocDefault() JHWWLQJ\u0003GHIDXOW\u000f\u0003\u0015\u0014\u0017 DV\u0003SDJH\u0010ORFNHG\u0003PHPRU\\\u0011\u0003 see\u0003SDJH\u0010ORFNHG\u0003KRVW\u0003 PHPRU\\\u0003 SL[HO\u0003EXIIHU\u0003REMHFWV\u0003 3%2 \u000f\u00032SHQ*/\u000f\u0003\u0014\u0017\u0015\u01de\u0014\u0017\u0016 SL[HO\u0003VKDGHUV\u000f\u0003HDUO\\\u0003GD\\V\u0003RI\u0003*38\u0003FRPSXWLQJ\u000f\u0003\u0018\u01de\u0019 SL[HOV\u000f\u0003QXPEHU\u0003RI\u0003WKUHDGV\u0003SHU\u0003EORFN\u000f\u0003\u001a\u0013\u01de\u001a\u0017 SRUWDEOH\u0003FRPSXWLQJ\u0003GHYLFHV\u000f\u0003\u0015\u0003 Programming Massively Parallel Processors: A Hands-on Approach .LUN\u000f\u0003+ZX \u000f\u0003\u0015\u0017\u0017SURSHUWLHV\u0003 cudaDeviceProp \u0003VWUXFWXUH\u0011\u0003 see cudaDeviceProp \u0003VWUXFWXUH maxThreadsPerBlock \u0003\u020cHOG\u0003IRU\u0003GHYLFH\u000f\u0003\u0019\u0016 UHSRUWLQJ\u0003GHYLFH\u000f\u0003\u0016\u0014\u0003 XVLQJ\u0003GHYLFH\u000f\u0003\u0016\u0016\u01de\u0016\u0018 3\\&8'$\u0003SURMHFW\u000f\u0003\u0015\u0017\u0019\u01de\u0015\u0017\u001a\u0003 3\\WKRQ\u0003ODQJXDJH\u0003ZUDSSHUV\u0003IRU\u0003&8'$\u0003&\u000f\u0003\u0015\u0017\u0019 Q TXHU\\LQJ\u000f\u0003GHYLFHV\u000f\u0003\u0015\u001a\u01de\u0016\u0016 R UDVWHUL]DWLRQ\u000f\u0003 \u001a UD\\\u0003WUDFLQJ FRQFHSWV\u0003EHKLQG\u000f\u0003 \u0019\u01de \u001b\u0003 ZLWK\u0003FRQVWDQW\u0003PHPRU\\\u000f\u0003\u0014\u0013\u0017\u01de\u0014\u0013\u0019 RQ\u0003*38\u000f\u0003 \u001b\u01de\u0014\u0013\u0017\u0003 PHDVXULQJ\u0003SHUIRUPDQFH\u000f\u0003\u0014\u0014\u0013\u01de\u0014\u0014\u0017 UHDG\u0010PRGLI\\\u0010ZULWH\u0003RSHUDWLRQV DWRPLF\u0003RSHUDWLRQV\u0003DV\u000f\u0003\u0014\u0019\u001b\u01de\u0014\u001a\u0013\u000f\u0003\u0015\u0018\u0014 XVLQJ\u0003DWRPLF\u0003ORFNV\u000f\u0003\u0015\u0018\u0014\u01de\u0015\u0018\u0017 UHDG\u0010RQO\\\u0003PHPRU\\\u0011\u0003 see\u0003FRQVWDQW\u0003PHPRU\\ \u0003WH[WXUH\u0003 PHPRU\\ UHGXFWLRQV\u0003 GRW\u0003SURGXFWV\u0003DV\u000f\u0003\u001b\u0016\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0015\u0018\u0013\u0003 VKDUHG\u0003PHPRU\\\u0003DQG\u0003V\\QFKURQL]DWLRQ\u0003IRU\u000f\u0003\u001a \u01de\u001b\u0014 UHIHUHQFHV\u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0015\u0019\u01de\u0014\u0015\u001a\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u001a UHJLVWUDWLRQ bufferObj \u0003ZLWK\u0003cudaGraphicsGLRegister- Buffer() \u000f\u0003\u0014\u0018\u0014 FDOOEDFN\u000f\u0003\u0014\u0017 UHQGHULQJ\u000f\u0003*38V\u0003SHUIRUPLQJ\u0003FRPSOH[\u000f\u0003\u0014\u0016 resource \u0003YDULDEOH FUHDWLQJ\u0003GPUAnimBitmap \u000f\u0003\u0014\u0017\u001b\u01de\u0014\u0018\u0015 JUDSKLFV\u0003LQWHURSHUDWLRQ\u000f\u0003\u0014\u0017\u0014 UHVRXUFHV\u000f\u0003RQOLQH &8'$\u0003FRGH\u000f\u0003\u0015\u0017\u0019\u01de\u0015\u0017\u001b\u0003 &8'$\u00037RRONLW\u000f\u0003\u0014\u0019\u0003 &8'$\u00038QLYHUVLW\\\u000f\u0003\u0015\u0017\u0018\u0003 &8'33\u000f\u0003\u0015\u0017\u0019\u0003 &8/$WRROV\u000f\u0003\u0015\u0017\u0019\u0003 'U\u0011\u0003'REE V\u0003&8'$\u000f\u0003\u0015\u0017\u0019\u0003 *38\u0003&RPSXWLQJ\u00036'.\u0003FRGH\u0003VDPSOHV\u000f\u0003\u0014\u001b ODQJXDJH\u0003ZUDSSHUV\u000f\u0003\u0015\u0017\u0019\u01de\u0015\u0017\u001a\u0003 19,',$\u0003GHYLFH\u0003GULYHU\u000f\u0003\u0014\u0019\u0003 19,',$\u0003IRUXPV\u000f\u0003\u0015\u0017\u0019\u0003 VWDQGDUG\u0003&\u0003FRPSLOHU\u0003IRU\u00030DF\u000326\u0003;\u000f\u0003\u0014 9LVXDO\u00036WXGLR\u0003&\u0003FRPSLOHU\u000f\u0003\u0014\u001b Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/nine.lfUHVRXUFHV\u000f\u0003ZULWWHQ\u0003 &8'$\u00038\u000f\u0003\u0015\u0017\u0018\u01de\u0015\u0017\u0019\u0003 IRUXPV\u000f\u0003\u0015\u0017\u0019\u0003 SURJUDPPLQJ\u0003PDVVLYH\u0003SDUDOOHO\u0003SURFHVVRUV\u000f\u0003\u0015\u0017\u0017\u01de\u0015\u0017\u0018 ripple, GP U ZLWK\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u001a\u01de\u0014\u0018\u0017 SURGXFLQJ\u000f\u0003\u0019 \u01de\u001a\u0017 routine() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0015\u01de\u0015\u0016\u0017 XVLQJ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0019\u01de\u0015\u0015\u001b 5XVVLDQ\u0003QHVWLQJ\u0003GROO\u0003KLHUDUFK\\\u000f\u0003\u0014\u0019\u0017 S VFDODEOH\u0003OLQN\u0003LQWHUIDFH\u0003 6/, \u000f\u0003DGGLQJ\u0003PXOWLSOH\u0003*38V\u0003 ZLWK\u000f\u0003\u0015\u0015\u0017 scale\u0003IDFWRU\u000f\u0003&38\u0003-XOLD\u00036HW\u000f\u0003\u0017 VFLHQWL\u020cF\u0003FRPSXWDWLRQV\u000f\u0003LQ\u0003HDUO\\\u0003GD\\V\u000f\u0003\u0019 VFUHHQVKRWV DQLPDWHG\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003\u0014\u0015\u0019 *38\u0003-XOLD\u00036HW\u0003H[DPSOH\u000f\u0003\u0018\u001a\u0003 *38\u0003ULSSOH\u0003H[DPSOH\u000f\u0003\u001a\u0017\u0003 JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003H[DPSOH\u000f\u0003\u0014\u0017\u001a\u0003 UD\\\u0003WUDFLQJ\u0003H[DPSOH\u000f\u0003\u0014\u0013\u0016\u01de\u0014\u0013\u0017\u0003 UHQGHUHG\u0003ZLWK\u0003SURSHU\u0003V\\QFKURQL]DWLRQ\u000f\u0003 \u0016 UHQGHUHG\u0003ZLWKRXW\u0003SURSHU\u0003V\\QFKURQL]DWLRQ\u000f\u0003 \u0015 VKDGLQJ\u0003ODQJXDJHV\u000f\u0003\u0019\u0003 VKDUHG\u0003GDWD\u0003EXIIHUV\u000f\u0003NHUQHO\u00122SHQ*/\u0003UHQGHULQJ\u0003 LQWHURSHUDWLRQ\u000f\u0003\u0014\u0017\u0015 VKDUHG\u0003PHPRU\\ DWRPLFV\u000f\u0003\u0014\u0019\u001a\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016\u0003 ELWPDS\u000f\u0003 \u0013\u01de \u0016\u0003 &8'$\u0003$UFKLWHFWXUH\u0003FUHDWLQJ\u0003DFFHVV\u0003WR\u000f\u0003\u001a GRW\u0003SURGXFW\u000f\u0003\u001a\u0019\u01de\u001b\u001a\u0003 GRW\u0003SURGXFW\u0003RSWLPL]HG\u0003LQFRUUHFWO\\\u000f\u0003\u001b\u001a\u01de \u0013 DQG\u0003V\\QFKURQL]DWLRQ\u000f\u0003\u001a\u0018 6LOLFRQ\u0003*UDSKLFV\u000f\u00032SHQ*/\u0003OLEUDU\\\u000f\u0003\u0017 VLPXODWLRQ DQLPDWLRQ\u0003RI\u000f\u0003\u0014\u0015\u0014\u01de\u0014\u0015\u0018\u0003",
    "Download from www.wowebook.comptg,1'(; /two.lf/eight.lf/nine.lfUHVRXUFHV\u000f\u0003ZULWWHQ\u0003 &8'$\u00038\u000f\u0003\u0015\u0017\u0018\u01de\u0015\u0017\u0019\u0003 IRUXPV\u000f\u0003\u0015\u0017\u0019\u0003 SURJUDPPLQJ\u0003PDVVLYH\u0003SDUDOOHO\u0003SURFHVVRUV\u000f\u0003\u0015\u0017\u0017\u01de\u0015\u0017\u0018 ripple, GP U ZLWK\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u001a\u01de\u0014\u0018\u0017 SURGXFLQJ\u000f\u0003\u0019 \u01de\u001a\u0017 routine() DOORFDWLQJ\u0003SRUWDEOH\u0003SLQQHG\u0003PHPRU\\\u000f\u0003\u0015\u0016\u0015\u01de\u0015\u0016\u0017 XVLQJ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0019\u01de\u0015\u0015\u001b 5XVVLDQ\u0003QHVWLQJ\u0003GROO\u0003KLHUDUFK\\\u000f\u0003\u0014\u0019\u0017 S VFDODEOH\u0003OLQN\u0003LQWHUIDFH\u0003 6/, \u000f\u0003DGGLQJ\u0003PXOWLSOH\u0003*38V\u0003 ZLWK\u000f\u0003\u0015\u0015\u0017 scale\u0003IDFWRU\u000f\u0003&38\u0003-XOLD\u00036HW\u000f\u0003\u0017 VFLHQWL\u020cF\u0003FRPSXWDWLRQV\u000f\u0003LQ\u0003HDUO\\\u0003GD\\V\u000f\u0003\u0019 VFUHHQVKRWV DQLPDWHG\u0003KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003\u0014\u0015\u0019 *38\u0003-XOLD\u00036HW\u0003H[DPSOH\u000f\u0003\u0018\u001a\u0003 *38\u0003ULSSOH\u0003H[DPSOH\u000f\u0003\u001a\u0017\u0003 JUDSKLFV\u0003LQWHURSHUDWLRQ\u0003H[DPSOH\u000f\u0003\u0014\u0017\u001a\u0003 UD\\\u0003WUDFLQJ\u0003H[DPSOH\u000f\u0003\u0014\u0013\u0016\u01de\u0014\u0013\u0017\u0003 UHQGHUHG\u0003ZLWK\u0003SURSHU\u0003V\\QFKURQL]DWLRQ\u000f\u0003 \u0016 UHQGHUHG\u0003ZLWKRXW\u0003SURSHU\u0003V\\QFKURQL]DWLRQ\u000f\u0003 \u0015 VKDGLQJ\u0003ODQJXDJHV\u000f\u0003\u0019\u0003 VKDUHG\u0003GDWD\u0003EXIIHUV\u000f\u0003NHUQHO\u00122SHQ*/\u0003UHQGHULQJ\u0003 LQWHURSHUDWLRQ\u000f\u0003\u0014\u0017\u0015 VKDUHG\u0003PHPRU\\ DWRPLFV\u000f\u0003\u0014\u0019\u001a\u000f\u0003\u0014\u001b\u0014\u01de\u0014\u001b\u0016\u0003 ELWPDS\u000f\u0003 \u0013\u01de \u0016\u0003 &8'$\u0003$UFKLWHFWXUH\u0003FUHDWLQJ\u0003DFFHVV\u0003WR\u000f\u0003\u001a GRW\u0003SURGXFW\u000f\u0003\u001a\u0019\u01de\u001b\u001a\u0003 GRW\u0003SURGXFW\u0003RSWLPL]HG\u0003LQFRUUHFWO\\\u000f\u0003\u001b\u001a\u01de \u0013 DQG\u0003V\\QFKURQL]DWLRQ\u000f\u0003\u001a\u0018 6LOLFRQ\u0003*UDSKLFV\u000f\u00032SHQ*/\u0003OLEUDU\\\u000f\u0003\u0017 VLPXODWLRQ DQLPDWLRQ\u0003RI\u000f\u0003\u0014\u0015\u0014\u01de\u0014\u0015\u0018\u0003 FKDOOHQJHV\u0003RI\u0003SK\\VLFDO\u000f\u0003\u0014\u0014\u001a\u0003 FRPSXWLQJ\u0003WHPSHUDWXUH\u0003XSGDWHV\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0014 VLPSOH\u0003KHDWLQJ\u0003PRGHO\u000f\u0003\u0014\u0014\u001a\u01de\u0014\u0014\u001b 6/,\u0003 VFDODEOH\u0003OLQN\u0003LQWHUIDFH \u000f\u0003DGGLQJ\u0003PXOWLSOH\u0003*38V\u0003 ZLWK\u000f\u0003\u0015\u0015\u0017 VSDWLDO\u0003ORFDOLW\\\u0003 GHVLJQLQJ\u0003WH[WXUH\u0003FDFKHV\u0003IRU\u0003JUDSKLFV\u0003ZLWK\u000f\u0003\u0014\u0014\u0019 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0018\u01de\u0014\u0015\u0019 VSOLW\u0003SDUDOOHO\u0003EORFNV\u0011\u0003 see\u0003SDUDOOHO\u0003EORFNV\u000f\u0003VSOLWWLQJ\u0003 LQWR\u0003WKUHDGV VWDQGDUG\u0003&\u0003FRPSLOHU\u0003 FRPSLOLQJ\u0003IRU\u0003PLQLPXP\u0003FRPSXWH\u0003FDSDELOLW\\\u000f\u0003 \u0014\u0019\u001a\u01de\u0014\u0019\u001bGHYHORSPHQW\u0003HQYLURQPHQW\u000f\u0003\u0014\u001b\u01de\u0014 NHUQHO\u0003FDOO\u000f\u0003\u0015\u0016\u01de\u0015\u0017 start\u0003HYHQW\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013 start_thread() \u000f\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0019\u01de\u0015\u0015\u001a stop\u0003HYHQW\u000f\u0003\u0014\u0013\u001b\u01de\u0014\u0014\u0013\u0003 VWUHDPV &8'$\u000f\u0003RYHUYLHZ\u0003RI\u000f\u0003\u0014 \u0015\u0003 &8'$\u000f\u0003XVLQJ\u0003PXOWLSOH\u000f\u0003\u0014 \u001b\u01de\u0015\u0013\u0018\u000f\u0003\u0015\u0013\u001b\u01de\u0015\u0014\u0013 &8'$\u000f\u0003XVLQJ\u0003VLQJOH\u000f\u0003\u0014 \u0015\u01de\u0014 \u001b\u0003 *38\u0003ZRUN\u0003VFKHGXOLQJ\u0003DQG\u000f\u0003\u0015\u0013\u0018\u01de\u0015\u0013\u001b RYHUYLHZ\u0003RI\u000f\u0003\u0014\u001b\u0018\u01de\u0014\u001b\u0019\u0003 SDJH\u0010ORFNHG\u0003KRVW\u0003PHPRU\\\u0003DQG\u000f\u0003\u0014\u001b\u0019\u01de\u0014 \u0015 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0015\u0014\u0014 VXSHUFRPSXWHUV\u000f\u0003SHUIRUPDQFH\u0003JDLQV\u0003LQ\u000f\u0003\u0016 VXUIDFWDQWV\u000f\u0003HQYLURQPHQWDO\u0003GHYDVWDWLRQ\u0003RI\u000f\u0003\u0014\u0013 V\\QFKURQL]DWLRQ RI\u0003HYHQWV\u0011\u0003 see cudaEventSynchronize() RI\u0003VWUHDPV\u000f\u0003\u0014 \u001a\u01de\u0014 \u001b\u000f\u0003\u0015\u0013\u0017\u0003 RI\u0003WKUHDGV\u000f\u0003\u0015\u0014 V\\QFKURQL]DWLRQ\u000f\u0003DQG\u0003VKDUHG\u0003PHPRU\\\u0003 GRW\u0003SURGXFW\u000f\u0003\u001a\u0019\u01de\u001b\u001a\u0003 GRW\u0003SURGXFW\u0003RSWLPL]HG\u0003LQFRUUHFWO\\\u000f\u0003\u001b\u001a\u01de \u0013 RYHUYLHZ\u0003RI\u000f\u0003\u001a\u0018\u0003 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0013\u01de \u0016 __syncthreads() GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u001b\u01de\u001b\u0013\u000f\u0003\u001b\u0018 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u0003XVLQJ\u000f\u0003 \u0013\u01de \u0016 XQLQWHQGHG\u0003FRQVHTXHQFHV\u0003RI\u000f\u0003\u001b\u001a\u01de \u0013 T WDVN\u0003SDUDOOHOLVP\u000f\u0003&38\u0003YHUVXV\u0003*38\u0003DSSOLFDWLRQV\u000f\u0003\u0014\u001b\u0018 7HFKQL6FDQ\u00030HGLFDO\u00036\\VWHPV\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u000f\u0003 WHPSHUDWXUHV FRPSXWLQJ\u0003WHPSHUDWXUH\u0003XSGDWHV\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0014 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003\u0014\u0014\u001a\u01de\u0014\u0014\u001b\u0003 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u0003DQLPDWLRQ\u000f\u0003\u0014\u0015\u0014\u01de\u0014\u0015\u0018 7HPSOH\u00038QLYHUVLW\\\u0003UHVHDUFK\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u000f\u0003 \u0014\u0013\u01de\u0014\u0014 tex1Dfetch() \u0003FRPSLOHU\u0003LQWULQVLF\u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003 \u0014\u0015\u001a\u01de\u0014\u0015\u001b\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u0015 tex2D()\u0003FRPSLOHU\u0003LQWULQVLF\u000f\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003 \u0014\u0016\u0015\u01de\u0014\u0016\u0016 WH[WXUH\u000f\u0003HDUO\\\u0003GD\\V\u0003RI\u0003*38\u0003FRPSXWLQJ\u000f\u0003\u0018\u01de\u0019 WH[WXUH\u0003PHPRU\\ DQLPDWLRQ\u0003RI\u0003VLPXODWLRQ\u000f\u0003\u0014\u0015\u0014\u01de\u0014\u0015\u0018 GH\u020cQHG\u000f\u0003\u0014\u0014\u0018\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0014\u0018\u01de\u0014\u0014\u001a\u0003 VLPXODWLQJ\u0003KHDW\u0003WUDQVIHU\u000f\u0003\u0014\u0014\u001a\u01de\u0014\u0015\u0014 VXPPDU\\\u0003UHYLHZ\u000f\u0003\u0014\u0016\u001a WZR\u0010GLPHQVLRQDO\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u001a XVLQJ\u000f\u0003\u0014\u0015\u0018\u01de\u0014\u0016\u0014 Download from www.wowebook.comptg,1'(; /two.lf/nine.lf/zero.lfthreadIdx \u0003YDULDEOH\u0003 \u0015'\u0003WH[WXUH\u0003PHPRU\\\u000f\u0003\u0014\u0016\u0015\u01de\u0014\u0016\u0016\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u0019\u01de\u001a\u001a\u000f\u0003\u001b\u0018\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u0003ZLWK\u0003DWRPLF\u0003ORFNV\u000f\u0003 \u0015\u0018\u0018\u01de\u0015\u0018\u0019\u0003 *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u001a\u0015\u0003 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0015\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0015\u01de\u001a\u0016\u0003 *38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0017\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0019\u01de\u0019\u001a *38\u0003YHFWRU\u0003VXPV\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019\u0014\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0013\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003VKDUHG\u0012JOREDO\u0003PHPRU\\\u0003 DWRPLFV\u000f\u0003\u0014\u001b\u0015\u01de\u0014\u001b\u0016\u0003 PXOWLSOH\u0003&8'$\u0003VWUHDPV\u000f\u0003\u0015\u0013\u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u000f\u0003\u0014\u0013\u0015\u0003 VHWWLQJ\u0003XS\u0003JUDSKLFV\u0003LQWHURSHUDELOLW\\\u000f\u0003\u0014\u0017\u0018 VKDUHG\u0003PHPRU\\\u0003ELWPDS\u000f\u0003 \u0014\u0003 WHPSHUDWXUH\u0003XSGDWH\u0003FRPSXWDWLRQ\u000f\u0003\u0014\u0014 \u01de\u0014\u0015\u0014 ]HUR\u0010FRS\\\u0003PHPRU\\\u0003GRW\u0003SURGXFW\u000f\u0003\u0015\u0015\u0014 WKUHDGV\u0003 FRGLQJ\u0003ZLWK\u000f\u0003\u0016\u001b\u01de\u0017\u0014\u0003 FRQVWDQW\u0003PHPRU\\\u0003DQG\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a\u0003 *38\u0003ULSSOH\u0003XVLQJ\u000f\u0003\u0019 \u01de\u001a\u0017\u0003 *38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0018\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0018\u01de\u0019 *38\u0003YHFWRU\u0003VXPV\u0003XVLQJ\u000f\u0003\u0019\u0014\u01de\u0019\u0016\u0003 KDUGZDUH\u0003OLPLW\u0003WR\u0003QXPEHU\u0003RI\u000f\u0003\u0019\u0016\u0003 KLVWRJUDP\u0003NHUQHO\u0003XVLQJ\u0003JOREDO\u0003PHPRU\\\u0003DWRPLFV\u000f\u0003 \u0014\u001a \u01de\u0014\u001b\u0014\u0003 LQFRUUHFW\u0003GRW\u0003SURGXFW\u0003RSWLPL]DWLRQ\u0003DQG\u0003GLYHUJHQFH\u0003 RI\u000f\u0003\u001b \u0003 PXOWLSOH\u0003&38V\u000f\u0003\u0015\u0015\u0018\u01de\u0015\u0015 \u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0018 \u01de\u0019\u0013\u0003 UD\\\u0003WUDFLQJ\u0003RQ\u0003*38\u0003DQG\u000f\u0003\u0014\u0013\u0015\u01de\u0014\u0013\u0017 UHDG\u0010PRGLI\\\u0010ZULWH\u0003RSHUDWLRQV\u000f\u0003\u0014\u0019\u001b\u01de\u0014\u001a\u0013 VKDUHG\u0003PHPRU\\\u0003DQG\u0011\u0003 see\u0003VKDUHG\u0003PHPRU\\ VXPPDU\\\u0003UHYLHZ\u000f\u0003 \u0017\u0003 V\\QFKURQL]LQJ\u000f\u0003\u0015\u0014 threadsPerBlock DOORFDWLQJ\u0003VKDUHG\u0003PHPRU\\\u000f\u0003\u001a\u0019\u01de\u001a\u001a GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a \u01de\u001b\u001a WKUHH\u0010GLPHQVLRQDO\u0003EORFNV\u000f\u0003*38\u0003VXPV\u0003RI\u0003D\u0003ORQJHU\u0003 YHFWRU\u000f\u0003\u0019\u0016 WKUHH\u0010GLPHQVLRQDO\u0003JUDSKLFV\u000f\u0003KLVWRU\\\u0003RI\u0003*38V\u000f\u0003\u0017\u01de\u0018 WKUHH\u0010GLPHQVLRQDO\u0003VFHQHV\u000f\u0003UD\\\u0003WUDFLQJ\u0003SURGXFLQJ\u0003\u0015\u0010'\u0003 LPDJH\u0003RI\u000f\u0003 \u001a tid\u0003YDULDEOH blockIdx.x \u0003YDULDEOH\u0003DVVLJQLQJ\u0003YDOXH\u0003RI\u000f\u0003\u0017\u0017 FKHFNLQJ\u0003WKDW\u0003LW\u0003LV\u0003OHVV\u0003WKDQ\u0003 N\u000f\u0003\u0017\u0018\u01de\u0017\u0019\u0003 GRW\u0003SURGXFW\u0003FRPSXWDWLRQ\u000f\u0003\u001a\u001a\u01de\u001a\u001b SDUDOOHOL]LQJ\u0003FRGH\u0003RQ\u0003PXOWLSOH\u0003&38V\u000f\u0003\u0017\u0013WLPH\u000f\u0003*38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0015\u01de\u001a\u0017\u0003 WLPHU\u000f\u0003HYHQW\u0011\u0003 see cudaEventElapsedTime() 7RRONLW\u000f\u0003&8'$\u000f\u0003\u0014\u0019\u01de\u0014\u001b\u0003 WZR\u0010GLPHQVLRQDO\u0003EORFNV DUUDQJHPHQW\u0003RI\u0003EORFNV\u0003DQG\u0003WKUHDGV\u000f\u0003\u0019\u0017 *38\u0003-XOLD\u00036HW\u000f\u0003\u0018\u0014\u0003 *38\u0003ULSSOH\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u001a\u0013 gridDim\u0003YDULDEOH\u0003DV\u000f\u0003\u0019\u0016 RQH\u0010GLPHQVLRQDO\u0003LQGH[LQJ\u0003YHUVXV\u000f\u0003\u0017\u0017 WZR\u0010GLPHQVLRQDO\u0003GLVSOD\\\u0003DFFHOHUDWRUV\u000f\u0003GHYHORSPHQW\u0003 RI\u0003*38V\u000f\u0003\u0017 WZR\u0010GLPHQVLRQDO\u0003WH[WXUH\u0003PHPRU\\ GH\u020cQHG\u000f\u0003\u0014\u0014\u0019\u0003 KHDW\u0003WUDQVIHU\u0003VLPXODWLRQ\u000f\u0003\u0014\u0014\u001a\u01de\u0014\u0014\u001b RYHUYLHZ\u0003RI\u000f\u0003\u0014\u0016\u0014\u01de\u0014\u0016\u001a U XOWUDVRXQG\u0003LPDJLQJ\u000f\u0003&8'$\u0003DSSOLFDWLRQV\u0003IRU\u000f\u0003 XQL\u020cHG\u0003VKDGHU\u0003SLSHOLQH\u000f\u0003&8'$\u0003$UFKLWHFWXUH\u000f\u0003\u001a XQLYHUVLW\\\u000f\u0003&8'$\u000f\u0003\u0015\u0017\u0018 V YDOXHV &38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019\u0014\u01de\u0015\u0019\u001a *38\u0003KDVK\u0003WDEOH\u0003LPSOHPHQWDWLRQ\u000f\u0003\u0015\u0019 \u01de\u0015\u001a\u0018 KDVK\u0003WDEOH\u0003FRQFHSWV\u000f\u0003\u0015\u0018 \u01de\u0015\u0019\u0013 YHFWRU\u0003GRW\u0003SURGXFWV\u0011\u0003 see\u0003GRW\u0003SURGXFW\u0003FRPSXWDWLRQ YHFWRU\u0003VXPV &38\u000f\u0003\u0016 \u01de\u0017\u0014\u0003 *38\u000f\u0003\u0017\u0014\u01de\u0017\u0019\u0003 *38\u0003VXPV\u0003RI\u0003DUELWUDULO\\\u0003ORQJ\u0003YHFWRUV\u000f\u0003\u0019\u0018\u01de\u0019 *38\u0003VXPV\u0003RI\u0003ORQJHU\u0003YHFWRU\u000f\u0003\u0019\u0016\u01de\u0019\u0018\u0003 *38\u0003VXPV\u0003XVLQJ\u0003WKUHDGV\u000f\u0003\u0019\u0014\u01de\u0019\u0016\u0003 RYHUYLHZ\u0003RI\u000f\u0003\u0016\u001b\u01de\u0016 \u000f\u0003\u0019\u0013\u01de\u0019\u0014 verify_table() \u000f\u0003*38\u0003KDVK\u0003WDEOH\u000f\u0003\u0015\u001a\u0013 9LVXDO\u00033UR\u020cOHU\u000f\u000319,',$\u000f\u0003\u0015\u0017\u0016\u01de\u0015\u0017\u0017\u0003 9LVXDO\u00036WXGLR\u0003&\u0003FRPSLOHU\u000f\u0003\u0014\u001b\u01de\u0014 W ZDUSV\u000f\u0003UHDGLQJ\u0003FRQVWDQW\u0003PHPRU\\\u0003ZLWK\u000f\u0003\u0014\u0013\u0019\u01de\u0014\u0013\u001a while()\u0003ORRS &38\u0003YHFWRU\u0003VXPV\u000f\u0003\u0017\u0013 *38\u0003ORFN\u0003IXQFWLRQ\u000f\u0003\u0015\u0018\u0016 ZRUN\u0003VFKHGXOLQJ\u000f\u0003*38\u000f\u0003\u0015\u0013\u0018\u01de\u0015\u0013\u001b Z ]HUR\u0010FRS\\\u0003PHPRU\\ DOORFDWLQJ\u0012XVLQJ\u000f\u0003\u0015\u0014\u0017\u01de\u0015\u0015\u0015 GH\u020cQHG\u000f\u0003\u0015\u0014\u0017 SHUIRUPDQFH\u000f\u0003\u0015\u0015\u0015\u01de\u0015\u0015\u0016 GPU GEMS: Programming Techniques, Tips, and Tricks for Real-Time Graphics Edited by Randima Fernando ISBN-13: 978-0-321-22832-1 GPU GEMS 2: Programming Techniques for High-Performance Graphics and General-Purpose Computation Edited by Matt Pharr ISBN-13: 978-0-321-33559-3 GPU GEMS 3 Edited by Hubert Nguyen ISBN-13: 978-0-321-51526-1 C\u0001\u0001 +=>;+5\u0001\u001700/-=< C\u0001\u0001 312=371\u0001+7.\u0001$2+.8@< C\u0001\u0001 +=/;3+5< C\u0001\u0001\u001b6+1/\u0001\";8-/<<371C\u0001\u0001 \"/;08;6+7-/\u0001+7.\u0001 \";+-=3-+53=3/< C\u0001\u0001\u0014/B87.\u0001%;3+715/< C\u0001\u0019/86/=;B \u001353+<\u0001$B<=/6<\u0001 \u0013995/\u0001 \u0014;8@7\u0001&73?/;<3=B Croteam \u0015B+7\u0001(8;5.<\u0001 .3<-;//=\u0001 \u001b7.><=;3+5\u0001 312=\u0001\u0002\u0001 +13- 3)\u0014%\u0006-86 +<<+-2></==<\u0001\u001b7<=3=>=/\u0001 80\u0001%/-278581B 3-;8<80=\u0001#/</+;-2 87853=2\u0001\";8.>-=387< /@\u0001*8;4\u0001&73?/;<3=BNVIDIA \"3;+72+\u0001\u0014B=/<\u0001 \"3A+;\u0001\u0013736+=387\u0001$=>.38< $3/6/7<\u0001 /.3-+5\u0001$85>=387< $80=36+1/\u0001\u00158\u0006 $80=5+,\u0005 $ \u0001 $87B\u0001\"3-=>;/<\u0001\u001b6+1/@8;4< $=+708;.\u0001&73?/;<3=B\u0001 &\u0015\u0001\u0016+?3<\u0001 & \u0015\u0005\u00152+9/5\u0001\u001a355 &73?/;<3=B\u000180\u0001&=+2 &73?/;<3=B\u000180\u0001(+=/;588 \u0015! %#\u001b\u0014&%!#$\u0001\u0013#\u0017\u0001\u0018#! \u0001%\u001a\u0017\u0001\u0018! !(\u001b \u0019\u0001 \u0015!#\"!#\u0013%\u001b! $\u0001\u0013 \u0016\u0001& \u001b'\u0017#$\u001b%\u001b\u0017$\u0012GPU Gems, GPU Gems 2, and GPU Gems 3 +;/\u0001-86935+=387<\u000180\u0001 -87=;3,>=/.\u0001-2+9=/;<\u0001-8?/;371\u00019;+-=3-+5\u0001;/+5\u0005=36/\u00011;+923-<\u0001 =/-273:>/<\u0001+;3<371\u00010;86\u0001=2/\u0001;/</+;-2\u0001+7.\u00019;+-=3-/\u000180\u0001->==371\u0005 /.1/\u0001./?/589/;<\u0006\u0001%2/B\u000108-><\u000187\u0001=2/\u00019;81;+66+,5/\u00011;+923-<\u0001 939/537/\u0001+?+35+,5/\u000137\u0001=8.+B\u0003<\u0001\u0019\"&<\u0001+7.\u000123125312=\u0001:>3-4\u0005+7.\u0005.3;=B\u0001 =;3-4<\u0001></.\u0001,B\u00015/+.371\u0001./?/589/;<\u0004\u0001+<\u0001@/55\u0001+<\u00010>7.+6/7=+5\u0004\u0001 9/;08;6+7-/\u0005-87<-38><\u0001=/-273:>/<\u000108;\u0001-;/+=371\u0001+.?+7-/.\u0001?3<>+5\u0001 /00/-=<\u0006\u0001GPU Gems, GPU Gems 2, and GPU Gems 3 together 9;8?3./\u0001+\u0001-869;/2/7<3?/\u00011>3./\u0001=8\u0001=+4371\u0001+.?+7=+1/\u000180\u0001=2/\u0001 98@/;\u000180\u0001=2/\u00017/@\u00011/7/;+=387\u000180\u0001\u0019\"&<\u0006 \u0013 $!\u0001!\u0018\u0001\u001b %\u0017#\u0017$% The Cg Tutorial by Randima Fernando +7.\u0001 +;4\u0001 \u0006\u0001 351+;. ISBN-13: 978-0-321-19496-1WINNER OF THE 2004 Front Line Award for Best Book from Game Developer Magazine \u00188;\u0001+..3=387+5\u00013708;6+=387\u0012\u0001 3708;63=\u0006-86\u0007+@\u0001\u0001C\u0001\u0001./?/589/;\u00067?3.3+\u0006-86ALSO AVAILABLE: GPU GEMS \u0013 !#\u0001%!\"\u001b\u0015$\u0001\u0015!'\u0017#\u0017\u0016\u0001\u001b \u0015 &\u0016\u0017\u0012 A b a I Sanders_BoBad.indd 1 5/11/10 12:01 PM Download from www.wowebook.com"
]